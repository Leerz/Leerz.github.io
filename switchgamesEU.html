<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PremazingPH Games</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      overflow: hidden;
    }
    iframe {
      width: 100vw; height: 100vh;
      border: none;
      display: block;
    }
  </style>
</head>
<body>
  <iframe id="viewer"></iframe>
  <script>
    const base64html = `PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPgo8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx2aWV3cG9ydC1maXQ9Y292ZXIiIC8+Cjx0aXRsZSBpZD0icGFnZVRpdGxlIj5HYW1lIFNlbGVjdG9yPC90aXRsZT4KPHN0eWxlPgo6cm9vdHsKICAtLWJnOiMwYTBlMWE7CiAgLS1iZy1zZWNvbmRhcnk6IzExMTgyNzsKICAtLXBhbmVsOiMxZTI5M2I7CiAgLS1wYW5lbC1ob3ZlcjojMjczNDQ5OwogIC0tY2FyZDojMWUyOTNiOwogIC0tY2FyZC1zZWxlY3RlZDojMWUzYTVmOwogIC0tYm9yZGVyOiMzMzQxNTU7CiAgLS10ZXh0OiNmMWY1Zjk7CiAgLS10ZXh0LXNlY29uZGFyeTojOTRhM2I4OwogIC0tbXV0ZWQ6IzY0NzQ4YjsKICAtLXByaW1hcnk6IzNiODJmNjsKICAtLXByaW1hcnktaG92ZXI6IzI1NjNlYjsKICAtLWFjY2VudDojZjU5ZTBiOwogIC0tc3VjY2VzczojMjJjNTVlOwogIC0tZGFuZ2VyOiNlZjQ0NDQ7CiAgLS1yYWRpdXM6MTJweDsKICAtLXJhZGl1cy1sZzoxNnB4OwogIC0taGVhZGVyLWJnOmxpbmVhci1ncmFkaWVudCgxODBkZWcsIzNiODJmNiAwJSwjMjU2M2ViIDEwMCUpOwp9Ci8qIE5pbnRlbmRvIFRoZW1lIC0gSG9sZCBYIGJ1dHRvbiAyLjUgc2Vjb25kcyB0byBhY3RpdmF0ZSAqLwo6cm9vdFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdewogIC0tYmc6IzJkMmQyZCAhaW1wb3J0YW50OwogIC0tYmctc2Vjb25kYXJ5OiMzNjM2MzYgIWltcG9ydGFudDsKICAtLXBhbmVsOiM0MjQyNDIgIWltcG9ydGFudDsKICAtLXBhbmVsLWhvdmVyOiM0ZjRmNGYgIWltcG9ydGFudDsKICAtLWNhcmQ6IzQyNDI0MiAhaW1wb3J0YW50OwogIC0tY2FyZC1zZWxlY3RlZDojNWEyMDIwICFpbXBvcnRhbnQ7CiAgLS1ib3JkZXI6IzU1NTU1NSAhaW1wb3J0YW50OwogIC0tdGV4dDojZmZmZmZmICFpbXBvcnRhbnQ7CiAgLS10ZXh0LXNlY29uZGFyeTojY2NjY2NjICFpbXBvcnRhbnQ7CiAgLS1tdXRlZDojOTk5OTk5ICFpbXBvcnRhbnQ7CiAgLS1wcmltYXJ5OiNlNjAwMTIgIWltcG9ydGFudDsKICAtLXByaW1hcnktaG92ZXI6I2ZmMWExYSAhaW1wb3J0YW50OwogIC0tYWNjZW50OiNlNjAwMTIgIWltcG9ydGFudDsKICAtLXN1Y2Nlc3M6IzIyYzU1ZSAhaW1wb3J0YW50OwogIC0tZGFuZ2VyOiNlNjAwMTIgIWltcG9ydGFudDsKICAtLWhlYWRlci1iZzpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCNlNjAwMTIgMCUsI2I4MDAwZiAxMDAlKSAhaW1wb3J0YW50Owp9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSBib2R5e2JhY2tncm91bmQ6I2ZmZmZmZiAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmNvbnRhaW5lcntiYWNrZ3JvdW5kOiNmNWY1ZjUgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5sZWZ0UGFuZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnJpZ2h0UGFuZXtiYWNrZ3JvdW5kOiNlOGU4ZTggIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmxlZnRQYW5lLWlubmVye2JhY2tncm91bmQ6dHJhbnNwYXJlbnQgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVte2JhY2tncm91bmQ6I2ZmZiAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuaXRlbTpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjAgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLnNlbGVjdGVke2JhY2tncm91bmQ6I2ZmZTVlNSAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZTYwMDEyICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuaXRlbS10aXRsZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0YXQtdmFsdWUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLXRpdGxle2NvbG9yOiMxMTEgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLXNpemUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLW1ldGEsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdGF0LWxhYmVsLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS1zaXplLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS1tZXRhLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS12ZXJzaW9ue2NvbG9yOiM0NDQgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5sZWdlbmQtaXRlbSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0YXQtbm90ZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmNvbnRyb2xzIGxhYmVse2NvbG9yOiM1NTUgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVte2JhY2tncm91bmQ6I2Y1ZjVmNSAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS10aHVtYntiYWNrZ3JvdW5kOiNlMGUwZTAgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLWFjdGlvbnMgLnVwLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIC5kb3due2JhY2tncm91bmQ6I2UwZTBlMCAhaW1wb3J0YW50O2NvbG9yOiMzMzMgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLWFjdGlvbnMgLnJlbW92ZXtiYWNrZ3JvdW5kOiNmZmU1ZTUgIWltcG9ydGFudDtjb2xvcjojZTYwMDEyICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2VucmUtZmlsdGVyLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZmlsdGVyLXRhYnN7YmFja2dyb3VuZDojZThlOGU4ICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZmlsdGVyLXRhYntib3JkZXItY29sb3I6I2JiYiAhaW1wb3J0YW50O2NvbG9yOiMwMDAgIWltcG9ydGFudDtiYWNrZ3JvdW5kOiNmZmYgIWltcG9ydGFudDtmb250LXdlaWdodDo2MDAgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5maWx0ZXItdGFiOmhvdmVye2JhY2tncm91bmQ6I2YwZjBmMCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmZpbHRlci10YWIuYWN0aXZle2JhY2tncm91bmQ6I2U2MDAxMiAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZTYwMDEyICFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmdlbnJlLWNoaXB7Ym9yZGVyLWNvbG9yOiNiYmIgIWltcG9ydGFudDtjb2xvcjojMDAwICFpbXBvcnRhbnQ7YmFja2dyb3VuZDojZmZmICFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6NjAwICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2VucmUtY2hpcDpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjAgIWltcG9ydGFudDtjb2xvcjojMDAwICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2VucmUtY2hpcC5hY3RpdmV7YmFja2dyb3VuZDojZTYwMDEyICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNlNjAwMTIgIWltcG9ydGFudDtjb2xvcjojZmZmICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RvcmFnZS1jYXJkLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RhdC1jYXJkLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtcGFuZWx7YmFja2dyb3VuZDojZmZmICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNkZGQgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jb250cm9scyBpbnB1dCxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmNvbnRyb2xzIHNlbGVjdHtiYWNrZ3JvdW5kOiNmZmYgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyAhaW1wb3J0YW50O2NvbG9yOiMzMzMgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdG9yYWdlLXRpdGxlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RvcmFnZS1jYXBhY2l0eXtjb2xvcjojMzMzICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtcGFuZWwgLmhlYWR7Y29sb3I6IzMzMyAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY3RhLWJ1dHRvbntiYWNrZ3JvdW5kOiNlNjAwMTIgIWltcG9ydGFudDtib3gtc2hhZG93OjAgNHB4IDIwcHggcmdiYSgyMzAsMCwxOCwwLjQpICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY3RhLXNob3d7YmFja2dyb3VuZDojZmZmICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNjY2MgIWltcG9ydGFudDtjb2xvcjojMzMzICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuYnRue2JhY2tncm91bmQ6I2U4ZThlOCAhaW1wb3J0YW50O2NvbG9yOiMzMzMgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmJ0bi1wcmltYXJ5e2JhY2tncm91bmQ6I2U2MDAxMiAhaW1wb3J0YW50O2NvbG9yOiNmZmYgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2U2MDAxMiAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmJ0bi5naG9zdHtiYWNrZ3JvdW5kOiNmZmYgIWltcG9ydGFudDtjb2xvcjojMzMzICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNjY2MgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5idG4uZGFuZ2Vye2JhY2tncm91bmQ6I2U2MDAxMiAhaW1wb3J0YW50O2NvbG9yOiNmZmYgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5wcm9ncmVzcy11c2Vke2JhY2tncm91bmQ6Izk5OSAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnByb2dyZXNzLXNlbGVjdGVke2JhY2tncm91bmQ6I2U2MDAxMiAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0b3JhZ2UtcHJvZ3Jlc3N7YmFja2dyb3VuZDojZGRkICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZmlsZW5hbWUtcHJldmlld3tiYWNrZ3JvdW5kOiNmNWY1ZjUgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyAhaW1wb3J0YW50O2NvbG9yOiMzMzMgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5vdmVybGF5e2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjk1KSAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLm92ZXJsYXkgLmhlYWR7YmFja2dyb3VuZDojZTYwMDEyICFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLm92ZXJsYXkgLmJvZHl7YmFja2dyb3VuZDojZjVmNWY1ICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAub3ZlcmxheSAucm93e2JhY2tncm91bmQ6I2ZmZiAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkICFpbXBvcnRhbnQ7Y29sb3I6IzMzMyAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLm92ZXJsYXkgLnJvdy1pbmZvIHN0cm9uZ3tjb2xvcjojMTExICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAub3ZlcmxheSBidXR0b24uaWNvbntjb2xvcjojMzMzICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAjZ2FtZUluZm9Nb2RhbHtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC45OCkgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nYW1lLWluZm8taGVhZGVye2JvcmRlci1jb2xvcjojZGRkICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2FtZS1pbmZvLXRpdGxle2NvbG9yOiMxMTEgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nYW1lLWluZm8tcHVibGlzaGVye2NvbG9yOiM2NjYgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nYW1lLWluZm8tc2VjdGlvbntiYWNrZ3JvdW5kOiNmZmYgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2RkZCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmdhbWUtaW5mby1zZWN0aW9uIGg0e2NvbG9yOiMzMzMgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nYW1lLWluZm8tZGVzY3JpcHRpb257Y29sb3I6IzQ0NCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmdhbWUtaW5mby1tZXRhIHNwYW57Y29sb3I6IzMzMyAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmdhbWUtaW5mby1tZXRhIGxhYmVse2NvbG9yOiM2NjYgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zaGFyZS1yb3cgaW5wdXR7YmFja2dyb3VuZDojZmZmICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNjY2MgIWltcG9ydGFudDtjb2xvcjojMzMzICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuYWN0aW9uLXJvdyAuYnRue2JhY2tncm91bmQ6I2ZmZiAhaW1wb3J0YW50O2NvbG9yOiMzMzMgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0YXQtY2FyZC5oaWdobGlnaHR7YmFja2dyb3VuZDojZmZlNWU1ICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNlNjAwMTIgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdGF0LWNhcmQuaGlnaGxpZ2h0IC5zdGF0LXZhbHVle2NvbG9yOiNlNjAwMTIgIWltcG9ydGFudH0KLyogVGhlbWUgaGludCByaW5nIGFuaW1hdGlvbiBvbiBYIGJ1dHRvbiAqLwojY2xlYXJTZWFyY2h7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6dmlzaWJsZX0KI2NsZWFyU2VhcmNoOjphZnRlcntjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO2luc2V0Oi0zcHg7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyOjJweCBkYXNoZWQgcmdiYSgyMzAsMCwxOCwwLjQpO29wYWNpdHk6MDthbmltYXRpb246dGhlbWVIaW50IDNzIGVhc2UtaW4tb3V0IGluZmluaXRlO3BvaW50ZXItZXZlbnRzOm5vbmV9CkBrZXlmcmFtZXMgdGhlbWVIaW50ezAlLDEwMCV7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZSgwLjgpfTUwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlKDEuMSl9fQojY2xlYXJTZWFyY2guaG9sZGluZzo6YWZ0ZXJ7b3BhY2l0eToxO2FuaW1hdGlvbjpub25lO2JvcmRlci1jb2xvcjojZTYwMDEyO2JvcmRlci1zdHlsZTpzb2xpZH0KLyogU3RhdHVzIGljb24gc3RhdGVzICovCiNjbGVhclNlYXJjaCBzdmd7ZGlzcGxheTpub25lfQojY2xlYXJTZWFyY2ggLmljb24teHtkaXNwbGF5OmJsb2NrfQojY2xlYXJTZWFyY2ggLmljb24tc3Bpbm5lcnthbmltYXRpb246c3BpbiAxcyBsaW5lYXIgaW5maW5pdGV9CkBrZXlmcmFtZXMgc3Bpbntmcm9te3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9dG97dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX0KI2NsZWFyU2VhcmNoLmxvYWRpbmcgc3Zne2Rpc3BsYXk6bm9uZX0KI2NsZWFyU2VhcmNoLmxvYWRpbmcgLmljb24tc3Bpbm5lcntkaXNwbGF5OmJsb2NrfQojY2xlYXJTZWFyY2guc3VjY2VzcyBzdmd7ZGlzcGxheTpub25lfQojY2xlYXJTZWFyY2guc3VjY2VzcyAuaWNvbi1jaGVja3tkaXNwbGF5OmJsb2NrfQojY2xlYXJTZWFyY2gud2FybiBzdmd7ZGlzcGxheTpub25lfQojY2xlYXJTZWFyY2gud2FybiAuaWNvbi13YXJue2Rpc3BsYXk6YmxvY2t9CiNjbGVhclNlYXJjaC5lcnJvciBzdmd7ZGlzcGxheTpub25lfQojY2xlYXJTZWFyY2guZXJyb3IgLmljb24tZXJyb3J7ZGlzcGxheTpibG9ja30KLyogVGhlbWUgY291bnRkb3duIHRvYXN0ICovCi50aGVtZS1jb3VudGRvd257cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuOSk7Y29sb3I6I2ZmZjtwYWRkaW5nOjIwcHggMzJweDtib3JkZXItcmFkaXVzOjE2cHg7Zm9udC1zaXplOjE4cHg7Zm9udC13ZWlnaHQ6NjAwO3otaW5kZXg6OTk5OTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O29wYWNpdHk6MDtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb246b3BhY2l0eSAwLjJzfQoudGhlbWUtY291bnRkb3duLnNob3d7b3BhY2l0eToxfQoudGhlbWUtY291bnRkb3duIC5jb3VudGRvd24tbnVte2ZvbnQtc2l6ZTo0OHB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojZTYwMDEyfQoudGhlbWUtY291bnRkb3duIC5jb3VudGRvd24tbGFiZWx7Zm9udC1zaXplOjEzcHg7Y29sb3I6Izk5OX0KKntib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50fQpodG1sLGJvZHl7aGVpZ2h0OjEwMCU7bWFyZ2luOjA7Zm9udC1mYW1pbHk6J0ludGVyJywtYXBwbGUtc3lzdGVtLEJsaW5rTWFjU3lzdGVtRm9udCwnU2Vnb2UgVUknLFJvYm90byxzYW5zLXNlcmlmO2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLXRleHQpfQoKLyogSGVhZGVyICovCi5oZWFkZXJ7cG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtsZWZ0OjA7aGVpZ2h0OjcwcHg7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXItYmcpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEycHg7cGFkZGluZzoxMnB4IDE2cHg7ei1pbmRleDo2MDtib3gtc2hhZG93OjAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpfQouaGVhZGVyIC5zZWFyY2h7ZmxleDoxO21pbi13aWR0aDoxNDBweH0KLmhlYWRlciBpbnB1dC5zZWFyY2h7aGVpZ2h0OjQycHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjpub25lO3BhZGRpbmc6MCAxNnB4O2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjE1KTtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxNXB4O2JhY2tkcm9wLWZpbHRlcjpibHVyKDEwcHgpfQouaGVhZGVyIGlucHV0LnNlYXJjaDo6cGxhY2Vob2xkZXJ7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjcpfQouaGVhZGVyIGlucHV0LnNlYXJjaDpmb2N1c3tvdXRsaW5lOm5vbmU7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMjUpO2JveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoMjU1LDI1NSwyNTUsMC4yKX0KLmhlYWRlciAuYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweDthbGlnbi1pdGVtczpjZW50ZXJ9Ci5oZWFkZXIgYnV0dG9ue2hlaWdodDo0MnB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtib3JkZXI6bm9uZTtwYWRkaW5nOjAgMTRweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4xNSk7Y29sb3I6I2ZmZjtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo1MDA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgMC4yc30KLmhlYWRlciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMjUpfQoKLyogRmlsdGVyIFRhYnMgKi8KLmZpbHRlci10YWJze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O3BhZGRpbmc6MTJweCAxNnB4O2JhY2tncm91bmQ6dmFyKC0tYmctc2Vjb25kYXJ5KTtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouZmlsdGVyLXRhYntwYWRkaW5nOjhweCAxNnB4O2JvcmRlci1yYWRpdXM6MjBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NTAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnN9Ci5maWx0ZXItdGFiOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpfQouZmlsdGVyLXRhYi5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZn0KCi8qIENvbnRhaW5lciAqLwouY29udGFpbmVye2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDQwMHB4O2dhcDoxNnB4O3BhZGRpbmc6Y2FsYyg3MHB4ICsgMTZweCkgMTZweCAxMDBweDttaW4taGVpZ2h0OjEwMHZofQoKLyogTGVmdCBQYW5lIC0gR2FtZSBMaXN0ICovCi5sZWZ0UGFuZXtiYWNrZ3JvdW5kOnZhcigtLWJnLXNlY29uZGFyeSk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtbGcpO3BhZGRpbmc6MDtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQoubGVmdFBhbmUtaW5uZXJ7cGFkZGluZzoxMnB4O292ZXJmbG93LXk6YXV0bzttYXgtaGVpZ2h0OmNhbGMoMTAwdmggLSAyMDBweCl9CgovKiBHYW1lIEl0ZW0gQ2FyZCAqLwouaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O3BhZGRpbmc6MTJweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWJvdHRvbToxMHB4O3RyYW5zaXRpb246YWxsIDAuMnN9Ci5pdGVtOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpO2JvcmRlci1jb2xvcjojNDc1NTY5O3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xcHgpfQouaXRlbS5zZWxlY3RlZHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQtc2VsZWN0ZWQpO2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KX0KLml0ZW0uc2VsZWN0ZWQgLml0ZW0tY2hlY2tib3h7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5pdGVtLnNlbGVjdGVkIC5pdGVtLWNoZWNrYm94OjphZnRlcntjb250ZW50OifinJMnO2NvbG9yOiNmZmY7Zm9udC1zaXplOjEycHg7Zm9udC13ZWlnaHQ6Ym9sZH0KCi8qIEdhbWUgVGh1bWJuYWlsICovCi5pdGVtLXRodW1ie3dpZHRoOjU2cHg7aGVpZ2h0OjU2cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCMzNzQxNTEgMCUsIzFmMjkzNyAxMDAlKTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7ZmxleC1zaHJpbms6MDtvdmVyZmxvdzpoaWRkZW47cG9zaXRpb246cmVsYXRpdmV9Ci5pdGVtLXRodW1iIGltZ3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXJ9Ci5pdGVtLXRodW1iLXBsYWNlaG9sZGVye2ZvbnQtc2l6ZToyMHB4O2NvbG9yOnZhcigtLW11dGVkKX0KCi8qIEZvcm1hdCBCYWRnZSAqLwouZm9ybWF0LWJhZGdle3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTo0cHg7bGVmdDo0cHg7cGFkZGluZzoycHggNnB4O2JvcmRlci1yYWRpdXM6NHB4O2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6NzAwO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzowLjVweH0KLmZvcm1hdC1iYWRnZS5uc3B7YmFja2dyb3VuZDojMjJjNTVlO2NvbG9yOiNmZmZ9Ci5mb3JtYXQtYmFkZ2UubnN6e2JhY2tncm91bmQ6IzNiODJmNjtjb2xvcjojZmZmfQouZm9ybWF0LWJhZGdlLnhjaXtiYWNrZ3JvdW5kOiNhODU1Zjc7Y29sb3I6I2ZmZn0KCi8qIEl0ZW0gQ29udGVudCAqLwouaXRlbS1jb250ZW50e2ZsZXg6MTttaW4td2lkdGg6MH0KLml0ZW0tdGl0bGV7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO21hcmdpbi1ib3R0b206NHB4O3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLml0ZW0tc2l6ZXtmb250LXNpemU6MTNweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9Ci5pdGVtLW1ldGF7Zm9udC1zaXplOjExcHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi10b3A6MnB4fQoKLyogQ2lyY3VsYXIgQ2hlY2tib3ggKi8KLml0ZW0tY2hlY2tib3h7d2lkdGg6MjZweDtoZWlnaHQ6MjZweDtib3JkZXItcmFkaXVzOjUwJTtib3JkZXI6MnB4IHNvbGlkIHZhcigtLWJvcmRlcik7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ZsZXgtc2hyaW5rOjA7dHJhbnNpdGlvbjphbGwgMC4yc30KCi8qIFJpZ2h0IFBhbmUgKi8KLnJpZ2h0UGFuZXtiYWNrZ3JvdW5kOnZhcigtLWJnLXNlY29uZGFyeSk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtbGcpO3BhZGRpbmc6MTZweDtvdmVyZmxvdy15OmF1dG87Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE2cHh9CgovKiBTdG9yYWdlIENhcmQgKi8KLnN0b3JhZ2UtY2FyZHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtwYWRkaW5nOjE2cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouc3RvcmFnZS1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjEycHh9Ci5zdG9yYWdlLXRpdGxle2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y29sb3I6dmFyKC0tdGV4dCl9Ci5zdG9yYWdlLXRpdGxlIHN2Z3t3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2NvbG9yOnZhcigtLXByaW1hcnkpfQouc3RvcmFnZS1jYXBhY2l0eXtmb250LXNpemU6MTNweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9CgovKiBQcm9ncmVzcyBCYXIgKi8KLnN0b3JhZ2UtcHJvZ3Jlc3N7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Ym9yZGVyLXJhZGl1czo1cHg7b3ZlcmZsb3c6aGlkZGVuO2Rpc3BsYXk6ZmxleH0KLnByb2dyZXNzLXVzZWR7YmFja2dyb3VuZDojNDc1NTY5O3RyYW5zaXRpb246d2lkdGggMC4zc30KLnByb2dyZXNzLXNlbGVjdGVke2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7dHJhbnNpdGlvbjp3aWR0aCAwLjNzfQoucHJvZ3Jlc3MtZnJlZXtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50fQouc3RvcmFnZS1sZWdlbmR7ZGlzcGxheTpmbGV4O2dhcDoxNnB4O21hcmdpbi10b3A6MTBweDtmb250LXNpemU6MTJweH0KLmxlZ2VuZC1pdGVte2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9Ci5sZWdlbmQtZG90e3dpZHRoOjhweDtoZWlnaHQ6OHB4O2JvcmRlci1yYWRpdXM6NTAlfQoubGVnZW5kLWRvdC51c2Vke2JhY2tncm91bmQ6IzQ3NTU2OX0KLmxlZ2VuZC1kb3Quc2VsZWN0ZWR7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KX0KLmxlZ2VuZC1kb3QuZnJlZXtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9CgovKiBTdGF0cyBHcmlkICovCi5zdGF0cy1ncmlke2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDMsMWZyKTtnYXA6OHB4fQouc3RhdC1jYXJke2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO3BhZGRpbmc6MTRweDt0ZXh0LWFsaWduOmNlbnRlcjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5zdGF0LWNhcmQuaGlnaGxpZ2h0e2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KTtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxODBkZWcscmdiYSg1OSwxMzAsMjQ2LDAuMSkgMCUsdmFyKC0tY2FyZCkgMTAwJSl9Ci5zdGF0LXZhbHVle2ZvbnQtc2l6ZToyMnB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KX0KLnN0YXQtY2FyZC5oaWdobGlnaHQgLnN0YXQtdmFsdWV7Y29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5zdGF0LWxhYmVse2ZvbnQtc2l6ZToxMHB4O2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi10b3A6NHB4fQouc3RhdC1ub3Rle2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLW11dGVkKTt0ZXh0LWFsaWduOmNlbnRlcjtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Z2FwOjRweH0KCi8qIENvbnRyb2xzICovCi5jb250cm9sc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjhweH0KLmNvbnRyb2xzIC5mdWxse2dyaWQtY29sdW1uOjEgLyAtMX0KLmNvbnRyb2xzIGlucHV0LC5jb250cm9scyBzZWxlY3R7aGVpZ2h0OjQ0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwYWRkaW5nOjAgMTJweDtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjEwMCV9Ci5jb250cm9scyBpbnB1dDpmb2N1cywuY29udHJvbHMgc2VsZWN0OmZvY3Vze291dGxpbmU6bm9uZTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSk7Ym94LXNoYWRvdzowIDAgMCAzcHggcmdiYSg1OSwxMzAsMjQ2LDAuMil9Ci5jb250cm9scyBzZWxlY3R7Y3Vyc29yOnBvaW50ZXI7YXBwZWFyYW5jZTpub25lO2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzEyJyBoZWlnaHQ9JzEyJyB2aWV3Qm94PScwIDAgMTIgMTInJTNFJTNDcGF0aCBmaWxsPSclMjM5NGEzYjgnIGQ9J002IDhMMSAzaDEweicvJTNFJTNDL3N2ZyUzRSIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOnJpZ2h0IDEycHggY2VudGVyO3BhZGRpbmctcmlnaHQ6MzZweH0KLmNvbnRyb2xzIGxhYmVse2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrfQoKLyogRHluYW1pYyBDb250cm9scyBHcmlkICovCiNkeW5hbWljQ29udHJvbHN7ZGlzcGxheTpjb250ZW50c30KI2R5bmFtaWNDb250cm9scyA+IGRpdntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufQoKLmZpbGVuYW1lLXByZXZpZXd7Z3JpZC1jb2x1bW46MSAvIC0xO3BhZGRpbmc6MTBweCAxMnB4O2JhY2tncm91bmQ6dmFyKC0tYmcpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Zm9udC1mYW1pbHk6J1NGIE1vbm8nLE1vbmFjbyxtb25vc3BhY2U7Zm9udC1zaXplOjEycHg7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO292ZXJmbG93LXg6YXV0bzt3aGl0ZS1zcGFjZTpub3dyYXB9CgovKiBCdXR0b25zICovCi5idG57cGFkZGluZzoxMHB4IDE2cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Z2FwOjZweH0KLmJ0bi1wcmltYXJ5e2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZn0KLmJ0bi1wcmltYXJ5OmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeS1ob3Zlcik7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCl9Ci5idG4uZ2hvc3R7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouYnRuLmdob3N0OmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpO2JvcmRlci1jb2xvcjojNDc1NTY5fQouYnRuLmRhbmdlcntiYWNrZ3JvdW5kOnZhcigtLWRhbmdlcik7Y29sb3I6I2ZmZn0KLmJ0bi5kYW5nZXI6aG92ZXJ7YmFja2dyb3VuZDojZGMyNjI2fQoKLyogQWN0aW9uIEJ1dHRvbnMgUm93ICovCi5hY3Rpb24tcm93e2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2ZsZXgtd3JhcDp3cmFwfQouYWN0aW9uLXJvdyAuYnRue2ZsZXg6MTttaW4td2lkdGg6Zml0LWNvbnRlbnR9CgovKiBTaGFyZSBJbnB1dCAqLwouc2hhcmUtcm93e2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlcn0KLnNoYXJlLXJvdyBpbnB1dHtmbGV4OjE7aGVpZ2h0OjQ0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwYWRkaW5nOjAgMTJweDtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtc2l6ZToxM3B4fQoKLyogU2VsZWN0ZWQgUGFuZWwgKi8KLnNlbGVjdGVkLXBhbmVse2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtmbGV4OjE7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtvdmVyZmxvdzpoaWRkZW47bWluLWhlaWdodDoyMDBweH0KLnNlbGVjdGVkLXBhbmVsIC5oZWFke3BhZGRpbmc6MTJweCAxNnB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLXRleHQpO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXJ9Ci5zZWxlY3RlZC1wYW5lbCAuYm9keXtmbGV4OjE7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6OHB4fQoKLyogU2VsZWN0ZWQgSXRlbSAqLwouc2VsZWN0ZWQtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7bWFyZ2luLWJvdHRvbTo4cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouc2VsZWN0ZWQtaXRlbS10aHVtYnt3aWR0aDo0NHB4O2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmbGV4LXNocmluazowfQouc2VsZWN0ZWQtaXRlbS1jb250ZW50e2ZsZXg6MTttaW4td2lkdGg6MH0KLnNlbGVjdGVkLWl0ZW0tdGl0bGV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLnNlbGVjdGVkLWl0ZW0tbWV0YXtmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1tdXRlZCk7ZGlzcGxheTpmbGV4O2dhcDo4cHg7YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbi10b3A6MnB4fQouc2VsZWN0ZWQtaXRlbS12ZXJzaW9ue3BhZGRpbmc6MnB4IDZweDtiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXItcmFkaXVzOjRweDtmb250LXNpemU6MTBweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9Ci5zZWxlY3RlZC1pdGVtLXNpemV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO3doaXRlLXNwYWNlOm5vd3JhcH0KLnNlbGVjdGVkLWl0ZW0tY2hlY2t7Y29sb3I6dmFyKC0tc3VjY2Vzcyk7Zm9udC1zaXplOjE2cHh9Ci5zZWxlY3RlZC1pdGVtLWFjdGlvbnN7ZGlzcGxheTpmbGV4O2dhcDo0cHh9Ci5zZWxlY3RlZC1pdGVtLWFjdGlvbnMgYnV0dG9ue3dpZHRoOjI4cHg7aGVpZ2h0OjI4cHg7Ym9yZGVyLXJhZGl1czo2cHg7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEycHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIC51cCwuc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIC5kb3due2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpfQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIC5yZW1vdmV7YmFja2dyb3VuZDpyZ2JhKDIzOSw2OCw2OCwwLjIpO2NvbG9yOnZhcigtLWRhbmdlcil9CgovKiBCb3R0b20gQ1RBICovCi5ib3R0b20tY3Rhe3Bvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO3BhZGRpbmc6MTJweCAxNnB4O3BhZGRpbmctYm90dG9tOmNhbGMoMTJweCArIGVudihzYWZlLWFyZWEtaW5zZXQtYm90dG9tLDBweCkpO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZyx0cmFuc3BhcmVudCAwJSx2YXIoLS1iZykgMzAlKTt6LWluZGV4OjUwO3BvaW50ZXItZXZlbnRzOm5vbmV9Ci5ib3R0b20tY3RhLWlubmVye2Rpc3BsYXk6ZmxleDtnYXA6MTBweDttYXgtd2lkdGg6NTAwcHg7bWFyZ2luOjAgYXV0bztwb2ludGVyLWV2ZW50czphdXRvfQouY3RhLWJ1dHRvbntmbGV4OjE7ZGlzcGxheTpmbGV4O2hlaWdodDo1MHB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmY7Ym9yZGVyOm5vbmU7Zm9udC1zaXplOjE1cHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2dhcDo2cHg7dHJhbnNpdGlvbjphbGwgMC4ycztib3gtc2hhZG93OjAgNHB4IDIwcHggcmdiYSg1OSwxMzAsMjQ2LDAuNCl9Ci5jdGEtYnV0dG9uOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeS1ob3Zlcik7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTJweCk7Ym94LXNoYWRvdzowIDZweCAyNXB4IHJnYmEoNTksMTMwLDI0NiwwLjUpfQouY3RhLWJ1dHRvbjphY3RpdmV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9Ci5jdGEtYnV0dG9uIHN2Z3t3aWR0aDoxOHB4O2hlaWdodDoxOHB4fQouY3RhLWJ1dHRvbi5kaXNhYmxlZHtvcGFjaXR5OjAuNTtjdXJzb3I6bm90LWFsbG93ZWQ7cG9pbnRlci1ldmVudHM6bm9uZX0KLmN0YS1zaG93e3dpZHRoOjUwcHg7ZmxleC1zaHJpbms6MDtkaXNwbGF5OmZsZXg7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dHJhbnNpdGlvbjphbGwgMC4ycztwb3NpdGlvbjpyZWxhdGl2ZX0KLmN0YS1zaG93OmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpO2JvcmRlci1jb2xvcjojNDc1NTY5fQouY3RhLXNob3cgLmJhZGdle3Bvc2l0aW9uOmFic29sdXRlO3RvcDotNnB4O3JpZ2h0Oi02cHg7bWluLXdpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JhY2tncm91bmQ6dmFyKC0tYWNjZW50KTtjb2xvcjojMDAwO2ZvbnQtc2l6ZToxMXB4O2ZvbnQtd2VpZ2h0OjcwMDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzowIDVweH0KLmN0YS1idXR0b24ud2FybmluZ3tiYWNrZ3JvdW5kOnZhcigtLWRhbmdlcik7Ym94LXNoYWRvdzowIDRweCAyMHB4IHJnYmEoMjM5LDY4LDY4LDAuNCl9Ci5jdGEtYnV0dG9uLndhcm5pbmc6aG92ZXJ7YmFja2dyb3VuZDojZGMyNjI2O2JveC1zaGFkb3c6MCA2cHggMjVweCByZ2JhKDIzOSw2OCw2OCwwLjUpfQouY3RhLWJ1dHRvbiAud2FybmluZy1pY29ue2Rpc3BsYXk6bm9uZX0KLmN0YS1idXR0b24ud2FybmluZyAud2FybmluZy1pY29ue2Rpc3BsYXk6aW5saW5lfQouY3RhLWJ1dHRvbi53YXJuaW5nIC51cGxvYWQtaWNvbntkaXNwbGF5Om5vbmV9CgovKiBBbmltYXRpb25zICovCkBrZXlmcmFtZXMgZmFkZUlue2Zyb217b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwcHgpfXRve29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19Ci5pdGVte2FuaW1hdGlvbjpmYWRlSW4gMC4ycyBlYXNlLW91dH0KLnNlbGVjdGVkLWl0ZW17YW5pbWF0aW9uOmZhZGVJbiAwLjE1cyBlYXNlLW91dH0KCi8qIFN0YXR1cyAqLwouc3RhdHVze2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKTtwYWRkaW5nOjhweCAwfQoKLyogT3ZlcmxheSAqLwoub3ZlcmxheXtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgxMCwxNCwyNiwwLjk1KTtkaXNwbGF5Om5vbmU7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3otaW5kZXg6MTUwO2JhY2tkcm9wLWZpbHRlcjpibHVyKDEwcHgpfQoub3ZlcmxheSAuaGVhZHtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoxNnB4O2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2FsaWduLWl0ZW1zOmNlbnRlcjtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQoub3ZlcmxheSAuaGVhZCBzdHJvbmd7Y29sb3I6dmFyKC0tdGV4dCl9Ci5vdmVybGF5IC5ib2R5e3BhZGRpbmc6MTZweDtvdmVyZmxvdzphdXRvO2ZsZXg6MTtwYWRkaW5nLWJvdHRvbTo4MHB4fQoub3ZlcmxheSAucm93e2Rpc3BsYXk6ZmxleDtnYXA6MTJweDthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzoxMnB4O2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO21hcmdpbi1ib3R0b206OHB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLm92ZXJsYXkgLnJvdy5oaWdobGlnaHR7YmFja2dyb3VuZDp2YXIoLS1jYXJkLXNlbGVjdGVkKTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5vdmVybGF5IC5yb3ctaW5mb3tmbGV4OjE7bWluLXdpZHRoOjB9Ci5vdmVybGF5IC5yb3ctaW5mbyBzdHJvbmd7ZGlzcGxheTpibG9jazt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXN9Ci5vdmVybGF5IC5yb3ctYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweDtmbGV4LXNocmluazowfQoub3ZlcmxheSBidXR0b24uaWNvbnt3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlci1yYWRpdXM6OHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6MTRweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9Ci5vdmVybGF5IGJ1dHRvbi51cCwub3ZlcmxheSBidXR0b24uZG93bntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLm92ZXJsYXkgYnV0dG9uLnVwOmhvdmVyLC5vdmVybGF5IGJ1dHRvbi5kb3duOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpfQoub3ZlcmxheSBidXR0b24ucmVtb3Zle2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKTtjb2xvcjojZmZmfQoub3ZlcmxheSBidXR0b24ucmVtb3ZlOmhvdmVye2JhY2tncm91bmQ6I2RjMjYyNn0KCi8qIE1vZGFsICovCiNmaWxlc01vZGFse2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtjb2xvcjp2YXIoLS10ZXh0KX0KCi5tZXRhe2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX0KLnNtYWxse2ZvbnQtc2l6ZToxM3B4O2NvbG9yOnZhcigtLW11dGVkKX0KCiN0b3RhbHMuZXhjZWVkZWR7Y29sb3I6dmFyKC0tZGFuZ2VyKTtmb250LXdlaWdodDpib2xkfQoKLyogRmlsZSBMaXN0IENvbnRhaW5lciAqLwojZmlsZUxpc3RDb250YWluZXJ7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2NvbG9yOnZhcigtLXRleHQpfQojZmlsZUxpc3RDb250YWluZXIgYXtjb2xvcjp2YXIoLS1wcmltYXJ5KX0KCi8qIE1vYmlsZSBSZXNwb25zaXZlICovCkBtZWRpYSAobWF4LXdpZHRoOjkwMHB4KXsKICAuY29udGFpbmVye2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnI7cGFkZGluZy10b3A6Y2FsYyg3MHB4ICsgOHB4KTtwYWRkaW5nLWJvdHRvbToxMDBweDtnYXA6MTJweH0KICAucmlnaHRQYW5le29yZGVyOi0xO3BhZGRpbmc6MTJweDtnYXA6MTJweH0KICAuaGVhZGVye3BhZGRpbmc6MTBweCAxMnB4fQogIC5oZWFkZXIgYnV0dG9uIHNwYW57ZGlzcGxheTpub25lfQogIC5zdGF0cy1ncmlke2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoMywxZnIpfQogIC5zdGF0LWNhcmR7cGFkZGluZzoxMHB4fQogIC5zdGF0LXZhbHVle2ZvbnQtc2l6ZToxOHB4fQogIC5zZWxlY3RlZC1wYW5lbHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH0KICAuZmlsdGVyLXRhYnN7b3ZlcmZsb3cteDphdXRvO2ZsZXgtd3JhcDpub3dyYXA7cGFkZGluZzoxMHB4IDEycHg7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9CiAgLmZpbHRlci10YWJzOjotd2Via2l0LXNjcm9sbGJhcntkaXNwbGF5Om5vbmV9CiAgLmxlZnRQYW5le2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKX0KICAubGVmdFBhbmUtaW5uZXJ7bWF4LWhlaWdodDpub25lO3BhZGRpbmc6MTBweH0KICAuc3RvcmFnZS1jYXJke3BhZGRpbmc6MTJweH0KICAuc3RvcmFnZS1sZWdlbmR7ZmxleC13cmFwOndyYXA7Z2FwOjhweH0KICAuYWN0aW9uLXJvd3tmbGV4LXdyYXA6bm93cmFwfQogIC5hY3Rpb24tcm93IC5idG57Zm9udC1zaXplOjEycHg7cGFkZGluZzo4cHggMTBweH0KICAuc2hhcmUtcm93IGlucHV0e2ZvbnQtc2l6ZToxMnB4fQogIC5ib3R0b20tY3Rhe3BhZGRpbmc6MTJweH0KICAuY3RhLWJ1dHRvbntoZWlnaHQ6NTBweDtmb250LXNpemU6MTVweH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6NjAwcHgpewogIC5oZWFkZXJ7aGVpZ2h0OjYwcHg7Z2FwOjhweH0KICAuaGVhZGVyIC5zZWFyY2h7aGVpZ2h0OjM4cHg7Zm9udC1zaXplOjE0cHh9CiAgLmhlYWRlciAuYWN0aW9uc3tnYXA6NHB4fQogIC5oZWFkZXIgYnV0dG9ue2hlaWdodDozOHB4O3BhZGRpbmc6MCAxMHB4O2ZvbnQtc2l6ZToxMnB4fQogIC5pdGVte3BhZGRpbmc6MTBweDtnYXA6MTBweH0KICAuaXRlbS10aHVtYnt3aWR0aDo0OHB4O2hlaWdodDo0OHB4fQogIC5pdGVtLXRpdGxle2ZvbnQtc2l6ZToxM3B4fQogIC5pdGVtLXNpemV7Zm9udC1zaXplOjEycHh9CiAgLml0ZW0tY2hlY2tib3h7d2lkdGg6MjJweDtoZWlnaHQ6MjJweH0KICAuZm9ybWF0LWJhZGdle2ZvbnQtc2l6ZTo4cHg7cGFkZGluZzoxcHggNHB4fQogIC5maWx0ZXItdGFie3BhZGRpbmc6NnB4IDEycHg7Zm9udC1zaXplOjEycHh9CiAgLmNvbnRhaW5lcntwYWRkaW5nLXRvcDpjYWxjKDYwcHggKyA4cHgpfQogIC5jb250cm9sc3tnYXA6NnB4fQogIC5jb250cm9scyBpbnB1dCwuY29udHJvbHMgc2VsZWN0e2hlaWdodDo0MHB4O2ZvbnQtc2l6ZToxM3B4fQogIC5zdGF0LWNhcmR7cGFkZGluZzo4cHh9CiAgLnN0YXQtdmFsdWV7Zm9udC1zaXplOjE2cHh9CiAgLnN0YXQtbGFiZWx7Zm9udC1zaXplOjlweH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6NDAwcHgpewogIC5oZWFkZXJ7cGFkZGluZzo4cHh9CiAgLmhlYWRlciBidXR0b257cGFkZGluZzowIDhweH0KICAuaXRlbS10aHVtYnt3aWR0aDo0MnB4O2hlaWdodDo0MnB4fQogIC5zdGF0cy1ncmlke2dhcDo2cHh9Cn0KCi5jb25maWctc2VjdGlvbnt0cmFuc2l0aW9uOmFsbCAwLjI1cyBlYXNlfQoubW9iaWxlLW9ubHl7ZGlzcGxheTpub25lfQpAbWVkaWEgKG1heC13aWR0aDo5MDBweCl7CiAgLm1vYmlsZS1vbmx5e2Rpc3BsYXk6YmxvY2t9CiAgLmNvbmZpZy1zZWN0aW9ue2Rpc3BsYXk6bm9uZX0KICAuY29uZmlnLXNlY3Rpb24uYWN0aXZle2Rpc3BsYXk6YmxvY2t9Cn0KCi8qIEZpbGUgYnV0dG9uIGluIGl0ZW1zICovCi5maWxlLWJ0bntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKSAhaW1wb3J0YW50O2NvbG9yOnZhcigtLXRleHQpICFpbXBvcnRhbnQ7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpICFpbXBvcnRhbnR9CgovKiBMb25nIHByZXNzIHZpc3VhbCBmZWVkYmFjayAqLwouaXRlbS5sb25nLXByZXNzLWFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpICFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDAuOTgpfQouaXRlbXt1c2VyLXNlbGVjdDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZX0KCi8qIEljb24gaW1hZ2UgaW4gdGh1bWJuYWlsICovCi5pdGVtLXRodW1iIGltZ3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo2cHh9CgovKiBHYW1lIEluZm8gTW9kYWwgKi8KI2dhbWVJbmZvTW9kYWx7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDEwLDE0LDI2LDAuOTUpO3otaW5kZXg6MjAwO292ZXJmbG93LXk6YXV0bztiYWNrZHJvcC1maWx0ZXI6Ymx1cigxMHB4KX0KLmdhbWUtaW5mb3ttYXgtd2lkdGg6NjAwcHg7bWFyZ2luOjAgYXV0bztwYWRkaW5nOjE2cHg7cGFkZGluZy1ib3R0b206MTAwcHh9Ci5nYW1lLWluZm8taGVhZGVye3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbi1ib3R0b206MTZweH0KLmdhbWUtaW5mby1iYW5uZXJ7d2lkdGg6MTAwJTtoZWlnaHQ6MjAwcHg7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCl9Ci5nYW1lLWluZm8taWNvbntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTMwcHg7bGVmdDoxNnB4O3dpZHRoOjgwcHg7aGVpZ2h0OjgwcHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjozcHggc29saWQgdmFyKC0tYmcpO2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMyl9Ci5nYW1lLWluZm8tY2xvc2V7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEycHg7cmlnaHQ6MTJweDt3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpO2JvcmRlcjpub25lO2NvbG9yOiNmZmY7Zm9udC1zaXplOjIwcHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfQouZ2FtZS1pbmZvLXRpdGxle2ZvbnQtc2l6ZToyMHB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tdG9wOjQwcHg7bWFyZ2luLWJvdHRvbTo0cHh9Ci5nYW1lLWluZm8tcHVibGlzaGVye2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjEycHh9Ci5nYW1lLWluZm8tbWV0YXtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7Z2FwOjhweDttYXJnaW4tYm90dG9tOjE2cHh9Ci5nYW1lLWluZm8tdGFne3BhZGRpbmc6NHB4IDEwcHg7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Ym9yZGVyLXJhZGl1czoyMHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5nYW1lLWluZm8tdGFnLmdlbnJle2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5nYW1lLWluZm8tc2VjdGlvbntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzoxNnB4O21hcmdpbi1ib3R0b206MTJweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5nYW1lLWluZm8tc2VjdGlvbi10aXRsZXtmb250LXNpemU6MTJweDtmb250LXdlaWdodDo2MDA7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuNXB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjhweH0KLmdhbWUtaW5mby1kZXNjcmlwdGlvbntmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoxLjY7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO3doaXRlLXNwYWNlOnByZS1saW5lfQouZ2FtZS1pbmZvLWludHJve2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tYm90dG9tOjhweDtmb250LXN0eWxlOml0YWxpY30KLmdhbWUtaW5mby1zY3JlZW5zaG90c3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgyLDFmcik7Z2FwOjhweH0KLmdhbWUtaW5mby1zY3JlZW5zaG90cyBpbWd7d2lkdGg6MTAwJTtib3JkZXItcmFkaXVzOjhweDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjJzfQouZ2FtZS1pbmZvLXNjcmVlbnNob3RzIGltZzpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4wMil9Ci5nYW1lLWluZm8tZmlsZXMtc2VjdGlvbntwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVufQouZ2FtZS1pbmZvLWZpbGVzLWJ0bnt3aWR0aDoxMDAlO3BhZGRpbmc6MTRweCAxNnB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmU7Y29sb3I6dmFyKC0tdGV4dCk7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NTAwO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59Ci5nYW1lLWluZm8tZmlsZXMtYnRuOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpfQouZ2FtZS1pbmZvLWZpbGVzLWJ0biAuY2hldnJvbnt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjJzfQouZ2FtZS1pbmZvLWZpbGVzLWJ0bi5vcGVuIC5jaGV2cm9ue3RyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKX0KLmdhbWUtaW5mby1maWxlc3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo0cHg7bWF4LWhlaWdodDoyMDBweDtvdmVyZmxvdy15OmF1dG87cGFkZGluZzowIDE2cHggMTZweH0KLmdhbWUtaW5mby1maWxle3BhZGRpbmc6OHB4IDEycHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Ym9yZGVyLXJhZGl1czo2cHg7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6J1NGIE1vbm8nLE1vbmFjbyxDb25zb2xhcyxtb25vc3BhY2U7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO3dvcmQtYnJlYWs6YnJlYWstYWxsfQouZ2FtZS1pbmZvLWFjdGlvbnN7cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7cGFkZGluZzoxNnB4O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LHZhcigtLWJnKSk7ZGlzcGxheTpmbGV4O2dhcDo4cHg7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KLmdhbWUtaW5mby1hY3Rpb25zIC5idG57bWluLXdpZHRoOjE0MHB4fQoKLyogR2VucmUgRmlsdGVyICovCi5nZW5yZS1maWx0ZXJ7ZGlzcGxheTpmbGV4O2dhcDo4cHg7cGFkZGluZzoxMnB4O2JhY2tncm91bmQ6dmFyKC0tYmctc2Vjb25kYXJ5KTtvdmVyZmxvdy14OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9Ci5nZW5yZS1maWx0ZXI6Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX0KLmdlbnJlLWNoaXB7cGFkZGluZzo2cHggMTRweDtib3JkZXItcmFkaXVzOjIwcHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjUwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO3doaXRlLXNwYWNlOm5vd3JhcDtmbGV4LXNocmluazowfQouZ2VucmUtY2hpcDpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLmdlbnJlLWNoaXAuYWN0aXZle2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmZ9Ci5nZW5yZS1maWx0ZXIgLmRpdmlkZXJ7d2lkdGg6MXB4O2JhY2tncm91bmQ6dmFyKC0tYm9yZGVyKTttYXJnaW46MCA0cHg7ZmxleC1zaHJpbms6MH0KLnNvcnQtY2hpcHtwYWRkaW5nOjZweCAxNHB4O2JvcmRlci1yYWRpdXM6MjBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWFjY2VudCk7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS1hY2NlbnQpO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjUwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO3doaXRlLXNwYWNlOm5vd3JhcDtmbGV4LXNocmluazowfQouc29ydC1jaGlwOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tYWNjZW50KTtjb2xvcjojMDAwfQouc29ydC1jaGlwLmFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7Y29sb3I6IzAwMH0KCi8qIFNjcmVlbnNob3QgZnVsbHNjcmVlbiAqLwouc2NyZWVuc2hvdC1mdWxsc2NyZWVue2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjk1KTt6LWluZGV4OjI1MDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtjdXJzb3I6cG9pbnRlcjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE2cHh9Ci5zY3JlZW5zaG90LWZ1bGxzY3JlZW4uYWN0aXZle2Rpc3BsYXk6ZmxleH0KLnNjcmVlbnNob3QtZnVsbHNjcmVlbiBpbWd7bWF4LXdpZHRoOjk1JTttYXgtaGVpZ2h0Ojg1JTtvYmplY3QtZml0OmNvbnRhaW47Ym9yZGVyLXJhZGl1czo4cHh9Ci5zY3JlZW5zaG90LWZ1bGxzY3JlZW4gLmNsb3NlLWhpbnR7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjYpO2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmc6OHB4IDE2cHg7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7Ym9yZGVyLXJhZGl1czoyMHB4fQoKLyogVG9hc3Qgbm90aWZpY2F0aW9uICovCi50b2FzdHtwb3NpdGlvbjpmaXhlZDt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKSBzY2FsZSgwLjgpO2JhY2tncm91bmQ6dmFyKC0tc3VjY2Vzcyk7Y29sb3I6I2ZmZjtwYWRkaW5nOjI0cHggNDhweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7Zm9udC1zaXplOjIwcHg7Zm9udC13ZWlnaHQ6NjAwO3otaW5kZXg6MzAwO29wYWNpdHk6MDt0cmFuc2l0aW9uOmFsbCAwLjNzO3BvaW50ZXItZXZlbnRzOm5vbmU7Ym94LXNoYWRvdzowIDEwcHggNDBweCByZ2JhKDAsMCwwLDAuNCl9Ci50b2FzdC5zaG93e29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSkgc2NhbGUoMSl9CgovKiBMZWdhY3kgbW9kZSBmYWxsYmFja3MgZm9yIG9sZGVyIGJyb3dzZXJzICovCi5sZWdhY3ktbW9kZSAub3ZlcmxheXt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDtiYWNrZ3JvdW5kOnJnYmEoMTAsMTQsMjYsMC45OCk7LXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6bm9uZTtiYWNrZHJvcC1maWx0ZXI6bm9uZX0KLmxlZ2FjeS1tb2RlICNnYW1lSW5mb01vZGFse3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO2JhY2tncm91bmQ6cmdiYSgxMCwxNCwyNiwwLjk4KTstd2Via2l0LWJhY2tkcm9wLWZpbHRlcjpub25lO2JhY2tkcm9wLWZpbHRlcjpub25lfQoubGVnYWN5LW1vZGUgLnNjcmVlbnNob3QtZnVsbHNjcmVlbnt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MH0KLmxlZ2FjeS1tb2RlICNjbGVhclNlYXJjaDo6YWZ0ZXJ7dG9wOi0zcHg7cmlnaHQ6LTNweDtib3R0b206LTNweDtsZWZ0Oi0zcHh9Ci5sZWdhY3ktbW9kZSAuaGVhZGVyIGlucHV0LnNlYXJjaHstd2Via2l0LWJhY2tkcm9wLWZpbHRlcjpub25lO2JhY2tkcm9wLWZpbHRlcjpub25lO2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjIpfQoubGVnYWN5LW1vZGUgLmhlYWRlcntnYXA6MH0ubGVnYWN5LW1vZGUgLmhlYWRlcj4qe21hcmdpbi1yaWdodDoxMnB4fS5sZWdhY3ktbW9kZSAuaGVhZGVyPio6bGFzdC1jaGlsZHttYXJnaW4tcmlnaHQ6MH0KLmxlZ2FjeS1tb2RlIC5oZWFkZXIgLmFjdGlvbnN7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5oZWFkZXIgLmFjdGlvbnM+KnttYXJnaW4tcmlnaHQ6NnB4fS5sZWdhY3ktbW9kZSAuaGVhZGVyIC5hY3Rpb25zPio6bGFzdC1jaGlsZHttYXJnaW4tcmlnaHQ6MH0KLmxlZ2FjeS1tb2RlIC5jb250YWluZXJ7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5sZWZ0UGFuZXttYXJnaW4tcmlnaHQ6MTZweH0KLmxlZ2FjeS1tb2RlIC5yaWdodFBhbmV7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5yaWdodFBhbmU+KnttYXJnaW4tYm90dG9tOjE2cHh9LmxlZ2FjeS1tb2RlIC5yaWdodFBhbmU+KjpsYXN0LWNoaWxke21hcmdpbi1ib3R0b206MH0KLmxlZ2FjeS1tb2RlIC5pdGVte2dhcDowfS5sZWdhY3ktbW9kZSAuaXRlbT4qe21hcmdpbi1yaWdodDoxMnB4fS5sZWdhY3ktbW9kZSAuaXRlbT4qOmxhc3QtY2hpbGR7bWFyZ2luLXJpZ2h0OjB9Ci5sZWdhY3ktbW9kZSAuaXRlbS1pY29ue2Rpc3BsYXk6bm9uZX0KLmxlZ2FjeS1tb2RlIC5jb250cm9sc3tnYXA6MH0ubGVnYWN5LW1vZGUgLmNvbnRyb2xzPip7bWFyZ2luLWJvdHRvbTo4cHh9Ci5sZWdhY3ktbW9kZSAuc3RhdHMtZ3JpZHtnYXA6MH0ubGVnYWN5LW1vZGUgLnN0YXRzLWdyaWQ+KnttYXJnaW4tcmlnaHQ6OHB4O21hcmdpbi1ib3R0b206OHB4fQoubGVnYWN5LW1vZGUgLmFjdGlvbi1yb3d7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5hY3Rpb24tcm93Pip7bWFyZ2luLXJpZ2h0OjhweDttYXJnaW4tYm90dG9tOjhweH0KLmxlZ2FjeS1tb2RlIC5zaGFyZS1yb3d7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5zaGFyZS1yb3c+KnttYXJnaW4tcmlnaHQ6OHB4fQoubGVnYWN5LW1vZGUgLmJvdHRvbS1jdGF7cG9zaXRpb246Zml4ZWQ7dG9wOjcwcHg7Ym90dG9tOmF1dG87bGVmdDowO3JpZ2h0OjA7YmFja2dyb3VuZDp2YXIoLS1iZy1zZWNvbmRhcnkpO3BhZGRpbmc6OHB4IDE2cHg7cG9pbnRlci1ldmVudHM6YXV0bztib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO3otaW5kZXg6NTV9Ci5sZWdhY3ktbW9kZSAuYm90dG9tLWN0YS1pbm5lcnttYXgtd2lkdGg6MTAwJTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfQoubGVnYWN5LW1vZGUgLmNvbnRhaW5lcntwYWRkaW5nLXRvcDpjYWxjKDcwcHggKyA3MHB4ICsgMTZweCl9Ci5sZWdhY3ktbW9kZSAuYm90dG9tLWN0YS1pbm5lcntnYXA6MH0ubGVnYWN5LW1vZGUgLmJvdHRvbS1jdGEtaW5uZXI+KnttYXJnaW4tcmlnaHQ6MTBweH0ubGVnYWN5LW1vZGUgLmJvdHRvbS1jdGEtaW5uZXI+KjpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfQoubGVnYWN5LW1vZGUgLmN0YS1idXR0b257Z2FwOjB9LmxlZ2FjeS1tb2RlIC5jdGEtYnV0dG9uPip7bWFyZ2luLXJpZ2h0OjZweH0ubGVnYWN5LW1vZGUgLmN0YS1idXR0b24+KjpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfQoubGVnYWN5LW1vZGUgLmdlbnJlLWZpbHRlcntnYXA6MH0ubGVnYWN5LW1vZGUgLmdlbnJlLWZpbHRlcj4qe21hcmdpbi1yaWdodDo4cHh9Ci5sZWdhY3ktbW9kZSAuZ2FtZS1pbmZvLW1ldGF7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5nYW1lLWluZm8tbWV0YT4qe21hcmdpbi1yaWdodDo4cHg7bWFyZ2luLWJvdHRvbTo4cHh9Ci5sZWdhY3ktbW9kZSAuZ2FtZS1pbmZvLXNjcmVlbnNob3Rze2dhcDowfS5sZWdhY3ktbW9kZSAuZ2FtZS1pbmZvLXNjcmVlbnNob3RzPip7bWFyZ2luLXJpZ2h0OjhweDttYXJnaW4tYm90dG9tOjhweH0KLmxlZ2FjeS1tb2RlIC5nYW1lLWluZm8tYWN0aW9uc3tnYXA6MH0ubGVnYWN5LW1vZGUgLmdhbWUtaW5mby1hY3Rpb25zPip7bWFyZ2luLXJpZ2h0OjhweH0KLmxlZ2FjeS1tb2RlIC5zdG9yYWdlLWxlZ2VuZHtnYXA6MH0ubGVnYWN5LW1vZGUgLnN0b3JhZ2UtbGVnZW5kPip7bWFyZ2luLXJpZ2h0OjE2cHh9Ci5sZWdhY3ktbW9kZSAubGVnZW5kLWl0ZW17Z2FwOjB9LmxlZ2FjeS1tb2RlIC5sZWdlbmQtaXRlbT4qe21hcmdpbi1yaWdodDo2cHh9Ci5sZWdhY3ktbW9kZSAuYnRue2dhcDowfS5sZWdhY3ktbW9kZSAuYnRuPip7bWFyZ2luLXJpZ2h0OjZweH0ubGVnYWN5LW1vZGUgLmJ0bj4qOmxhc3QtY2hpbGR7bWFyZ2luLXJpZ2h0OjB9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgPGRpdiBjbGFzcz0iaGVhZGVyIj4KICAgIDxpbnB1dCBpZD0ic2VhcmNoIiBjbGFzcz0ic2VhcmNoIiB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iU2VhcmNoIGdhbWVzLi4uIj4KICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICA8YnV0dG9uIGlkPSJjbGVhclNlYXJjaCI+CiAgICAgICAgPHN2ZyBjbGFzcz0iaWNvbi14IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PGxpbmUgeDE9IjE4IiB5MT0iNiIgeDI9IjYiIHkyPSIxOCIvPjxsaW5lIHgxPSI2IiB5MT0iNiIgeDI9IjE4IiB5Mj0iMTgiLz48L3N2Zz4KICAgICAgICA8c3ZnIGNsYXNzPSJpY29uLXNwaW5uZXIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iMzIiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMiIvPjwvc3ZnPgogICAgICAgIDxzdmcgY2xhc3M9Imljb24tY2hlY2siIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzIyYzU1ZSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjIwIDYgOSAxNyA0IDEyIi8+PC9zdmc+CiAgICAgICAgPHN2ZyBjbGFzcz0iaWNvbi13YXJuIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmNTllMGIiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxwYXRoIGQ9Ik0xMiA5djRtMCA0aC4wMU0xMiAzbDkuNSAxNi41SDIuNUwxMiAzeiIvPjwvc3ZnPgogICAgICAgIDxzdmcgY2xhc3M9Imljb24tZXJyb3IiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2VmNDQ0NCIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiLz48bGluZSB4MT0iMTUiIHkxPSI5IiB4Mj0iOSIgeTI9IjE1Ii8+PGxpbmUgeDE9IjkiIHkxPSI5IiB4Mj0iMTUiIHkyPSIxNSIvPjwvc3ZnPgogICAgICA8L2J1dHRvbj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgPHNlY3Rpb24gY2xhc3M9ImxlZnRQYW5lIiBpZD0ibGVmdFBhbmUiIGFyaWEtbGFiZWw9IkdhbWUgbGlzdCI+CiAgICAgIDxkaXYgY2xhc3M9ImdlbnJlLWZpbHRlciIgaWQ9ImdlbnJlRmlsdGVyIj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ibGVmdFBhbmUtaW5uZXIiIGlkPSJsZWZ0UGFuZUlubmVyIj48L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8YXNpZGUgY2xhc3M9InJpZ2h0UGFuZSI+CiAgICAgIDxidXR0b24gaWQ9InRvZ2dsZUNvbmZpZyIgY2xhc3M9ImJ0biBnaG9zdCBtb2JpbGUtb25seSI+SGlkZSBDb25maWd1cmF0aW9uPC9idXR0b24+CgogICAgICA8ZGl2IGlkPSJjb25maWdTZWN0aW9uIiBjbGFzcz0iY29uZmlnLXNlY3Rpb24iPgogICAgICAgIDwhLS0gU3RvcmFnZSBDYXJkIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtY2FyZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWhlYWRlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtdGl0bGUiPgogICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE5IDExSDVtMTQgMGEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg1YTIgMiAwIDAxLTItMnYtNmEyIDIgMCAwMTItMm0xNCAwVjlhMiAyIDAgMDAtMi0yTTUgMTFWOWEyIDIgMCAwMTItMm0wIDBWNWEyIDIgMCAwMTItMmg2YTIgMiAwIDAxMiAydjJNNyA3aDEwIi8+PC9zdmc+CiAgICAgICAgICAgICAgU0QgQ2FyZCBTdG9yYWdlCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWNhcGFjaXR5Ij48c3BhbiBpZD0ic3BhY2UiPjA8L3NwYW4+R0IgQ2FwYWNpdHk8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RvcmFnZS1wcm9ncmVzcyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByb2dyZXNzLXVzZWQiIGlkPSJwcm9ncmVzc1VzZWQiIHN0eWxlPSJ3aWR0aDowJSI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByb2dyZXNzLXNlbGVjdGVkIiBpZD0icHJvZ3Jlc3NTZWxlY3RlZCIgc3R5bGU9IndpZHRoOjAlIj48L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RvcmFnZS1sZWdlbmQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbSI+PGRpdiBjbGFzcz0ibGVnZW5kLWRvdCB1c2VkIj48L2Rpdj5Vc2VkOiA8c3BhbiBpZD0idXNlZFNwYWNlIj4wPC9zcGFuPiBHQjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbSI+PGRpdiBjbGFzcz0ibGVnZW5kLWRvdCBzZWxlY3RlZCI+PC9kaXY+U2VsZWN0ZWQ6IDxzcGFuIGlkPSJzZWxlY3RlZFNpemUiPjAuMDA8L3NwYW4+IEdCPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxlZ2VuZC1pdGVtIj48ZGl2IGNsYXNzPSJsZWdlbmQtZG90IGZyZWUiPjwvZGl2PkZyZWU6IDxzcGFuIGlkPSJmcmVlU3BhY2UiPjA8L3NwYW4+IEdCPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBTdGF0cyBHcmlkIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InN0YXRzLWdyaWQiPgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1jYXJkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC12YWx1ZSIgaWQ9ImNvdW50Ij4wPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPlRpdGxlczwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LWNhcmQgaGlnaGxpZ2h0Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC12YWx1ZSI+PHNwYW4gaWQ9InNlbGVjdGVkU2l6ZURpc3BsYXkiPjAuMDwvc3Bhbj48c21hbGwgc3R5bGU9ImZvbnQtc2l6ZToxNHB4Ij5HQjwvc21hbGw+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPlRvdGFsIFNpemU8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1jYXJkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC12YWx1ZSIgaWQ9Imluc3RhbGxFc3RpbWF0ZSI+fjBtPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPkVzdC4gVGltZTwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1ub3RlIj4KICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMiAxNnYtNG0wLTRoLjAxIi8+PC9zdmc+CiAgICAgICAgICBFc3QuIGJhc2VkIG9uIDE0TUIvcyB0cmFuc2ZlciByYXRlCiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gQ29udHJvbHMgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMiPgogICAgICAgICAgPGRpdiBjbGFzcz0iZnVsbCI+CiAgICAgICAgICAgIDxsYWJlbD5DdXN0b21lciBOYW1lPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IGlkPSJjdXN0b21lciIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkVudGVyIG5hbWUgKHVzZSB1bmRlcnNjb3JlcykiPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlbmFtZS1wcmV2aWV3IiBpZD0iZmlsZW5hbWVQcmV2aWV3Ij5GaWxlbmFtZSBwcmV2aWV3IHdpbGwgYXBwZWFyIGhlcmXigKY8L2Rpdj4KICAgICAgICAgIDxkaXYgaWQ9ImR5bmFtaWNDb250cm9scyI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPCEtLSBTaGFyZSBSb3cgLS0+CiAgICAgIDxkaXYgY2xhc3M9InNoYXJlLXJvdyI+CiAgICAgICAgPGlucHV0IGlkPSJzaGFyZWFibGUiIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJVcGxvYWQgbGluayB3aWxsIGFwcGVhciBoZXJlLi4uIiByZWFkb25seT4KICAgICAgICA8YnV0dG9uIGlkPSJjb3B5TGluayIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+Q29weTwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIDwhLS0gQWN0aW9uIEJ1dHRvbnMgLS0+CiAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgIDxidXR0b24gaWQ9InNhdmVCdG4iIGNsYXNzPSJidG4gZ2hvc3QiPlNhdmU8L2J1dHRvbj4KICAgICAgICA8bGFiZWwgZm9yPSJmaWxlSW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciI+T3BlbjwvbGFiZWw+CiAgICAgICAgPGlucHV0IGlkPSJmaWxlSW4iIHR5cGU9ImZpbGUiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICA8IS0tIDxidXR0b24gaWQ9InBhc3RlQnRuIiBjbGFzcz0iYnRuIGdob3N0Ij5QYXN0ZTwvYnV0dG9uPiAtLT4KICAgICAgPC9kaXY+CgogICAgICA8IS0tIFBhc3RlIENvbnRhaW5lciAoaGlkZGVuIGJ5IGRlZmF1bHQpIC0gY29tbWVudGVkIG91dCBmb3Igbm93CiAgICAgIDxkaXYgaWQ9InBhc3RlQ29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTpub25lO21hcmdpbi10b3A6OHB4OyI+CiAgICAgICAgPHRleHRhcmVhIGlkPSJwYXN0ZUFyZWEiIHBsYWNlaG9sZGVyPSJQYXN0ZSBnYW1lIGxpc3QgaGVyZSAob25lIHBlciBsaW5lKS4uLiIgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjgwcHg7cGFkZGluZzo4cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtmb250LXNpemU6MTJweDtyZXNpemU6dmVydGljYWw7Ij48L3RleHRhcmVhPgogICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O21hcmdpbi10b3A6NHB4OyI+CiAgICAgICAgICA8YnV0dG9uIGlkPSJwYXN0ZUxvYWQiIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIHN0eWxlPSJmbGV4OjE7Ij5Mb2FkPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uIGlkPSJwYXN0ZUNhbmNlbCIgY2xhc3M9ImJ0biBnaG9zdCIgc3R5bGU9ImZsZXg6MTsiPkNhbmNlbDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgLS0+CgogICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICA8YnV0dG9uIGlkPSJhZG1pbkV4cG9ydCIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IEFkbWluPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBpZD0ibWF0Y2hMaXN0IiBjbGFzcz0iYnRuIGdob3N0Ij5NYXRjaCBMaXN0PC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBpZD0iYmluTGlzdCIgY2xhc3M9ImJ0biBnaG9zdCI+VXBsb2FkczwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgaWQ9ImZpbGVMaXN0Q29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+CiAgICAgICAgPGRpdiBpZD0iYmluRmlsZUxpc3QiPjwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIDwhLS0gU3RhdHVzIGhpZGRlbiAtIHVzaW5nIGljb24gKyB0aXRsZSBpbnN0ZWFkIC0tPgogICAgICA8ZGl2IGlkPSJzdGF0dXMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij5SZWFkeTwvZGl2PgoKICAgICAgPCEtLSBTZWxlY3RlZCBQYW5lbCAtLT4KICAgICAgPGRpdiBpZD0ic2VsZWN0ZWRQYW5lbCIgY2xhc3M9InNlbGVjdGVkLXBhbmVsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkIj4KICAgICAgICAgIDxzcGFuPlNlbGVjdGVkIFNvZnR3YXJlPC9zcGFuPgogICAgICAgICAgPHNwYW4gaWQ9InNlbGVjdGVkUGFuZWxDb3VudCI+MCBpdGVtczwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJib2R5IiBpZD0ic2VsZWN0ZWRQYW5lbEJvZHkiPjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvYXNpZGU+CiAgPC9kaXY+CgogIDwhLS0gQm90dG9tIENUQSBCdXR0b24gLS0+CiAgPGRpdiBjbGFzcz0iYm90dG9tLWN0YSIgaWQ9ImJvdHRvbUN0YSI+CiAgICA8ZGl2IGNsYXNzPSJib3R0b20tY3RhLWlubmVyIj4KICAgICAgPGJ1dHRvbiBjbGFzcz0iY3RhLXNob3ciIGlkPSJjdGFTaG93Ij4KICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQgNmgxNk00IDEwaDE2TTQgMTRoMTZNNCAxOGgxNiIvPjwvc3ZnPgogICAgICAgIDxzcGFuIGNsYXNzPSJiYWRnZSIgaWQ9ImN0YUJhZGdlIj4wPC9zcGFuPgogICAgICA8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBjbGFzcz0iY3RhLWJ1dHRvbiIgaWQ9ImN0YVVwbG9hZCI+CiAgICAgICAgPHNwYW4gY2xhc3M9Indhcm5pbmctaWNvbiI+4pqg77iPPC9zcGFuPgogICAgICAgIDxzdmcgY2xhc3M9InVwbG9hZC1pY29uIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNyAxNmE0IDQgMCAwMS0uODgtNy45MDNBNSA1IDAgMTExNS45IDZMMTYgNmE1IDUgMCAwMTEgOS45TTE1IDEzbC0zLTNtMCAwbC0zIDNtMy0zdjEyIi8+PC9zdmc+CiAgICAgICAgPHNwYW4gaWQ9ImN0YVRleHQiPlVwbG9hZDwvc3Bhbj4KICAgICAgPC9idXR0b24+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0ib3ZlcmxheSIgaWQ9Im92ZXJsYXkiPgogICAgPGRpdiBjbGFzcz0iaGVhZCI+PGRpdj48c3Ryb25nPlNlbGVjdGVkIFRpdGxlczwvc3Ryb25nPiAtIDxzcGFuIGlkPSJvdmVybGF5Q291bnQiPjA8L3NwYW4+PC9kaXY+PGRpdj48YnV0dG9uIGlkPSJjbG9zZU92ZXJsYXkiIGNsYXNzPSJidG4gZ2hvc3QiPkNsb3NlPC9idXR0b24+PC9kaXY+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJib2R5IiBpZD0ib3ZlcmxheUJvZHkiPjwvZGl2PgogIDwvZGl2Pgo8ZGl2IGlkPSJmaWxlc01vZGFsIiBzdHlsZT0iZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpOwogIGJhY2tncm91bmQ6dmFyKC0tcGFuZWwpO3BhZGRpbmc6MjBweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7Ym94LXNoYWRvdzowIDIwcHggNTBweCByZ2JhKDAsMCwwLDAuNSk7ei1pbmRleDoyMDA7CiAgbWF4LXdpZHRoOjUwMHB4O3dpZHRoOjkwJTttYXgtaGVpZ2h0Ojcwdmg7b3ZlcmZsb3c6YXV0bztmb250LXNpemU6MTNweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Y29sb3I6dmFyKC0tdGV4dCkiPgo8L2Rpdj4KCjwhLS0gR2FtZSBJbmZvIE1vZGFsIC0tPgo8ZGl2IGlkPSJnYW1lSW5mb01vZGFsIj4KICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8iIGlkPSJnYW1lSW5mb0NvbnRlbnQiPjwvZGl2Pgo8L2Rpdj4KCjwhLS0gU2NyZWVuc2hvdCBGdWxsc2NyZWVuIFZpZXdlciAtLT4KPGRpdiBjbGFzcz0ic2NyZWVuc2hvdC1mdWxsc2NyZWVuIiBpZD0ic2NyZWVuc2hvdFZpZXdlciI+CiAgPGltZyBzcmM9IiIgYWx0PSJTY3JlZW5zaG90IiBpZD0ic2NyZWVuc2hvdEltYWdlIj4KICA8c3BhbiBjbGFzcz0iY2xvc2UtaGludCI+VGFwIGFueXdoZXJlIHRvIGNsb3NlPC9zcGFuPgo8L2Rpdj4KCjwhLS0gVG9hc3Qgbm90aWZpY2F0aW9uIC0tPgo8ZGl2IGNsYXNzPSJ0b2FzdCIgaWQ9InRvYXN0Ij48L2Rpdj4KPCEtLSBUaGVtZSBjb3VudGRvd24gLS0+CjxkaXYgaWQ9InRoZW1lQ291bnRkb3duIiBjbGFzcz0idGhlbWUtY291bnRkb3duIj48c3BhbiBjbGFzcz0iY291bnRkb3duLW51bSI+Mzwvc3Bhbj48c3BhbiBjbGFzcz0iY291bnRkb3duLWxhYmVsIj5Ib2xkIHRvIGNoYW5nZSB0aGVtZTwvc3Bhbj48L2Rpdj4KCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij5jb25zdCBDT05GSUcgPSB7DQogIHhtbEZpbGU6ICdzd2l0Y2hnYW1lcy54bWwnLCAgLy8gQ2hhbmdlIHRoaXMgdG8geW91ciBwbGF0Zm9ybSBYTUwNCiAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWicsDQogIGFkbWluRmlsZUV4dDogJy5QUk1aJywNCiAgZmlsZWJpbkJ1Y2tldDogJ3hsZzRrZ2dvemJkZ3NudzQnLA0KICANCiAgLy8gQXV0by1kZXRlY3RlZCBmcm9tIFhNTA0KICBwbGF0Zm9ybTogbnVsbCwNCiAgc3RydWN0dXJlVHlwZTogbnVsbCwgIC8vICdmb2xkZXJzJyBvciAnZmlsZXMnDQogIGFkbWluQmFzZVBhdGg6ICdLOlxcTlNQIDIwMjFcXCcsDQogIA0KICBzdG9yYWdlQ29udHJvbHM6IFsNCiAgICB7DQogICAgICBpZDogJ2NvbnNvbGUnLA0KICAgICAgbGFiZWw6ICdDb25zb2xlJywNCiAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgb3B0aW9uczogWw0KICAgICAgICB7IHZhbHVlOiAndjEnLCBsYWJlbDogJ3YxJyB9LA0KICAgICAgICB7IHZhbHVlOiAndjInLCBsYWJlbDogJ3YyJyB9LA0KICAgICAgICB7IHZhbHVlOiAnbGl0ZScsIGxhYmVsOiAnbGl0ZScgfSwNCiAgICAgICAgeyB2YWx1ZTogJ29sZWQnLCBsYWJlbDogJ29sZWQnIH0NCiAgICAgIF0sDQogICAgICBkZWZhdWx0OiAndjEnLA0KICAgICAgZmlsZW5hbWVUb2tlbjogdHJ1ZQ0KICAgIH0sDQogICAgew0KICAgICAgaWQ6ICdzZCcsDQogICAgICBsYWJlbDogJ1NEIENhcmQgKEdCKScsDQogICAgICB0eXBlOiAnc2VsZWN0JywNCiAgICAgIG9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzEyOCcsIGxhYmVsOiAnMTI4JyB9LA0KICAgICAgICB7IHZhbHVlOiAnMjU2JywgbGFiZWw6ICcyNTYnIH0sDQogICAgICAgIHsgdmFsdWU6ICc1MTInLCBsYWJlbDogJzUxMicgfSwNCiAgICAgICAgeyB2YWx1ZTogJzEwMjQnLCBsYWJlbDogJzEwMjQnIH0NCiAgICAgIF0sDQogICAgICBkZWZhdWx0OiAnMTI4JywNCiAgICAgIGZpbGVuYW1lVG9rZW46ICdzZCcsDQogICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQ0KICAgIH0sDQogICAgew0KICAgICAgaWQ6ICdhbmRyb2lkJywNCiAgICAgIGxhYmVsOiAnQW5kcm9pZCAoR0IpJywNCiAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgb3B0aW9uczogWw0KICAgICAgICB7IHZhbHVlOiAnMCcsIGxhYmVsOiAnMCcgfSwNCiAgICAgICAgeyB2YWx1ZTogJzE2JywgbGFiZWw6ICcxNicgfSwNCiAgICAgICAgeyB2YWx1ZTogJzMyJywgbGFiZWw6ICczMicgfSwNCiAgICAgICAgeyB2YWx1ZTogJzY0JywgbGFiZWw6ICc2NCcgfQ0KICAgICAgXSwNCiAgICAgIGRlZmF1bHQ6ICcwJywNCiAgICAgIGZpbGVuYW1lVG9rZW46ICdkcm9pZCcsDQogICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQ0KICAgIH0sDQogICAgew0KICAgICAgaWQ6ICdsaW51eCcsDQogICAgICBsYWJlbDogJ0xpbnV4IChHQiknLA0KICAgICAgdHlwZTogJ3NlbGVjdCcsDQogICAgICBvcHRpb25zOiBbDQogICAgICAgIHsgdmFsdWU6ICcwJywgbGFiZWw6ICcwJyB9LA0KICAgICAgICB7IHZhbHVlOiAnMTYnLCBsYWJlbDogJzE2JyB9LA0KICAgICAgICB7IHZhbHVlOiAnMzInLCBsYWJlbDogJzMyJyB9LA0KICAgICAgICB7IHZhbHVlOiAnNjQnLCBsYWJlbDogJzY0JyB9DQogICAgICBdLA0KICAgICAgZGVmYXVsdDogJzAnLA0KICAgICAgZmlsZW5hbWVUb2tlbjogJ2xpbicsDQogICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQ0KICAgIH0NCiAgXSwNCiAgDQogIGNhbGN1bGF0ZVN0b3JhZ2U6IGZ1bmN0aW9uKHZhbHVlcykgew0KICAgIGNvbnN0IGNvbnNvbGVWYWwgPSB2YWx1ZXMuY29uc29sZSB8fCAndjEnOw0KICAgIGNvbnN0IHNkTWFya2V0ZWQgPSBOdW1iZXIodmFsdWVzLnNkIHx8IDEyOCk7DQogICAgY29uc3QgYW5kcm9pZE1hcmtldGVkID0gTnVtYmVyKHZhbHVlcy5hbmRyb2lkIHx8IDApOw0KICAgIGNvbnN0IGxpbnV4TWFya2V0ZWQgPSBOdW1iZXIodmFsdWVzLmxpbnV4IHx8IDApOw0KDQogICAgLy8gQ29udmVydCBtYXJrZXRlZCDihpIgZm9ybWF0dGVkIGNhcGFjaXR5IChHQiB2cyBHaUIsIH43JSBkaWZmZXJlbmNlKQ0KICAgIGNvbnN0IHNkRm9ybWF0dGVkID0geyAxMjg6IDExOSwgMjU2OiAyMzgsIDUxMjogNDczLCAxMDI0OiA5NTMgfTsNCiAgICBjb25zdCBzZCA9IHNkRm9ybWF0dGVkW3NkTWFya2V0ZWRdIHx8IE1hdGguZmxvb3Ioc2RNYXJrZXRlZCAqIDAuOTIzKTsNCiAgICBjb25zdCBlbXVQYXJ0aXRpb24gPSBjb25zb2xlVmFsID09PSAnb2xlZCcgPyA1OCA6IDI5Ow0KICAgIGNvbnN0IGFuZHJvaWQgPSBNYXRoLmZsb29yKGFuZHJvaWRNYXJrZXRlZCAqIDAuOTMpOw0KICAgIGNvbnN0IGxpbnV4ID0gTWF0aC5mbG9vcihsaW51eE1hcmtldGVkICogMC45Myk7DQoNCiAgICAvLyBDb25zdGFudHMNCiAgICBjb25zdCBvc1NpemUgPSA4OyAgICAgICAgICAgLy8gT1MgdXNlcyB+Ni04R0IgaW5zaWRlIGVtdU1NQw0KICAgIGNvbnN0IHNkRmlsZXMgPSAxOyAgICAgICAgICAvLyBNaXNjIGZpbGVzIG9uIFNEIHJvb3QNCiAgICBjb25zdCBhbmRyb2lkRmlsZXMgPSBhbmRyb2lkID4gMCA/IDEgOiAwOyAgLy8gQW5kcm9pZCBib290L2NvbmZpZyBmaWxlcw0KICAgIGNvbnN0IGxpbnV4RmlsZXMgPSBsaW51eCA+IDAgPyAxIDogMDsgICAgICAvLyBMaW51eCBib290L2NvbmZpZyBmaWxlcw0KDQogICAgLy8gQ2FsY3VsYXRlIGF2YWlsYWJsZSBzcGFjZQ0KICAgIGNvbnN0IHNkUmVtYWluZGVyID0gc2QgLSBlbXVQYXJ0aXRpb24gLSBhbmRyb2lkIC0gYW5kcm9pZEZpbGVzIC0gbGludXggLSBsaW51eEZpbGVzIC0gc2RGaWxlczsNCiAgICBjb25zdCBlbXVGcmVlID0gZW11UGFydGl0aW9uIC0gb3NTaXplOyAgLy8gVW51c2VkIHNwYWNlIGluIGVtdU1NQyBwYXJ0aXRpb24NCiAgICBjb25zdCByYXdTcGFjZSA9IHNkUmVtYWluZGVyICsgZW11RnJlZTsNCg0KICAgIC8vIDUlIGJ1ZmZlciBmb3IgY29tcHJlc3NlZCBnYW1lIGV4cGFuc2lvbiAoTlNa4oaSTlNQLCBYQ1rihpJYQ0kpDQogICAgcmV0dXJuIE1hdGguZmxvb3IocmF3U3BhY2UgKiAwLjk1KTsNCiAgfQ0KfTs8L3NjcmlwdD4KPHNjcmlwdD4KLy8gPT09PT09PT09PT09PT09PT09PT0gQ09ORklHVVJBVElPTiBCTE9DSyA9PT09PT09PT09PT09PT09PT09PQoKLy8gPT09PT09PT09PT09PT09PT09PT0gRU5EIENPTkZJR1VSQVRJT04gPT09PT09PT09PT09PT09PT09PT0KCi8vIExlZ2FjeSBtb2RlIGRldGVjdGlvbgpmdW5jdGlvbiBkZXRlY3RMZWdhY3lNb2RlKCkgewogIC8vIENoZWNrIFVSTCBwYXJhbSBmaXJzdAogIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7CiAgaWYgKHBhcmFtcy5nZXQoJ21vZGVybicpID09PSAnMScpIHJldHVybiBmYWxzZTsKICBpZiAocGFyYW1zLmdldCgnbGl0ZScpID09PSAnMScgfHwgcGFyYW1zLmdldCgnbGVnYWN5JykgPT09ICcxJykgcmV0dXJuIHRydWU7CgogIC8vIEZlYXR1cmUgZGV0ZWN0aW9uIGZvciBtb2Rlcm4gQ1NTL0pTCiAgY29uc3QgdGVzdHMgPSB7CiAgICBvcHRpb25hbENoYWluaW5nOiAoKCkgPT4geyB0cnkgeyBldmFsKCdjb25zdCBvPXt9OyBvPy54Jyk7IHJldHVybiB0cnVlOyB9IGNhdGNoKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0pKCksCiAgICBmbGV4R2FwOiBDU1Muc3VwcG9ydHMgJiYgQ1NTLnN1cHBvcnRzKCdnYXAnLCAnMXB4JyksCiAgICBpbnNldDogQ1NTLnN1cHBvcnRzICYmIENTUy5zdXBwb3J0cygnaW5zZXQnLCAnMCcpLAogICAgYmFja2Ryb3BGaWx0ZXI6IENTUy5zdXBwb3J0cyAmJiAoQ1NTLnN1cHBvcnRzKCdiYWNrZHJvcC1maWx0ZXInLCAnYmx1cigxcHgpJykgfHwgQ1NTLnN1cHBvcnRzKCctd2Via2l0LWJhY2tkcm9wLWZpbHRlcicsICdibHVyKDFweCknKSkKICB9OwoKICAvLyBJZiBhbnkgY3JpdGljYWwgZmVhdHVyZSBmYWlscywgdXNlIGxlZ2FjeSBtb2RlCiAgcmV0dXJuICF0ZXN0cy5vcHRpb25hbENoYWluaW5nIHx8ICF0ZXN0cy5mbGV4R2FwIHx8ICF0ZXN0cy5pbnNldDsKfQoKbGV0IGlzTGVnYWN5TW9kZSA9IGRldGVjdExlZ2FjeU1vZGUoKTsKaWYgKGlzTGVnYWN5TW9kZSkgewogIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsZWdhY3ktbW9kZScpOwogIGNvbnNvbGUubG9nKCdMZWdhY3kgbW9kZSBlbmFibGVkIC0gb2xkZXIgYnJvd3NlciBkZXRlY3RlZCcpOwp9Cgpjb25zdCBzdGF0ZSA9IHsgaXRlbXM6IFtdLCBzZWxlY3RlZDogW10sIHhtbDogbnVsbCwgbGFzdFVwbG9hZDowLCBpY29uQ2FjaGU6IHt9LCBjdXJyZW50R2VucmU6ICdhbGwnLCBjdXJyZW50U29ydDogJ25hbWUnLCBnZW5yZXM6IG5ldyBTZXQoKSB9Owpjb25zdCBsZWZ0UGFuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0UGFuZUlubmVyJyk7CmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3ZlcmxheScpOwpjb25zdCBvdmVybGF5Qm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5Qm9keScpOwpjb25zdCBpc01vYmlsZSA9IC9Nb2JpfEFuZHJvaWR8aVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7CmNvbnN0IGlzTG9jYWwgPSBmYWxzZTsKCi8vIExvbmcgcHJlc3MgZGV0ZWN0aW9uCmNvbnN0IExPTkdfUFJFU1NfRFVSQVRJT04gPSA1MDA7IC8vIG1zCmxldCBsb25nUHJlc3NUaW1lciA9IG51bGw7CmxldCBsb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTsKCi8vIExvYWQgaWNvbiBjYWNoZQphc3luYyBmdW5jdGlvbiBsb2FkSWNvbkNhY2hlKCkgewogIHRyeSB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdpY29uX2NhY2hlLmpzb24nKTsKICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICBzdGF0ZS5pY29uQ2FjaGUgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgIGNvbnNvbGUubG9nKGBMb2FkZWQgJHtPYmplY3Qua2V5cyhzdGF0ZS5pY29uQ2FjaGUpLmxlbmd0aH0gaWNvbnMgZnJvbSBjYWNoZWApOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlLmxvZygnTm8gaWNvbiBjYWNoZSBmb3VuZCAocnVuIGJ1aWxkX2ljb25fY2FjaGUucHkgdG8gZ2VuZXJhdGUpJyk7CiAgfQogIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gZ2V0SWNvblVybChnYW1lTmFtZSkgewogIGlmIChpc0xlZ2FjeU1vZGUpIHJldHVybiBudWxsOyAvLyBTa2lwIGljb25zIGluIGxlZ2FjeSBtb2RlCiAgY29uc3QgY2FjaGVkID0gc3RhdGUuaWNvbkNhY2hlW2dhbWVOYW1lXTsKICByZXR1cm4gY2FjaGVkID8gY2FjaGVkLmljb25VcmwgOiBudWxsOwp9CgpmdW5jdGlvbiBnZXRHYW1lSW5mbyhnYW1lTmFtZSkgewogIHJldHVybiBzdGF0ZS5pY29uQ2FjaGVbZ2FtZU5hbWVdIHx8IG51bGw7Cn0KCmZ1bmN0aW9uIGJ1aWxkR2VucmVGaWx0ZXIoKSB7CiAgc3RhdGUuZ2VucmVzLmNsZWFyKCk7CiAgc3RhdGUuZ2VucmVzLmFkZCgnYWxsJyk7CgogIC8vIENvbGxlY3QgYWxsIGdlbnJlcyBmcm9tIGNhY2hlCiAgT2JqZWN0LnZhbHVlcyhzdGF0ZS5pY29uQ2FjaGUpLmZvckVhY2goaW5mbyA9PiB7CiAgICBpZiAoaW5mby5jYXRlZ29yeSAmJiBBcnJheS5pc0FycmF5KGluZm8uY2F0ZWdvcnkpKSB7CiAgICAgIGluZm8uY2F0ZWdvcnkuZm9yRWFjaChjYXQgPT4gc3RhdGUuZ2VucmVzLmFkZChjYXQpKTsKICAgIH0KICB9KTsKCiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbnJlRmlsdGVyJyk7CiAgaWYgKCFjb250YWluZXIpIHJldHVybjsKCiAgLy8gU29ydCBnZW5yZXMgYWxwaGFiZXRpY2FsbHksIGJ1dCBrZWVwICdhbGwnIGZpcnN0CiAgY29uc3Qgc29ydGVkR2VucmVzID0gWydhbGwnLCAuLi5BcnJheS5mcm9tKHN0YXRlLmdlbnJlcykuZmlsdGVyKGcgPT4gZyAhPT0gJ2FsbCcpLnNvcnQoKV07CgogIC8vIEJ1aWxkIHNvcnQgY2hpcHMgKGxlZnRtb3N0KSArIGdlbnJlIGNoaXBzCiAgY29uc3Qgc29ydENoaXBzID0gYAogICAgPGJ1dHRvbiBjbGFzcz0ic29ydC1jaGlwICR7c3RhdGUuY3VycmVudFNvcnQgPT09ICduYW1lJyA/ICdhY3RpdmUnIDogJyd9IiBkYXRhLXNvcnQ9Im5hbWUiPkEtWjwvYnV0dG9uPgogICAgPGJ1dHRvbiBjbGFzcz0ic29ydC1jaGlwICR7c3RhdGUuY3VycmVudFNvcnQgPT09ICdsYXRlc3QnID8gJ2FjdGl2ZScgOiAnJ30iIGRhdGEtc29ydD0ibGF0ZXN0Ij5MYXRlc3Q8L2J1dHRvbj4KICAgIDxidXR0b24gY2xhc3M9InNvcnQtY2hpcCAke3N0YXRlLmN1cnJlbnRTb3J0ID09PSAndG9wJyA/ICdhY3RpdmUnIDogJyd9IiBkYXRhLXNvcnQ9InRvcCI+VG9wPC9idXR0b24+CiAgICA8ZGl2IGNsYXNzPSJkaXZpZGVyIj48L2Rpdj4KICBgOwoKICBjb25zdCBnZW5yZUNoaXBzID0gc29ydGVkR2VucmVzLm1hcChnZW5yZSA9PiBgCiAgICA8YnV0dG9uIGNsYXNzPSJnZW5yZS1jaGlwICR7Z2VucmUgPT09IHN0YXRlLmN1cnJlbnRHZW5yZSA/ICdhY3RpdmUnIDogJyd9IiBkYXRhLWdlbnJlPSIke2dlbnJlfSI+CiAgICAgICR7Z2VucmUgPT09ICdhbGwnID8gJ0FsbCBHYW1lcycgOiBnZW5yZX0KICAgIDwvYnV0dG9uPgogIGApLmpvaW4oJycpOwoKICBjb250YWluZXIuaW5uZXJIVE1MID0gc29ydENoaXBzICsgZ2VucmVDaGlwczsKCiAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsKICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2dlbnJlLWNoaXAnKSkgewogICAgICBzdGF0ZS5jdXJyZW50R2VucmUgPSBlLnRhcmdldC5kYXRhc2V0LmdlbnJlOwogICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmdlbnJlLWNoaXAnKS5mb3JFYWNoKGMgPT4gYy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICByZW5kZXJMaXN0KHN0YXRlLml0ZW1zKTsKICAgIH0KICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NvcnQtY2hpcCcpKSB7CiAgICAgIHN0YXRlLmN1cnJlbnRTb3J0ID0gZS50YXJnZXQuZGF0YXNldC5zb3J0OwogICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnNvcnQtY2hpcCcpLmZvckVhY2goYyA9PiBjLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgIGFwcGx5U29ydEFuZFJlbmRlcigpOwogICAgfQogIH0pOwp9CgpmdW5jdGlvbiBhcHBseVNvcnRBbmRSZW5kZXIoKSB7CiAgaWYgKCFzdGF0ZS5pdGVtcyB8fCBzdGF0ZS5pdGVtcy5sZW5ndGggPT09IDApIHsKICAgIHRvYXN0KCdObyBsaXN0IGxvYWRlZCB5ZXQnKTsKICAgIHJldHVybjsKICB9CgogIGlmIChzdGF0ZS5jdXJyZW50U29ydCA9PT0gJ2xhdGVzdCcpIHsKICAgIHN0YXRlLml0ZW1zLmZvckVhY2goaXQgPT4gewogICAgICBjb25zdCByYXcgPSBpdC5kYXRlIHx8IGl0LmRhdGVNb2RpZmllZCB8fCBpdC5tb2RpZmllZCB8fCAnJzsKICAgICAgY29uc3QgZCA9IHBhcnNlRGF0ZUZsZXhpYmxlKHJhdyk7CiAgICAgIGl0Ll9wYXJzZWREYXRlID0gZCA/IGQuZ2V0VGltZSgpIDogMDsKICAgIH0pOwogICAgc3RhdGUuaXRlbXMuc29ydCgoYSwgYikgPT4gYi5fcGFyc2VkRGF0ZSAtIGEuX3BhcnNlZERhdGUpOwogIH0gZWxzZSBpZiAoc3RhdGUuY3VycmVudFNvcnQgPT09ICd0b3AnKSB7CiAgICBzdGF0ZS5pdGVtcy5zb3J0KChhLCBiKSA9PiAocGFyc2VJbnQoYi5zY29yZSB8fCAwKSAtIHBhcnNlSW50KGEuc2NvcmUgfHwgMCkpKTsKICB9IGVsc2UgewogICAgLy8gQS1aIHNvcnQgYnkgbmFtZQogICAgc3RhdGUuaXRlbXMuc29ydCgoYSwgYikgPT4gKGEubmFtZSB8fCAnJykubG9jYWxlQ29tcGFyZShiLm5hbWUgfHwgJycpKTsKICB9CgogIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOwp9CgpmdW5jdGlvbiBmaWx0ZXJCeUdlbnJlKGxpc3QpIHsKICBpZiAoc3RhdGUuY3VycmVudEdlbnJlID09PSAnYWxsJykgcmV0dXJuIGxpc3Q7CgogIHJldHVybiBsaXN0LmZpbHRlcihpdGVtID0+IHsKICAgIGNvbnN0IGluZm8gPSBnZXRHYW1lSW5mbyhpdGVtLm5hbWUpOwogICAgaWYgKCFpbmZvIHx8ICFpbmZvLmNhdGVnb3J5KSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gaW5mby5jYXRlZ29yeS5pbmNsdWRlcyhzdGF0ZS5jdXJyZW50R2VucmUpOwogIH0pOwp9CgpmdW5jdGlvbiBmb3JtYXRSZWxlYXNlRGF0ZShkYXRlTnVtKSB7CiAgaWYgKCFkYXRlTnVtKSByZXR1cm4gbnVsbDsKICBjb25zdCBzdHIgPSBTdHJpbmcoZGF0ZU51bSk7CiAgaWYgKHN0ci5sZW5ndGggIT09IDgpIHJldHVybiBudWxsOwogIGNvbnN0IHllYXIgPSBzdHIuc2xpY2UoMCwgNCk7CiAgY29uc3QgbW9udGggPSBzdHIuc2xpY2UoNCwgNik7CiAgY29uc3QgZGF5ID0gc3RyLnNsaWNlKDYsIDgpOwogIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gOwp9CgpmdW5jdGlvbiBzaG93R2FtZUluZm8oaXRlbSkgewogIGNvbnN0IGluZm8gPSBnZXRHYW1lSW5mbyhpdGVtLm5hbWUpOwogIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVJbmZvTW9kYWwnKTsKICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVJbmZvQ29udGVudCcpOwoKICBjb25zdCBiYW5uZXJVcmwgPSBpbmZvPy5iYW5uZXJVcmwgfHwgaW5mbz8uaWNvblVybCB8fCAnJzsKICBjb25zdCBpY29uVXJsID0gaW5mbz8uaWNvblVybCB8fCAnJzsKICBjb25zdCB0aXRsZSA9IGluZm8/Lm1hdGNoZWROYW1lIHx8IGl0ZW0ubmFtZTsKICBjb25zdCBwdWJsaXNoZXIgPSBpbmZvPy5wdWJsaXNoZXIgfHwgJ1Vua25vd24gUHVibGlzaGVyJzsKICBjb25zdCBjYXRlZ29yaWVzID0gaW5mbz8uY2F0ZWdvcnkgfHwgW107CiAgY29uc3QgZGVzY3JpcHRpb24gPSBpbmZvPy5kZXNjcmlwdGlvbiB8fCAnJzsKICBjb25zdCBpbnRybyA9IGluZm8/LmludHJvIHx8ICcnOwogIGNvbnN0IHNjcmVlbnNob3RzID0gaW5mbz8uc2NyZWVuc2hvdHMgfHwgW107CiAgY29uc3QgcmVsZWFzZURhdGUgPSBmb3JtYXRSZWxlYXNlRGF0ZShpbmZvPy5yZWxlYXNlRGF0ZSk7CiAgY29uc3QgcGxheWVycyA9IGluZm8/Lm51bWJlck9mUGxheWVyczsKICBjb25zdCBoYXNGaWxlcyA9IGl0ZW0uZmlsZXMgJiYgaXRlbS5maWxlcy5sZW5ndGggPiAwOwoKICBjb25zdCBpc1NlbGVjdGVkID0gc3RhdGUuc2VsZWN0ZWQuc29tZShzID0+IHMubmFtZSA9PT0gaXRlbS5uYW1lKTsKCiAgY29udGVudC5pbm5lckhUTUwgPSBgCiAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8taGVhZGVyIj4KICAgICAgJHtiYW5uZXJVcmwgPyBgPGltZyBjbGFzcz0iZ2FtZS1pbmZvLWJhbm5lciIgc3JjPSIke2Jhbm5lclVybH0iIGFsdD0iIiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnIj5gIDogJzxkaXYgY2xhc3M9ImdhbWUtaW5mby1iYW5uZXIiPjwvZGl2Pid9CiAgICAgICR7aWNvblVybCA/IGA8aW1nIGNsYXNzPSJnYW1lLWluZm8taWNvbiIgc3JjPSIke2ljb25Vcmx9IiBhbHQ9IiI+YCA6ICcnfQogICAgICA8YnV0dG9uIGNsYXNzPSJnYW1lLWluZm8tY2xvc2UiIG9uY2xpY2s9ImNsb3NlR2FtZUluZm8oKSI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PGxpbmUgeDE9IjE4IiB5MT0iNiIgeDI9IjYiIHkyPSIxOCIvPjxsaW5lIHgxPSI2IiB5MT0iNiIgeDI9IjE4IiB5Mj0iMTgiLz48L3N2Zz48L2J1dHRvbj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby10aXRsZSI+JHtlc2ModGl0bGUpfTwvZGl2PgogICAgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXB1Ymxpc2hlciI+JHtlc2MocHVibGlzaGVyKX08L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tbWV0YSI+CiAgICAgICR7Y2F0ZWdvcmllcy5tYXAoYyA9PiBgPHNwYW4gY2xhc3M9ImdhbWUtaW5mby10YWcgZ2VucmUiPiR7ZXNjKGMpfTwvc3Bhbj5gKS5qb2luKCcnKX0KICAgICAgJHtyZWxlYXNlRGF0ZSA/IGA8c3BhbiBjbGFzcz0iZ2FtZS1pbmZvLXRhZyI+JHtyZWxlYXNlRGF0ZX08L3NwYW4+YCA6ICcnfQogICAgICAke3BsYXllcnMgPyBgPHNwYW4gY2xhc3M9ImdhbWUtaW5mby10YWciPiR7cGxheWVyc30gUGxheWVyJHtwbGF5ZXJzID4gMSA/ICdzJyA6ICcnfTwvc3Bhbj5gIDogJyd9CiAgICAgIDxzcGFuIGNsYXNzPSJnYW1lLWluZm8tdGFnIj4ke2Zvcm1hdFNpemVUb0dCKGl0ZW0uc2l6ZSl9PC9zcGFuPgogICAgICAke2hhc0ZpbGVzID8gYDxzcGFuIGNsYXNzPSJnYW1lLWluZm8tdGFnIj4ke2l0ZW0uZmlsZXMubGVuZ3RofSBmaWxlczwvc3Bhbj5gIDogJyd9CiAgICA8L2Rpdj4KCiAgICAke2hhc0ZpbGVzID8gYAogICAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tc2VjdGlvbiBnYW1lLWluZm8tZmlsZXMtc2VjdGlvbiI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZ2FtZS1pbmZvLWZpbGVzLWJ0biIgb25jbGljaz0idG9nZ2xlRmlsZXNTZWN0aW9uKHRoaXMpIj4KICAgICAgICAgIDxzcGFuPlNob3cgJHtpdGVtLmZpbGVzLmxlbmd0aH0gRmlsZXM8L3NwYW4+CiAgICAgICAgICA8c3ZnIGNsYXNzPSJjaGV2cm9uIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik02IDlsNiA2IDYtNiIvPjwvc3ZnPgogICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1maWxlcyIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICAgICAgICAke2l0ZW0uZmlsZXMubWFwKGYgPT4gYDxkaXYgY2xhc3M9ImdhbWUtaW5mby1maWxlIj4ke2VzYyhmKX08L2Rpdj5gKS5qb2luKCcnKX0KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICBgIDogJyd9CgogICAgJHtpbnRybyB8fCBkZXNjcmlwdGlvbiA/IGAKICAgICAgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uLXRpdGxlIj5BYm91dDwvZGl2PgogICAgICAgICR7aW50cm8gPyBgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWludHJvIj4iJHtlc2MoaW50cm8pfSI8L2Rpdj5gIDogJyd9CiAgICAgICAgJHtkZXNjcmlwdGlvbiA/IGA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tZGVzY3JpcHRpb24iPiR7ZXNjKGRlc2NyaXB0aW9uLnNsaWNlKDAsIDUwMCkpfSR7ZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAwID8gJy4uLicgOiAnJ308L2Rpdj5gIDogJyd9CiAgICAgIDwvZGl2PgogICAgYCA6ICcnfQoKICAgICR7c2NyZWVuc2hvdHMubGVuZ3RoID4gMCA/IGAKICAgICAgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uLXRpdGxlIj5TY3JlZW5zaG90czwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1zY3JlZW5zaG90cyI+CiAgICAgICAgICAke3NjcmVlbnNob3RzLm1hcCh1cmwgPT4gYDxpbWcgc3JjPSIke3VybH0iIGFsdD0iU2NyZWVuc2hvdCIgb25jbGljaz0ic2hvd1NjcmVlbnNob3QoJyR7dXJsfScpIiBsb2FkaW5nPSJsYXp5IiBkZWNvZGluZz0iYXN5bmMiPmApLmpvaW4oJycpfQogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIGAgOiAnJ30KCiAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tYWN0aW9ucyI+CiAgICAgIDxidXR0b24gY2xhc3M9ImJ0biAke2lzU2VsZWN0ZWQgPyAnZGFuZ2VyJyA6ICdidG4tcHJpbWFyeSd9IiBvbmNsaWNrPSJ0b2dnbGVGcm9tSW5mbygnJHtlc2MoaXRlbS5uYW1lKS5yZXBsYWNlKC8nL2csICJcXCciKX0nKSI+CiAgICAgICAgJHtpc1NlbGVjdGVkID8gJ1JlbW92ZSBmcm9tIExpc3QnIDogJ0FkZCB0byBMaXN0J30KICAgICAgPC9idXR0b24+CiAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBnaG9zdCIgb25jbGljaz0iY2xvc2VHYW1lSW5mbygpIj5DbG9zZTwvYnV0dG9uPgogICAgPC9kaXY+CiAgYDsKCiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwp9CgpmdW5jdGlvbiBjbG9zZUdhbWVJbmZvKCkgewogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lSW5mb01vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7Cn0KCmZ1bmN0aW9uIHRvZ2dsZUZpbGVzU2VjdGlvbihidG4pIHsKICBjb25zdCBmaWxlc0RpdiA9IGJ0bi5uZXh0RWxlbWVudFNpYmxpbmc7CiAgY29uc3QgaXNPcGVuID0gZmlsZXNEaXYuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnOwoKICBpZiAoaXNPcGVuKSB7CiAgICBmaWxlc0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTsKICAgIGJ0bi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBidG4ucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50LnJlcGxhY2UoJ0hpZGUnLCAnU2hvdycpOwogIH0gZWxzZSB7CiAgICBmaWxlc0Rpdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgYnRuLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTsKICAgIGJ0bi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBidG4ucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50LnJlcGxhY2UoJ1Nob3cnLCAnSGlkZScpOwogIH0KfQoKZnVuY3Rpb24gc2hvd1RvYXN0KG1lc3NhZ2UpIHsKICBjb25zdCB0b2FzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdCcpOwogIHRvYXN0LnRleHRDb250ZW50ID0gbWVzc2FnZTsKICB0b2FzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgc2V0VGltZW91dCgoKSA9PiB0b2FzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JyksIDIwMDApOwp9CgpmdW5jdGlvbiB0b2dnbGVGcm9tSW5mbyhnYW1lTmFtZSkgewogIGNvbnN0IGl0ZW0gPSBzdGF0ZS5pdGVtcy5maW5kKGkgPT4gaS5uYW1lID09PSBnYW1lTmFtZSk7CiAgaWYgKGl0ZW0pIHsKICAgIGNvbnN0IGlkeCA9IHN0YXRlLnNlbGVjdGVkLmZpbmRJbmRleChzID0+IHMubmFtZSA9PT0gZ2FtZU5hbWUpOwogICAgaWYgKGlkeCA+PSAwKSB7CiAgICAgIHN0YXRlLnNlbGVjdGVkLnNwbGljZShpZHgsIDEpOwogICAgICBzaG93VG9hc3QoJ1JlbW92ZWQgZnJvbSBsaXN0Jyk7CiAgICB9IGVsc2UgewogICAgICBzdGF0ZS5zZWxlY3RlZC5wdXNoKGl0ZW0pOwogICAgICBzaG93VG9hc3QoJ0FkZGVkIHRvIGxpc3QnKTsKICAgIH0KICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOwogICAgcmVuZGVyT3ZlcmxheSgpOwogICAgdXBkYXRlVG90YWxzKCk7CiAgICAvLyBTaG93IHRvYXN0IGZpcnN0LCB0aGVuIGNsb3NlIGFmdGVyIGRlbGF5CiAgICBzZXRUaW1lb3V0KCgpID0+IGNsb3NlR2FtZUluZm8oKSwgODAwKTsKICB9Cn0KCmZ1bmN0aW9uIHNob3dTY3JlZW5zaG90KHVybCkgewogIGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW5zaG90Vmlld2VyJyk7CiAgY29uc3QgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbnNob3RJbWFnZScpOwogIGltZy5zcmMgPSB1cmw7CiAgdmlld2VyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwp9Cgpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuc2hvdFZpZXdlcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuc2hvdFZpZXdlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwp9KTsKCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lSW5mb01vZGFsJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsKICBpZiAoZS50YXJnZXQuaWQgPT09ICdnYW1lSW5mb01vZGFsJykgY2xvc2VHYW1lSW5mbygpOwp9KTsKCmNvbnN0IE1JTl9ERUxBWSA9IDEwMDA7CmxldCBub3cgPSBEYXRlLm5vdygpOwpsZXQgbGFzdEV4cG9ydFRpbWUgPSBEYXRlLm5vdygpOwoKY29uc3QgJCA9IGlkPT5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CmZ1bmN0aW9uIGVzYyhzKXsgcmV0dXJuIChzfHwnJykucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpLnJlcGxhY2UoLycvZywnJiMzOTsnKS5yZXBsYWNlKC8iL2csJyZxdW90OycpOyB9CmZ1bmN0aW9uIHRvYXN0KG1zZyl7ICQoJ3N0YXR1cycpLnRleHRDb250ZW50ID0gbXNnOyBzZXRUaW1lb3V0KCgpPT57IGlmKCQoJ3N0YXR1cycpLnRleHRDb250ZW50ID09PSBtc2cpICQoJ3N0YXR1cycpLnRleHRDb250ZW50ID0gJ1JlYWR5JzsgfSwgMjUwMCk7IH0KCi8vIFN0YXR1cyBpY29uIG9uIFggYnV0dG9uIC0gc2hvd3MgZW1vdGlvbnMKY29uc3QgYmFzZVRpdGxlID0gZG9jdW1lbnQudGl0bGU7CmZ1bmN0aW9uIHNldFN0YXR1cyhzdGF0ZSwgZHVyYXRpb24gPSAyMDAwKSB7CiAgY29uc3QgYnRuID0gJCgnY2xlYXJTZWFyY2gnKTsKICBidG4uY2xhc3NOYW1lID0gc3RhdGU7IC8vIGxvYWRpbmcsIHN1Y2Nlc3MsIHdhcm4sIGVycm9yLCBvciBlbXB0eSBmb3IgZGVmYXVsdAogIGlmIChzdGF0ZSAmJiBkdXJhdGlvbiA+IDApIHsKICAgIHNldFRpbWVvdXQoKCkgPT4geyBidG4uY2xhc3NOYW1lID0gJyc7IH0sIGR1cmF0aW9uKTsKICB9Cn0KZnVuY3Rpb24gdXBkYXRlVGl0bGUoKSB7CiAgY29uc3QgY3VzdCA9ICgkKCdjdXN0b21lcicpPy52YWx1ZSB8fCAnJykudHJpbSgpOwogIGRvY3VtZW50LnRpdGxlID0gY3VzdCA/IGAke2Jhc2VUaXRsZX0gLSAke2N1c3R9YCA6IGJhc2VUaXRsZTsKfQoKZnVuY3Rpb24gcGFyc2VTaXplVGV4dChzKXsgaWYoIXMpIHJldHVybiAwOyBjb25zdCBtID0gKCcnK3MpLm1hdGNoKC8oW1xkXC5dKylccyooR2lCfE1pQnxLaUJ8R0J8TUJ8S0J8QikvaSk7IGlmKCFtKSByZXR1cm4gMDsgY29uc3Qgdj1wYXJzZUZsb2F0KG1bMV0pOyBjb25zdCB1PW1bMl0udG9VcHBlckNhc2UoKTsgaWYodT09PSdCJykgcmV0dXJuIHY7IGlmKHU9PT0nS0InfHx1PT09J0tJQicpIHJldHVybiB2KjEwMjQ7IGlmKHU9PT0nTUInfHx1PT09J01JQicpIHJldHVybiB2KjEwMjQqMTAyNDsgcmV0dXJuIHYqMTAyNCoxMDI0KjEwMjQ7IH0KZnVuY3Rpb24gYnl0ZXNUb0dCKGIpeyByZXR1cm4gYi8oMTAyNCoxMDI0KjEwMjQpOyB9CgovLyBGb3JtYXQgc2l6ZSBzdHJpbmcgdG8gR0IgZGlzcGxheSAoaGFuZGxlcyBNQiBwcm9wZXJseSkKZnVuY3Rpb24gZm9ybWF0U2l6ZVRvR0Ioc2l6ZVN0cikgewogIGNvbnN0IGJ5dGVzID0gcGFyc2VTaXplVGV4dChzaXplU3RyKTsKICBjb25zdCBnYiA9IGJ5dGVzVG9HQihieXRlcyk7CiAgaWYgKGdiIDwgMC4xKSByZXR1cm4gKGdiICogMTAyNCkudG9GaXhlZCgwKSArICcgTUInOwogIHJldHVybiBnYi50b0ZpeGVkKDEpICsgJyBHQic7Cn0KCmZ1bmN0aW9uIGJ1aWxkRHluYW1pY0NvbnRyb2xzKCkgewogIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkeW5hbWljQ29udHJvbHMnKTsKICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7CiAgY29udGFpbmVyLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSAnMWZyIDFmcic7CiAgY29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnOwogIAogIENPTkZJRy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChjdHJsID0+IHsKICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgbGFiZWwuY2xhc3NOYW1lID0gJ3NtYWxsJzsKICAgIGxhYmVsLnRleHRDb250ZW50ID0gY3RybC5sYWJlbDsKICAgIGRpdi5hcHBlbmRDaGlsZChsYWJlbCk7CiAgICBpZiAoY3RybC50eXBlID09PSAnc2VsZWN0JykgewogICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKICAgICAgc2VsZWN0LmlkID0gY3RybC5pZDsKICAgICAgc2VsZWN0LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGN0cmwubGFiZWwpOwogICAgICBjdHJsLm9wdGlvbnMuZm9yRWFjaChvcHQgPT4gewogICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgIG9wdGlvbi52YWx1ZSA9IG9wdC52YWx1ZTsKICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBvcHQubGFiZWw7CiAgICAgICAgaWYgKG9wdC52YWx1ZSA9PT0gY3RybC5kZWZhdWx0KSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICB9KTsKICAgICAgZGl2LmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHVwZGF0ZUZpbGVuYW1lUHJldmlldygpKTsKICAgICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHVwZGF0ZVRvdGFscygpKTsKICAgIH0KICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpOwogIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBsb2FkWE1MKCl7CiAgdHJ5ewogICAgY29uc3QgdHh0ID0gYXdhaXQgZmV0Y2goQ09ORklHLnhtbEZpbGUpLnRoZW4ocj0+ci50ZXh0KCkpOwogICAgY29uc3QgeG1sID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh0eHQsJ2FwcGxpY2F0aW9uL3htbCcpOwogICAgc3RhdGUueG1sID0geG1sOwogICAgCiAgICBjb25zdCByb290ID0geG1sLmRvY3VtZW50RWxlbWVudDsKICAgIENPTkZJRy5wbGF0Zm9ybSA9IHJvb3QuZ2V0QXR0cmlidXRlKCdwbGF0Zm9ybScpIHx8ICdVbmtub3duJzsKICAgIENPTkZJRy5zdHJ1Y3R1cmVUeXBlID0gcm9vdC5nZXRBdHRyaWJ1dGUoJ3N0cnVjdHVyZVR5cGUnKSB8fCAnZm9sZGVycyc7CiAgICAKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGl0bGUnKS50ZXh0Q29udGVudCA9IGAke0NPTkZJRy5wbGF0Zm9ybX0gR2FtZXNgOwogICAgCiAgICBsZXQgaXRlbXMgPSBbXTsKICAgIAogICAgaWYgKENPTkZJRy5zdHJ1Y3R1cmVUeXBlID09PSAnZm9sZGVycycpIHsKICAgICAgaXRlbXMgPSBBcnJheS5mcm9tKHhtbC5xdWVyeVNlbGVjdG9yQWxsKCdmb2xkZXInKSkKICAgICAgICAubWFwKGYgPT4gKHsKICAgICAgICAgIG5hbWU6IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksCiAgICAgICAgICBzY29yZTogZi5nZXRBdHRyaWJ1dGUoJ3Njb3JlJykgfHwgJzAnLAogICAgICAgICAgc2l6ZTogZi5nZXRBdHRyaWJ1dGUoJ3NpemUnKSB8fCAnMCBHaUInLAogICAgICAgICAgZGF0ZTogZi5nZXRBdHRyaWJ1dGUoJ2RhdGVDcmVhdGVkJykgfHwgJycsCiAgICAgICAgICBmaWxlQ291bnQ6IGYuZ2V0QXR0cmlidXRlKCdmaWxlQ291bnQnKSB8fCAnMCcsCiAgICAgICAgICBmaWxlczogQXJyYXkuZnJvbShmLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKSkubWFwKHggPT4geC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSkKICAgICAgICB9KSk7CiAgICB9IGVsc2UgewogICAgICBpdGVtcyA9IEFycmF5LmZyb20oeG1sLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKSkKICAgICAgICAubWFwKGYgPT4gKHsKICAgICAgICAgIG5hbWU6IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksCiAgICAgICAgICBmaWxlbmFtZTogZi5nZXRBdHRyaWJ1dGUoJ2ZpbGVuYW1lJykgfHwgZi5nZXRBdHRyaWJ1dGUoJ25hbWUnKSwKICAgICAgICAgIHNpemU6IGYuZ2V0QXR0cmlidXRlKCdzaXplJykgfHwgJzAgR2lCJywKICAgICAgICAgIGRhdGU6IGYuZ2V0QXR0cmlidXRlKCdkYXRlQ3JlYXRlZCcpIHx8ICcnCiAgICAgICAgfSkpOwogICAgfQogICAgCiAgICBzdGF0ZS5pdGVtcyA9IGl0ZW1zOwogICAgcmVuZGVyTGlzdChpdGVtcyk7CiAgICB0b2FzdChgTG9hZGVkICR7aXRlbXMubGVuZ3RofSAke0NPTkZJRy5wbGF0Zm9ybX0gZ2FtZXNgKTsKICB9Y2F0Y2goZSl7IAogICAgY29uc29sZS5lcnJvcihlKTsgCiAgICBsZWZ0UGFuZS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iY29sb3I6I2I5MWMxYztwYWRkaW5nOjEycHgiPkZhaWxlZCB0byBsb2FkICR7Q09ORklHLnhtbEZpbGV9PC9kaXY+YDsgCiAgfQp9CgoKZnVuY3Rpb24gcmVuZGVyTGlzdChsaXN0KXsKICBsZWZ0UGFuZS5pbm5lckhUTUwgPSAnJzsKCiAgLy8gQXBwbHkgZ2VucmUgZmlsdGVyCiAgY29uc3QgZmlsdGVyZWRMaXN0ID0gZmlsdGVyQnlHZW5yZShsaXN0KTsKCiAgaWYoIWZpbHRlcmVkTGlzdHx8IWZpbHRlcmVkTGlzdC5sZW5ndGgpewogICAgbGVmdFBhbmUuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6NDBweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjp2YXIoLS1tdXRlZCkiPk5vIGdhbWVzIGZvdW5kPC9kaXY+JzsKICAgIHJldHVybjsKICB9CgogIGZpbHRlcmVkTGlzdC5mb3JFYWNoKGl0ZW09PnsKICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgcm93LmNsYXNzTmFtZT0naXRlbSc7CiAgICByb3cuZGF0YXNldC5uYW1lID0gaXRlbS5uYW1lOwogICAgcm93LmRhdGFzZXQuc2l6ZSA9IGl0ZW0uc2l6ZTsKICAgIGlmIChpdGVtLmZpbGVuYW1lKSByb3cuZGF0YXNldC5maWxlbmFtZSA9IGl0ZW0uZmlsZW5hbWU7CgogICAgY29uc3QgaGFzRmlsZXMgPSBDT05GSUcuc3RydWN0dXJlVHlwZSA9PT0gJ2ZvbGRlcnMnICYmIGl0ZW0uZmlsZXMgJiYgaXRlbS5maWxlcy5sZW5ndGggPiAwOwogICAgY29uc3QgaXNTZWxlY3RlZCA9IHN0YXRlLnNlbGVjdGVkLnNvbWUocz0+cy5uYW1lPT09aXRlbS5uYW1lKTsKCiAgICAvLyBQYXJzZSBzaXplIGZvciBkaXNwbGF5CiAgICBjb25zdCBzaXplRGlzcGxheSA9IGZvcm1hdFNpemVUb0dCKGl0ZW0uc2l6ZSk7CgogICAgLy8gU2NvcmUgaW5mbwogICAgY29uc3Qgc2NvcmVWYWwgPSBpdGVtLnNjb3JlID8gcGFyc2VJbnQoaXRlbS5zY29yZSkgOiAwOwoKICAgIC8vIEdldCBpY29uIGZyb20gY2FjaGUKICAgIGNvbnN0IGljb25VcmwgPSBnZXRJY29uVXJsKGl0ZW0ubmFtZSk7CiAgICBjb25zdCB0aHVtYkNvbnRlbnQgPSBpY29uVXJsCiAgICAgID8gYDxpbWcgc3JjPSIke2ljb25Vcmx9IiBhbHQ9IiIgbG9hZGluZz0ibGF6eSIgZGVjb2Rpbmc9ImFzeW5jIiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9J25vbmUnO3RoaXMubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJyI+YAogICAgICA6ICcnOwogICAgY29uc3QgcGxhY2Vob2xkZXJTdHlsZSA9IGljb25VcmwgPyAnZGlzcGxheTpub25lJyA6ICcnOwoKICAgIHJvdy5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgY2xhc3M9Iml0ZW0tdGh1bWIiPgogICAgICAgICR7dGh1bWJDb250ZW50fQogICAgICAgIDxzcGFuIGNsYXNzPSJpdGVtLXRodW1iLXBsYWNlaG9sZGVyIiBzdHlsZT0iJHtwbGFjZWhvbGRlclN0eWxlfSI+8J+Orjwvc3Bhbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9Iml0ZW0tY29udGVudCI+CiAgICAgICAgPGRpdiBjbGFzcz0iaXRlbS10aXRsZSI+JHtlc2MoaXRlbS5uYW1lKX08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJpdGVtLXNpemUiPiR7c2l6ZURpc3BsYXl9PC9kaXY+CiAgICAgICAgJHtzY29yZVZhbCA+IDAgPyBgPGRpdiBjbGFzcz0iaXRlbS1tZXRhIj5TY29yZTogJHtzY29yZVZhbH08L2Rpdj5gIDogJyd9CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJpdGVtLWNoZWNrYm94Ij48L2Rpdj4KICAgIGA7CgogICAgaWYoaXNTZWxlY3RlZCkgcm93LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7CgogICAgLy8gTG9uZyBwcmVzcyB0byBzaG93IGdhbWUgaW5mbwogICAgbGV0IHByZXNzVGltZXIgPSBudWxsOwogICAgbGV0IHByZXNzVHJpZ2dlcmVkID0gZmFsc2U7CgogICAgY29uc3Qgc3RhcnRQcmVzcyA9IChlKSA9PiB7CiAgICAgIHByZXNzVHJpZ2dlcmVkID0gZmFsc2U7CiAgICAgIHByZXNzVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBwcmVzc1RyaWdnZXJlZCA9IHRydWU7CiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2xvbmctcHJlc3MtYWN0aXZlJyk7CiAgICAgICAgc2hvd0dhbWVJbmZvKGl0ZW0pOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcm93LmNsYXNzTGlzdC5yZW1vdmUoJ2xvbmctcHJlc3MtYWN0aXZlJyksIDIwMCk7CiAgICAgIH0sIExPTkdfUFJFU1NfRFVSQVRJT04pOwogICAgfTsKCiAgICBjb25zdCBlbmRQcmVzcyA9IChlKSA9PiB7CiAgICAgIGNsZWFyVGltZW91dChwcmVzc1RpbWVyKTsKICAgICAgaWYgKHByZXNzVHJpZ2dlcmVkKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0KICAgIH07CgogICAgY29uc3QgY2FuY2VsUHJlc3MgPSAoKSA9PiB7CiAgICAgIGNsZWFyVGltZW91dChwcmVzc1RpbWVyKTsKICAgIH07CgogICAgLy8gVG91Y2ggZXZlbnRzCiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHN0YXJ0UHJlc3MsIHsgcGFzc2l2ZTogdHJ1ZSB9KTsKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGVuZFByZXNzKTsKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGNhbmNlbFByZXNzKTsKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBjYW5jZWxQcmVzcyk7CgogICAgLy8gTW91c2UgbG9uZyBwcmVzcyAoZGVza3RvcCkKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4gewogICAgICBpZiAoZS5idXR0b24gPT09IDApIHN0YXJ0UHJlc3MoZSk7CiAgICB9KTsKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZW5kUHJlc3MpOwogICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxQcmVzcyk7CgogICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2KT0+ewogICAgICAvLyBTa2lwIGlmIGxvbmcgcHJlc3Mgd2FzIHRyaWdnZXJlZAogICAgICBpZiAoZXYudGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmNsYXNzTGlzdC5jb250YWlucygnbG9uZy1wcmVzcy1hY3RpdmUnKSkgcmV0dXJuOwoKICAgICAgaWYoZXYuYWx0S2V5KXsKICAgICAgICBzaG93R2FtZUluZm8oaXRlbSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRvZ2dsZVNlbGVjdChpdGVtLCByb3cpOwogICAgfSk7CgogICAgbGVmdFBhbmUuYXBwZW5kQ2hpbGQocm93KTsKICB9KTsKCiAgdXBkYXRlQ1RBQnV0dG9uKCk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUNUQUJ1dHRvbigpIHsKICBjb25zdCBjdGFUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N0YVRleHQnKTsKICBjb25zdCBjb3VudCA9IHN0YXRlLnNlbGVjdGVkLmxlbmd0aDsKICBjb25zdCB0b3RhbEJ5dGVzID0gc3RhdGUuc2VsZWN0ZWQucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHBhcnNlU2l6ZVRleHQocy5zaXplKSwgMCk7CiAgY29uc3QgZ2IgPSBieXRlc1RvR0IodG90YWxCeXRlcykudG9GaXhlZCgxKTsKCiAgaWYgKGNvdW50ID4gMCkgewogICAgY3RhVGV4dC50ZXh0Q29udGVudCA9IGBVcGxvYWQgJHtjb3VudH0gR2FtZSR7Y291bnQgIT09IDEgPyAncycgOiAnJ30gKCR7Z2J9IEdCKWA7CiAgfSBlbHNlIHsKICAgIGN0YVRleHQudGV4dENvbnRlbnQgPSAnVXBsb2FkIFNlbGVjdGlvbic7CiAgfQp9CgpmdW5jdGlvbiB0b2dnbGVTZWxlY3QoaXRlbSwgcm93RWwpeyAKICBjb25zdCBpZHggPSBzdGF0ZS5zZWxlY3RlZC5maW5kSW5kZXgocz0+cy5uYW1lPT09aXRlbS5uYW1lKTsgCiAgaWYoaWR4Pj0wKXsgCiAgICBzdGF0ZS5zZWxlY3RlZC5zcGxpY2UoaWR4LDEpOyAKICAgIGlmKHJvd0VsKSByb3dFbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpOyAKICB9IGVsc2UgeyAKICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goeyAKICAgICAgbmFtZTppdGVtLm5hbWUsIAogICAgICBmaWxlbmFtZTogaXRlbS5maWxlbmFtZSB8fCBpdGVtLm5hbWUsCiAgICAgIHNpemU6aXRlbS5zaXplIAogICAgfSk7IAogICAgaWYocm93RWwpIHJvd0VsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7IAogIH0KICB1cGRhdGVUb3RhbHMoKTsgCiAgcmVuZGVyT3ZlcmxheSgpOyAKfQoKZnVuY3Rpb24gcmVuZGVyT3ZlcmxheSgpIHsKICBvdmVybGF5Qm9keS5pbm5lckhUTUwgPSAnJzsKICBzdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKChzLGkpPT57CiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHJvdy5jbGFzc05hbWU9J3Jvdyc7CiAgICBjb25zdCBpY29uVXJsID0gZ2V0SWNvblVybChzLm5hbWUpOwogICAgY29uc3Qgc2l6ZURpc3BsYXkgPSBmb3JtYXRTaXplVG9HQihzLnNpemUpOwogICAgcm93LmlubmVySFRNTCA9IGAKICAgICAgPGRpdiBjbGFzcz0iaXRlbS10aHVtYiIgc3R5bGU9IndpZHRoOjQ0cHg7aGVpZ2h0OjQ0cHg7ZmxleC1zaHJpbms6MCI+CiAgICAgICAgJHtpY29uVXJsID8gYDxpbWcgc3JjPSIke2ljb25Vcmx9IiBhbHQ9IiIgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOjZweCI+YCA6ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjE4cHgiPvCfjq48L3NwYW4+J30KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJvdy1pbmZvIj4KICAgICAgICA8c3Ryb25nPiR7aSsxfS4gJHtlc2Mocy5uYW1lKX08L3N0cm9uZz4KICAgICAgICA8ZGl2IGNsYXNzPSdtZXRhJz4ke3NpemVEaXNwbGF5fTwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0icm93LWFjdGlvbnMiPgogICAgICAgIDxidXR0b24gY2xhc3M9J2ljb24gdXAnPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xOCAxNWwtNi02LTYgNiIvPjwvc3ZnPjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9J2ljb24gZG93bic+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTYgOWw2IDYgNi02Ii8+PC9zdmc+PC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0naWNvbiByZW1vdmUnPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+PC9idXR0b24+CiAgICAgIDwvZGl2PmA7CgogICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy51cCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsKICAgICAgaWYoaT4wKXsKICAgICAgICBbc3RhdGUuc2VsZWN0ZWRbaS0xXSwgc3RhdGUuc2VsZWN0ZWRbaV1dID0gW3N0YXRlLnNlbGVjdGVkW2ldLCBzdGF0ZS5zZWxlY3RlZFtpLTFdXTsKICAgICAgICByZW5kZXJPdmVybGF5KCk7CiAgICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICAgICAgb3ZlcmxheUJvZHkuY2hpbGRyZW5baS0xXS5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTsKICAgICAgfQogICAgfSk7CgogICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy5kb3duJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+ewogICAgICBpZihpPHN0YXRlLnNlbGVjdGVkLmxlbmd0aC0xKXsKICAgICAgICBbc3RhdGUuc2VsZWN0ZWRbaSsxXSwgc3RhdGUuc2VsZWN0ZWRbaV1dID0gW3N0YXRlLnNlbGVjdGVkW2ldLCBzdGF0ZS5zZWxlY3RlZFtpKzFdXTsKICAgICAgICByZW5kZXJPdmVybGF5KCk7CiAgICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICAgICAgb3ZlcmxheUJvZHkuY2hpbGRyZW5baSsxXS5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTsKICAgICAgfQogICAgfSk7CgogICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57CiAgICAgIGNvbnN0IHJlbW92ZWQgPSBzdGF0ZS5zZWxlY3RlZC5zcGxpY2UoaSwxKVswXTsKICAgICAgY29uc3QgbGVmdFJvdyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkKICAgICAgICAuZmluZCh4PT54LmRhdGFzZXQubmFtZT09PXJlbW92ZWQubmFtZSk7CiAgICAgIGlmKGxlZnRSb3cpIGxlZnRSb3cuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsKICAgICAgcmVuZGVyT3ZlcmxheSgpOwogICAgICByZW5kZXJMaXN0KHN0YXRlLml0ZW1zKTsKICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICB9KTsKCiAgICBvdmVybGF5Qm9keS5hcHBlbmRDaGlsZChyb3cpOwogIH0pOwogICQoJ292ZXJsYXlDb3VudCcpLnRleHRDb250ZW50ID0gc3RhdGUuc2VsZWN0ZWQubGVuZ3RoOwogIHJlbmRlclNlbGVjdGVkUGFuZWwoKTsKfQoKJCgnc2hvd1NlbGVjdGVkJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9Pnsgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyByZW5kZXJPdmVybGF5KCk7IH0pOwokKCdjbG9zZU92ZXJsYXknKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT4gb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKTsKCi8vIENUQSBTaG93IGJ1dHRvbgokKCdjdGFTaG93Jyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICByZW5kZXJPdmVybGF5KCk7Cn0pOwoKLy8gQ1RBIFVwbG9hZCBidXR0b24KJCgnY3RhVXBsb2FkJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogIGRvVXBsb2FkKCk7Cn0pOwoKLy8gUHJldmVudCBhY2NpZGVudGFsIHBhZ2UgcmVmcmVzaC9jbG9zZSB3aGVuIHVzZXIgaGFzIHNlbGVjdGlvbnMKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIChlKSA9PiB7CiAgaWYgKHN0YXRlLnNlbGVjdGVkLmxlbmd0aCA+IDApIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIGUucmV0dXJuVmFsdWUgPSAnJzsKICAgIHJldHVybiAnJzsKICB9Cn0pOwoKZnVuY3Rpb24gc2hvd0ZpbGVzKG5hbWUsIGZpbGVzLCBzaXplKSB7CiAgaWYgKCFmaWxlcyB8fCAhZmlsZXMubGVuZ3RoKSB7CiAgICBhbGVydChgTm8gZmlsZXMgZm9yICR7bmFtZX1gKTsKICAgIHJldHVybjsKICB9CgogIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVzTW9kYWwnKTsKICBtb2RhbC5pbm5lckhUTUwgPSAnJzsgCiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgCiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgaGVhZGVyLmlubmVySFRNTCA9IGA8c3Ryb25nPiR7ZXNjKG5hbWUpfTwvc3Ryb25nPjxicj48c3BhbiBjbGFzcz0ibWV0YSI+U2l6ZTogJHtlc2Moc2l6ZSl9IC0gJHtmaWxlcy5sZW5ndGh9IGZpbGVzPC9zcGFuPmA7CiAgbW9kYWwuYXBwZW5kQ2hpbGQoaGVhZGVyKTsKCiAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGxpc3Quc3R5bGUubWFyZ2luVG9wID0gJzhweCc7CiAgbW9kYWwuYXBwZW5kQ2hpbGQobGlzdCk7CgogIGxldCBpbmRleCA9IDA7CiAgY29uc3QgYmF0Y2ggPSAyMDsKICBmdW5jdGlvbiBsb2FkTW9yZSgpIHsKICAgIGNvbnN0IG5leHQgPSBmaWxlcy5zbGljZShpbmRleCwgaW5kZXgrYmF0Y2gpOwogICAgbGlzdC5pbm5lckhUTUwgKz0gbmV4dC5tYXAoZj0+ZXNjKGYpKS5qb2luKCc8YnI+Jyk7CiAgICBpbmRleCArPSBiYXRjaDsKICAgIGlmIChpbmRleCA+PSBmaWxlcy5sZW5ndGgpIHsKICAgICAgbW9yZUJ0bi5yZW1vdmUoKTsKICAgIH0KICB9CgogIGNvbnN0IG1vcmVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICBtb3JlQnRuLnRleHRDb250ZW50ID0gJ01vcmUnOwogIG1vcmVCdG4uY2xhc3NOYW1lID0gJ2J0biBnaG9zdCc7CiAgbW9yZUJ0bi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7CiAgbW9yZUJ0bi5vbmNsaWNrID0gbG9hZE1vcmU7CiAgbW9kYWwuYXBwZW5kQ2hpbGQobW9yZUJ0bik7CgogIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgY2xvc2VCdG4udGV4dENvbnRlbnQgPSAnQ2xvc2UnOwogIGNsb3NlQnRuLmNsYXNzTmFtZSA9ICdidG4nOwogIGNsb3NlQnRuLnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gKCk9PnsgbW9kYWwuc3R5bGUuZGlzcGxheT0nbm9uZSc7IG1vZGFsLmlubmVySFRNTD0nJzsgfTsKICBtb2RhbC5hcHBlbmRDaGlsZChjbG9zZUJ0bik7CiAgbG9hZE1vcmUoKTsKfQoKZnVuY3Rpb24gZ2V0Q29udHJvbFZhbHVlcygpIHsKICBjb25zdCB2YWx1ZXMgPSB7fTsKICBDT05GSUcuc3RvcmFnZUNvbnRyb2xzLmZvckVhY2goY3RybCA9PiB7CiAgICBjb25zdCBlbCA9ICQoY3RybC5pZCk7CiAgICBpZiAoZWwpIHZhbHVlc1tjdHJsLmlkXSA9IGVsLnZhbHVlOwogIH0pOwogIHJldHVybiB2YWx1ZXM7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVRvdGFscygpIHsKICBjb25zdCB0b3RhbEJ5dGVzID0gc3RhdGUuc2VsZWN0ZWQucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHBhcnNlU2l6ZVRleHQocy5zaXplKSwgMCk7CiAgY29uc3QgZ2IgPSBieXRlc1RvR0IodG90YWxCeXRlcyk7CgogIC8vIFVwZGF0ZSBtYWluIHNlbGVjdGVkIHNpemUgZGlzcGxheQogIGNvbnN0IHNlbGVjdGVkU2l6ZUVsID0gJCgnc2VsZWN0ZWRTaXplJyk7CiAgaWYgKHNlbGVjdGVkU2l6ZUVsKSBzZWxlY3RlZFNpemVFbC50ZXh0Q29udGVudCA9IGdiLnRvRml4ZWQoMik7CgogIC8vIFVwZGF0ZSB0aGUgc3RhdCBjYXJkIGRpc3BsYXkKICBjb25zdCBzZWxlY3RlZFNpemVEaXNwbGF5ID0gJCgnc2VsZWN0ZWRTaXplRGlzcGxheScpOwogIGlmIChzZWxlY3RlZFNpemVEaXNwbGF5KSBzZWxlY3RlZFNpemVEaXNwbGF5LnRleHRDb250ZW50ID0gZ2IudG9GaXhlZCgxKTsKCiAgLy8gQ2FsY3VsYXRlIHRpbWUgZXN0aW1hdGUKICBjb25zdCBibG9hdGVkID0gdG90YWxCeXRlcyAqIDEuMjsKICBjb25zdCBzcGVlZCA9IDE0ICogMTAyNCAqIDEwMjQ7CiAgY29uc3Qgc2VjcyA9IE1hdGguY2VpbChibG9hdGVkIC8gc3BlZWQpOwogIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNzLzM2MDApOwogIGNvbnN0IG1pbnMgPSBNYXRoLmZsb29yKChzZWNzJTM2MDApLzYwKTsKCiAgY29uc3QgaW5zdGFsbEVsID0gJCgnaW5zdGFsbEVzdGltYXRlJyk7CiAgaWYgKGluc3RhbGxFbCkgewogICAgaWYgKGhvdXJzID4gMCkgewogICAgICBpbnN0YWxsRWwudGV4dENvbnRlbnQgPSBgfiR7aG91cnN9aCAke21pbnN9bWA7CiAgICB9IGVsc2UgewogICAgICBpbnN0YWxsRWwudGV4dENvbnRlbnQgPSBgfiR7bWluc31tYDsKICAgIH0KICB9CgogIC8vIFVwZGF0ZSBjb3VudAogIGNvbnN0IGNvdW50RWwgPSAkKCdjb3VudCcpOwogIGlmIChjb3VudEVsKSBjb3VudEVsLnRleHRDb250ZW50ID0gc3RhdGUuc2VsZWN0ZWQubGVuZ3RoOwoKICAvLyBVcGRhdGUgc2VsZWN0ZWQgcGFuZWwgY291bnQKICBjb25zdCBwYW5lbENvdW50ID0gJCgnc2VsZWN0ZWRQYW5lbENvdW50Jyk7CiAgaWYgKHBhbmVsQ291bnQpIHBhbmVsQ291bnQudGV4dENvbnRlbnQgPSBgJHtzdGF0ZS5zZWxlY3RlZC5sZW5ndGh9IGl0ZW0ke3N0YXRlLnNlbGVjdGVkLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfWA7CgogIC8vIFVwZGF0ZSBDVEEgYmFkZ2UKICBjb25zdCBjdGFCYWRnZSA9ICQoJ2N0YUJhZGdlJyk7CiAgaWYgKGN0YUJhZGdlKSBjdGFCYWRnZS50ZXh0Q29udGVudCA9IHN0YXRlLnNlbGVjdGVkLmxlbmd0aDsKCiAgLy8gR2V0IHN0b3JhZ2UgdmFsdWVzCiAgY29uc3QgdmFsdWVzID0gZ2V0Q29udHJvbFZhbHVlcygpOwogIGNvbnN0IHNwYWNlRm9yR2FtZXMgPSBDT05GSUcuY2FsY3VsYXRlU3RvcmFnZSh2YWx1ZXMpOwogIGNvbnN0IHRvdGFsQ2FwYWNpdHkgPSBpc0Zpbml0ZShzcGFjZUZvckdhbWVzKSA/IHNwYWNlRm9yR2FtZXMgOiAwOwoKICAvLyBVcGRhdGUgQ1RBIHdhcm5pbmcgaWYgZXhjZWVkcyBjYXBhY2l0eQogIGNvbnN0IGN0YVVwbG9hZCA9ICQoJ2N0YVVwbG9hZCcpOwogIGlmIChjdGFVcGxvYWQpIHsKICAgIGlmICh0b3RhbENhcGFjaXR5ID4gMCAmJiBnYiA+IHRvdGFsQ2FwYWNpdHkpIHsKICAgICAgY3RhVXBsb2FkLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKTsKICAgICAgJCgnY3RhVGV4dCcpLnRleHRDb250ZW50ID0gJ0V4Y2VlZHMgTGltaXQhJzsKICAgIH0gZWxzZSB7CiAgICAgIGN0YVVwbG9hZC5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nJyk7CiAgICAgICQoJ2N0YVRleHQnKS50ZXh0Q29udGVudCA9ICdVcGxvYWQnOwogICAgfQogIH0KCiAgLy8gVXBkYXRlIHNwYWNlIGRpc3BsYXkKICBjb25zdCBzcGFjZUVsID0gJCgnc3BhY2UnKTsKICBpZiAoc3BhY2VFbCkgc3BhY2VFbC50ZXh0Q29udGVudCA9IHRvdGFsQ2FwYWNpdHk7CgogIC8vIENhbGN1bGF0ZSBzdG9yYWdlIGJyZWFrZG93bgogIGNvbnN0IHVzZWRTcGFjZSA9IDA7IC8vIENvdWxkIGJlIGNhbGN1bGF0ZWQgZnJvbSBleGlzdGluZyBzZWxlY3Rpb25zIG9yIGNvbmZpZwogIGNvbnN0IHNlbGVjdGVkU3BhY2UgPSBnYjsKICBjb25zdCBmcmVlU3BhY2UgPSBNYXRoLm1heCgwLCB0b3RhbENhcGFjaXR5IC0gc2VsZWN0ZWRTcGFjZSAtIHVzZWRTcGFjZSk7CgogIC8vIFVwZGF0ZSBsZWdlbmQgdmFsdWVzCiAgY29uc3QgdXNlZFNwYWNlRWwgPSAkKCd1c2VkU3BhY2UnKTsKICBpZiAodXNlZFNwYWNlRWwpIHVzZWRTcGFjZUVsLnRleHRDb250ZW50ID0gdXNlZFNwYWNlLnRvRml4ZWQoMCk7CgogIGNvbnN0IGZyZWVTcGFjZUVsID0gJCgnZnJlZVNwYWNlJyk7CiAgaWYgKGZyZWVTcGFjZUVsKSBmcmVlU3BhY2VFbC50ZXh0Q29udGVudCA9IGZyZWVTcGFjZS50b0ZpeGVkKDEpOwoKICAvLyBVcGRhdGUgcHJvZ3Jlc3MgYmFyCiAgY29uc3QgcHJvZ3Jlc3NVc2VkID0gJCgncHJvZ3Jlc3NVc2VkJyk7CiAgY29uc3QgcHJvZ3Jlc3NTZWxlY3RlZCA9ICQoJ3Byb2dyZXNzU2VsZWN0ZWQnKTsKCiAgaWYgKHRvdGFsQ2FwYWNpdHkgPiAwKSB7CiAgICBjb25zdCB1c2VkUGVyY2VudCA9ICh1c2VkU3BhY2UgLyB0b3RhbENhcGFjaXR5KSAqIDEwMDsKICAgIGNvbnN0IHNlbGVjdGVkUGVyY2VudCA9IE1hdGgubWluKChzZWxlY3RlZFNwYWNlIC8gdG90YWxDYXBhY2l0eSkgKiAxMDAsIDEwMCAtIHVzZWRQZXJjZW50KTsKCiAgICBpZiAocHJvZ3Jlc3NVc2VkKSBwcm9ncmVzc1VzZWQuc3R5bGUud2lkdGggPSBgJHt1c2VkUGVyY2VudH0lYDsKICAgIGlmIChwcm9ncmVzc1NlbGVjdGVkKSBwcm9ncmVzc1NlbGVjdGVkLnN0eWxlLndpZHRoID0gYCR7c2VsZWN0ZWRQZXJjZW50fSVgOwogIH0gZWxzZSB7CiAgICBpZiAocHJvZ3Jlc3NVc2VkKSBwcm9ncmVzc1VzZWQuc3R5bGUud2lkdGggPSAnMCUnOwogICAgaWYgKHByb2dyZXNzU2VsZWN0ZWQpIHByb2dyZXNzU2VsZWN0ZWQuc3R5bGUud2lkdGggPSAnMCUnOwogIH0KCiAgLy8gSGlnaGxpZ2h0IGlmIG92ZXIgY2FwYWNpdHkKICBpZiAoZ2IgPiB0b3RhbENhcGFjaXR5ICYmIHRvdGFsQ2FwYWNpdHkgPiAwKSB7CiAgICBpZiAoc2VsZWN0ZWRTaXplRWwpIHsKICAgICAgc2VsZWN0ZWRTaXplRWwuc3R5bGUuY29sb3IgPSAndmFyKC0tZGFuZ2VyKSc7CiAgICAgIHNlbGVjdGVkU2l6ZUVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7CiAgICB9CiAgICBpZiAoc2VsZWN0ZWRTaXplRGlzcGxheSkgewogICAgICBzZWxlY3RlZFNpemVEaXNwbGF5LnN0eWxlLmNvbG9yID0gJ3ZhcigtLWRhbmdlciknOwogICAgfQogIH0gZWxzZSB7CiAgICBpZiAoc2VsZWN0ZWRTaXplRWwpIHsKICAgICAgc2VsZWN0ZWRTaXplRWwuc3R5bGUuY29sb3IgPSAnJzsKICAgICAgc2VsZWN0ZWRTaXplRWwuc3R5bGUuZm9udFdlaWdodCA9ICcnOwogICAgfQogICAgaWYgKHNlbGVjdGVkU2l6ZURpc3BsYXkpIHsKICAgICAgc2VsZWN0ZWRTaXplRGlzcGxheS5zdHlsZS5jb2xvciA9ICcnOwogICAgfQogIH0KCiAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7CiAgdXBkYXRlQ1RBQnV0dG9uKCk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUZpbGVuYW1lUHJldmlldygpIHsKICBjb25zdCBjdXN0b21lciA9ICgkKCdjdXN0b21lcicpLnZhbHVlIHx8ICdjdXN0b21lcicpLnRyaW0oKS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpLnRvTG93ZXJDYXNlKCk7CiAgY29uc3QgdmFsdWVzID0gZ2V0Q29udHJvbFZhbHVlcygpOwogIGNvbnN0IHRva2VucyA9IFtjdXN0b21lcl07CiAgCiAgQ09ORklHLnN0b3JhZ2VDb250cm9scy5mb3JFYWNoKGN0cmwgPT4gewogICAgaWYgKGN0cmwuZmlsZW5hbWVUb2tlbikgewogICAgICBjb25zdCB2YWwgPSB2YWx1ZXNbY3RybC5pZF0gfHwgY3RybC5kZWZhdWx0OwogICAgICBjb25zdCB0b2tlbiA9IGN0cmwuZmlsZW5hbWVUb2tlbiA9PT0gdHJ1ZSA/IHZhbCA6IChjdHJsLmZpbGVuYW1lVG9rZW4gKyB2YWwpOwogICAgICB0b2tlbnMucHVzaCh0b2tlbik7CiAgICB9CiAgfSk7CiAgCiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICBjb25zdCBzdGFtcCA9IG5vdy5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkgKwogICAgU3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJykgKwogICAgU3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJykgKwogICAgU3RyaW5nKG5vdy5nZXRTZWNvbmRzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgdG9rZW5zLnB1c2goc3RhbXApOwogIAogICQoJ2ZpbGVuYW1lUHJldmlldycpLnRleHRDb250ZW50ID0gdG9rZW5zLmpvaW4oJ18nKSArIENPTkZJRy5jbGllbnRGaWxlRXh0Owp9CgpmdW5jdGlvbiBkZWJvdW5jZShmbixtcz0yMDApeyBsZXQgaDsgcmV0dXJuICguLi5hKT0+eyBjbGVhclRpbWVvdXQoaCk7IGg9c2V0VGltZW91dCgoKT0+Zm4oLi4uYSksbXMpOyB9OyB9CgpmdW5jdGlvbiBzbWFydFNlYXJjaChpdGVtcywgcXVlcnkpIHsKICBpZiAoIXF1ZXJ5IHx8ICFxdWVyeS50cmltKCkpIHJldHVybiBpdGVtczsKICAKICBjb25zdCBxID0gcXVlcnkudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgCiAgLy8gUGFyc2Ugc2VhcmNoIHRlcm1zOiBzdXBwb3J0IHF1b3RlcyBmb3IgZXhhY3QgcGhyYXNlcwogIGNvbnN0IHRlcm1zID0gW107CiAgY29uc3QgcXVvdGVSZWdleCA9IC8iKFteIl0rKSJ8JyhbXiddKyknfChcUyspL2c7CiAgbGV0IG1hdGNoOwogIAogIHdoaWxlICgobWF0Y2ggPSBxdW90ZVJlZ2V4LmV4ZWMocSkpICE9PSBudWxsKSB7CiAgICBjb25zdCB0ZXJtID0gKG1hdGNoWzFdIHx8IG1hdGNoWzJdIHx8IG1hdGNoWzNdKS50b0xvd2VyQ2FzZSgpOwogICAgdGVybXMucHVzaCh0ZXJtKTsKICB9CiAgCiAgaWYgKHRlcm1zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGl0ZW1zOwogIAogIC8vIEZpbHRlciBpdGVtczogQUxMIHRlcm1zIG11c3QgbWF0Y2ggKEFORCBsb2dpYykKICByZXR1cm4gaXRlbXMuZmlsdGVyKGl0ZW0gPT4gewogICAgY29uc3Qgc2VhcmNoVGV4dCA9IChpdGVtLm5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCkKICAgICAgLnJlcGxhY2UoL1teXHdcc10vZywgJyAnKTsgLy8gUmVtb3ZlIHB1bmN0dWF0aW9uIGZvciBtYXRjaGluZwogICAgCiAgICByZXR1cm4gdGVybXMuZXZlcnkodGVybSA9PiBzZWFyY2hUZXh0LmluY2x1ZGVzKHRlcm0pKTsKICB9KTsKfQoKLy8gQXV0by1ibHVyIHNlYXJjaCBvbiBtb2JpbGUgYWZ0ZXIgdHlwaW5nIHN0b3BzCmxldCBzZWFyY2hCbHVyVGltZXIgPSBudWxsOwokKCdzZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGRlYm91bmNlKChlKT0+ewogIGNvbnN0IHEgPSBlLnRhcmdldC52YWx1ZSB8fCAnJzsKICBjb25zdCBmaWx0ZXJlZCA9IHNtYXJ0U2VhcmNoKHN0YXRlLml0ZW1zLCBxKTsKICByZW5kZXJMaXN0KGZpbHRlcmVkKTsKCiAgLy8gT24gbW9iaWxlLCBhdXRvLWhpZGUga2V5Ym9hcmQgYWZ0ZXIgMiBzZWNvbmRzIG9mIG5vIHR5cGluZwogIGlmIChpc01vYmlsZSkgewogICAgY2xlYXJUaW1lb3V0KHNlYXJjaEJsdXJUaW1lcik7CiAgICBzZWFyY2hCbHVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09ICQoJ3NlYXJjaCcpKSB7CiAgICAgICAgJCgnc2VhcmNoJykuYmx1cigpOwogICAgICB9CiAgICB9LCAyMDAwKTsKICB9Cn0sIDE4MCkpOwoKLy8gU3RvcmUgc2VhcmNoIHF1ZXJ5IGZvciB1c2UgaW4gcmVuZGVyaW5nCmxldCBjdXJyZW50U2VhcmNoUXVlcnkgPSAnJzsKCiQoJ2NsZWFyU2VhcmNoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+eyAkKCdzZWFyY2gnKS52YWx1ZT0nJzsgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7IH0pOwoKLy8gU2VjcmV0IE5pbnRlbmRvIHRoZW1lIHRvZ2dsZSAtIGhvbGQgWCBidXR0b24gZm9yIDIuNSBzZWNvbmRzCmxldCBuaW50ZW5kb1RpbWVyID0gbnVsbDsKbGV0IG5pbnRlbmRvQ291bnRkb3duID0gbnVsbDsKY29uc3QgTklOVEVORE9fSE9MRF9USU1FID0gMjUwMDsKY29uc3QgY291bnRkb3duRWwgPSAkKCd0aGVtZUNvdW50ZG93bicpOwpjb25zdCBjb3VudGRvd25OdW0gPSBjb3VudGRvd25FbC5xdWVyeVNlbGVjdG9yKCcuY291bnRkb3duLW51bScpOwpjb25zdCBjbGVhckJ0biA9ICQoJ2NsZWFyU2VhcmNoJyk7CgpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydE5pbnRlbmRvVGltZXIpOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc3RhcnROaW50ZW5kb1RpbWVyLCB7IHBhc3NpdmU6IHRydWUgfSk7CmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGNhbmNlbE5pbnRlbmRvVGltZXIpOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGNhbmNlbE5pbnRlbmRvVGltZXIpOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGNhbmNlbE5pbnRlbmRvVGltZXIpOwoKLy8gTW9kZSBjeWNsZTogTWFpbiDihpIgTmludGVuZG8g4oaSIExlZ2FjeSDihpIgTWFpbgpmdW5jdGlvbiBnZXRDdXJyZW50TW9kZSgpIHsKICBpZiAoaXNMZWdhY3lNb2RlKSByZXR1cm4gJ2xlZ2FjeSc7CiAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnKSA9PT0gJ25pbnRlbmRvJykgcmV0dXJuICduaW50ZW5kbyc7CiAgcmV0dXJuICdtYWluJzsKfQoKZnVuY3Rpb24gZ2V0TmV4dE1vZGUoKSB7CiAgY29uc3QgY3VycmVudCA9IGdldEN1cnJlbnRNb2RlKCk7CiAgaWYgKGN1cnJlbnQgPT09ICdtYWluJykgcmV0dXJuICduaW50ZW5kbyc7CiAgaWYgKGN1cnJlbnQgPT09ICduaW50ZW5kbycpIHJldHVybiAnbGVnYWN5JzsKICByZXR1cm4gJ21haW4nOyAvLyBsZWdhY3kg4oaSIG1haW4KfQoKZnVuY3Rpb24gZ2V0TW9kZUxhYmVsKG1vZGUpIHsKICBpZiAobW9kZSA9PT0gJ21haW4nKSByZXR1cm4gJ01haW4gVGhlbWUnOwogIGlmIChtb2RlID09PSAnbmludGVuZG8nKSByZXR1cm4gJ05pbnRlbmRvIFRoZW1lJzsKICByZXR1cm4gJ0xlZ2FjeSBNb2RlJzsKfQoKZnVuY3Rpb24gc3RhcnROaW50ZW5kb1RpbWVyKGUpIHsKICBlLnByZXZlbnREZWZhdWx0KCk7CiAgY2xlYXJCdG4uY2xhc3NMaXN0LmFkZCgnaG9sZGluZycpOwogIGxldCByZW1haW5pbmcgPSAzOwogIGNvdW50ZG93bk51bS50ZXh0Q29udGVudCA9IHJlbWFpbmluZzsKCiAgY29uc3QgbmV4dE1vZGUgPSBnZXROZXh0TW9kZSgpOwogIGNvbnN0IGxhYmVsID0gY291bnRkb3duRWwucXVlcnlTZWxlY3RvcignLmNvdW50ZG93bi1sYWJlbCcpOwogIGxhYmVsLnRleHRDb250ZW50ID0gYEhvbGQgZm9yICR7Z2V0TW9kZUxhYmVsKG5leHRNb2RlKX1gOwoKICBjb3VudGRvd25FbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CgogIG5pbnRlbmRvQ291bnRkb3duID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgcmVtYWluaW5nLS07CiAgICBpZiAocmVtYWluaW5nID4gMCkgewogICAgICBjb3VudGRvd25OdW0udGV4dENvbnRlbnQgPSByZW1haW5pbmc7CiAgICB9CiAgfSwgODAwKTsKCiAgbmludGVuZG9UaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgY2xlYXJJbnRlcnZhbChuaW50ZW5kb0NvdW50ZG93bik7CiAgICBjb3VudGRvd25FbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICBjbGVhckJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdob2xkaW5nJyk7CgogICAgY29uc3QgbmV4dCA9IGdldE5leHRNb2RlKCk7CiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCiAgICBpZiAobmV4dCA9PT0gJ2xlZ2FjeScpIHsKICAgICAgLy8gU3dpdGNoIHRvIGxlZ2FjeSBtb2RlCiAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdtb2Rlcm4nKTsKICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2xlZ2FjeScsICcxJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0aGVtZScpOwogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybC50b1N0cmluZygpOwogICAgfSBlbHNlIGlmIChuZXh0ID09PSAnbWFpbicpIHsKICAgICAgLy8gU3dpdGNoIHRvIG1haW4gKGZyb20gbGVnYWN5KQogICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgnbGVnYWN5Jyk7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdtb2Rlcm4nKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3RoZW1lJyk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKCk7CiAgICB9IGVsc2UgewogICAgICAvLyBTd2l0Y2ggdG8gTmludGVuZG8gKG5vIHJlbG9hZCBuZWVkZWQpCiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCAnbmludGVuZG8nKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgJ25pbnRlbmRvJyk7CiAgICAgIHNob3dUb2FzdCgnTmludGVuZG8gVGhlbWUgQWN0aXZhdGVkIScpOwogICAgfQogIH0sIE5JTlRFTkRPX0hPTERfVElNRSk7Cn0KCmZ1bmN0aW9uIGNhbmNlbE5pbnRlbmRvVGltZXIoKSB7CiAgY2xlYXJUaW1lb3V0KG5pbnRlbmRvVGltZXIpOwogIGNsZWFySW50ZXJ2YWwobmludGVuZG9Db3VudGRvd24pOwogIGNvdW50ZG93bkVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICBjbGVhckJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdob2xkaW5nJyk7Cn0KCi8vIExvYWQgc2F2ZWQgdGhlbWUgb24gc3RhcnR1cAppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJykgPT09ICduaW50ZW5kbycpIHsKICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgJ25pbnRlbmRvJyk7Cn0KCkNPTkZJRy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChjdHJsID0+IHsKICBjb25zdCBpZCA9IGN0cmwuaWQ7CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7CiAgICBjb25zdCBlbCA9ICQoaWQpOwogICAgaWYoZWwpewogICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHVwZGF0ZUZpbGVuYW1lUHJldmlldygpKTsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gdXBkYXRlVG90YWxzKCkpOwogICAgfQogIH0pOwp9KTsKCiQoJ2N1c3RvbWVyJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7IHVwZGF0ZUZpbGVuYW1lUHJldmlldygpOyB1cGRhdGVUaXRsZSgpOyB9KTsKCmZ1bmN0aW9uIHBhcnNlRmlsZW5hbWVUb0NvbmZpZyhmbikgewogIGNvbnN0IGJhc2UgPSBmbi5yZXBsYWNlKG5ldyBSZWdFeHAoYFxcJHtDT05GSUcuY2xpZW50RmlsZUV4dH18XFwke0NPTkZJRy5hZG1pbkZpbGVFeHR9fFxcLih0eHQpJGAsICdpJyksICcnKTsKICBjb25zdCBwYXJ0cyA9IGJhc2Uuc3BsaXQoJ18nKTsKICBpZiAocGFydHMubGVuZ3RoIDwgMikgcmV0dXJuIG51bGw7CiAgCiAgY29uc3QgY29uZmlnID0geyBjdXN0b21lcjogcGFydHNbMF0gfTsKICAKICBDT05GSUcuc3RvcmFnZUNvbnRyb2xzLmZvckVhY2goY3RybCA9PiB7CiAgICBpZiAoY3RybC5maWxlbmFtZVRva2VuKSB7CiAgICAgIGNvbnN0IHBhdHRlcm4gPSBjdHJsLmZpbGVuYW1lVG9rZW4gPT09IHRydWUgCiAgICAgICAgPyBgXigke2N0cmwub3B0aW9ucy5tYXAobyA9PiBvLnZhbHVlKS5qb2luKCd8Jyl9KSRgCiAgICAgICAgOiBgXiR7Y3RybC5maWxlbmFtZVRva2VufVxcZCskYDsKICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHBhdHRlcm4pOwogICAgICAKICAgICAgcGFydHMuZm9yRWFjaChwID0+IHsKICAgICAgICBpZiAocmVnZXgudGVzdChwKSkgewogICAgICAgICAgY29uZmlnW2N0cmwuaWRdID0gY3RybC5maWxlbmFtZVRva2VuID09PSB0cnVlID8gcCA6IHAucmVwbGFjZShjdHJsLmZpbGVuYW1lVG9rZW4sICcnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pOwogIAogIHJldHVybiBjb25maWc7Cn0KCiQoJ2ZpbGVJbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldik9PnsKICBjb25zdCBmID0gZXYudGFyZ2V0LmZpbGVzWzBdOyAKICBpZighZikgcmV0dXJuOyAKICAKICBjb25zdCBjZmcgPSBwYXJzZUZpbGVuYW1lVG9Db25maWcoZi5uYW1lKTsgCiAgaWYoY2ZnKXsgCiAgICAkKCdjdXN0b21lcicpLnZhbHVlID0gY2ZnLmN1c3RvbWVyIHx8ICcnOwogICAgQ09ORklHLnN0b3JhZ2VDb250cm9scy5mb3JFYWNoKGN0cmwgPT4gewogICAgICBjb25zdCBlbCA9ICQoY3RybC5pZCk7CiAgICAgIGlmIChlbCAmJiBjZmdbY3RybC5pZF0pIHsKICAgICAgICBpZiAoY3RybC50eXBlID09PSAnc2VsZWN0JykgewogICAgICAgICAgQXJyYXkuZnJvbShlbC5vcHRpb25zKS5mb3JFYWNoKG8gPT4gewogICAgICAgICAgICBpZiAoby52YWx1ZSA9PT0gY2ZnW2N0cmwuaWRdKSBvLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKTsgCiAgICB1cGRhdGVUb3RhbHMoKTsKICB9CiAgCiAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgCiAgcmVhZGVyLm9ubG9hZCA9IChlKT0+eyAKICAgIGNvbnN0IGxpbmVzID0gZS50YXJnZXQucmVzdWx0LnNwbGl0KCdcbicpLm1hcChzPT5zLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pOyAKICAgIHN0YXRlLnNlbGVjdGVkPVtdOyAKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykuZm9yRWFjaChpPT5pLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpOwogICAgCiAgICBsaW5lcy5mb3JFYWNoKHRpdGxlPT57IAogICAgICBjb25zdCBsZWZ0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maW5kKGk9PmkuZGF0YXNldC5uYW1lPT09dGl0bGUpOyAKICAgICAgaWYobGVmdCl7IAogICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsgCiAgICAgICAgc3RhdGUuc2VsZWN0ZWQucHVzaCh7IG5hbWU6bGVmdC5kYXRhc2V0Lm5hbWUsIGZpbGVuYW1lOiBsZWZ0LmRhdGFzZXQuZmlsZW5hbWUgfHwgbGVmdC5kYXRhc2V0Lm5hbWUsIHNpemU6bGVmdC5kYXRhc2V0LnNpemUgfSk7IAogICAgICB9IGVsc2UgeyAKICAgICAgICBjb25zdCBtYXliZSA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkuZmluZChpPT5pLmRhdGFzZXQubmFtZSAmJiBpLmRhdGFzZXQubmFtZS50b0xvd2VyQ2FzZSgpPT09dGl0bGUudG9Mb3dlckNhc2UoKSk7IAogICAgICAgIGlmKG1heWJlKXsgCiAgICAgICAgICBtYXliZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyAKICAgICAgICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goeyBuYW1lOm1heWJlLmRhdGFzZXQubmFtZSwgZmlsZW5hbWU6IG1heWJlLmRhdGFzZXQuZmlsZW5hbWUgfHwgbWF5YmUuZGF0YXNldC5uYW1lLCBzaXplOm1heWJlLmRhdGFzZXQuc2l6ZSB9KTsgCiAgICAgICAgfSAKICAgICAgfSAKICAgIH0pOyAKICAgIHVwZGF0ZVRvdGFscygpOyAKICAgIHJlbmRlck92ZXJsYXkoKTsgCiAgfTsKICByZWFkZXIucmVhZEFzVGV4dChmKTsKfSk7CgokKCdzYXZlQnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsKICBub3cgPSBEYXRlLm5vdygpOwogIGlmIChub3cgLSBsYXN0RXhwb3J0VGltZSA8IE1JTl9ERUxBWSkgewogICAgdG9hc3QoJ1BsZWFzZSB3YWl0IGJlZm9yZSBleHBvcnRpbmcgYWdhaW4nKTsKICAgIGFsZXJ0KCdQbGVhc2Ugd2FpdCBiZWZvcmUgZXhwb3J0aW5nIGFnYWluJyk7CiAgICByZXR1cm47CiAgfQogIGxhc3RFeHBvcnRUaW1lID0gbm93OwoKICBpZihzdGF0ZS5zZWxlY3RlZC5sZW5ndGg9PT0wKXsgYWxlcnQoJ05vIGl0ZW1zIHNlbGVjdGVkJyk7IHJldHVybjsgfQogIGNvbnN0IGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZXx8JycpLnRyaW0oKTsgCiAgaWYoIWN1c3QpeyBhbGVydCgnQ3VzdG9tZXIgbmFtZSByZXF1aXJlZCcpOyByZXR1cm47IH0KICBjb25zdCBmaWxlbmFtZSA9ICQoJ2ZpbGVuYW1lUHJldmlldycpLnRleHRDb250ZW50IHx8IGBsaXN0JHtDT05GSUcuY2xpZW50RmlsZUV4dH1gOwogIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbc3RhdGUuc2VsZWN0ZWQubWFwKHM9PnMubmFtZSkuam9pbignXG4nKV0sIHsgdHlwZTondGV4dC9wbGFpbicgfSk7IAogIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IAogIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IAogIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsgCiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsgCiAgYS5jbGljaygpOyAKICBhLnJlbW92ZSgpOyAKICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7IAogIHRvYXN0KCdTYXZlZCBjbGllbnQgZmlsZScpOwp9KTsKCi8vIFBhc3RlIGZ1bmN0aW9uYWxpdHkKJCgncGFzdGVCdG4nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgY29uc3QgY29udGFpbmVyID0gJCgncGFzdGVDb250YWluZXInKTsKICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnOwogIGlmIChjb250YWluZXIuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJykgewogICAgJCgncGFzdGVBcmVhJykuZm9jdXMoKTsKICB9Cn0pOwoKJCgncGFzdGVDYW5jZWwnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgJCgncGFzdGVDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICQoJ3Bhc3RlQXJlYScpLnZhbHVlID0gJyc7Cn0pOwoKJCgncGFzdGVMb2FkJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogIGNvbnN0IGNvbnRlbnQgPSAkKCdwYXN0ZUFyZWEnKS52YWx1ZS50cmltKCk7CiAgaWYgKCFjb250ZW50KSB7CiAgICB0b2FzdCgnTm90aGluZyB0byBsb2FkJyk7CiAgICByZXR1cm47CiAgfQoKICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xuJykubWFwKHMgPT4gcy50cmltKCkpLmZpbHRlcihCb29sZWFuKTsKICBzdGF0ZS5zZWxlY3RlZCA9IFtdOwogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykuZm9yRWFjaChpID0+IGkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKSk7CgogIGxldCBmb3VuZCA9IDA7CiAgbGluZXMuZm9yRWFjaCh0aXRsZSA9PiB7CiAgICBjb25zdCBsZWZ0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maW5kKGkgPT4gaS5kYXRhc2V0Lm5hbWUgPT09IHRpdGxlKTsKICAgIGlmIChsZWZ0KSB7CiAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgc3RhdGUuc2VsZWN0ZWQucHVzaCh7IG5hbWU6IGxlZnQuZGF0YXNldC5uYW1lLCBmaWxlbmFtZTogbGVmdC5kYXRhc2V0LmZpbGVuYW1lIHx8IGxlZnQuZGF0YXNldC5uYW1lLCBzaXplOiBsZWZ0LmRhdGFzZXQuc2l6ZSB9KTsKICAgICAgZm91bmQrKzsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goeyBuYW1lOiB0aXRsZSwgZmlsZW5hbWU6IHRpdGxlLCBzaXplOiAwIH0pOwogICAgfQogIH0pOwoKICB1cGRhdGVUb3RhbHMoKTsKICB0b2FzdChgTG9hZGVkICR7bGluZXMubGVuZ3RofSBpdGVtcyAoJHtmb3VuZH0gZm91bmQgaW4gbGlzdClgKTsKCiAgJCgncGFzdGVDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICQoJ3Bhc3RlQXJlYScpLnZhbHVlID0gJyc7Cn0pOwoKJCgnYWRtaW5FeHBvcnQnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKT0+ewogIG5vdyA9IERhdGUubm93KCk7CiAgaWYgKG5vdyAtIGxhc3RFeHBvcnRUaW1lIDwgTUlOX0RFTEFZKSB7CiAgICBzZXRTdGF0dXMoJ3dhcm4nKTsgc2hvd0Jhbm5lcignUGxlYXNlIHdhaXQgYmVmb3JlIGV4cG9ydGluZyBhZ2FpbicsIDIwMDApOwogICAgcmV0dXJuOwogIH0KICBsYXN0RXhwb3J0VGltZSA9IG5vdzsKCiAgaWYoc3RhdGUuc2VsZWN0ZWQubGVuZ3RoPT09MCl7IHNldFN0YXR1cygnd2FybicpOyBzaG93QmFubmVyKCdObyBpdGVtcyBzZWxlY3RlZCcsIDIwMDApOyByZXR1cm47IH0KICBjb25zdCBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWV8fCcnKS50cmltKCk7CiAgaWYoIWN1c3QpeyBzZXRTdGF0dXMoJ3dhcm4nKTsgc2hvd0Jhbm5lcignQ3VzdG9tZXIgbmFtZSByZXF1aXJlZCcsIDIwMDApOyByZXR1cm47IH0KCiAgdHJ5ewogICAgY29uc3QgeG1sdHh0ID0gYXdhaXQgZmV0Y2goQ09ORklHLnhtbEZpbGUpLnRoZW4ocj0+ci50ZXh0KCkpOwogICAgY29uc3QgeG1sID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh4bWx0eHQsJ2FwcGxpY2F0aW9uL3htbCcpOwogICAgbGV0IGNvbnRlbnQ9Jyc7CiAgICBsZXQgcGF0aHMgPSBbXTsKCiAgICBpZiAoQ09ORklHLnN0cnVjdHVyZVR5cGUgPT09ICdmb2xkZXJzJykgewogICAgICBzdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKHNlbD0+ewogICAgICAgIGNvbnN0IGZvbGRlciA9IEFycmF5LmZyb20oeG1sLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZvbGRlcicpKS5maW5kKGY9PmYuZ2V0QXR0cmlidXRlKCduYW1lJyk9PT1zZWwubmFtZSk7CiAgICAgICAgaWYoZm9sZGVyKXsKICAgICAgICAgIGZvbGRlci5xdWVyeVNlbGVjdG9yQWxsKCdmaWxlJykuZm9yRWFjaChmaWxlPT4gewogICAgICAgICAgICBjb25zdCBwYXRoID0gYCR7Q09ORklHLmFkbWluQmFzZVBhdGh9JHtmb2xkZXIuZ2V0QXR0cmlidXRlKCduYW1lJyl9XFwke2ZpbGUuZ2V0QXR0cmlidXRlKCduYW1lJyl9YDsKICAgICAgICAgICAgY29udGVudCArPSBwYXRoICsgJ1xuJzsKICAgICAgICAgICAgcGF0aHMucHVzaChwYXRoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBzdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKHNlbD0+ewogICAgICAgIGNvbnN0IGZpbGVuYW1lID0gc2VsLmZpbGVuYW1lIHx8IHNlbC5uYW1lOwogICAgICAgIGNvbnN0IHBhdGggPSBgJHtDT05GSUcuYWRtaW5CYXNlUGF0aH0ke2ZpbGVuYW1lfWA7CiAgICAgICAgY29udGVudCArPSBwYXRoICsgJ1xuJzsKICAgICAgICBwYXRocy5wdXNoKHBhdGgpOwogICAgICB9KTsKICAgIH0KCiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogICAgY29uc3Qgc3RhbXAgPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSsxKS5wYWRTdGFydCgyLCcwJyl9JHtTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwnMCcpfV8ke1N0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwnMCcpfSR7U3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsJzAnKX1gOwogICAgY29uc3QgZm5hbWUgPSBgJHsoY3VzdHx8J2N1c3RvbWVyJykucmVwbGFjZSgvW15hLXpBLVowLTldL2csJ18nKX1fJHtzdGFtcH0ke0NPTkZJRy5hZG1pbkZpbGVFeHR9YDsKICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTondGV4dC9wbGFpbicgfSk7CiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIGEuZG93bmxvYWQgPSBmbmFtZTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICBhLmNsaWNrKCk7CiAgICBhLnJlbW92ZSgpOwogICAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpOwogICAgc2V0U3RhdHVzKCdzdWNjZXNzJyk7CiAgICBzaG93QmFubmVyKCdFeHBvcnQgc2F2ZWQnLCAxNTAwKTsKCiAgICAvLyBDaGVjayBpZiBsaXN0ZW5lciBpcyBydW5uaW5nIGFuZCBvZmZlciB0byBleGVjdXRlCiAgICB0cnkgewogICAgICBjb25zdCBzdGF0dXNSZXMgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL3N0YXR1cycsIHsgbWV0aG9kOiAnR0VUJyB9KTsKICAgICAgaWYgKHN0YXR1c1Jlcy5vaykgewogICAgICAgIC8vIExpc3RlbmVyIGlzIHJ1bm5pbmcgLSBhc2sgdG8gZXhlY3V0ZQogICAgICAgIGlmIChjb25maXJtKGBMaXN0ZW5lciBkZXRlY3RlZCFcblxuUnVuIGhhcmRsaW5rIGZvciAke3N0YXRlLnNlbGVjdGVkLmxlbmd0aH0gaXRlbXMgbm93P2ApKSB7CiAgICAgICAgICBzZXRTdGF0dXMoJ2xvYWRpbmcnLCAwKTsKICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjUwMDAvcnVuJywgewogICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sCiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aHMsIGN1c3RvbWVyOiBjdXN0IH0pCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgICBpZihyZXN1bHQuc3RhdHVzID09PSAnb2snKSB7CiAgICAgICAgICAgIHNldFN0YXR1cygnc3VjY2VzcycpOwogICAgICAgICAgICBzaG93QmFubmVyKGBEb25lISAke3Jlc3VsdC5zdWNjZXNzfSBmaWxlcyBsaW5rZWRgLCAyMDAwKTsKICAgICAgICAgICAgaWYocmVzdWx0LmZhaWxlZCA+IDApIHsKICAgICAgICAgICAgICBzZXRTdGF0dXMoJ3dhcm4nKTsKICAgICAgICAgICAgICBzaG93QmFubmVyKGAke3Jlc3VsdC5mYWlsZWR9IGZpbGVzIGZhaWxlZGAsIDMwMDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0Lm1lc3NhZ2UgfHwgJ1J1biBmYWlsZWQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gY2F0Y2gobGlzdGVuZXJFcnIpIHsKICAgICAgLy8gTGlzdGVuZXIgbm90IHJ1bm5pbmcgLSB0aGF0J3MgZmluZSwgZmlsZSB3YXMgc2F2ZWQKICAgIH0KICB9Y2F0Y2goZSl7CiAgICBjb25zb2xlLmVycm9yKGUpOwogICAgc2V0U3RhdHVzKCdlcnJvcicpOwogICAgc2hvd0Jhbm5lcignQWRtaW4gZXhwb3J0IGZhaWxlZCcsIDIwMDApOwogIH0KfSk7Cgphc3luYyBmdW5jdGlvbiBkb1VwbG9hZCgpIHsKICBpZihzdGF0ZS5zZWxlY3RlZC5sZW5ndGg9PT0wKXsgYWxlcnQoJ05vIGl0ZW1zIHNlbGVjdGVkJyk7IHJldHVybjsgfQogIGNvbnN0IGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZXx8JycpLnRyaW0oKTsKICBpZighY3VzdCl7IGFsZXJ0KCdDdXN0b21lciByZXF1aXJlZCcpOyByZXR1cm47IH0KICBpZighY29uZmlybShgVXBsb2FkIGxpc3QgZm9yICR7Y3VzdH0/YCkpIHJldHVybjsKCiAgY29uc3QgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCBgbGlzdCR7Q09ORklHLmNsaWVudEZpbGVFeHR9YDsKICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3N0YXRlLnNlbGVjdGVkLm1hcChzPT5zLm5hbWUpLmpvaW4oJ1xuJyldLCB7IHR5cGU6J3RleHQvcGxhaW4nIH0pOwogIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgaWYobm93IC0gc3RhdGUubGFzdFVwbG9hZCA8IDE1MDAwKXsgYWxlcnQoJ1BsZWFzZSB3YWl0IDE1IHNlY29uZHMgYmV0d2VlbiB1cGxvYWRzJyk7IHJldHVybjsgfQoKICB0cnl7CiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9maWxlYmluLm5ldC8ke0NPTkZJRy5maWxlYmluQnVja2V0fS8ke2ZpbGVuYW1lfWA7CiAgICBjb25zdCByID0gYXdhaXQgZmV0Y2godXJsLHsgbWV0aG9kOidQT1NUJywgaGVhZGVyczp7ICdDb250ZW50LVR5cGUnOid0ZXh0L3BsYWluJyB9LCBib2R5OiBibG9iIH0pOwoKICAgIGlmKHIub2sgfHwgci5zdGF0dXM9PT0yMDEpewogICAgICBzdGF0ZS5sYXN0VXBsb2FkID0gbm93OwogICAgICAkKCdzaGFyZWFibGUnKS52YWx1ZSA9IGBodHRwczovL2ZpbGViaW4ubmV0LyR7Q09ORklHLmZpbGViaW5CdWNrZXR9LyR7ZmlsZW5hbWV9YDsKICAgICAgdG9hc3QoJ1VwbG9hZGVkIHRvIGZpbGViaW4nKTsKICAgICAgc2hvd0Jhbm5lcigiVXBsb2FkIENvbXBsZXRlIC0gUHJlc3MgQ29weSBMaW5rIGFuZCBzZW5kIGl0IHRvIG91ciBjaGF0Iik7CgogICAgICBjb25zdCBjb25maWdTZWN0aW9uID0gJCgnY29uZmlnU2VjdGlvbicpOwogICAgICBjb25zdCB0b2dnbGVCdG4gPSAkKCd0b2dnbGVDb25maWcnKTsKICAgICAgaWYgKGNvbmZpZ1NlY3Rpb24gJiYgdG9nZ2xlQnRuICYmIGNvbmZpZ1NlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgewogICAgICAgIGNvbmZpZ1NlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgdG9nZ2xlQnRuLnRleHRDb250ZW50ID0gJ1Nob3cgQ29uZmlndXJhdGlvbic7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogIH1jYXRjaChlKXsKICAgIGNvbnNvbGUud2FybignZmlsZWJpbiBlcnJvcicsIGUpOwogIH0KCiAgdHJ5ewogICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBibG9iLCBmaWxlbmFtZSk7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly91cGxvYWQuZ29maWxlLmlvL3VwbG9hZEZpbGUnLCB7IG1ldGhvZDonUE9TVCcsIGJvZHk6IGZvcm0gfSk7CiAgICBjb25zdCBqID0gYXdhaXQgcmVzLmpzb24oKTsKICAgIGlmKGouc3RhdHVzID09PSAnb2snKXsKICAgICAgc3RhdGUubGFzdFVwbG9hZCA9IG5vdzsKICAgICAgJCgnc2hhcmVhYmxlJykudmFsdWUgPSBqLmRhdGEuZG93bmxvYWRQYWdlOwogICAgICB0b2FzdCgnVXBsb2FkZWQgdG8gR29GaWxlJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRvYXN0KCdVcGxvYWQgZmFpbGVkJyk7CiAgfWNhdGNoKGUpewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIHRvYXN0KCdVcGxvYWQgZXJyb3InKTsKICB9Cn0KCiQoJ3VwbG9hZEJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRvVXBsb2FkKTsKCmxldCBiaW5MaXN0UGFnZSA9IDA7CmNvbnN0IGJpbkxpc3RQYWdlU2l6ZSA9IDEwOwpsZXQgY2FjaGVkQmluRmlsZXMgPSBudWxsOwoKJCgnYmluTGlzdCcpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsKICB0cnkgewogICAgY29uc3QgciA9IGF3YWl0IGZldGNoKGBodHRwczovL2ZpbGViaW4ubmV0LyR7Q09ORklHLmZpbGViaW5CdWNrZXR9P2pzb25gLCB7CiAgICAgIGhlYWRlcnM6IHsgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIiB9CiAgICB9KTsKICAgIGlmICghci5vaykgeyB0b2FzdChgRmFpbGVkIHRvIGZldGNoIHVwbG9hZHM6ICR7ci5zdGF0dXNUZXh0fWApOyByZXR1cm47IH0KCiAgICBsZXQgajsKICAgIHRyeSB7CiAgICAgIGogPSBhd2FpdCByLmpzb24oKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICB0b2FzdCgiRmFpbGVkIHRvIHBhcnNlIHNlcnZlciByZXNwb25zZSIpOwogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIWouZmlsZXMgfHwgIWouZmlsZXMubGVuZ3RoKSB7IHRvYXN0KCdObyBmaWxlcyBmb3VuZCcpOyByZXR1cm47IH0KCiAgICAvLyA9PT09PT09PT09IEFERCBUSEVTRSAzIExJTkVTID09PT09PT09PT0KICAgIGNvbnN0IHBsYXRmb3JtRmlsZXMgPSBqLmZpbGVzLmZpbHRlcihmaWxlID0+IAogICAgICBmaWxlLmZpbGVuYW1lLmVuZHNXaXRoKENPTkZJRy5jbGllbnRGaWxlRXh0KQogICAgKTsKICAgIAogICAgaWYgKHBsYXRmb3JtRmlsZXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHRvYXN0KGBObyAke0NPTkZJRy5wbGF0Zm9ybSB8fCAncGxhdGZvcm0nfSBmaWxlcyBmb3VuZGApOwogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3Qgc29ydGVkID0gcGxhdGZvcm1GaWxlcy5zb3J0KChhLGIpPT4gbmV3IERhdGUoYi51cGRhdGVkX2F0KSAtIG5ldyBEYXRlKGEudXBkYXRlZF9hdCkpOwogICAgLy8gPT09PT09PT09PSBDSEFOR0UgVEhJUyBMSU5FID09PT09PT09PT0KICAgIC8vIE9MRDogY29uc3Qgc29ydGVkID0gai5maWxlcy5zb3J0KC4uLikKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIAogICAgY2FjaGVkQmluRmlsZXMgPSBzb3J0ZWQ7CiAgICBiaW5MaXN0UGFnZSA9IDA7CiAgICByZW5kZXJCaW5MaXN0KCk7CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIHRvYXN0KCdFcnJvciBmZXRjaGluZyB1cGxvYWRzJyk7CiAgfQp9KTsKCmZ1bmN0aW9uIHJlbmRlckJpbkxpc3QoKSB7CiAgaWYgKCFjYWNoZWRCaW5GaWxlcykgcmV0dXJuOwogIAogIGNvbnN0IHN0YXJ0ID0gYmluTGlzdFBhZ2UgKiBiaW5MaXN0UGFnZVNpemU7CiAgY29uc3QgZW5kID0gc3RhcnQgKyBiaW5MaXN0UGFnZVNpemU7CiAgY29uc3QgcGFnZUZpbGVzID0gY2FjaGVkQmluRmlsZXMuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgY29uc3QgaGFzTW9yZSA9IGVuZCA8IGNhY2hlZEJpbkZpbGVzLmxlbmd0aDsKICAKICBsZXQgaHRtbCA9ICc8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6bGVmdDttYXJnaW4tYm90dG9tOjhweDsiPic7CiAgaHRtbCArPSAnPGJ1dHRvbiBpZD0iY2xvc2VCaW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7Ij5DbG9zZTwvYnV0dG9uPic7CiAgaHRtbCArPSBgPHN0cm9uZz5SZWNlbnQgVXBsb2Fkczwvc3Ryb25nPmA7CiAgaHRtbCArPSAnPC9kaXY+JzsKICAKICBodG1sICs9ICc8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjhweDttYXJnaW4tYm90dG9tOjhweDsiPic7CiAgaHRtbCArPSBgPGJ1dHRvbiBpZD0icHJldlBhZ2UiIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7ZmxleDoxOyIgJHtiaW5MaXN0UGFnZSA9PT0gMCA/ICdkaXNhYmxlZCcgOiAnJ30+UHJldjwvYnV0dG9uPmA7CiAgaHRtbCArPSBgPHNwYW4gc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6IzZiNzI4MDsiPlBhZ2UgJHtiaW5MaXN0UGFnZSArIDF9PC9zcGFuPmA7CiAgaHRtbCArPSBgPGJ1dHRvbiBpZD0ibmV4dFBhZ2UiIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7ZmxleDoxOyIgJHshaGFzTW9yZSA/ICdkaXNhYmxlZCcgOiAnJ30+TmV4dDwvYnV0dG9uPmA7CiAgaHRtbCArPSAnPC9kaXY+JzsKICAKICBodG1sICs9ICc8dWwgc3R5bGU9Im1hcmdpbjowO3BhZGRpbmctbGVmdDoyMHB4O2xpc3Qtc3R5bGU6bm9uZTsiPic7CiAgcGFnZUZpbGVzLmZvckVhY2goKGZpbGUsIGlkeCkgPT4gewogICAgY29uc3QgZmlsZVVybCA9IGBodHRwczovL2ZpbGViaW4ubmV0LyR7Q09ORklHLmZpbGViaW5CdWNrZXR9LyR7ZW5jb2RlVVJJQ29tcG9uZW50KGZpbGUuZmlsZW5hbWUpfWA7CiAgICBjb25zdCBhZGRlZERhdGUgPSBuZXcgRGF0ZShmaWxlLnVwZGF0ZWRfYXQpOwogICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGFkZGVkRGF0ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApLnJlcGxhY2UoLy0vZywnJyk7CiAgICBjb25zdCBob3VycyA9IGFkZGVkRGF0ZS5nZXRIb3VycygpOwogICAgY29uc3QgbWludXRlcyA9IGFkZGVkRGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCcwJyk7CiAgICBjb25zdCBhbXBtID0gaG91cnMgPj0gMTIgPyAnUE0nOidBTSc7CiAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gYCR7aG91cnMgJSAxMiB8fCAxMn06JHttaW51dGVzfSAke2FtcG19YDsKICAgIGNvbnN0IHN0cmlwcGVkTmFtZSA9IGZpbGUuZmlsZW5hbWUuc3BsaXQoJy4nKS5zbGljZSgwLC0xKS5qb2luKCcuJyk7CiAgICBjb25zdCBmaWxlU2l6ZSA9IGZpbGUuYnl0ZXNfcmVhZGFibGUgfHwgJyc7CiAgICBodG1sICs9IGA8bGkgc3R5bGU9Im1hcmdpbi1ib3R0b206NnB4OyBmb250LXNpemU6IDEycHg7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6OHB4OyI+CiAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1sb2FkLWZpbGUiIGRhdGEtdXJsPSIke2ZpbGVVcmx9IiBkYXRhLWZpbGVuYW1lPSIke2ZpbGUuZmlsZW5hbWV9IiBzdHlsZT0icGFkZGluZzoycHggNnB4O2ZvbnQtc2l6ZToxMHB4O2JhY2tncm91bmQ6IzNiODJmNjtjb2xvcjojZmZmO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O2N1cnNvcjpwb2ludGVyOyI+TG9hZDwvYnV0dG9uPgogICAgICA8YSBocmVmPSIke2ZpbGVVcmx9IiB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9InRleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOiMwMzY2ZDY7ZmxleDoxOyI+JHtmb3JtYXR0ZWREYXRlfSAke2Zvcm1hdHRlZFRpbWV9IHwgJHtzdHJpcHBlZE5hbWV9IHwgJHtmaWxlU2l6ZX08L2E+CiAgICA8L2xpPmA7CiAgfSk7CiAgaHRtbCArPSAnPC91bD4nOwoKICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUxpc3RDb250YWluZXInKTsKICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDsKICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmQgPSAnI2Y5ZmFmYic7CiAgY29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTJweCc7CiAgY29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnOwogIGNvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICNlNWU3ZWInOwogIGNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnOHB4JzsKICAgIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7CmNvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1ggPSAnaGlkZGVuJzsgICAvLyBvciAnYXV0bycgaWYgeW91IHByZWZlciBob3Jpem9udGFsIHNjcm9sbApjb250YWluZXIuc3R5bGUubWF4SGVpZ2h0ID0gJzMwMHB4JzsgICAgLy8gc2V0IHdoYXRldmVyIGZpeGVkIGhlaWdodCB5b3Ugd2FudAoKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VCaW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgYmluTGlzdFBhZ2UgPSAwOwogICAgY2FjaGVkQmluRmlsZXMgPSBudWxsOwogIH0pOwogIAogIGNvbnN0IHByZXZCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldlBhZ2UnKTsKICBpZiAocHJldkJ0biAmJiBiaW5MaXN0UGFnZSA+IDApIHsKICAgIHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGJpbkxpc3RQYWdlLS07CiAgICAgIHJlbmRlckJpbkxpc3QoKTsKICAgIH0pOwogIH0KICAKICBjb25zdCBuZXh0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25leHRQYWdlJyk7CiAgaWYgKG5leHRCdG4gJiYgaGFzTW9yZSkgewogICAgbmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgYmluTGlzdFBhZ2UrKzsKICAgICAgcmVuZGVyQmluTGlzdCgpOwogICAgfSk7CiAgfQoKICAvLyBMb2FkIGJ1dHRvbnMgLSBmZXRjaCB2aWEgbGlzdGVuZXIgYW5kIGxvYWQgaW50byBwaWNrZXIKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuLWxvYWQtZmlsZScpLmZvckVhY2goYnRuID0+IHsKICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgdXJsID0gYnRuLmRhdGFzZXQudXJsOwogICAgICBjb25zdCBmaWxlbmFtZSA9IGJ0bi5kYXRhc2V0LmZpbGVuYW1lOwogICAgICBidG4udGV4dENvbnRlbnQgPSAnLi4uJzsKICAgICAgYnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgc2V0U3RhdHVzKCdsb2FkaW5nJywgMCk7CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjUwMDAvZmV0Y2gnLCB7CiAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1cmwgfSkKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyAhPT0gJ29rJykgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5tZXNzYWdlIHx8ICdGZXRjaCBmYWlsZWQnKTsKICAgICAgICB9CgogICAgICAgIC8vIFBhcnNlIGZpbGVuYW1lIHRvIGV4dHJhY3QgY29uZmlnCiAgICAgICAgY29uc3QgY2ZnID0gcGFyc2VGaWxlbmFtZVRvQ29uZmlnKGZpbGVuYW1lKTsKICAgICAgICBpZiAoY2ZnKSB7CiAgICAgICAgICAkKCdjdXN0b21lcicpLnZhbHVlID0gY2ZnLmN1c3RvbWVyIHx8ICcnOwogICAgICAgICAgQ09ORklHLnN0b3JhZ2VDb250cm9scy5mb3JFYWNoKGN0cmwgPT4gewogICAgICAgICAgICBjb25zdCBlbCA9ICQoY3RybC5pZCk7CiAgICAgICAgICAgIGlmIChlbCAmJiBjZmdbY3RybC5pZF0pIHsKICAgICAgICAgICAgICBpZiAoY3RybC50eXBlID09PSAnc2VsZWN0JykgewogICAgICAgICAgICAgICAgQXJyYXkuZnJvbShlbC5vcHRpb25zKS5mb3JFYWNoKG8gPT4gewogICAgICAgICAgICAgICAgICBpZiAoby52YWx1ZSA9PT0gY2ZnW2N0cmwuaWRdKSBvLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKTsKICAgICAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICAgIH0KCiAgICAgICAgLy8gTG9hZCBjb250ZW50IGludG8gc2VsZWN0aW9uCiAgICAgICAgY29uc3QgbGluZXMgPSByZXN1bHQuY29udGVudC5zcGxpdCgnXG4nKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pOwogICAgICAgIHN0YXRlLnNlbGVjdGVkID0gW107CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKS5mb3JFYWNoKGkgPT4gaS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsKCiAgICAgICAgbGluZXMuZm9yRWFjaCh0aXRsZSA9PiB7CiAgICAgICAgICBjb25zdCBsZWZ0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maW5kKGkgPT4gaS5kYXRhc2V0Lm5hbWUgPT09IHRpdGxlKTsKICAgICAgICAgIGlmIChsZWZ0KSB7CiAgICAgICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgc3RhdGUuc2VsZWN0ZWQucHVzaCh7IG5hbWU6IGxlZnQuZGF0YXNldC5uYW1lLCBmaWxlbmFtZTogbGVmdC5kYXRhc2V0LmZpbGVuYW1lIHx8IGxlZnQuZGF0YXNldC5uYW1lLCBzaXplOiBsZWZ0LmRhdGFzZXQuc2l6ZSB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goeyBuYW1lOiB0aXRsZSwgZmlsZW5hbWU6IHRpdGxlLCBzaXplOiAwIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB1cGRhdGVUb3RhbHMoKTsKICAgICAgICB1cGRhdGVUaXRsZSgpOwogICAgICAgIHNldFN0YXR1cygnc3VjY2VzcycpOwogICAgICAgIHNob3dCYW5uZXIoYExvYWRlZCAke2xpbmVzLmxlbmd0aH0gaXRlbXNgLCAyMDAwKTsKCiAgICAgICAgLy8gQ2xvc2UgdGhlIHVwbG9hZHMgcGFuZWwKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZUxpc3RDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGJpbkxpc3RQYWdlID0gMDsKICAgICAgICBjYWNoZWRCaW5GaWxlcyA9IG51bGw7CgogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICBzZXRTdGF0dXMoJ2Vycm9yJyk7CiAgICAgICAgaWYgKGUubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSB8fCBlLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBmZXRjaCcpKSB7CiAgICAgICAgICBzaG93QmFubmVyKCdMaXN0ZW5lciBub3QgcnVubmluZyFcblxuU3RhcnQ6IHB5IGxpc3RlbmVyLnB5JywgMzAwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNob3dCYW5uZXIoJ0xvYWQgZmFpbGVkOiAnICsgZS5tZXNzYWdlLCAzMDAwKTsKICAgICAgICB9CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0xvYWQnOwogICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICB9KTsKfQoKJCgnc2VhcmNoJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldikgPT4gewogIGlmIChldi5rZXkgPT09ICdFbnRlcicpIHsKICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAKICAgIGNvbnN0IHZpc2libGVJdGVtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkKICAgICAgLmZpbHRlcihlbCA9PiBlbC5vZmZzZXRQYXJlbnQgIT09IG51bGwpOyAvLyBPbmx5IHZpc2libGUgaXRlbXMKICAgIAogICAgLy8gQ2FsY3VsYXRlIHdoYXQgd291bGQgYmUgYWRkZWQKICAgIGNvbnN0IHRvQWRkID0gdmlzaWJsZUl0ZW1zLmZpbHRlcihlbCA9PiB7CiAgICAgIGNvbnN0IG5hbWUgPSBlbC5kYXRhc2V0Lm5hbWU7CiAgICAgIHJldHVybiAhc3RhdGUuc2VsZWN0ZWQuc29tZShzID0+IHMubmFtZSA9PT0gbmFtZSk7CiAgICB9KTsKICAgIAogICAgaWYgKHRvQWRkLmxlbmd0aCA9PT0gMCkgewogICAgICB0b2FzdCgnQWxsIHZpc2libGUgaXRlbXMgYWxyZWFkeSBzZWxlY3RlZCcpOwogICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBzaXplIG9mIGl0ZW1zIHRvIGJlIGFkZGVkCiAgICBsZXQgdG90YWxCeXRlcyA9IDA7CiAgICB0b0FkZC5mb3JFYWNoKGVsID0+IHsKICAgICAgdG90YWxCeXRlcyArPSBwYXJzZVNpemVUZXh0KGVsLmRhdGFzZXQuc2l6ZSk7CiAgICB9KTsKICAgIGNvbnN0IHRvdGFsR0IgPSBieXRlc1RvR0IodG90YWxCeXRlcykudG9GaXhlZCgyKTsKICAgIAogICAgLy8gQ29uZmlybWF0aW9uIGRpYWxvZwogICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybSgKICAgICAgYEFkZCAke3RvQWRkLmxlbmd0aH0gZ2FtZSR7dG9BZGQubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9IGZyb20gc2VhcmNoIHJlc3VsdHM/XG5cbmAgKwogICAgICBgVG90YWwgc2l6ZTogJHt0b3RhbEdCfSBHQlxuXG5gICsKICAgICAgYFByZXNzIE9LIHRvIGFkZCB0aGVzZSBpdGVtcy5gCiAgICApOwogICAgCiAgICBpZiAoIWNvbmZpcm1lZCkgewogICAgICB0b2FzdCgnQWRkIGNhbmNlbGxlZCcpOwogICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIEFkZCB0aGUgaXRlbXMKICAgIGxldCBhZGRlZCA9IDA7CiAgICB0b0FkZC5mb3JFYWNoKGVsID0+IHsKICAgICAgY29uc3QgbmFtZSA9IGVsLmRhdGFzZXQubmFtZTsKICAgICAgY29uc3Qgc2l6ZSA9IGVsLmRhdGFzZXQuc2l6ZTsKICAgICAgY29uc3QgZmlsZW5hbWUgPSBlbC5kYXRhc2V0LmZpbGVuYW1lIHx8IG5hbWU7CiAgICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goeyBuYW1lLCBmaWxlbmFtZSwgc2l6ZSB9KTsKICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgYWRkZWQrKzsKICAgIH0pOwogICAgCiAgICBpZiAoYWRkZWQgPiAwKSB7CiAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICByZW5kZXJPdmVybGF5KCk7CiAgICAgIHRvYXN0KGBBZGRlZCAke2FkZGVkfSBpdGVtJHthZGRlZCAhPT0gMSA/ICdzJyA6ICcnfSAoJHt0b3RhbEdCfSBHQilgKTsKICAgIH0KICB9Cn0pOwoKJCgnY29weUxpbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBjb25zdCBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWV8fCcnKS50cmltKCk7IAogIGlmKCFjdXN0KXsgYWxlcnQoJ0N1c3RvbWVyIG5hbWUgcmVxdWlyZWQnKTsgcmV0dXJuOyB9CiAgCiAgY29uc3QgcmF3TGluayA9ICQoJ3NoYXJlYWJsZScpLnZhbHVlLnRyaW0oKTsKICBjb25zdCBsaW5rID0gcmF3TGluawogICAgLnJlcGxhY2UoL15odHRwcz86XC9cLy8sICdoeHhwY2ZmJykKICAgIC5yZXBsYWNlKC9cLi9nLCAnX2RvdF8nKTsKCiAgY29uc3QgdGl0bGVzQXJyID0gc3RhdGUuc2VsZWN0ZWQubWFwKHMgPT4gcy5uYW1lKTsKCiAgaWYgKHRpdGxlc0Fyci5sZW5ndGggPT09IDApIHsKICAgIHRvYXN0KCdObyBzZWxlY3RlZCBsaXN0IHRvIGNvcHknKTsKICAgIGFsZXJ0KCdObyBzZWxlY3RlZCBsaXN0IHRvIGNvcHknKTsKICAgIHJldHVybjsKICB9CgogIGNvbnN0IHRvdGFsQnl0ZXMgPSBzdGF0ZS5zZWxlY3RlZC5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcGFyc2VTaXplVGV4dChzLnNpemUpLCAwKTsKICBjb25zdCB0b3RhbEdCID0gKHRvdGFsQnl0ZXMgLyAoMTAyNCAqKiAzKSkudG9GaXhlZCgyKTsKICBjb25zdCBjb3VudCA9IHRpdGxlc0Fyci5sZW5ndGg7CgogIGNvbnN0IGN1c3RvbWVyID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJycpLnRyaW0oKSB8fCAnVW5rbm93biBjdXN0b21lcic7CiAgY29uc3QgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCBgbGlzdCR7Q09ORklHLmNsaWVudEZpbGVFeHR9YDsKCiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICBjb25zdCBzdGFtcCA9IG5vdy50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7CiAgICB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnMi1kaWdpdCcsIGRheTogJzItZGlnaXQnLAogICAgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0Jywgc2Vjb25kOiAnMi1kaWdpdCcKICB9KTsKCiAgbGV0IGxpbmtUb1VzZSA9IGxpbms7CgogIGlmICghbGluaykgewogICAgY29uc3QgYXNrID0gY29uZmlybSgKICAgICAgYE5vIGxpbmsgZm91bmQuXG5cbmAgKwogICAgICBgTGlzdCBjb250YWlucyAke2NvdW50fSBpdGVtcyB0b3RhbGluZyAke3RvdGFsR0J9IEdCLlxuXG5gICsKICAgICAgYFdvdWxkIHlvdSBsaWtlIHRvIHVwbG9hZCBub3c/YAogICAgKTsKCiAgICBpZiAoYXNrKSB7CiAgICAgICQoJ3VwbG9hZEJ0bicpLmNsaWNrKCk7CiAgICAgIHNob3dCYW5uZXIoIlVwbG9hZGluZ+KAplxuXG5QbGVhc2Ugd2FpdCBmb3IgdGhlIGxpbmsgdG8gYXBwZWFyLCB0aGVuIHByZXNzIENvcHkgYWdhaW4uIik7CiAgICAgIHRvYXN0KCJVcGxvYWRpbmfigKYgd2FpdCBmb3IgbGluaywgdGhlbiBwcmVzcyBDb3B5IGFnYWluIik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBsaW5rVG9Vc2UgPSAnKE5vIGxpbmsgdXBsb2FkZWQpJzsKICB9CgogIGNvbnN0IHN1bW1hcnkgPQogICAgYEN1c3RvbWVyOiAke2N1c3RvbWVyfVxuYCArCiAgICBgRmlsZW5hbWU6ICR7ZmlsZW5hbWV9XG5gICsKICAgIGBRdWFudGl0eTogJHtjb3VudH0gaXRlbXNcbmAgKwogICAgYFRvdGFsIFNpemU6ICR7dG90YWxHQn0gR0JcbmAgKwogICAgYEdlbmVyYXRlZDogJHtzdGFtcH1cblxuYCArCiAgICBgJHtsaW5rVG9Vc2V9XG5cbmA7CgogIGNvbnN0IGZpbmFsVGV4dCA9IHN1bW1hcnkgKyB0aXRsZXNBcnIuam9pbignXG4nKTsKCiAgbGV0IG1lc3NhZ2UgPSBsaW5rCiAgICA/IGBMaXN0ICYgbGluayBjb3BpZWQuICgke2NvdW50fSBpdGVtcywgJHt0b3RhbEdCfSBHQilgCiAgICA6IGBMaXN0IGNvcGllZCAobm8gbGluaykuICgke2NvdW50fSBpdGVtcywgJHt0b3RhbEdCfSBHQilgOwoKICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChmaW5hbFRleHQpLnRoZW4oKCkgPT4gewogICAgdG9hc3QobWVzc2FnZS5yZXBsYWNlKC9cbi9nLCAnICcpKTsKICAgIGFsZXJ0KG1lc3NhZ2UpOwogIH0pLmNhdGNoKCgpID0+IHsKICAgIGFsZXJ0KCdDb3B5IGZhaWxlZCwgcGxlYXNlIGNvcHkgbWFudWFsbHknKTsKICB9KTsKfSk7CgpmdW5jdGlvbiByZW5kZXJTZWxlY3RlZFBhbmVsKCkgewogIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0ZWRQYW5lbEJvZHknKTsKICBpZiAoIWJvZHkpIHJldHVybjsKCiAgYm9keS5pbm5lckhUTUwgPSAnJzsKCiAgaWYgKHN0YXRlLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgewogICAgYm9keS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTNweCI+Tm8gZ2FtZXMgc2VsZWN0ZWQgeWV0PC9kaXY+JzsKICAgIHJldHVybjsKICB9CgogIHN0YXRlLnNlbGVjdGVkLmZvckVhY2goKHMsIGkpID0+IHsKICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgcm93LmNsYXNzTmFtZSA9ICdzZWxlY3RlZC1pdGVtJzsKCiAgICBjb25zdCBzaXplRGlzcGxheSA9IGZvcm1hdFNpemVUb0dCKHMuc2l6ZSk7CiAgICBjb25zdCBpY29uVXJsID0gZ2V0SWNvblVybChzLm5hbWUpOwoKICAgIHJvdy5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tdGh1bWIiPgogICAgICAgICR7aWNvblVybCA/IGA8aW1nIHNyYz0iJHtpY29uVXJsfSIgYWx0PSIiIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo2cHgiPmAgOiAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxOHB4Ij7wn46uPC9zcGFuPid9CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLWNvbnRlbnQiPgogICAgICAgIDxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tdGl0bGUiPiR7ZXNjKHMubmFtZSl9PC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLXNpemUiPiR7c2l6ZURpc3BsYXl9PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tY2hlY2siPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiIvPjwvc3ZnPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLWFjdGlvbnMiPgogICAgICAgIDxidXR0b24gY2xhc3M9InVwIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMTggMTVsLTYtNi02IDYiLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJkb3duIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNNiA5bDYgNiA2LTYiLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJyZW1vdmUiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+PC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgYDsKCiAgICByb3cucXVlcnlTZWxlY3RvcignLnVwJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGlmIChpID4gMCkgewogICAgICAgIFtzdGF0ZS5zZWxlY3RlZFtpIC0gMV0sIHN0YXRlLnNlbGVjdGVkW2ldXSA9IFtzdGF0ZS5zZWxlY3RlZFtpXSwgc3RhdGUuc2VsZWN0ZWRbaSAtIDFdXTsKICAgICAgICByZW5kZXJPdmVybGF5KCk7CiAgICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcuZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICBpZiAoaSA8IHN0YXRlLnNlbGVjdGVkLmxlbmd0aCAtIDEpIHsKICAgICAgICBbc3RhdGUuc2VsZWN0ZWRbaSArIDFdLCBzdGF0ZS5zZWxlY3RlZFtpXV0gPSBbc3RhdGUuc2VsZWN0ZWRbaV0sIHN0YXRlLnNlbGVjdGVkW2kgKyAxXV07CiAgICAgICAgcmVuZGVyT3ZlcmxheSgpOwogICAgICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOwogICAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICB9CiAgICB9KTsKCiAgICByb3cucXVlcnlTZWxlY3RvcignLnJlbW92ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICBzdGF0ZS5zZWxlY3RlZC5zcGxpY2UoaSwgMSk7CiAgICAgIHJlbmRlck92ZXJsYXkoKTsKICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgfSk7CgogICAgYm9keS5hcHBlbmRDaGlsZChyb3cpOwogIH0pOwp9Cgpjb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9nZ2xlQ29uZmlnJyk7CmNvbnN0IGNvbmZpZ1NlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnU2VjdGlvbicpOwoKaWYgKGlzTW9iaWxlICYmIHRvZ2dsZUJ0biAmJiBjb25maWdTZWN0aW9uKSB7CiAgY29uZmlnU2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICB0b2dnbGVCdG4udGV4dENvbnRlbnQgPSAnSGlkZSBDb25maWd1cmF0aW9uJzsKCiAgdG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgY29uc3QgaXNWaXNpYmxlID0gY29uZmlnU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTsKICAgIHRvZ2dsZUJ0bi50ZXh0Q29udGVudCA9IGlzVmlzaWJsZSA/ICdIaWRlIENvbmZpZ3VyYXRpb24nIDogJ1Nob3cgQ29uZmlndXJhdGlvbic7CiAgfSk7Cn0KCmZ1bmN0aW9uIHBhcnNlRGF0ZUZsZXhpYmxlKHMpIHsKICBpZiAoIXMpIHJldHVybiBudWxsOwogIGxldCBkID0gbmV3IERhdGUocyk7CiAgaWYgKCFpc05hTihkLmdldFRpbWUoKSkpIHJldHVybiBkOwoKICBjb25zdCB5bWQgPSAoJycrcykubWF0Y2goLyhcZHs0fSlcRD8oXGR7MSwyfSlcRD8oXGR7MSwyfSkvKTsKICBpZiAoeW1kKSB7CiAgICBkID0gbmV3IERhdGUoTnVtYmVyKHltZFsxXSksIE51bWJlcih5bWRbMl0pIC0gMSwgTnVtYmVyKHltZFszXSkpOwogICAgaWYgKCFpc05hTihkLmdldFRpbWUoKSkpIHJldHVybiBkOwogIH0KCiAgY29uc3QgZG15ID0gKCcnK3MpLm1hdGNoKC8oXGR7MSwyfSlcRChcZHsxLDJ9KVxEKFxkezR9KS8pOwogIGlmIChkbXkpIHsKICAgIGQgPSBuZXcgRGF0ZShOdW1iZXIoZG15WzNdKSwgTnVtYmVyKGRteVsyXSkgLSAxLCBOdW1iZXIoZG15WzFdKSk7CiAgICBpZiAoIWlzTmFOKGQuZ2V0VGltZSgpKSkgcmV0dXJuIGQ7CiAgfQoKICByZXR1cm4gbnVsbDsKfQoKLy8gU29ydCBmdW5jdGlvbmFsaXR5IG1vdmVkIHRvIGdlbnJlIGZpbHRlciBiYXIKCmZ1bmN0aW9uIGRldGVjdEVudmlyb25tZW50KCkgewogIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTsKICBjb25zdCBpc01lc3NlbmdlciA9IC9GQkFOfEZCQVZ8RkJfSUFCfE1lc3Nlbmdlci9pLnRlc3QodWEpOwogIGNvbnN0IGlzSW5zdGFncmFtID0gL0luc3RhZ3JhbS9pLnRlc3QodWEpOwogIGNvbnN0IGlzV2ViVmlldyA9IC9cYnd2XGIvLnRlc3QodWEpIHx8ICh3aW5kb3cubmF2aWdhdG9yLnN0YW5kYWxvbmUgPT09IGZhbHNlKTsKCiAgaWYgKGlzTWVzc2VuZ2VyIHx8IGlzSW5zdGFncmFtIHx8IGlzV2ViVmlldykgewogICAgc2hvd0Jhbm5lcigiTWVzc2VuZ2VyIG9yIGluLWFwcCB3ZWJ2aWV3IGRldGVjdGVkLlxuVGhpcyBwYWdlIGlzIGJlc3QgdXNlZCBvbiBhIGZ1bGwgbW9iaWxlIGJyb3dzZXIgb3IgZGVza3RvcCBicm93c2VyLCBidXQgaXQgd2lsbCBwcm9iYWJseSB3b3JrIGFueXdheSIsIDQwMDApOwogIH0KICBzaG93QmFubmVyKCJIb3cgdG8gdXNlOlxuXG4xLiBFbnRlciB5b3VyIG5hbWVcbjIuIFNlbGVjdCB5b3VyIGRldmljZSBtb2RlbCAoT0xFRC9MaXRlL1YxL1YyKVxuMy4gU2VsZWN0IHlvdXIgU0QgQ2FyZCBTaXplXG40LiBDaG9vc2UgeW91ciBnYW1lc1xuNS4gUHJlc3MgVXBsb2FkXG42LiBTZW5kIHRoZSBnZW5lcmF0ZWQgbGluayB0byBvdXIgY2hhdCBjb252ZXJzYXRpb24iLCA4MDAwKTsKfQoKZnVuY3Rpb24gc2hvd0Jhbm5lcihtZXNzYWdlLCBkdXJhdGlvbiA9IDQwMDApIHsKICBjb25zdCBiYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICBiYW5uZXIuaW5uZXJUZXh0ID0gbWVzc2FnZTsKICBiYW5uZXIuc3R5bGUuY3NzVGV4dCA9ICJwb3NpdGlvbjpmaXhlZDt0b3A6MzAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjgpO2NvbG9yOiNmZmY7cGFkZGluZzoxOHB4O2JvcmRlci1yYWRpdXM6MTZweDtmb250LXNpemU6MjJweDt6LWluZGV4Ojk5OTk7Ym94LXNoYWRvdzowIDJweCA2cHggcmdiYSgwLDAsMCwwLjMpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzIGVhc2U7d2hpdGUtc3BhY2U6cHJlLWxpbmU7bWF4LXdpZHRoOjgwJSI7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChiYW5uZXIpOwoKICBzZXRUaW1lb3V0KCgpID0+IGJhbm5lci5zdHlsZS5vcGFjaXR5ID0gIjAiLCBkdXJhdGlvbik7CiAgc2V0VGltZW91dCgoKSA9PiBiYW5uZXIucmVtb3ZlKCksIGR1cmF0aW9uICsgNTAwKTsKfQoKZnVuY3Rpb24gbGV2ZW5zaHRlaW5EaXN0YW5jZShzdHIxLCBzdHIyKSB7CiAgY29uc3QgbGVuMSA9IHN0cjEubGVuZ3RoOwogIGNvbnN0IGxlbjIgPSBzdHIyLmxlbmd0aDsKICBjb25zdCBtYXRyaXggPSBBcnJheShsZW4yICsgMSkuZmlsbChudWxsKS5tYXAoKCkgPT4gQXJyYXkobGVuMSArIDEpLmZpbGwoMCkpOwogIAogIGZvciAobGV0IGkgPSAwOyBpIDw9IGxlbjE7IGkrKykgbWF0cml4WzBdW2ldID0gaTsKICBmb3IgKGxldCBqID0gMDsgaiA8PSBsZW4yOyBqKyspIG1hdHJpeFtqXVswXSA9IGo7CiAgCiAgZm9yIChsZXQgaiA9IDE7IGogPD0gbGVuMjsgaisrKSB7CiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBsZW4xOyBpKyspIHsKICAgICAgY29uc3QgY29zdCA9IHN0cjFbaSAtIDFdID09PSBzdHIyW2ogLSAxXSA/IDAgOiAxOwogICAgICBtYXRyaXhbal1baV0gPSBNYXRoLm1pbigKICAgICAgICBtYXRyaXhbal1baSAtIDFdICsgMSwKICAgICAgICBtYXRyaXhbaiAtIDFdW2ldICsgMSwKICAgICAgICBtYXRyaXhbaiAtIDFdW2kgLSAxXSArIGNvc3QKICAgICAgKTsKICAgIH0KICB9CiAgCiAgcmV0dXJuIG1hdHJpeFtsZW4yXVtsZW4xXTsKfQoKZnVuY3Rpb24gbm9ybWFsaXplVGl0bGUodGl0bGUpIHsKICByZXR1cm4gdGl0bGUudG9Mb3dlckNhc2UoKQogICAgLnJlcGxhY2UoL1teXHdcc10vZywgJyAnKSAgLy8gUmVtb3ZlIHB1bmN0dWF0aW9uCiAgICAucmVwbGFjZSgvXHMrL2csICcgJykgICAgICAvLyBDb2xsYXBzZSBzcGFjZXMKICAgIC50cmltKCk7Cn0KCmZ1bmN0aW9uIGdldEtleXdvcmRzKHRpdGxlKSB7CiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVRpdGxlKHRpdGxlKTsKICAvLyBGaWx0ZXIgb3V0IGNvbW1vbiB3b3JkcwogIGNvbnN0IHN0b3BXb3JkcyA9IFsndGhlJywgJ29mJywgJ2FuZCcsICdhJywgJ2FuJywgJ2luJywgJ29uJywgJ2ZvcicsICd0bycsICd3aXRoJ107CiAgcmV0dXJuIG5vcm1hbGl6ZWQuc3BsaXQoJyAnKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDAgJiYgIXN0b3BXb3Jkcy5pbmNsdWRlcyh3b3JkKSk7Cn0KCmZ1bmN0aW9uIGV4dHJhY3ROdW1iZXJzKHRpdGxlKSB7CiAgY29uc3QgbWF0Y2hlcyA9IHRpdGxlLm1hdGNoKC9cZCsvZyk7CiAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzLm1hcChuID0+IG4pIDogW107Cn0KCmZ1bmN0aW9uIGNhbGN1bGF0ZU1hdGNoU2NvcmUodXNlclRpdGxlLCBkYlRpdGxlKSB7CiAgY29uc3QgdXNlcktleXdvcmRzID0gZ2V0S2V5d29yZHModXNlclRpdGxlKTsKICBjb25zdCBkYktleXdvcmRzID0gZ2V0S2V5d29yZHMoZGJUaXRsZSk7CiAgCiAgaWYgKHVzZXJLZXl3b3Jkcy5sZW5ndGggPT09IDApIHJldHVybiB7IHNjb3JlOiAwLCBudW1iZXJNYXRjaDogZmFsc2UsIGNvbnNlY3V0aXZlTWF0Y2hlczogMCB9OwogIAogIGxldCBtYXRjaGVkV29yZHMgPSAwOwogIGxldCBwYXJ0aWFsTWF0Y2hlcyA9IDA7CiAgbGV0IGNvbnNlY3V0aXZlTWF0Y2hlcyA9IDA7CiAgbGV0IGxhc3RNYXRjaEluZGV4ID0gLTI7CiAgCiAgLy8gQ2hlY2sgZm9yIG51bWJlciBtYXRjaGluZwogIGNvbnN0IHVzZXJOdW1iZXJzID0gZXh0cmFjdE51bWJlcnModXNlclRpdGxlKTsKICBjb25zdCBkYk51bWJlcnMgPSBleHRyYWN0TnVtYmVycyhkYlRpdGxlKTsKICBjb25zdCBoYXNFeGFjdE51bWJlck1hdGNoID0gdXNlck51bWJlcnMubGVuZ3RoID4gMCAmJiAKICAgIHVzZXJOdW1iZXJzLmV2ZXJ5KG51bSA9PiBkYk51bWJlcnMuaW5jbHVkZXMobnVtKSk7CiAgCiAgdXNlcktleXdvcmRzLmZvckVhY2goKHVzZXJXb3JkLCBpZHgpID0+IHsKICAgIGxldCBtYXRjaGVkID0gZmFsc2U7CiAgICAKICAgIC8vIENoZWNrIGZvciBleGFjdCB3b3JkIG1hdGNoCiAgICBjb25zdCBleGFjdElkeCA9IGRiS2V5d29yZHMuZmluZEluZGV4KGRiV29yZCA9PiBkYldvcmQgPT09IHVzZXJXb3JkKTsKICAgIGlmIChleGFjdElkeCAhPT0gLTEpIHsKICAgICAgbWF0Y2hlZFdvcmRzICs9IDE7CiAgICAgIG1hdGNoZWQgPSB0cnVlOwogICAgICAKICAgICAgLy8gVHJhY2sgY29uc2VjdXRpdmUgbWF0Y2hlcwogICAgICBpZiAoZXhhY3RJZHggPT09IGxhc3RNYXRjaEluZGV4ICsgMSkgewogICAgICAgIGNvbnNlY3V0aXZlTWF0Y2hlcysrOwogICAgICB9CiAgICAgIGxhc3RNYXRjaEluZGV4ID0gZXhhY3RJZHg7CiAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgLy8gQ2hlY2sgZm9yIHN1YnN0cmluZyBtYXRjaCAtIGJ1dCByZXF1aXJlIG1pbmltdW0gbGVuZ3RoCiAgICAvLyBBTkQgdGhlIHVzZXIgd29yZCBtdXN0IGJlIHN1YnN0YW50aWFsICgzKyBjaGFycyBmb3IgbW9zdCwgNCsgZm9yIHZlcnkgY29tbW9uIHdvcmRzKQogICAgaWYgKHVzZXJXb3JkLmxlbmd0aCA+PSAzKSB7CiAgICAgIGNvbnN0IHN1YnN0cmluZ0lkeCA9IGRiS2V5d29yZHMuZmluZEluZGV4KGRiV29yZCA9PiB7CiAgICAgICAgLy8gREIgd29yZCBtdXN0IGJlIGxvbmcgZW5vdWdoIHRvIGNvbnRhaW4gdGhlIHVzZXIgd29yZCBtZWFuaW5nZnVsbHkKICAgICAgICBpZiAoZGJXb3JkLmxlbmd0aCA+PSB1c2VyV29yZC5sZW5ndGggKyAxICYmIGRiV29yZC5pbmNsdWRlcyh1c2VyV29yZCkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICAvLyBPciBpZiB1c2VyIHdvcmQgaXMgbG9uZ2VyLCBjaGVjayBpZiBpdCBjb250YWlucyBEQiB3b3JkIChmb3IgY29tcG91bmQgd29yZHMpCiAgICAgICAgaWYgKHVzZXJXb3JkLmxlbmd0aCA+PSA0ICYmIHVzZXJXb3JkLmluY2x1ZGVzKGRiV29yZCkgJiYgZGJXb3JkLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9KTsKICAgICAgCiAgICAgIGlmIChzdWJzdHJpbmdJZHggIT09IC0xKSB7CiAgICAgICAgLy8gR2l2ZSBoaWdoZXIgc2NvcmUgZm9yIGxvbmdlciBtYXRjaGVzCiAgICAgICAgY29uc3QgbWF0Y2hTdHJlbmd0aCA9IHVzZXJXb3JkLmxlbmd0aCA+PSA0ID8gMC44IDogMC42OwogICAgICAgIHBhcnRpYWxNYXRjaGVzICs9IG1hdGNoU3RyZW5ndGg7CiAgICAgICAgbWF0Y2hlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgICAKICAgIC8vIENoZWNrIGZvciB2ZXJ5IGNsb3NlIHR5cG8gKHNpbmdsZSBjaGFyIGRpZmZlcmVuY2UpCiAgICAvLyBPbmx5IGZvciB3b3JkcyAzKyBjaGFyYWN0ZXJzCiAgICBpZiAodXNlcldvcmQubGVuZ3RoID49IDMpIHsKICAgICAgZGJLZXl3b3Jkcy5mb3JFYWNoKGRiV29yZCA9PiB7CiAgICAgICAgaWYgKGRiV29yZC5sZW5ndGggPCAzKSByZXR1cm47IC8vIFNraXAgc2hvcnQgd29yZHMKICAgICAgICAKICAgICAgICBjb25zdCBtYXhMZW4gPSBNYXRoLm1heCh1c2VyV29yZC5sZW5ndGgsIGRiV29yZC5sZW5ndGgpOwogICAgICAgIGNvbnN0IG1pbkxlbiA9IE1hdGgubWluKHVzZXJXb3JkLmxlbmd0aCwgZGJXb3JkLmxlbmd0aCk7CiAgICAgICAgCiAgICAgICAgLy8gT25seSBjb25zaWRlciBpZiBsZW5ndGhzIGFyZSBzaW1pbGFyCiAgICAgICAgaWYgKG1heExlbiAtIG1pbkxlbiA8PSAyICYmIG1pbkxlbiA+PSAzKSB7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGxldmVuc2h0ZWluRGlzdGFuY2UodXNlcldvcmQsIGRiV29yZCk7CiAgICAgICAgICBpZiAoZGlzdGFuY2UgPD0gMikgewogICAgICAgICAgICBwYXJ0aWFsTWF0Y2hlcyArPSAwLjU7CiAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSk7CiAgCiAgY29uc3QgdG90YWxNYXRjaGVkID0gbWF0Y2hlZFdvcmRzICsgcGFydGlhbE1hdGNoZXM7CiAgY29uc3Qgc2NvcmUgPSB0b3RhbE1hdGNoZWQgLyB1c2VyS2V5d29yZHMubGVuZ3RoOwogIAogIHJldHVybiB7IAogICAgc2NvcmUsIAogICAgbnVtYmVyTWF0Y2g6IGhhc0V4YWN0TnVtYmVyTWF0Y2gsCiAgICBjb25zZWN1dGl2ZU1hdGNoZXMsCiAgICB0aXRsZUxlbmd0aDogZGJLZXl3b3Jkcy5sZW5ndGgsCiAgICBleGFjdFdvcmRDb3VudDogbWF0Y2hlZFdvcmRzICAvLyBUcmFjayBleGFjdCBtYXRjaGVzIHNlcGFyYXRlbHkKICB9Owp9CgpmdW5jdGlvbiBmaW5kQmVzdE1hdGNoKHVzZXJUaXRsZSwgZGJJdGVtcykgewogIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVUaXRsZSh1c2VyVGl0bGUpOwogIAogIC8vIFRyeSBleGFjdCBtYXRjaCBmaXJzdAogIGNvbnN0IGV4YWN0TWF0Y2ggPSBkYkl0ZW1zLmZpbmQoaXRlbSA9PiBub3JtYWxpemVUaXRsZShpdGVtLm5hbWUpID09PSBub3JtYWxpemVkKTsKICBpZiAoZXhhY3RNYXRjaCkgewogICAgcmV0dXJuIHsgbWF0Y2g6IGV4YWN0TWF0Y2gsIGNvbmZpZGVuY2U6ICdleGFjdCcsIHNjb3JlOiAxLjAgfTsKICB9CiAgCiAgLy8gU2NvcmUgYWxsIGl0ZW1zCiAgY29uc3Qgc2NvcmVkID0gZGJJdGVtcy5tYXAoaXRlbSA9PiB7CiAgICBjb25zdCBtYXRjaERhdGEgPSBjYWxjdWxhdGVNYXRjaFNjb3JlKHVzZXJUaXRsZSwgaXRlbS5uYW1lKTsKICAgIHJldHVybiB7CiAgICAgIGl0ZW0sCiAgICAgIC4uLm1hdGNoRGF0YQogICAgfTsKICB9KS5maWx0ZXIocyA9PiBzLnNjb3JlID4gMCk7CiAgCiAgaWYgKHNjb3JlZC5sZW5ndGggPT09IDApIHJldHVybiBudWxsOwogIAogIC8vIFNvcnQgYnkgcHJpb3JpdHk6CiAgLy8gMS4gTnVtYmVyIG1hdGNoIChjcml0aWNhbCBmb3Igc2VxdWVscy92ZXJzaW9ucykKICAvLyAyLiBFeGFjdCB3b3JkIGNvdW50IChwcmVmZXIgbW9yZSBleGFjdCBtYXRjaGVzKQogIC8vIDMuIFNjb3JlCiAgLy8gNC4gQ29uc2VjdXRpdmUgbWF0Y2hlcyAod29yZCBvcmRlciBtYXR0ZXJzKQogIC8vIDUuIFNob3J0ZXIgdGl0bGUgKG1vcmUgcHJlY2lzZSkKICBzY29yZWQuc29ydCgoYSwgYikgPT4gewogICAgLy8gUHJpb3JpdHkgMTogRXhhY3QgbnVtYmVyIG1hdGNoCiAgICBpZiAoYS5udW1iZXJNYXRjaCAmJiAhYi5udW1iZXJNYXRjaCkgcmV0dXJuIC0xOwogICAgaWYgKCFhLm51bWJlck1hdGNoICYmIGIubnVtYmVyTWF0Y2gpIHJldHVybiAxOwogICAgCiAgICAvLyBQcmlvcml0eSAyOiBNb3JlIGV4YWN0IHdvcmQgbWF0Y2hlcyB3aW5zCiAgICBpZiAoYS5leGFjdFdvcmRDb3VudCAhPT0gYi5leGFjdFdvcmRDb3VudCkgewogICAgICByZXR1cm4gYi5leGFjdFdvcmRDb3VudCAtIGEuZXhhY3RXb3JkQ291bnQ7CiAgICB9CiAgICAKICAgIC8vIFByaW9yaXR5IDM6IFNjb3JlIGRpZmZlcmVuY2UKICAgIGNvbnN0IHNjb3JlRGlmZiA9IGIuc2NvcmUgLSBhLnNjb3JlOwogICAgaWYgKE1hdGguYWJzKHNjb3JlRGlmZikgPiAwLjE1KSByZXR1cm4gc2NvcmVEaWZmOwogICAgCiAgICAvLyBQcmlvcml0eSA0OiBDb25zZWN1dGl2ZSBtYXRjaGVzIChwaHJhc2UgbWF0Y2hpbmcpCiAgICBpZiAoYS5jb25zZWN1dGl2ZU1hdGNoZXMgIT09IGIuY29uc2VjdXRpdmVNYXRjaGVzKSB7CiAgICAgIHJldHVybiBiLmNvbnNlY3V0aXZlTWF0Y2hlcyAtIGEuY29uc2VjdXRpdmVNYXRjaGVzOwogICAgfQogICAgCiAgICAvLyBQcmlvcml0eSA1OiBQcmVmZXIgc2hvcnRlciB0aXRsZXMKICAgIHJldHVybiBhLnRpdGxlTGVuZ3RoIC0gYi50aXRsZUxlbmd0aDsKICB9KTsKICAKICBjb25zdCBiZXN0ID0gc2NvcmVkWzBdOwogIAogIC8vIERldGVybWluZSBjb25maWRlbmNlIGJhc2VkIG9uIHNjb3JlCiAgbGV0IGNvbmZpZGVuY2U7CiAgaWYgKGJlc3Quc2NvcmUgPj0gMC45NSkgewogICAgY29uZmlkZW5jZSA9ICdoaWdoJzsKICB9IGVsc2UgaWYgKGJlc3Quc2NvcmUgPj0gMC43KSB7CiAgICBjb25maWRlbmNlID0gJ21lZGl1bSc7CiAgfSBlbHNlIGlmIChiZXN0LnNjb3JlID49IDAuNSkgewogICAgY29uZmlkZW5jZSA9ICdsb3cnOwogIH0gZWxzZSB7CiAgICByZXR1cm4gbnVsbDsgLy8gVG9vIGxvdyBjb25maWRlbmNlCiAgfQogIAogIHJldHVybiB7IG1hdGNoOiBiZXN0Lml0ZW0sIGNvbmZpZGVuY2UsIHNjb3JlOiBiZXN0LnNjb3JlIH07Cn0KCmZ1bmN0aW9uIG1hdGNoVXNlckxpc3QodXNlckxpc3QpIHsKICBjb25zdCBsaW5lcyA9IHVzZXJMaXN0LnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7CiAgY29uc3QgcmVzdWx0cyA9IHsKICAgIGV4YWN0OiBbXSwKICAgIGhpZ2g6IFtdLAogICAgbWVkaXVtOiBbXSwKICAgIGxvdzogW10sCiAgICBub3RGb3VuZDogW10KICB9OwogIAogIGxpbmVzLmZvckVhY2godXNlclRpdGxlID0+IHsKICAgIGNvbnN0IHJlc3VsdCA9IGZpbmRCZXN0TWF0Y2godXNlclRpdGxlLCBzdGF0ZS5pdGVtcyk7CiAgICAKICAgIGlmICghcmVzdWx0KSB7CiAgICAgIHJlc3VsdHMubm90Rm91bmQucHVzaCh1c2VyVGl0bGUpOwogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0c1tyZXN1bHQuY29uZmlkZW5jZV0ucHVzaCh7CiAgICAgICAgb3JpZ2luYWw6IHVzZXJUaXRsZSwKICAgICAgICBtYXRjaGVkOiByZXN1bHQubWF0Y2gubmFtZSwKICAgICAgICBzaXplOiByZXN1bHQubWF0Y2guc2l6ZSwKICAgICAgICBzY29yZTogcmVzdWx0LnNjb3JlCiAgICAgIH0pOwogICAgfQogIH0pOwogIAogIHJldHVybiByZXN1bHRzOwp9CgokKCdtYXRjaExpc3QnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZXNNb2RhbCcpOwogIG1vZGFsLmlubmVySFRNTCA9ICcnOwogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIG1vZGFsLnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JzsKICAKICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBoZWFkZXIuaW5uZXJIVE1MID0gJzxzdHJvbmc+TWF0Y2ggVXNlciBMaXN0PC9zdHJvbmc+PGJyPjxzcGFuIGNsYXNzPSJtZXRhIj5QYXN0ZSB1c2VyXCdzIGdhbWUgbGlzdCBiZWxvdyAob25lIHBlciBsaW5lKTwvc3Bhbj4nOwogIG1vZGFsLmFwcGVuZENoaWxkKGhlYWRlcik7CiAgCiAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogIHRleHRhcmVhLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6MTAwJTttaW4taGVpZ2h0OjIwMHB4O21hcmdpbi10b3A6MTJweDtwYWRkaW5nOjhweDtib3JkZXI6MXB4IHNvbGlkICM0MzQzNDU7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1mYW1pbHk6bW9ub3NwYWNlO2ZvbnQtc2l6ZToxM3B4Oyc7CiAgdGV4dGFyZWEucGxhY2Vob2xkZXIgPSAnU3VwZXIgTWFyaW8gT2R5c3NleVxuVGhlIExlZ2VuZCBvZiBaZWxkYVxuTWFyaW8gS2FydCA4XG4uLi4nOwogIG1vZGFsLmFwcGVuZENoaWxkKHRleHRhcmVhKTsKICAKICBjb25zdCBidG5Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBidG5Db250YWluZXIuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OmZsZXg7Z2FwOjhweDttYXJnaW4tdG9wOjEycHg7JzsKICAKICBjb25zdCBtYXRjaEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIG1hdGNoQnRuLnRleHRDb250ZW50ID0gJ0FuYWx5emUgJiBNYXRjaCc7CiAgbWF0Y2hCdG4uY2xhc3NOYW1lID0gJ2J0bic7CiAgbWF0Y2hCdG4ub25jbGljayA9ICgpID0+IHsKICAgIGNvbnN0IHVzZXJMaXN0ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpOwogICAgaWYgKCF1c2VyTGlzdCkgewogICAgICBhbGVydCgnUGxlYXNlIHBhc3RlIGEgZ2FtZSBsaXN0Jyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgc2hvd01hdGNoUmVzdWx0cyh1c2VyTGlzdCk7CiAgfTsKICBidG5Db250YWluZXIuYXBwZW5kQ2hpbGQobWF0Y2hCdG4pOwogIAogIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgY2xvc2VCdG4udGV4dENvbnRlbnQgPSAnQ2FuY2VsJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIG1vZGFsLmlubmVySFRNTCA9ICcnOwogIH07CiAgYnRuQ29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnRuKTsKICAKICBtb2RhbC5hcHBlbmRDaGlsZChidG5Db250YWluZXIpOwp9KTsKCmZ1bmN0aW9uIHNob3dNYXRjaFJlc3VsdHModXNlckxpc3QpIHsKICBjb25zdCByZXN1bHRzID0gbWF0Y2hVc2VyTGlzdCh1c2VyTGlzdCk7CiAgY29uc3QgdG90YWxNYXRjaGVkID0gcmVzdWx0cy5leGFjdC5sZW5ndGggKyByZXN1bHRzLmhpZ2gubGVuZ3RoICsgcmVzdWx0cy5tZWRpdW0ubGVuZ3RoICsgcmVzdWx0cy5sb3cubGVuZ3RoOwogIGNvbnN0IHRvdGFsSXRlbXMgPSB0b3RhbE1hdGNoZWQgKyByZXN1bHRzLm5vdEZvdW5kLmxlbmd0aDsKICAKICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlc01vZGFsJyk7CiAgbW9kYWwuaW5uZXJIVE1MID0gJyc7CiAgbW9kYWwuc3R5bGUubWF4V2lkdGggPSAnNzAwcHgnOwogIG1vZGFsLnN0eWxlLm1heEhlaWdodCA9ICc4MHZoJzsKICAKICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBoZWFkZXIuaW5uZXJIVE1MID0gYDxzdHJvbmc+TWF0Y2ggUmVzdWx0czwvc3Ryb25nPjxicj48c3BhbiBjbGFzcz0ibWV0YSI+TWF0Y2hlZDogJHt0b3RhbE1hdGNoZWR9IC8gJHt0b3RhbEl0ZW1zfTwvc3Bhbj5gOwogIG1vZGFsLmFwcGVuZENoaWxkKGhlYWRlcik7CiAgCiAgY29uc3QgcmVzdWx0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgcmVzdWx0Q29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAnbWFyZ2luLXRvcDoxMnB4O21heC1oZWlnaHQ6NDAwcHg7b3ZlcmZsb3cteTphdXRvOyc7CiAgCiAgLy8gRXhhY3QgbWF0Y2hlcwogIGlmIChyZXN1bHRzLmV4YWN0Lmxlbmd0aCA+IDApIHsKICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206OHB4OyI+PHN0cm9uZyBzdHlsZT0iY29sb3I6IzEwYjk4MTsiPuKckyBFeGFjdCBNYXRjaGVzICgke3Jlc3VsdHMuZXhhY3QubGVuZ3RofSk8L3N0cm9uZz48L2Rpdj5gOwogICAgcmVzdWx0cy5leGFjdC5mb3JFYWNoKHIgPT4gewogICAgICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MICs9IGA8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZjBmZGY0O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMTBiOTgxO21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMxMTE7Ij4ke2VzYyhyLm1hdGNoZWQpfSA8c3BhbiBzdHlsZT0iY29sb3I6IzZiNzI4MDsiPiR7ZXNjKHIuc2l6ZSl9PC9zcGFuPjwvZGl2PmA7CiAgICB9KTsKICB9CgogIC8vIEhpZ2ggY29uZmlkZW5jZQogIGlmIChyZXN1bHRzLmhpZ2gubGVuZ3RoID4gMCkgewogICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0ibWFyZ2luOjEycHggMCA4cHg7Ij48c3Ryb25nIHN0eWxlPSJjb2xvcjojM2I4MmY2OyI+4omIIEhpZ2ggQ29uZmlkZW5jZSAoJHtyZXN1bHRzLmhpZ2gubGVuZ3RofSk8L3N0cm9uZz48L2Rpdj5gOwogICAgcmVzdWx0cy5oaWdoLmZvckVhY2gociA9PiB7CiAgICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtiYWNrZ3JvdW5kOiNlZmY2ZmY7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICMzYjgyZjY7bWFyZ2luLWJvdHRvbTo0cHg7Zm9udC1zaXplOjEycHg7Y29sb3I6IzExMTsiPjxkaXY+JHtlc2Moci5vcmlnaW5hbCl9IOKGkiA8c3Ryb25nPiR7ZXNjKHIubWF0Y2hlZCl9PC9zdHJvbmc+PC9kaXY+PGRpdiBzdHlsZT0iY29sb3I6IzZiNzI4MDsiPiR7ZXNjKHIuc2l6ZSl9PC9kaXY+PC9kaXY+YDsKICAgIH0pOwogIH0KCiAgLy8gTWVkaXVtIGNvbmZpZGVuY2UKICBpZiAocmVzdWx0cy5tZWRpdW0ubGVuZ3RoID4gMCkgewogICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0ibWFyZ2luOjEycHggMCA4cHg7Ij48c3Ryb25nIHN0eWxlPSJjb2xvcjojZjU5ZTBiOyI+PyBNZWRpdW0gQ29uZmlkZW5jZSAoJHtyZXN1bHRzLm1lZGl1bS5sZW5ndGh9KTwvc3Ryb25nPiA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjEycHg7Y29sb3I6IzZiNzI4MDsiPlJldmlldyB0aGVzZTwvc3Bhbj48L2Rpdj5gOwogICAgcmVzdWx0cy5tZWRpdW0uZm9yRWFjaChyID0+IHsKICAgICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0icGFkZGluZzo0cHggOHB4O2JhY2tncm91bmQ6I2ZmZmJlYjtib3JkZXItbGVmdDozcHggc29saWQgI2Y1OWUwYjttYXJnaW4tYm90dG9tOjRweDtmb250LXNpemU6MTJweDtjb2xvcjojMTExOyI+PGRpdj4ke2VzYyhyLm9yaWdpbmFsKX0g4oaSIDxzdHJvbmc+JHtlc2Moci5tYXRjaGVkKX08L3N0cm9uZz48L2Rpdj48ZGl2IHN0eWxlPSJjb2xvcjojNmI3MjgwOyI+JHtlc2Moci5zaXplKX08L2Rpdj48L2Rpdj5gOwogICAgfSk7CiAgfQoKICAvLyBMb3cgY29uZmlkZW5jZQogIGlmIChyZXN1bHRzLmxvdy5sZW5ndGggPiAwKSB7CiAgICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MICs9IGA8ZGl2IHN0eWxlPSJtYXJnaW46MTJweCAwIDhweDsiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOiNmOTczMTY7Ij7imqAgTG93IENvbmZpZGVuY2UgKCR7cmVzdWx0cy5sb3cubGVuZ3RofSk8L3N0cm9uZz4gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxMnB4O2NvbG9yOiM2YjcyODA7Ij5WZXJpZnkgbWFudWFsbHk8L3NwYW4+PC9kaXY+YDsKICAgIHJlc3VsdHMubG93LmZvckVhY2gociA9PiB7CiAgICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtiYWNrZ3JvdW5kOiNmZmY3ZWQ7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNmOTczMTY7bWFyZ2luLWJvdHRvbTo0cHg7Zm9udC1zaXplOjEycHg7Y29sb3I6IzExMTsiPjxkaXY+JHtlc2Moci5vcmlnaW5hbCl9IOKGkiA8c3Ryb25nPiR7ZXNjKHIubWF0Y2hlZCl9PC9zdHJvbmc+PC9kaXY+PGRpdiBzdHlsZT0iY29sb3I6IzZiNzI4MDsiPiR7ZXNjKHIuc2l6ZSl9PC9kaXY+PC9kaXY+YDsKICAgIH0pOwogIH0KCiAgLy8gTm90IGZvdW5kCiAgaWYgKHJlc3VsdHMubm90Rm91bmQubGVuZ3RoID4gMCkgewogICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0ibWFyZ2luOjEycHggMCA4cHg7Ij48c3Ryb25nIHN0eWxlPSJjb2xvcjojZWY0NDQ0OyI+4pyXIE5vdCBGb3VuZCAoJHtyZXN1bHRzLm5vdEZvdW5kLmxlbmd0aH0pPC9zdHJvbmc+PC9kaXY+YDsKICAgIHJlc3VsdHMubm90Rm91bmQuZm9yRWFjaCh0aXRsZSA9PiB7CiAgICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtiYWNrZ3JvdW5kOiNmZWYyZjI7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNlZjQ0NDQ7bWFyZ2luLWJvdHRvbTo0cHg7Zm9udC1zaXplOjEycHg7Y29sb3I6IzExMTsiPiR7ZXNjKHRpdGxlKX08L2Rpdj5gOwogICAgfSk7CiAgfQogIAogIG1vZGFsLmFwcGVuZENoaWxkKHJlc3VsdENvbnRhaW5lcik7CiAgCiAgY29uc3QgYnRuQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgYnRuQ29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpmbGV4O2dhcDo4cHg7bWFyZ2luLXRvcDoxMnB4O2ZsZXgtd3JhcDp3cmFwOyc7CiAgCiAgaWYgKHRvdGFsTWF0Y2hlZCA+IDApIHsKICAgIGNvbnN0IGFkZEFsbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgYWRkQWxsQnRuLnRleHRDb250ZW50ID0gYEFkZCAke3RvdGFsTWF0Y2hlZH0gTWF0Y2hlcyB0byBTZWxlY3Rpb25gOwogICAgYWRkQWxsQnRuLmNsYXNzTmFtZSA9ICdidG4nOwogICAgYWRkQWxsQnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgIGxldCBhZGRlZCA9IDA7CiAgICAgIFsuLi5yZXN1bHRzLmV4YWN0LCAuLi5yZXN1bHRzLmhpZ2gsIC4uLnJlc3VsdHMubWVkaXVtLCAuLi5yZXN1bHRzLmxvd10uZm9yRWFjaChyID0+IHsKICAgICAgICBpZiAoIXN0YXRlLnNlbGVjdGVkLnNvbWUocyA9PiBzLm5hbWUgPT09IHIubWF0Y2hlZCkpIHsKICAgICAgICAgIGNvbnN0IGl0ZW0gPSBzdGF0ZS5pdGVtcy5maW5kKGl0ID0+IGl0Lm5hbWUgPT09IHIubWF0Y2hlZCk7CiAgICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgICBzdGF0ZS5zZWxlY3RlZC5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgICAgICAgZmlsZW5hbWU6IGl0ZW0uZmlsZW5hbWUgfHwgaXRlbS5uYW1lLAogICAgICAgICAgICAgIHNpemU6IGl0ZW0uc2l6ZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYWRkZWQrKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICAKICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICAgIHJlbmRlck92ZXJsYXkoKTsKICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgIHRvYXN0KGBBZGRlZCAke2FkZGVkfSBtYXRjaGVkIGdhbWVzYCk7CiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgIG1vZGFsLmlubmVySFRNTCA9ICcnOwogICAgfTsKICAgIGJ0bkNvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRBbGxCdG4pOwogIH0KICAKICBjb25zdCBleHBvcnRNYXRjaGVkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgZXhwb3J0TWF0Y2hlZEJ0bi50ZXh0Q29udGVudCA9ICdFeHBvcnQgTWF0Y2hlZCc7CiAgZXhwb3J0TWF0Y2hlZEJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBleHBvcnRNYXRjaGVkQnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICBjb25zdCBjb250ZW50ID0gWy4uLnJlc3VsdHMuZXhhY3QsIC4uLnJlc3VsdHMuaGlnaCwgLi4ucmVzdWx0cy5tZWRpdW0sIC4uLnJlc3VsdHMubG93XQogICAgICAubWFwKHIgPT4gci5tYXRjaGVkKQogICAgICAuam9pbignXG4nKTsKICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOwogICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICBhLmRvd25sb2FkID0gYG1hdGNoZWRfJHtEYXRlLm5vdygpfS50eHRgOwogICAgYS5jbGljaygpOwogICAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpOwogICAgdG9hc3QoJ0V4cG9ydGVkIG1hdGNoZWQgbGlzdCcpOwogIH07CiAgYnRuQ29udGFpbmVyLmFwcGVuZENoaWxkKGV4cG9ydE1hdGNoZWRCdG4pOwogIAogIGlmIChyZXN1bHRzLm5vdEZvdW5kLmxlbmd0aCA+IDApIHsKICAgIGNvbnN0IGV4cG9ydE5vdEZvdW5kQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICBleHBvcnROb3RGb3VuZEJ0bi50ZXh0Q29udGVudCA9ICdFeHBvcnQgTm90IEZvdW5kJzsKICAgIGV4cG9ydE5vdEZvdW5kQnRuLmNsYXNzTmFtZSA9ICdidG4gZ2hvc3QnOwogICAgZXhwb3J0Tm90Rm91bmRCdG4uc3R5bGUuYmFja2dyb3VuZCA9ICcjZmVmMmYyJzsKICAgIGV4cG9ydE5vdEZvdW5kQnRuLnN0eWxlLmNvbG9yID0gJyNlZjQ0NDQnOwogICAgZXhwb3J0Tm90Rm91bmRCdG4ub25jbGljayA9ICgpID0+IHsKICAgICAgY29uc3QgY29udGVudCA9IHJlc3VsdHMubm90Rm91bmQuam9pbignXG4nKTsKICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7CiAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgIGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgIGEuZG93bmxvYWQgPSBgbm90X2ZvdW5kXyR7RGF0ZS5ub3coKX0udHh0YDsKICAgICAgYS5jbGljaygpOwogICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7CiAgICAgIHRvYXN0KCdFeHBvcnRlZCBub3QgZm91bmQgbGlzdCcpOwogICAgfTsKICAgIGJ0bkNvbnRhaW5lci5hcHBlbmRDaGlsZChleHBvcnROb3RGb3VuZEJ0bik7CiAgfQogIAogIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgY2xvc2VCdG4udGV4dENvbnRlbnQgPSAnQ2xvc2UnOwogIGNsb3NlQnRuLmNsYXNzTmFtZSA9ICdidG4gZ2hvc3QnOwogIGNsb3NlQnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgbW9kYWwuaW5uZXJIVE1MID0gJyc7CiAgfTsKICBidG5Db250YWluZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdG4pOwogIAogIG1vZGFsLmFwcGVuZENoaWxkKGJ0bkNvbnRhaW5lcik7Cn0KCmlmICghaXNMb2NhbCkgewogIGNvbnN0IGFkbWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkbWluRXhwb3J0Jyk7CiAgaWYgKGFkbWluKSBhZG1pbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoKICBjb25zdCBiaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmluTGlzdCcpOwogIGlmIChiaW4pIGJpbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoKICBjb25zdCBtYXRjaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXRjaExpc3QnKTsKICBpZiAobWF0Y2gpIG1hdGNoLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7Cgp9Cgpjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gnKTsKCmlmICghaXNNb2JpbGUpIHsKICBmdW5jdGlvbiByZWZvY3VzU2VhcmNoKCkgewogICAgY29uc3QgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKICAgIGlmICgKICAgICAgYWN0aXZlICYmCiAgICAgIChhY3RpdmUuaWQgPT09ICdjdXN0b21lcicgfHwKICAgICAgIGFjdGl2ZS50YWdOYW1lID09PSAnU0VMRUNUJyB8fAogICAgICAgYWN0aXZlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpCiAgICApIHJldHVybjsKICAgIHNlYXJjaElucHV0LmZvY3VzKCk7CiAgICBzZWFyY2hJbnB1dC5zZWxlY3QoKTsKICB9CgogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVmb2N1c1NlYXJjaCk7CgogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsKICAgIGNvbnN0IG1vZGFsT3BlbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlc01vZGFsJykuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJzsKICAgIGNvbnN0IG92ZXJsYXlPcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID09PSAnZmxleCc7CiAgICBpZiAoCiAgICAgICFtb2RhbE9wZW4gJiYKICAgICAgIW92ZXJsYXlPcGVuICYmCiAgICAgIGUudGFyZ2V0LmlkICE9PSAnc2VhcmNoJyAmJgogICAgICBlLnRhcmdldC5pZCAhPT0gJ2N1c3RvbWVyJyAmJgogICAgICAhZS50YXJnZXQuY2xvc2VzdCgnc2VsZWN0JykKICAgICkgewogICAgICByZWZvY3VzU2VhcmNoKCk7CiAgICB9CiAgfSk7CgogIFsnY2xlYXJTZWFyY2gnLCAnc2hvd1NlbGVjdGVkJywgJ3NhdmVCdG4nLCAndXBsb2FkQnRuJ10uZm9yRWFjaChpZCA9PiB7CiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICBpZiAoYnRuKSBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZWZvY3VzU2VhcmNoKTsKICB9KTsKCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gewogICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaXRlbScpKSB7CiAgICAgIHNldFRpbWVvdXQocmVmb2N1c1NlYXJjaCwgMTIwKTsKICAgIH0KICB9KTsKCiAgWydjbG9zZU92ZXJsYXknXS5mb3JFYWNoKGlkID0+IHsKICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgIGlmIChidG4pIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNldFRpbWVvdXQocmVmb2N1c1NlYXJjaCwgMjAwKSk7CiAgfSk7CgogIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXYpID0+IHsKICAgIGlmIChldi5rZXkgPT09ICdFbnRlcicpIHsKICAgICAgc2V0VGltZW91dChyZWZvY3VzU2VhcmNoLCAxNTApOwogICAgfQogIH0pOwp9CgooYXN5bmMgZnVuY3Rpb24gaW5pdCgpIHsKICBidWlsZER5bmFtaWNDb250cm9scygpOwoKICAvLyBMb2FkIGljb24gY2FjaGUgZmlyc3QgKG5vbi1ibG9ja2luZykgLSBza2lwIGluIGxlZ2FjeSBtb2RlCiAgaWYgKCFpc0xlZ2FjeU1vZGUpIHsKICAgIGF3YWl0IGxvYWRJY29uQ2FjaGUoKTsKICB9CgogIC8vIEJ1aWxkIGdlbnJlIGZpbHRlciBmcm9tIGNhY2hlIGRhdGEKICBidWlsZEdlbnJlRmlsdGVyKCk7CgogIGF3YWl0IGxvYWRYTUwoKTsKICB1cGRhdGVUb3RhbHMoKTsKICB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKTsKCiAgLy8gU2V0IGZpbGUgaW5wdXQgYWNjZXB0IGF0dHJpYnV0ZSBmcm9tIGNvbmZpZwogIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW4nKTsKICBpZiAoZmlsZUlucHV0ICYmIENPTkZJRy5jbGllbnRGaWxlRXh0KSB7CiAgICBmaWxlSW5wdXQuYWNjZXB0ID0gQ09ORklHLmNsaWVudEZpbGVFeHQ7CiAgfQoKICAvLyBTaG93IGxlZ2FjeSBtb2RlIG5vdGlmaWNhdGlvbgogIGlmIChpc0xlZ2FjeU1vZGUpIHsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBzaG93QmFubmVyKCdPbGQgYnJvd3NlciBkZXRlY3RlZCwgdXNpbmcgbGVnYWN5IG1vZGUuXG5cbkhvbGQgWCBidXR0b24gdG8gY3ljbGUgdGhlbWVzLicpOwogICAgfSwgNTAwKTsKICB9Cn0pKCk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=`;
    // Properly decode UTF-8 from base64
    const decoded = decodeURIComponent(escape(atob(base64html)));
    const iframe = document.getElementById('viewer');
    const doc = iframe.contentWindow.document;
    doc.open();
    doc.write(decoded);
    doc.close();
  </script>
</body>
</html>