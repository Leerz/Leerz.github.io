<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PremazingPH Games</title>
  <style>
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
    iframe { width: 100vw; height: 100vh; border: none; display: block; }
  </style>
</head>
<body>
  <iframe id="viewer"></iframe>
  <script>
    const base64html = `PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPgo8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx2aWV3cG9ydC1maXQ9Y292ZXIiIC8+Cjx0aXRsZSBpZD0icGFnZVRpdGxlIj5QcmVtYXppbmdQSCBHYW1lczwvdGl0bGU+CjxzdHlsZT4KOnJvb3R7CiAgLS1iZzojMGEwZTFhOy0tYmctc2Vjb25kYXJ5OiMxMTE4Mjc7LS1wYW5lbDojMWUyOTNiOy0tcGFuZWwtaG92ZXI6IzI3MzQ0OTsKICAtLWNhcmQ6IzFlMjkzYjstLWNhcmQtc2VsZWN0ZWQ6IzFlM2E1ZjstLWJvcmRlcjojMzM0MTU1Oy0tdGV4dDojZjFmNWY5OwogIC0tdGV4dC1zZWNvbmRhcnk6Izk0YTNiODstLW11dGVkOiM2NDc0OGI7LS1wcmltYXJ5OiMzYjgyZjY7LS1wcmltYXJ5LWhvdmVyOiMyNTYzZWI7CiAgLS1hY2NlbnQ6I2Y1OWUwYjstLXN1Y2Nlc3M6IzIyYzU1ZTstLWRhbmdlcjojZWY0NDQ0Oy0tcmFkaXVzOjEycHg7LS1yYWRpdXMtbGc6MTZweDsKICAtLWhlYWRlci1iZzpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCMzYjgyZjYgMCUsIzI1NjNlYiAxMDAlKTsKfQo6cm9vdFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdewogIC0tYmc6IzJkMmQyZCFpbXBvcnRhbnQ7LS1iZy1zZWNvbmRhcnk6IzM2MzYzNiFpbXBvcnRhbnQ7LS1wYW5lbDojNDI0MjQyIWltcG9ydGFudDsKICAtLXBhbmVsLWhvdmVyOiM0ZjRmNGYhaW1wb3J0YW50Oy0tY2FyZDojNDI0MjQyIWltcG9ydGFudDstLWNhcmQtc2VsZWN0ZWQ6IzVhMjAyMCFpbXBvcnRhbnQ7CiAgLS1ib3JkZXI6IzU1NTU1NSFpbXBvcnRhbnQ7LS10ZXh0OiNmZmZmZmYhaW1wb3J0YW50Oy0tdGV4dC1zZWNvbmRhcnk6I2NjY2NjYyFpbXBvcnRhbnQ7CiAgLS1tdXRlZDojOTk5OTk5IWltcG9ydGFudDstLXByaW1hcnk6I2U2MDAxMiFpbXBvcnRhbnQ7LS1wcmltYXJ5LWhvdmVyOiNmZjFhMWEhaW1wb3J0YW50OwogIC0tYWNjZW50OiNlNjAwMTIhaW1wb3J0YW50Oy0tc3VjY2VzczojMjJjNTVlIWltcG9ydGFudDstLWRhbmdlcjojZTYwMDEyIWltcG9ydGFudDsKICAtLWhlYWRlci1iZzpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCNlNjAwMTIgMCUsI2I4MDAwZiAxMDAlKSFpbXBvcnRhbnQ7Cn0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIGJvZHl7YmFja2dyb3VuZDojZmZmIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jb250YWluZXJ7YmFja2dyb3VuZDojZjVmNWY1IWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5sZWZ0UGFuZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnJpZ2h0UGFuZXtiYWNrZ3JvdW5kOiNlOGU4ZTghaW1wb3J0YW50O2JvcmRlci1jb2xvcjojY2NjIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5sZWZ0UGFuZS1pbm5lcntiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVte2JhY2tncm91bmQ6I2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNkZGQhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW06aG92ZXJ7YmFja2dyb3VuZDojZjBmMGYwIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLnNlbGVjdGVke2JhY2tncm91bmQ6I2ZmZTVlNSFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNlNjAwMTIhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW0tdGl0bGUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdGF0LXZhbHVlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS10aXRsZXtjb2xvcjojMTExIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLXNpemUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLW1ldGEsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdGF0LWxhYmVsLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS1zaXple2NvbG9yOiM0NDQhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmxlZ2VuZC1pdGVtLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RhdC1ub3RlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29udHJvbHMgbGFiZWx7Y29sb3I6IzU1NSFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbXtiYWNrZ3JvdW5kOiNmNWY1ZjUhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nZW5yZS1maWx0ZXIsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5maWx0ZXItdGFic3tiYWNrZ3JvdW5kOiNlOGU4ZTghaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmZpbHRlci10YWIsLmdlbnJlLWNoaXB7Ym9yZGVyLWNvbG9yOiNiYmIhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmZpbHRlci10YWIuYWN0aXZlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2VucmUtY2hpcC5hY3RpdmV7YmFja2dyb3VuZDojZTYwMDEyIWltcG9ydGFudDtib3JkZXItY29sb3I6I2U2MDAxMiFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RvcmFnZS1jYXJkLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RhdC1jYXJkLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtcGFuZWx7YmFja2dyb3VuZDojZmZmIWltcG9ydGFudDtib3JkZXItY29sb3I6I2RkZCFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29udHJvbHMgaW5wdXQsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jb250cm9scyBzZWxlY3R7YmFja2dyb3VuZDojZmZmIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyFpbXBvcnRhbnQ7Y29sb3I6IzMzMyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RvcmFnZS10aXRsZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0b3JhZ2UtY2FwYWNpdHl7Y29sb3I6IzMzMyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAjY3RhVXBsb2Fke2JhY2tncm91bmQ6cmdiYSgyMzAsMCwxOCwwLjYpIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5idG57YmFja2dyb3VuZDojZThlOGU4IWltcG9ydGFudDtjb2xvcjojMzMzIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuYnRuLXByaW1hcnl7YmFja2dyb3VuZDojZTYwMDEyIWltcG9ydGFudDtjb2xvcjojZmZmIWltcG9ydGFudDtib3JkZXItY29sb3I6I2U2MDAxMiFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAub3ZlcmxheXtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC45NSkhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gI2dhbWVJbmZvTW9kYWx7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuOTgpIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nYW1lLWluZm8tdGl0bGV7Y29sb3I6IzExMSFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2FtZS1pbmZvLXNlY3Rpb257YmFja2dyb3VuZDojZmZmIWltcG9ydGFudDtib3JkZXItY29sb3I6I2RkZCFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAucHJvZ3Jlc3Mtc2VsZWN0ZWR7YmFja2dyb3VuZDojZTYwMDEyIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdG9yYWdlLXByb2dyZXNze2JhY2tncm91bmQ6I2RkZCFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29uc29sZS1iYXJ7YmFja2dyb3VuZDojZThlOGU4IWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29uc29sZS1jaGlwe2JhY2tncm91bmQ6I2ZmZiFpbXBvcnRhbnQ7Y29sb3I6IzMzMyFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNjY2MhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmNvbnNvbGUtY2hpcC5hY3RpdmV7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAubW9kZS10b2dnbGV7YmFja2dyb3VuZDojZGRkIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5tb2RlLWJ0bi5hY3RpdmV7YmFja2dyb3VuZDojZTYwMDEyIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5taXgtdGFic3tiYWNrZ3JvdW5kOiNlOGU4ZTghaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLm1peC10YWJ7Y29sb3I6IzMzMyFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNjY2MhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLm1peC10YWIuYWN0aXZle2JvcmRlci1jb2xvcjojZTYwMDEyIWltcG9ydGFudDtjb2xvcjojZTYwMDEyIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5ncmFuZC10b3RhbHtiYWNrZ3JvdW5kOiNmZmYhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkIWltcG9ydGFudH0KCip7Ym94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudH0KaHRtbCxib2R5e2hlaWdodDoxMDAlO21hcmdpbjowO2ZvbnQtZmFtaWx5OidJbnRlcicsLWFwcGxlLXN5c3RlbSxCbGlua01hY1N5c3RlbUZvbnQsJ1NlZ29lIFVJJyxSb2JvdG8sc2Fucy1zZXJpZjtiYWNrZ3JvdW5kOnZhcigtLWJnKTtjb2xvcjp2YXIoLS10ZXh0KX0KCi8qIENvbnNvbGUgQmFyICovCi5jb25zb2xlLWJhcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O3BhZGRpbmc6OHB4IDE2cHg7YmFja2dyb3VuZDp2YXIoLS1iZy1zZWNvbmRhcnkpO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7ei1pbmRleDo2NTtoZWlnaHQ6NDhweH0KLm1vZGUtdG9nZ2xle2Rpc3BsYXk6ZmxleDtiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXItcmFkaXVzOjIwcHg7cGFkZGluZzoycHg7ZmxleC1zaHJpbms6MH0KLm1vZGUtYnRue3BhZGRpbmc6NnB4IDE0cHg7Ym9yZGVyLXJhZGl1czoxOHB4O2JvcmRlcjpub25lO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO2ZvbnQtc2l6ZToxMnB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzfQoubW9kZS1idG4uYWN0aXZle2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZn0KLmNvbnNvbGUtY2hpcHN7ZGlzcGxheTpmbGV4O2dhcDo2cHg7b3ZlcmZsb3cteDphdXRvO2ZsZXg6MTstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaH0KLmNvbnNvbGUtY2hpcHM6Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX0KLmNvbnNvbGUtY2hpcHtwYWRkaW5nOjZweCAxNHB4O2JvcmRlci1yYWRpdXM6MThweDtib3JkZXI6MnB4IHNvbGlkIHZhcigtLWJvcmRlcik7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7Zm9udC1zaXplOjEycHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnM7d2hpdGUtc3BhY2U6bm93cmFwO2ZsZXgtc2hyaW5rOjA7cG9zaXRpb246cmVsYXRpdmV9Ci5jb25zb2xlLWNoaXA6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Y29sb3I6dmFyKC0tdGV4dCl9Ci5jb25zb2xlLWNoaXAuYWN0aXZle2NvbG9yOiNmZmY7Ym9yZGVyLWNvbG9yOmN1cnJlbnRDb2xvcn0KLmNvbnNvbGUtY2hpcCAuY2hpcC1iYWRnZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTRweDtyaWdodDotNHB4O21pbi13aWR0aDoxNnB4O2hlaWdodDoxNnB4O2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6dmFyKC0tYWNjZW50KTtjb2xvcjojMDAwO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6NzAwO2Rpc3BsYXk6bm9uZTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nOjAgNHB4fQouY29uc29sZS1jaGlwLmhhcy1zZWxlY3Rpb24gLmNoaXAtYmFkZ2V7ZGlzcGxheTpmbGV4fQoKLyogSGVhZGVyICovCi5oZWFkZXJ7cG9zaXRpb246Zml4ZWQ7dG9wOjQ4cHg7cmlnaHQ6MDtsZWZ0OjA7aGVpZ2h0OjU2cHg7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXItYmcpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEycHg7cGFkZGluZzo4cHggMTZweDt6LWluZGV4OjYwO2JveC1zaGFkb3c6MCA0cHggMjBweCByZ2JhKDAsMCwwLDAuMyl9Ci5oZWFkZXIgLnNlYXJjaHtmbGV4OjE7bWluLXdpZHRoOjE0MHB4fQouaGVhZGVyIGlucHV0LnNlYXJjaHtoZWlnaHQ6MzhweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Ym9yZGVyOm5vbmU7cGFkZGluZzowIDE2cHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMTUpO2NvbG9yOiNmZmY7Zm9udC1zaXplOjE0cHg7YmFja2Ryb3AtZmlsdGVyOmJsdXIoMTBweCl9Ci5oZWFkZXIgaW5wdXQuc2VhcmNoOjpwbGFjZWhvbGRlcntjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LDAuNyl9Ci5oZWFkZXIgaW5wdXQuc2VhcmNoOmZvY3Vze291dGxpbmU6bm9uZTtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4yNSk7Ym94LXNoYWRvdzowIDAgMCAzcHggcmdiYSgyNTUsMjU1LDI1NSwwLjIpfQouaGVhZGVyIC5hY3Rpb25ze2Rpc3BsYXk6ZmxleDtnYXA6NnB4O2FsaWduLWl0ZW1zOmNlbnRlcn0KLmhlYWRlciBidXR0b257aGVpZ2h0OjM4cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjpub25lO3BhZGRpbmc6MCAxMnB4O2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjE1KTtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjUwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzfQouaGVhZGVyIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4yNSl9CgovKiBNaXggTW9kZSBUYWJzICovCi5taXgtdGFic3tkaXNwbGF5Om5vbmU7Z2FwOjA7cGFkZGluZzowIDE2cHg7YmFja2dyb3VuZDp2YXIoLS1iZy1zZWNvbmRhcnkpO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7cG9zaXRpb246Zml4ZWQ7dG9wOjEwNHB4O2xlZnQ6MDtyaWdodDowO3otaW5kZXg6NTk7aGVpZ2h0OjQwcHg7YWxpZ24taXRlbXM6c3RyZXRjaDtvdmVyZmxvdy14OmF1dG99Ci5taXgtdGFiczo6LXdlYmtpdC1zY3JvbGxiYXJ7ZGlzcGxheTpub25lfQoubWl4LXRhYnMudmlzaWJsZXtkaXNwbGF5OmZsZXh9Ci5taXgtdGFie3BhZGRpbmc6OHB4IDE4cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLWJvdHRvbTozcHggc29saWQgdHJhbnNwYXJlbnQ7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnM7d2hpdGUtc3BhY2U6bm93cmFwO2ZsZXgtc2hyaW5rOjA7cG9zaXRpb246cmVsYXRpdmV9Ci5taXgtdGFiOmhvdmVye2NvbG9yOnZhcigtLXRleHQpO2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpfQoubWl4LXRhYi5hY3RpdmV7Ym9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1wcmltYXJ5KTtjb2xvcjp2YXIoLS1wcmltYXJ5KX0KLm1peC10YWIgLnRhYi1jb3VudHtmb250LXNpemU6MTBweDttYXJnaW4tbGVmdDo0cHg7b3BhY2l0eTowLjd9Ci5taXgtdGFiIC50YWItcmVtb3Zle21hcmdpbi1sZWZ0OjZweDtvcGFjaXR5OjAuNTtmb250LXNpemU6MTRweH0KLm1peC10YWIgLnRhYi1yZW1vdmU6aG92ZXJ7b3BhY2l0eToxO2NvbG9yOnZhcigtLWRhbmdlcil9CgovKiBDb250YWluZXIgKi8KLmNvbnRhaW5lcntkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciA0MDBweDtnYXA6MTZweDtwYWRkaW5nOmNhbGMoNDhweCArIDU2cHggKyAxNnB4KSAxNnB4IDI0cHg7bWluLWhlaWdodDoxMDB2aDt0cmFuc2l0aW9uOnBhZGRpbmctdG9wIDAuMnN9Ci5jb250YWluZXIubWl4LWFjdGl2ZXtwYWRkaW5nLXRvcDpjYWxjKDQ4cHggKyA1NnB4ICsgMTZweCl9CgovKiBMZWZ0IFBhbmUgKi8KLmxlZnRQYW5le2JhY2tncm91bmQ6dmFyKC0tYmctc2Vjb25kYXJ5KTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7cGFkZGluZzowO292ZXJmbG93OmhpZGRlbjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5sZWZ0UGFuZS1pbm5lcntwYWRkaW5nOjEycHg7b3ZlcmZsb3cteTphdXRvO21heC1oZWlnaHQ6Y2FsYygxMDB2aCAtIDIwMHB4KX0KCi8qIExvYWRpbmcgb3ZlcmxheSAqLwoubG9hZGluZy1vdmVybGF5e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nOjYwcHg7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToxNXB4O2dhcDoxMHB4fQoubG9hZGluZy1zcGlubmVye3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7Ym9yZGVyOjJweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci10b3AtY29sb3I6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyLXJhZGl1czo1MCU7YW5pbWF0aW9uOnNwaW4gMC44cyBsaW5lYXIgaW5maW5pdGV9CkBrZXlmcmFtZXMgc3Bpbnt0b3t0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fQoKLyogR2FtZSBJdGVtIENhcmQgKi8KLml0ZW17ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDtwYWRkaW5nOjEycHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2N1cnNvcjpwb2ludGVyO21hcmdpbi1ib3R0b206MTBweDt0cmFuc2l0aW9uOmFsbCAwLjJzO3VzZXItc2VsZWN0Om5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lfQouaXRlbTpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsLWhvdmVyKTtib3JkZXItY29sb3I6IzQ3NTU2OTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KLml0ZW0uc2VsZWN0ZWR7YmFja2dyb3VuZDp2YXIoLS1jYXJkLXNlbGVjdGVkKTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5pdGVtLnNlbGVjdGVkIC5pdGVtLWNoZWNrYm94e2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpfQouaXRlbS5zZWxlY3RlZCAuaXRlbS1jaGVja2JveDo6YWZ0ZXJ7Y29udGVudDon4pyTJztjb2xvcjojZmZmO2ZvbnQtc2l6ZToxMnB4O2ZvbnQtd2VpZ2h0OmJvbGR9Ci5pdGVtLXRodW1ie3dpZHRoOjU2cHg7aGVpZ2h0OjU2cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCMzNzQxNTEsIzFmMjkzNyk7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ZsZXgtc2hyaW5rOjA7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlfQouaXRlbS10aHVtYiBpbWd7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvdmVyfQouaXRlbS10aHVtYi1wbGFjZWhvbGRlcntmb250LXNpemU6MjBweDtjb2xvcjp2YXIoLS1tdXRlZCl9Ci5pdGVtLWNvbnRlbnR7ZmxleDoxO21pbi13aWR0aDowfQouaXRlbS10aXRsZXtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y29sb3I6dmFyKC0tdGV4dCk7bWFyZ2luLWJvdHRvbTo0cHg7d2hpdGUtc3BhY2U6bm93cmFwO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzfQouaXRlbS1zaXple2ZvbnQtc2l6ZToxM3B4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KX0KLml0ZW0tbWV0YXtmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1tdXRlZCk7bWFyZ2luLXRvcDoycHh9Ci5pdGVtLWNoZWNrYm94e3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHg7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyOjJweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmbGV4LXNocmluazowO3RyYW5zaXRpb246YWxsIDAuMnN9CgovKiBSaWdodCBQYW5lICovCi5yaWdodFBhbmV7YmFja2dyb3VuZDp2YXIoLS1iZy1zZWNvbmRhcnkpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzLWxnKTtwYWRkaW5nOjE2cHg7b3ZlcmZsb3cteTphdXRvO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoxNnB4fQoKLyogU3RvcmFnZSBDYXJkICovCi5zdG9yYWdlLWNhcmR7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzoxNnB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLnN0b3JhZ2UtaGVhZGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luLWJvdHRvbToxMnB4fQouc3RvcmFnZS10aXRsZXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHg7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpfQouc3RvcmFnZS10aXRsZSBzdmd7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDtjb2xvcjp2YXIoLS1wcmltYXJ5KX0KLnN0b3JhZ2UtY2FwYWNpdHl7Zm9udC1zaXplOjEzcHg7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpfQouc3RvcmFnZS1wcm9ncmVzc3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXItcmFkaXVzOjVweDtvdmVyZmxvdzpoaWRkZW47ZGlzcGxheTpmbGV4fQoucHJvZ3Jlc3MtdXNlZHtiYWNrZ3JvdW5kOiM0NzU1Njk7dHJhbnNpdGlvbjp3aWR0aCAwLjNzfQoucHJvZ3Jlc3Mtc2VsZWN0ZWR7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTt0cmFuc2l0aW9uOndpZHRoIDAuM3N9Ci5zdG9yYWdlLWxlZ2VuZHtkaXNwbGF5OmZsZXg7Z2FwOjE2cHg7bWFyZ2luLXRvcDoxMHB4O2ZvbnQtc2l6ZToxMnB4fQoubGVnZW5kLWl0ZW17ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NnB4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KX0KLmxlZ2VuZC1kb3R7d2lkdGg6OHB4O2hlaWdodDo4cHg7Ym9yZGVyLXJhZGl1czo1MCV9Ci5sZWdlbmQtZG90LnVzZWR7YmFja2dyb3VuZDojNDc1NTY5fQoubGVnZW5kLWRvdC5zZWxlY3RlZHtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpfQoubGVnZW5kLWRvdC5mcmVle2JhY2tncm91bmQ6dmFyKC0tYmcpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KCi8qIFN0YXRzIEdyaWQgKi8KLnN0YXRzLWdyaWR7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoMywxZnIpO2dhcDo4cHh9Ci5zdGF0LWNhcmR7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzoxNHB4O3RleHQtYWxpZ246Y2VudGVyO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLnN0YXQtY2FyZC5oaWdobGlnaHR7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZyxyZ2JhKDU5LDEzMCwyNDYsMC4xKSx2YXIoLS1jYXJkKSl9Ci5zdGF0LXZhbHVle2ZvbnQtc2l6ZToyMnB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KX0KLnN0YXQtY2FyZC5oaWdobGlnaHQgLnN0YXQtdmFsdWV7Y29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5zdGF0LWxhYmVse2ZvbnQtc2l6ZToxMHB4O2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi10b3A6NHB4fQouc3RhdC1ub3Rle2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLW11dGVkKTt0ZXh0LWFsaWduOmNlbnRlcjtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Z2FwOjRweH0KCi8qIEdyYW5kIFRvdGFsIChNSVggbW9kZSkgKi8KLmdyYW5kLXRvdGFse2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO3BhZGRpbmc6MTZweDtib3JkZXI6MnB4IHNvbGlkIHZhcigtLXByaW1hcnkpO2Rpc3BsYXk6bm9uZX0KLmdyYW5kLXRvdGFsLnZpc2libGV7ZGlzcGxheTpibG9ja30KLmdyYW5kLXRvdGFsLWhlYWRlcntmb250LXNpemU6MTRweDtmb250LXdlaWdodDo3MDA7Y29sb3I6dmFyKC0tcHJpbWFyeSk7bWFyZ2luLWJvdHRvbToxMnB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweH0KLmdyYW5kLXRvdGFsLWJyZWFrZG93bntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo2cHg7bWFyZ2luLWJvdHRvbToxMnB4fQouZ3JhbmQtdG90YWwtcm93e2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbjtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7cGFkZGluZzo0cHggOHB4O2JhY2tncm91bmQ6dmFyKC0tYmcpO2JvcmRlci1yYWRpdXM6NnB4fQouZ3JhbmQtdG90YWwtcm93IC5jb25zb2xlLWxhYmVse2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjp2YXIoLS10ZXh0KX0KLmdyYW5kLXRvdGFsLXJvdy5leGNlZWRlZHtjb2xvcjp2YXIoLS1kYW5nZXIpO2ZvbnQtd2VpZ2h0OjYwMH0KLmdyYW5kLXRvdGFsLXN1bW1hcnl7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmctdG9wOjhweDtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6MTRweH0KCi8qIENvbnRyb2xzICovCi5jb250cm9sc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjhweH0KLmNvbnRyb2xzIC5mdWxse2dyaWQtY29sdW1uOjEvLTF9Ci5jb250cm9scyBpbnB1dCwuY29udHJvbHMgc2VsZWN0e2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7cGFkZGluZzowIDEycHg7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtjb2xvcjp2YXIoLS10ZXh0KTtmb250LXNpemU6MTRweDt3aWR0aDoxMDAlfQouY29udHJvbHMgaW5wdXQ6Zm9jdXMsLmNvbnRyb2xzIHNlbGVjdDpmb2N1c3tvdXRsaW5lOm5vbmU7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpO2JveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoNTksMTMwLDI0NiwwLjIpfQouY29udHJvbHMgc2VsZWN0e2N1cnNvcjpwb2ludGVyO2FwcGVhcmFuY2U6bm9uZTtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMicgaGVpZ2h0PScxMicgdmlld0JveD0nMCAwIDEyIDEyJyUzRSUzQ3BhdGggZmlsbD0nJTIzOTRhM2I4JyBkPSdNNiA4TDEgM2gxMHonLyUzRSUzQy9zdmclM0UiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpyaWdodCAxMnB4IGNlbnRlcjtwYWRkaW5nLXJpZ2h0OjM2cHh9Ci5jb250cm9scyBsYWJlbHtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1tdXRlZCk7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9ja30KI2R5bmFtaWNDb250cm9sc3tkaXNwbGF5OmNvbnRlbnRzfQojZHluYW1pY0NvbnRyb2xzID4gZGl2e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Ci5maWxlbmFtZS1wcmV2aWV3e2dyaWQtY29sdW1uOjEvLTE7cGFkZGluZzoxMHB4IDEycHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtmb250LWZhbWlseTonU0YgTW9ubycsTW9uYWNvLG1vbm9zcGFjZTtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7b3ZlcmZsb3cteDphdXRvO3doaXRlLXNwYWNlOm5vd3JhcH0KCi8qIEJ1dHRvbnMgKi8KLmJ0bntwYWRkaW5nOjEwcHggMTZweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Ym9yZGVyOm5vbmU7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnM7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtnYXA6NnB4fQouYnRuLXByaW1hcnl7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmfQouYnRuLXByaW1hcnk6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5LWhvdmVyKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KLmJ0bi5naG9zdHtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5idG4uZ2hvc3Q6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Y29sb3I6dmFyKC0tdGV4dCk7Ym9yZGVyLWNvbG9yOiM0NzU1Njl9Ci5idG4uZGFuZ2Vye2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKTtjb2xvcjojZmZmfQouYWN0aW9uLXJvd3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcH0KLmFjdGlvbi1yb3cgLmJ0bntmbGV4OjE7bWluLXdpZHRoOmZpdC1jb250ZW50fQouc2hhcmUtcm93e2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlcn0KLnNoYXJlLXJvdyBpbnB1dHtmbGV4OjE7aGVpZ2h0OjQ0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwYWRkaW5nOjAgMTJweDtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtc2l6ZToxM3B4fQoKLyogU2VsZWN0ZWQgUGFuZWwgKi8KLnNlbGVjdGVkLXBhbmVse2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtmbGV4OjE7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtvdmVyZmxvdzpoaWRkZW47bWluLWhlaWdodDoyMDBweH0KLnNlbGVjdGVkLXBhbmVsIC5oZWFke3BhZGRpbmc6MTJweCAxNnB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLXRleHQpO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXJ9Ci5zZWxlY3RlZC1wYW5lbCAuYm9keXtmbGV4OjE7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6OHB4fQouc2VsZWN0ZWQtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7bWFyZ2luLWJvdHRvbTo4cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouc2VsZWN0ZWQtaXRlbS10aHVtYnt3aWR0aDo0NHB4O2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmbGV4LXNocmluazowfQouc2VsZWN0ZWQtaXRlbS1jb250ZW50e2ZsZXg6MTttaW4td2lkdGg6MH0KLnNlbGVjdGVkLWl0ZW0tdGl0bGV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLnNlbGVjdGVkLWl0ZW0tc2l6ZXtmb250LXNpemU6MTNweDtmb250LXdlaWdodDo2MDA7Y29sb3I6dmFyKC0tdGV4dCk7d2hpdGUtc3BhY2U6bm93cmFwfQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25ze2Rpc3BsYXk6ZmxleDtnYXA6NHB4fQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIGJ1dHRvbnt3aWR0aDoyOHB4O2hlaWdodDoyOHB4O2JvcmRlci1yYWRpdXM6NnB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMnB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAudXAsLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAuZG93bntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAucmVtb3Zle2JhY2tncm91bmQ6cmdiYSgyMzksNjgsNjgsMC4yKTtjb2xvcjp2YXIoLS1kYW5nZXIpfQoKLyogVXBsb2FkIGJ1dHRvbiAoaW4gaGVhZGVyKSAqLwoudXBsb2FkLXNwaW5uZXJ7ZGlzcGxheTpub25lO3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7YW5pbWF0aW9uOnNwaW4gMC44cyBsaW5lYXIgaW5maW5pdGV9CkBrZXlmcmFtZXMgc3Bpbnt0b3t0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fQojY3RhVXBsb2Fke2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NXB4O2ZvbnQtd2VpZ2h0OjYwMDtwYWRkaW5nOjAgMTRweDtmbGV4LXNocmluazowfQojY3RhVXBsb2FkIHN2Z3t3aWR0aDoxNnB4O2hlaWdodDoxNnB4O2ZsZXgtc2hyaW5rOjB9CiNjdGFVcGxvYWQudXBsb2FkaW5ne3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowLjd9CiNjdGFVcGxvYWQudXBsb2FkaW5nIC51cGxvYWQtaWNvbiwjY3RhVXBsb2FkLnVwbG9hZGluZyAud2FybmluZy1pY29ue2Rpc3BsYXk6bm9uZX0KI2N0YVVwbG9hZC51cGxvYWRpbmcgLnVwbG9hZC1zcGlubmVye2Rpc3BsYXk6YmxvY2t9CiNjdGFVcGxvYWQudXBsb2FkLWRvbmV7YmFja2dyb3VuZDp2YXIoLS1hY2NlbnQpIWltcG9ydGFudDtjb2xvcjojMDAwIWltcG9ydGFudH0KI2N0YVVwbG9hZC53YXJuaW5ne2JhY2tncm91bmQ6cmdiYSgyMzksNjgsNjgsMC43KX0KI2N0YVVwbG9hZCAud2FybmluZy1pY29ue2Rpc3BsYXk6bm9uZX0KI2N0YVVwbG9hZC53YXJuaW5nIC53YXJuaW5nLWljb257ZGlzcGxheTppbmxpbmV9CiNjdGFVcGxvYWQud2FybmluZyAudXBsb2FkLWljb257ZGlzcGxheTpub25lfQovKiBTaG93LWxpc3QgYnV0dG9uIGJhZGdlICovCiNjdGFTaG93e3Bvc2l0aW9uOnJlbGF0aXZlfQojY3RhU2hvdyAuYmFkZ2V7cG9zaXRpb246YWJzb2x1dGU7dG9wOi01cHg7cmlnaHQ6LTVweDttaW4td2lkdGg6MThweDtoZWlnaHQ6MThweDtib3JkZXItcmFkaXVzOjlweDtiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7Y29sb3I6IzAwMDtmb250LXNpemU6MTBweDtmb250LXdlaWdodDo3MDA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmc6MCA0cHh9CgovKiBPdmVybGF5ICovCi5vdmVybGF5e3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDEwLDE0LDI2LDAuOTUpO2Rpc3BsYXk6bm9uZTtmbGV4LWRpcmVjdGlvbjpjb2x1bW47ei1pbmRleDoxNTA7YmFja2Ryb3AtZmlsdGVyOmJsdXIoMTBweCl9Ci5vdmVybGF5IC5oZWFke2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjE2cHg7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5vdmVybGF5IC5oZWFkIHN0cm9uZ3tjb2xvcjp2YXIoLS10ZXh0KX0KLm92ZXJsYXkgLmJvZHl7cGFkZGluZzoxNnB4O292ZXJmbG93OmF1dG87ZmxleDoxO3BhZGRpbmctYm90dG9tOjgwcHh9Ci5vdmVybGF5IC5yb3d7ZGlzcGxheTpmbGV4O2dhcDoxMnB4O2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjEycHg7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7bWFyZ2luLWJvdHRvbTo4cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQoub3ZlcmxheSAucm93LmhpZ2hsaWdodHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQtc2VsZWN0ZWQpO2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KX0KLm92ZXJsYXkgLnJvdy1pbmZve2ZsZXg6MTttaW4td2lkdGg6MH0KLm92ZXJsYXkgLnJvdy1pbmZvIHN0cm9uZ3tkaXNwbGF5OmJsb2NrO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLm92ZXJsYXkgLnJvdy1hY3Rpb25ze2Rpc3BsYXk6ZmxleDtnYXA6NnB4O2ZsZXgtc2hyaW5rOjB9Ci5vdmVybGF5IGJ1dHRvbi5pY29ue3dpZHRoOjM2cHg7aGVpZ2h0OjM2cHg7Ym9yZGVyLXJhZGl1czo4cHg7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxNHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KLm92ZXJsYXkgYnV0dG9uLnVwLC5vdmVybGF5IGJ1dHRvbi5kb3due2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpfQoub3ZlcmxheSBidXR0b24ucmVtb3Zle2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKTtjb2xvcjojZmZmfQoub3ZlcmxheS1zdGF0c3tiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO3BhZGRpbmc6MTBweCAxNHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7Z2FwOjEwcHggMjBweH0KLm92ZXJsYXktc3RhdHMgLm9zdHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoycHh9Ci5vdmVybGF5LXN0YXRzIC5vc3QtbGFiZWx7Zm9udC1zaXplOjEwcHg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuNXB4O2NvbG9yOnZhcigtLW11dGVkKX0KLm92ZXJsYXktc3RhdHMgLm9zdC12YWx7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOnZhcigtLXRleHQpfQoub3ZlcmxheS1zdGF0cyAub3N0LXZhbC5kYW5nZXJ7Y29sb3I6dmFyKC0tZGFuZ2VyKX0KLm92ZXJsYXktc3RhdHMgLm9zdC12YWwub2t7Y29sb3I6dmFyKC0tc3VjY2Vzcyl9Ci5vdmVybGF5LXN0YXRzLWJhcntoZWlnaHQ6NHB4O2JvcmRlci1yYWRpdXM6MnB4O2JhY2tncm91bmQ6dmFyKC0tYmcpO292ZXJmbG93OmhpZGRlbjttYXJnaW4tdG9wOjhweDt3aWR0aDoxMDAlfQoub3ZlcmxheS1zdGF0cy1iYXItZmlsbHtoZWlnaHQ6MTAwJTtib3JkZXItcmFkaXVzOjJweDtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpO3RyYW5zaXRpb246d2lkdGggMC4zc30KLm92ZXJsYXktc3RhdHMtYmFyLWZpbGwuZGFuZ2Vye2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKX0KCi8qIEdlbnJlIEZpbHRlciAqLwouZ2VucmUtZmlsdGVye2Rpc3BsYXk6ZmxleDtnYXA6OHB4O3BhZGRpbmc6MTJweDtiYWNrZ3JvdW5kOnZhcigtLWJnLXNlY29uZGFyeSk7b3ZlcmZsb3cteDphdXRvOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNofQouZ2VucmUtZmlsdGVyOjotd2Via2l0LXNjcm9sbGJhcntkaXNwbGF5Om5vbmV9Ci5nZW5yZS1jaGlwe3BhZGRpbmc6NnB4IDE0cHg7Ym9yZGVyLXJhZGl1czoyMHB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtmb250LXNpemU6MTNweDtmb250LXdlaWdodDo1MDA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgMC4yczt3aGl0ZS1zcGFjZTpub3dyYXA7ZmxleC1zaHJpbms6MH0KLmdlbnJlLWNoaXA6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Y29sb3I6dmFyKC0tdGV4dCl9Ci5nZW5yZS1jaGlwLmFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpO2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmfQouZ2VucmUtZmlsdGVyIC5kaXZpZGVye3dpZHRoOjFweDtiYWNrZ3JvdW5kOnZhcigtLWJvcmRlcik7bWFyZ2luOjAgNHB4O2ZsZXgtc2hyaW5rOjB9Ci5zb3J0LWNoaXB7cGFkZGluZzo2cHggMTRweDtib3JkZXItcmFkaXVzOjIwcHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1hY2NlbnQpO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tYWNjZW50KTtmb250LXNpemU6MTNweDtmb250LXdlaWdodDo1MDA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgMC4yczt3aGl0ZS1zcGFjZTpub3dyYXA7ZmxleC1zaHJpbms6MH0KLnNvcnQtY2hpcDpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7Y29sb3I6IzAwMH0KLnNvcnQtY2hpcC5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1hY2NlbnQpO2NvbG9yOiMwMDB9CgovKiBHYW1lIEluZm8gTW9kYWwgKi8KI2dhbWVJbmZvTW9kYWx7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDEwLDE0LDI2LDAuOTUpO3otaW5kZXg6MjAwO292ZXJmbG93LXk6YXV0bztiYWNrZHJvcC1maWx0ZXI6Ymx1cigxMHB4KX0KLmdhbWUtaW5mb3ttYXgtd2lkdGg6NjAwcHg7bWFyZ2luOjAgYXV0bztwYWRkaW5nOjE2cHg7cGFkZGluZy1ib3R0b206MTAwcHh9Ci5nYW1lLWluZm8taGVhZGVye3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbi1ib3R0b206MTZweH0KLmdhbWUtaW5mby1iYW5uZXJ7d2lkdGg6MTAwJTtoZWlnaHQ6MjAwcHg7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCl9Ci5nYW1lLWluZm8taWNvbntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTMwcHg7bGVmdDoxNnB4O3dpZHRoOjgwcHg7aGVpZ2h0OjgwcHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjozcHggc29saWQgdmFyKC0tYmcpO2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMyl9Ci5nYW1lLWluZm8tY2xvc2V7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEycHg7cmlnaHQ6MTJweDt3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpO2JvcmRlcjpub25lO2NvbG9yOiNmZmY7Zm9udC1zaXplOjIwcHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfQouZ2FtZS1pbmZvLXRpdGxle2ZvbnQtc2l6ZToyMHB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tdG9wOjQwcHg7bWFyZ2luLWJvdHRvbTo0cHh9Ci5nYW1lLWluZm8tcHVibGlzaGVye2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjEycHh9Ci5nYW1lLWluZm8tbWV0YXtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7Z2FwOjhweDttYXJnaW4tYm90dG9tOjE2cHh9Ci5nYW1lLWluZm8tdGFne3BhZGRpbmc6NHB4IDEwcHg7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Ym9yZGVyLXJhZGl1czoyMHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5nYW1lLWluZm8tdGFnLmdlbnJle2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5nYW1lLWluZm8tc2VjdGlvbntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzoxNnB4O21hcmdpbi1ib3R0b206MTJweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5nYW1lLWluZm8tc2VjdGlvbi10aXRsZXtmb250LXNpemU6MTJweDtmb250LXdlaWdodDo2MDA7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuNXB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjhweH0KLmdhbWUtaW5mby1kZXNjcmlwdGlvbntmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoxLjY7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO3doaXRlLXNwYWNlOnByZS1saW5lfQouZ2FtZS1pbmZvLWludHJve2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tYm90dG9tOjhweDtmb250LXN0eWxlOml0YWxpY30KLmdhbWUtaW5mby1zY3JlZW5zaG90c3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgyLDFmcik7Z2FwOjhweH0KLmdhbWUtaW5mby1zY3JlZW5zaG90cyBpbWd7d2lkdGg6MTAwJTtib3JkZXItcmFkaXVzOjhweDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjJzfQouZ2FtZS1pbmZvLXNjcmVlbnNob3RzIGltZzpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4wMil9Ci5nYW1lLWluZm8tZmlsZXMtc2VjdGlvbntwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVufQouZ2FtZS1pbmZvLWZpbGVzLWJ0bnt3aWR0aDoxMDAlO3BhZGRpbmc6MTRweCAxNnB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmU7Y29sb3I6dmFyKC0tdGV4dCk7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NTAwO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59Ci5nYW1lLWluZm8tZmlsZXN7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6NHB4O21heC1oZWlnaHQ6MjAwcHg7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6MCAxNnB4IDE2cHh9Ci5nYW1lLWluZm8tZmlsZXtwYWRkaW5nOjhweCAxMnB4O2JhY2tncm91bmQ6dmFyKC0tYmcpO2JvcmRlci1yYWRpdXM6NnB4O2ZvbnQtc2l6ZToxMnB4O2ZvbnQtZmFtaWx5OidTRiBNb25vJyxNb25hY28sQ29uc29sYXMsbW9ub3NwYWNlO2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTt3b3JkLWJyZWFrOmJyZWFrLWFsbH0KLmdhbWUtaW5mby1hY3Rpb25ze3Bvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO3BhZGRpbmc6MTZweDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCh0cmFuc3BhcmVudCx2YXIoLS1iZykpO2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpjZW50ZXJ9Ci5nYW1lLWluZm8tYWN0aW9ucyAuYnRue21pbi13aWR0aDoxNDBweH0KCi8qIFNjcmVlbnNob3QgZnVsbHNjcmVlbiAqLwouc2NyZWVuc2hvdC1mdWxsc2NyZWVue2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjk1KTt6LWluZGV4OjI1MDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtjdXJzb3I6cG9pbnRlcjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE2cHh9Ci5zY3JlZW5zaG90LWZ1bGxzY3JlZW4uYWN0aXZle2Rpc3BsYXk6ZmxleH0KLnNjcmVlbnNob3QtZnVsbHNjcmVlbiBpbWd7bWF4LXdpZHRoOjk1JTttYXgtaGVpZ2h0Ojg1JTtvYmplY3QtZml0OmNvbnRhaW47Ym9yZGVyLXJhZGl1czo4cHh9Ci5zY3JlZW5zaG90LWZ1bGxzY3JlZW4gLmNsb3NlLWhpbnR7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjYpO2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmc6OHB4IDE2cHg7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7Ym9yZGVyLXJhZGl1czoyMHB4fQoKLyogVG9hc3QgKi8KLnRvYXN0e3Bvc2l0aW9uOmZpeGVkO3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpIHNjYWxlKDAuOCk7YmFja2dyb3VuZDp2YXIoLS1zdWNjZXNzKTtjb2xvcjojZmZmO3BhZGRpbmc6MjRweCA0OHB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzLWxnKTtmb250LXNpemU6MjBweDtmb250LXdlaWdodDo2MDA7ei1pbmRleDozMDA7b3BhY2l0eTowO3RyYW5zaXRpb246YWxsIDAuM3M7cG9pbnRlci1ldmVudHM6bm9uZTtib3gtc2hhZG93OjAgMTBweCA0MHB4IHJnYmEoMCwwLDAsMC40KX0KLnRvYXN0LnNob3d7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKSBzY2FsZSgxKX0KCiNmaWxlc01vZGFse2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtjb2xvcjp2YXIoLS10ZXh0KX0KI2ZpbGVMaXN0Q29udGFpbmVye2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtjb2xvcjp2YXIoLS10ZXh0KX0KI2ZpbGVMaXN0Q29udGFpbmVyIGF7Y29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5tZXRhe2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX0KCi8qIEFuaW1hdGlvbnMgKi8KQGtleWZyYW1lcyBmYWRlSW57ZnJvbXtvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTBweCl9dG97b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX0KLml0ZW17YW5pbWF0aW9uOmZhZGVJbiAwLjJzIGVhc2Utb3V0fQpAa2V5ZnJhbWVzIHB1bHNlUmVxdWlyZWR7MCUsMTAwJXtib3gtc2hhZG93OjAgMCAwIDAgcmdiYSgyMzksNjgsNjgsMCl9MzAle2JveC1zaGFkb3c6MCAwIDAgNnB4IHJnYmEoMjM5LDY4LDY4LDAuNCl9NjAle2JveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoMjM5LDY4LDY4LDAuMil9fQouY3VzdG9tZXItcmVxdWlyZWR7YW5pbWF0aW9uOnB1bHNlUmVxdWlyZWQgMC42cyBlYXNlIDM7Ym9yZGVyLWNvbG9yOnZhcigtLWRhbmdlcikhaW1wb3J0YW50O2JhY2tncm91bmQ6cmdiYSgyMzksNjgsNjgsMC4wOCkhaW1wb3J0YW50fQoKLyogTmFtZSBuYWcgbW9kYWwgKi8KLm5hbWUtbmFnLWJhY2tkcm9we3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNzUpO2Rpc3BsYXk6bm9uZTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt6LWluZGV4Ojk5OTk7YmFja2Ryb3AtZmlsdGVyOmJsdXIoNnB4KTthbmltYXRpb246bmFnRmFkZUluIDAuM3MgZWFzZX0KLm5hbWUtbmFnLWJhY2tkcm9wLnNob3d7ZGlzcGxheTpmbGV4fQpAa2V5ZnJhbWVzIG5hZ0ZhZGVJbntmcm9te29wYWNpdHk6MH10b3tvcGFjaXR5OjF9fQpAa2V5ZnJhbWVzIG5hZ0JvdW5jZXswJXt0cmFuc2Zvcm06c2NhbGUoMC44KTtvcGFjaXR5OjB9NTAle3RyYW5zZm9ybTpzY2FsZSgxLjA1KX0xMDAle3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5OjF9fQoubmFtZS1uYWctYm94e2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyOjJweCBzb2xpZCB2YXIoLS1kYW5nZXIpO2JvcmRlci1yYWRpdXM6MjBweDtwYWRkaW5nOjM2cHggMzJweCAyOHB4O3RleHQtYWxpZ246Y2VudGVyO21heC13aWR0aDozODBweDt3aWR0aDo5MCU7YW5pbWF0aW9uOm5hZ0JvdW5jZSAwLjRzIGVhc2U7Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLDAuNSl9Ci5uYW1lLW5hZy1pY29ue3dpZHRoOjY0cHg7aGVpZ2h0OjY0cHg7bWFyZ2luOjAgYXV0byAxNnB4O2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKTtib3JkZXItcmFkaXVzOjUwJTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Zm9udC1zaXplOjMycHg7Zm9udC13ZWlnaHQ6OTAwO2NvbG9yOiNmZmY7YW5pbWF0aW9uOnB1bHNlUmVxdWlyZWQgMXMgZWFzZSBpbmZpbml0ZX0KLm5hbWUtbmFnLXRpdGxle2ZvbnQtc2l6ZToyMnB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tYm90dG9tOjhweH0KLm5hbWUtbmFnLXN1YnRpdGxle2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjIwcHh9Ci5uYW1lLW5hZy1pbnB1dHt3aWR0aDoxMDAlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjE0cHggMTZweDtib3JkZXI6MnB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtc2l6ZToxNnB4O3RleHQtYWxpZ246Y2VudGVyO291dGxpbmU6bm9uZTt0cmFuc2l0aW9uOmJvcmRlci1jb2xvciAwLjJzfQoubmFtZS1uYWctaW5wdXQ6Zm9jdXN7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpfQoubmFtZS1uYWctc3VibWl0e3dpZHRoOjEwMCU7bWFyZ2luLXRvcDoxNHB4O3BhZGRpbmc6MTRweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxNnB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmJhY2tncm91bmQgMC4yc30KLm5hbWUtbmFnLXN1Ym1pdDpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnktaG92ZXIpfQoubmFtZS1uYWctc3VibWl0OmRpc2FibGVke29wYWNpdHk6MC40O2N1cnNvcjpub3QtYWxsb3dlZH0KCi8qIENvcHkgc3VtbWFyeSBtb2RhbCAqLwouY29weS1tb2RhbC1iYWNrZHJvcHtkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC43KTt6LWluZGV4OjIwMDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZHJvcC1maWx0ZXI6Ymx1cig0cHgpfQouY29weS1tb2RhbHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7bWF4LXdpZHRoOjQ4MHB4O3dpZHRoOjkyJTttYXgtaGVpZ2h0Ojgwdmg7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtib3gtc2hhZG93OjAgMjBweCA2MHB4IHJnYmEoMCwwLDAsMC41KTthbmltYXRpb246bmFnQm91bmNlIDAuM3MgZWFzZX0KLmNvcHktbW9kYWwtaGVhZGVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoxNnB4IDIwcHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLmNvcHktbW9kYWwtdGl0bGV7Zm9udC1zaXplOjE2cHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOnZhcigtLXRleHQpfQouY29weS1tb2RhbC1jbG9zZXtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToyMnB4O2N1cnNvcjpwb2ludGVyO3BhZGRpbmc6MCA0cHg7bGluZS1oZWlnaHQ6MX0KLmNvcHktbW9kYWwtY2xvc2U6aG92ZXJ7Y29sb3I6dmFyKC0tdGV4dCl9Ci5jb3B5LW1vZGFsLWJvZHl7ZmxleDoxO292ZXJmbG93LXk6YXV0bztwYWRkaW5nOjE2cHggMjBweH0KLmNvcHktbW9kYWwtZm9vdGVye3BhZGRpbmc6MTJweCAyMHB4O2JvcmRlci10b3A6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5jb3B5LW1vZGFsLWJ0bnt3aWR0aDoxMDAlO3BhZGRpbmc6MTJweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzfQouY29weS1tb2RhbC1idG46aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5LWhvdmVyKX0KLmNvcHktc3VtbWFyeXttYXJnaW4tYm90dG9tOjE2cHh9Ci5jb3B5LXN1bW1hcnktcm93e2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjVweCAwO2ZvbnQtc2l6ZToxM3B4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNCl9Ci5jb3B5LWxhYmVse2NvbG9yOnZhcigtLW11dGVkKTtmbGV4LXNocmluazowO21hcmdpbi1yaWdodDoxMnB4fQouY29weS12YWx1ZXtjb2xvcjp2YXIoLS10ZXh0KTt0ZXh0LWFsaWduOnJpZ2h0O3dvcmQtYnJlYWs6YnJlYWstYWxsfQouY29weS1maWxlbmFtZXtmb250LWZhbWlseTptb25vc3BhY2U7Zm9udC1zaXplOjEycHg7Y29sb3I6dmFyKC0tYWNjZW50KX0KLmNvcHktbGlua3tmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1wcmltYXJ5KTttYXgtd2lkdGg6MjYwcHg7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwfQouY29weS1ncm91cHttYXJnaW4tYm90dG9tOjEycHh9Ci5jb3B5LWdyb3VwLWhlYWRlcntmb250LXNpemU6MTRweDtmb250LXdlaWdodDo3MDA7Y29sb3I6dmFyKC0tdGV4dCk7cGFkZGluZzo2cHggMTBweDtib3JkZXItbGVmdDozcHggc29saWQgdmFyKC0tcHJpbWFyeSk7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMDMpO2JvcmRlci1yYWRpdXM6MCB2YXIoLS1yYWRpdXMpIHZhcigtLXJhZGl1cykgMDttYXJnaW4tYm90dG9tOjRweH0KLmNvcHktZ3JvdXAtY291bnR7Zm9udC13ZWlnaHQ6NDAwO2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTJweH0KLmNvcHktZ3JvdXAtaXRlbXN7cGFkZGluZy1sZWZ0OjRweH0KLmNvcHktaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6YmFzZWxpbmU7Z2FwOjhweDtwYWRkaW5nOjNweCA2cHg7Zm9udC1zaXplOjEycHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjAzKX0KLmNvcHktaXRlbTpsYXN0LWNoaWxke2JvcmRlci1ib3R0b206bm9uZX0KLmNvcHktaXRlbS1udW17Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToxMHB4O21pbi13aWR0aDoxOHB4O3RleHQtYWxpZ246cmlnaHQ7ZmxleC1zaHJpbms6MH0KLmNvcHktaXRlbS1uYW1le2ZsZXg6MTtjb2xvcjp2YXIoLS10ZXh0KTt3b3JkLWJyZWFrOmJyZWFrLXdvcmR9Ci5jb3B5LWl0ZW0tc2l6ZXtjb2xvcjp2YXIoLS1tdXRlZCk7Zm9udC1zaXplOjExcHg7ZmxleC1zaHJpbms6MDt3aGl0ZS1zcGFjZTpub3dyYXB9CgovKiBUaGVtZSBoaW50ICovCiNjbGVhclNlYXJjaHtwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzp2aXNpYmxlfQojY2xlYXJTZWFyY2g6OmFmdGVye2NvbnRlbnQ6Jyc7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQ6LTNweDtib3JkZXItcmFkaXVzOjUwJTtib3JkZXI6MnB4IGRhc2hlZCByZ2JhKDIzMCwwLDE4LDAuNCk7b3BhY2l0eTowO2FuaW1hdGlvbjp0aGVtZUhpbnQgM3MgZWFzZS1pbi1vdXQgaW5maW5pdGU7cG9pbnRlci1ldmVudHM6bm9uZX0KQGtleWZyYW1lcyB0aGVtZUhpbnR7MCUsMTAwJXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlKDAuOCl9NTAle29wYWNpdHk6MTt0cmFuc2Zvcm06c2NhbGUoMS4xKX19CiNjbGVhclNlYXJjaC5ob2xkaW5nOjphZnRlcntvcGFjaXR5OjE7YW5pbWF0aW9uOm5vbmU7Ym9yZGVyLWNvbG9yOiNlNjAwMTI7Ym9yZGVyLXN0eWxlOnNvbGlkfQojY2xlYXJTZWFyY2ggc3Zne2Rpc3BsYXk6bm9uZX0KI2NsZWFyU2VhcmNoIC5pY29uLXh7ZGlzcGxheTpibG9ja30KLnRoZW1lLWNvdW50ZG93bntwb3NpdGlvbjpmaXhlZDt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC45KTtjb2xvcjojZmZmO3BhZGRpbmc6MjBweCAzMnB4O2JvcmRlci1yYWRpdXM6MTZweDtmb250LXNpemU6MThweDtmb250LXdlaWdodDo2MDA7ei1pbmRleDo5OTk5O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHg7b3BhY2l0eTowO3BvaW50ZXItZXZlbnRzOm5vbmU7dHJhbnNpdGlvbjpvcGFjaXR5IDAuMnN9Ci50aGVtZS1jb3VudGRvd24uc2hvd3tvcGFjaXR5OjF9Ci50aGVtZS1jb3VudGRvd24gLmNvdW50ZG93bi1udW17Zm9udC1zaXplOjQ4cHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiNlNjAwMTJ9Ci50aGVtZS1jb3VudGRvd24gLmNvdW50ZG93bi1sYWJlbHtmb250LXNpemU6MTNweDtjb2xvcjojOTk5fQoKLyogQ29uZmlnIHRvZ2dsZSAqLwoubW9iaWxlLW9ubHl7ZGlzcGxheTpub25lfQouY29uZmlnLXNlY3Rpb257dHJhbnNpdGlvbjphbGwgMC4yNXMgZWFzZX0KCi8qIE1vYmlsZSAqLwpAbWVkaWEobWF4LXdpZHRoOjkwMHB4KXsKICAuY29udGFpbmVye2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnI7Z2FwOjEycHh9CiAgLnJpZ2h0UGFuZXtvcmRlcjotMTtwYWRkaW5nOjEycHg7Z2FwOjEycHh9CiAgLnNlbGVjdGVkLXBhbmVse2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9CiAgLmhlYWRlciBidXR0b24gc3BhbntkaXNwbGF5Om5vbmV9CiAgI2N0YVVwbG9hZCBzcGFue2Rpc3BsYXk6aW5saW5lfQogIC5jb25zb2xlLWJhcntmbGV4LXdyYXA6d3JhcDtoZWlnaHQ6YXV0bztwYWRkaW5nOjZweCAxMnB4O2dhcDo2cHh9CiAgLmNvbnNvbGUtY2hpcHN7Z2FwOjRweH0KICAuY29uc29sZS1jaGlwe3BhZGRpbmc6NHB4IDEwcHg7Zm9udC1zaXplOjExcHh9CiAgLm1vYmlsZS1vbmx5e2Rpc3BsYXk6YmxvY2t9CiAgLmNvbmZpZy1zZWN0aW9ue2Rpc3BsYXk6bm9uZX0KICAuY29uZmlnLXNlY3Rpb24uYWN0aXZle2Rpc3BsYXk6YmxvY2t9Cn0KQG1lZGlhKG1heC13aWR0aDo2MDBweCl7CiAgLmhlYWRlcntoZWlnaHQ6NDhweDtnYXA6OHB4fQogIC5pdGVtLXRodW1ie3dpZHRoOjQ4cHg7aGVpZ2h0OjQ4cHh9CiAgLml0ZW0tdGl0bGV7Zm9udC1zaXplOjEzcHh9CiAgLnN0YXQtdmFsdWV7Zm9udC1zaXplOjE2cHh9CiAgLmNvbnRyb2xzIGlucHV0LC5jb250cm9scyBzZWxlY3R7aGVpZ2h0OjQwcHg7Zm9udC1zaXplOjEzcHh9Cn0KCi8qIExlZ2FjeSBtb2RlICovCi5sZWdhY3ktbW9kZSAub3ZlcmxheSwubGVnYWN5LW1vZGUgI2dhbWVJbmZvTW9kYWwsLmxlZ2FjeS1tb2RlIC5zY3JlZW5zaG90LWZ1bGxzY3JlZW57dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7LXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6bm9uZTtiYWNrZHJvcC1maWx0ZXI6bm9uZX0KLmxlZ2FjeS1tb2RlIC5oZWFkZXIgaW5wdXQuc2VhcmNoey13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOm5vbmU7YmFja2Ryb3AtZmlsdGVyOm5vbmU7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMil9Ci5sZWdhY3ktbW9kZSAuY29udGFpbmVye2dhcDowfS5sZWdhY3ktbW9kZSAubGVmdFBhbmV7bWFyZ2luLXJpZ2h0OjE2cHh9Ci5sZWdhY3ktbW9kZSAucmlnaHRQYW5le2dhcDowfS5sZWdhY3ktbW9kZSAucmlnaHRQYW5lPip7bWFyZ2luLWJvdHRvbToxNnB4fQoubGVnYWN5LW1vZGUgLml0ZW17Z2FwOjB9LmxlZ2FjeS1tb2RlIC5pdGVtPip7bWFyZ2luLXJpZ2h0OjEycHh9Ci5sZWdhY3ktbW9kZSAuY29udHJvbHN7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5jb250cm9scz4qe21hcmdpbi1ib3R0b206OHB4fQoubGVnYWN5LW1vZGUgLnN0YXRzLWdyaWR7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5zdGF0cy1ncmlkPip7bWFyZ2luLXJpZ2h0OjhweDttYXJnaW4tYm90dG9tOjhweH0KLmxlZ2FjeS1tb2RlIC5nZW5yZS1maWx0ZXJ7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5nZW5yZS1maWx0ZXI+KnttYXJnaW4tcmlnaHQ6OHB4fQoubGVnYWN5LW1vZGUgLmNvbnNvbGUtYmFye2dhcDowfS5sZWdhY3ktbW9kZSAuY29uc29sZS1iYXI+KnttYXJnaW4tcmlnaHQ6MTBweH0KLmxlZ2FjeS1tb2RlIC5jb25zb2xlLWNoaXBze2dhcDowfS5sZWdhY3ktbW9kZSAuY29uc29sZS1jaGlwcz4qe21hcmdpbi1yaWdodDo2cHh9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+Cgo8IS0tIENvbnNvbGUgU2VsZWN0b3IgQmFyIC0tPgo8ZGl2IGNsYXNzPSJjb25zb2xlLWJhciIgaWQ9ImNvbnNvbGVCYXIiPgogIDxkaXYgY2xhc3M9Im1vZGUtdG9nZ2xlIiBpZD0ibW9kZVRvZ2dsZSI+CiAgICA8YnV0dG9uIGNsYXNzPSJtb2RlLWJ0biBhY3RpdmUiIGRhdGEtbW9kZT0icmVndWxhciI+UkVHVUxBUjwvYnV0dG9uPgogICAgPGJ1dHRvbiBjbGFzcz0ibW9kZS1idG4iIGRhdGEtbW9kZT0ibWl4Ij5NSVg8L2J1dHRvbj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJjb25zb2xlLWNoaXBzIiBpZD0iY29uc29sZUNoaXBzIj48L2Rpdj4KPC9kaXY+Cgo8IS0tIEhlYWRlciAvIFNlYXJjaCAtLT4KPGRpdiBjbGFzcz0iaGVhZGVyIj4KICA8YSBocmVmPSIjIiBpZD0iY2hhbmdlQnRuIiBzdHlsZT0iZGlzcGxheTpub25lO2NvbG9yOnJnYmEoMjU1LDI1NSwyNTUsMC41KTtmb250LXNpemU6MTBweDtmb250LXdlaWdodDo2MDA7dGV4dC1kZWNvcmF0aW9uOm5vbmU7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMDgpO3BhZGRpbmc6MTBweCA0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO3dyaXRpbmctbW9kZTp2ZXJ0aWNhbC1ybDt0ZXh0LW9yaWVudGF0aW9uOm1peGVkO2xldHRlci1zcGFjaW5nOjFweDtmbGV4LXNocmluazowO3VzZXItc2VsZWN0Om5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lO3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbjt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2UiPkNoYW5nZTxzcGFuIGlkPSJjaGFuZ2VGaWxsIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7aGVpZ2h0OjAlO2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjIpO3RyYW5zaXRpb246aGVpZ2h0IDAuMDVzIGxpbmVhcjtwb2ludGVyLWV2ZW50czpub25lO2JvcmRlci1yYWRpdXM6aW5oZXJpdCI+PC9zcGFuPjwvYT4KICA8aW5wdXQgaWQ9InNlYXJjaCIgY2xhc3M9InNlYXJjaCIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IlNlYXJjaCBnYW1lcy4uLiI+CiAgPGRpdiBjbGFzcz0iYWN0aW9ucyI+CiAgICA8YnV0dG9uIGlkPSJjbGVhclNlYXJjaCI+CiAgICAgIDxzdmcgY2xhc3M9Imljb24teCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+CiAgICA8L2J1dHRvbj4KICAgIDxidXR0b24gaWQ9ImN0YVNob3ciPgogICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQgNmgxNk00IDEwaDE2TTQgMTRoMTZNNCAxOGgxNiIvPjwvc3ZnPgogICAgICA8c3BhbiBjbGFzcz0iYmFkZ2UiIGlkPSJjdGFCYWRnZSI+MDwvc3Bhbj4KICAgIDwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0iY3RhVXBsb2FkIj4KICAgICAgPHNwYW4gY2xhc3M9Indhcm5pbmctaWNvbiI+4pqg77iPPC9zcGFuPgogICAgICA8c3ZnIGNsYXNzPSJ1cGxvYWQtaWNvbiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNyAxNmE0IDQgMCAwMS0uODgtNy45MDNBNSA1IDAgMTExNS45IDZMMTYgNmE1IDUgMCAwMTEgOS45TTE1IDEzbC0zLTNtMCAwbC0zIDNtMy0zdjEyIi8+PC9zdmc+CiAgICAgIDxzdmcgY2xhc3M9InVwbG9hZC1zcGlubmVyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIiBzdHJva2UtZGFzaGFycmF5PSIzMiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjEyIi8+PC9zdmc+CiAgICAgIDxzcGFuIGlkPSJjdGFUZXh0Ij5VcGxvYWQ8L3NwYW4+CiAgICA8L2J1dHRvbj4KICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIE1peCBNb2RlIFRhYnMgLS0+CjxkaXYgY2xhc3M9Im1peC10YWJzIiBpZD0ibWl4VGFicyI+PC9kaXY+Cgo8IS0tIE1haW4gQ29udGVudCAtLT4KPGRpdiBjbGFzcz0iY29udGFpbmVyIiBpZD0ibWFpbkNvbnRhaW5lciI+CiAgPHNlY3Rpb24gY2xhc3M9ImxlZnRQYW5lIiBpZD0ibGVmdFBhbmUiIGFyaWEtbGFiZWw9IkdhbWUgbGlzdCI+CiAgICA8ZGl2IGNsYXNzPSJnZW5yZS1maWx0ZXIiIGlkPSJnZW5yZUZpbHRlciI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJsZWZ0UGFuZS1pbm5lciIgaWQ9ImxlZnRQYW5lSW5uZXIiPgogICAgICA8ZGl2IGNsYXNzPSJsb2FkaW5nLW92ZXJsYXkiPlNlbGVjdCBhIGNvbnNvbGUgdG8gYmVnaW48L2Rpdj4KICAgIDwvZGl2PgogIDwvc2VjdGlvbj4KCiAgPGFzaWRlIGNsYXNzPSJyaWdodFBhbmUiPgogICAgPGJ1dHRvbiBpZD0idG9nZ2xlQ29uZmlnIiBjbGFzcz0iYnRuIGdob3N0IG1vYmlsZS1vbmx5Ij5IaWRlIENvbmZpZ3VyYXRpb248L2J1dHRvbj4KICAgIDxkaXYgaWQ9ImNvbmZpZ1NlY3Rpb24iIGNsYXNzPSJjb25maWctc2VjdGlvbiI+CiAgICA8IS0tIFN0b3JhZ2UgQ2FyZCAtLT4KICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtY2FyZCI+CiAgICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtaGVhZGVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLXRpdGxlIj4KICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE5IDExSDVtMTQgMGEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg1YTIgMiAwIDAxLTItMnYtNmEyIDIgMCAwMTItMm0xNCAwVjlhMiAyIDAgMDAtMi0yTTUgMTFWOWEyIDIgMCAwMTItMm0wIDBWNWEyIDIgMCAwMTItMmg2YTIgMiAwIDAxMiAydjJNNyA3aDEwIi8+PC9zdmc+CiAgICAgICAgICA8c3BhbiBpZD0ic3RvcmFnZUxhYmVsIj5TdG9yYWdlPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtY2FwYWNpdHkiPjxzcGFuIGlkPSJzcGFjZSI+MDwvc3Bhbj5HQiBDYXBhY2l0eTwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic3RvcmFnZS1wcm9ncmVzcyI+CiAgICAgICAgPGRpdiBjbGFzcz0icHJvZ3Jlc3MtdXNlZCIgaWQ9InByb2dyZXNzVXNlZCIgc3R5bGU9IndpZHRoOjAlIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJwcm9ncmVzcy1zZWxlY3RlZCIgaWQ9InByb2dyZXNzU2VsZWN0ZWQiIHN0eWxlPSJ3aWR0aDowJSI+PC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWxlZ2VuZCI+CiAgICAgICAgPGRpdiBjbGFzcz0ibGVnZW5kLWl0ZW0iPjxkaXYgY2xhc3M9ImxlZ2VuZC1kb3QgdXNlZCI+PC9kaXY+VXNlZDogPHNwYW4gaWQ9InVzZWRTcGFjZSI+MDwvc3Bhbj4gR0I8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbSI+PGRpdiBjbGFzcz0ibGVnZW5kLWRvdCBzZWxlY3RlZCI+PC9kaXY+U2VsZWN0ZWQ6IDxzcGFuIGlkPSJzZWxlY3RlZFNpemUiPjAuMDA8L3NwYW4+IEdCPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGVnZW5kLWl0ZW0iPjxkaXYgY2xhc3M9ImxlZ2VuZC1kb3QgZnJlZSI+PC9kaXY+RnJlZTogPHNwYW4gaWQ9ImZyZWVTcGFjZSI+MDwvc3Bhbj4gR0I8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIFN0YXRzIC0tPgogICAgPGRpdiBjbGFzcz0ic3RhdHMtZ3JpZCI+CiAgICAgIDxkaXYgY2xhc3M9InN0YXQtY2FyZCI+PGRpdiBjbGFzcz0ic3RhdC12YWx1ZSIgaWQ9ImNvdW50Ij4wPC9kaXY+PGRpdiBjbGFzcz0ic3RhdC1sYWJlbCI+VGl0bGVzPC9kaXY+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InN0YXQtY2FyZCBoaWdobGlnaHQiPjxkaXYgY2xhc3M9InN0YXQtdmFsdWUiPjxzcGFuIGlkPSJzZWxlY3RlZFNpemVEaXNwbGF5Ij4wLjA8L3NwYW4+PHNtYWxsIHN0eWxlPSJmb250LXNpemU6MTRweCI+R0I8L3NtYWxsPjwvZGl2PjxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPlRvdGFsIFNpemU8L2Rpdj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic3RhdC1jYXJkIj48ZGl2IGNsYXNzPSJzdGF0LXZhbHVlIiBpZD0iaW5zdGFsbEVzdGltYXRlIj5+MG08L2Rpdj48ZGl2IGNsYXNzPSJzdGF0LWxhYmVsIj5Fc3QuIFRpbWU8L2Rpdj48L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0ic3RhdC1ub3RlIj4KICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIHN0cm9rZS13aWR0aD0iMiIvPjxwYXRoIHN0cm9rZS13aWR0aD0iMiIgZD0iTTEyIDE2di00bTAtNGguMDEiLz48L3N2Zz4KICAgICAgRXN0LiBiYXNlZCBvbiAxNE1CL3MgdHJhbnNmZXIgcmF0ZQogICAgPC9kaXY+CgogICAgPCEtLSBDb250cm9scyAtLT4KICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzIj4KICAgICAgPGRpdiBjbGFzcz0iZnVsbCI+PGxhYmVsPkN1c3RvbWVyIE5hbWUgPGEgaHJlZj0iIyIgaWQ9Im5vdFlvdUxpbmsiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Zm9udC1zaXplOjExcHg7Zm9udC13ZWlnaHQ6NDAwO2NvbG9yOiM5OTk7bWFyZ2luLWxlZnQ6NnB4IiBvbmNsaWNrPSJjbGVhckN1c3RvbWVyTmFtZSgpO3JldHVybiBmYWxzZTsiPk5vdCB5b3U/IENsaWNrIGhlcmU8L2E+PC9sYWJlbD48aW5wdXQgaWQ9ImN1c3RvbWVyIiB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iRW50ZXIgbmFtZSAodXNlIHVuZGVyc2NvcmVzKSI+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImZpbGVuYW1lLXByZXZpZXciIGlkPSJmaWxlbmFtZVByZXZpZXciPlNlbGVjdCBhIGNvbnNvbGUgdG8gYmVnaW4uLi48L2Rpdj4KICAgICAgPGRpdiBpZD0iZHluYW1pY0NvbnRyb2xzIj48L2Rpdj4KICAgIDwvZGl2PgogICAgPC9kaXY+PCEtLSAvY29uZmlnU2VjdGlvbiAtLT4KCiAgICA8IS0tIEdyYW5kIFRvdGFsIChNSVggbW9kZSBvbmx5KSAtLT4KICAgIDxkaXYgY2xhc3M9ImdyYW5kLXRvdGFsIiBpZD0iZ3JhbmRUb3RhbCI+CiAgICAgIDxkaXYgY2xhc3M9ImdyYW5kLXRvdGFsLWhlYWRlciI+R1JBTkQgVE9UQUwgKEFsbCBDb25zb2xlcyk8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iZ3JhbmQtdG90YWwtYnJlYWtkb3duIiBpZD0iZ3JhbmRUb3RhbEJyZWFrZG93biI+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImdyYW5kLXRvdGFsLXN1bW1hcnkiPgogICAgICAgIDxzcGFuPkNvbWJpbmVkPC9zcGFuPgogICAgICAgIDxzcGFuIGlkPSJncmFuZFRvdGFsU2l6ZSI+MCB0aXRsZXMgLyAwLjAgR0I8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSBTaGFyZSAtLT4KICAgIDxkaXYgY2xhc3M9InNoYXJlLXJvdyI+CiAgICAgIDxpbnB1dCBpZD0ic2hhcmVhYmxlIiB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iVXBsb2FkIGxpbmsgd2lsbCBhcHBlYXIgaGVyZS4uLiIgcmVhZG9ubHk+CiAgICAgIDxidXR0b24gaWQ9ImNvcHlMaW5rIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5Ij5Db3B5PC9idXR0b24+CiAgICA8L2Rpdj4KCiAgICA8IS0tIEFjdGlvbnMgLS0+CiAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgPGJ1dHRvbiBpZD0ic2F2ZUJ0biIgY2xhc3M9ImJ0biBnaG9zdCI+U2F2ZTwvYnV0dG9uPgogICAgICA8bGFiZWwgZm9yPSJmaWxlSW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciI+T3BlbjwvbGFiZWw+CiAgICAgIDxpbnB1dCBpZD0iZmlsZUluIiB0eXBlPSJmaWxlIiBzdHlsZT0iZGlzcGxheTpub25lOyI+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICA8YnV0dG9uIGlkPSJhZG1pbkV4cG9ydCIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IEFkbWluPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9Im1hdGNoTGlzdCIgY2xhc3M9ImJ0biBnaG9zdCI+TWF0Y2ggTGlzdDwvYnV0dG9uPgogICAgICA8YnV0dG9uIGlkPSJiaW5MaXN0IiBjbGFzcz0iYnRuIGdob3N0Ij5VcGxvYWRzPC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9ImZpbGVMaXN0Q29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGRpdiBpZD0iYmluRmlsZUxpc3QiPjwvZGl2PjwvZGl2PgogICAgPGRpdiBpZD0ic3RhdHVzIiBzdHlsZT0iZGlzcGxheTpub25lOyI+UmVhZHk8L2Rpdj4KCiAgICA8IS0tIFNlbGVjdGVkIFBhbmVsIC0tPgogICAgPGRpdiBpZD0ic2VsZWN0ZWRQYW5lbCIgY2xhc3M9InNlbGVjdGVkLXBhbmVsIj4KICAgICAgPGRpdiBjbGFzcz0iaGVhZCI+PHNwYW4+U2VsZWN0ZWQgU29mdHdhcmU8L3NwYW4+PHNwYW4gaWQ9InNlbGVjdGVkUGFuZWxDb3VudCI+MCBpdGVtczwvc3Bhbj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iYm9keSIgaWQ9InNlbGVjdGVkUGFuZWxCb2R5Ij48L2Rpdj4KICAgIDwvZGl2PgogIDwvYXNpZGU+CjwvZGl2PgoKCjwhLS0gT3ZlcmxheSAtLT4KPGRpdiBjbGFzcz0ib3ZlcmxheSIgaWQ9Im92ZXJsYXkiPgogIDxkaXYgY2xhc3M9ImhlYWQiPjxkaXY+PHN0cm9uZz5TZWxlY3RlZCBUaXRsZXM8L3N0cm9uZz4gLSA8c3BhbiBpZD0ib3ZlcmxheUNvdW50Ij4wPC9zcGFuPjwvZGl2PjxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlciI+PGJ1dHRvbiBpZD0ib3ZlcmxheVNvcnRCdG4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJmb250LXNpemU6MTJweCI+U29ydCBieSBTaXplPC9idXR0b24+PGJ1dHRvbiBpZD0iY2xvc2VPdmVybGF5IiBjbGFzcz0iYnRuIGdob3N0Ij5DbG9zZTwvYnV0dG9uPjwvZGl2PjwvZGl2PgogIDxkaXYgaWQ9Im92ZXJsYXlTdGF0cyIgc3R5bGU9InBhZGRpbmc6MTJweCAxNnB4IDA7ZGlzcGxheTpub25lIj48L2Rpdj4KICA8ZGl2IGNsYXNzPSJib2R5IiBpZD0ib3ZlcmxheUJvZHkiPjwvZGl2Pgo8L2Rpdj4KCjwhLS0gRmlsZXMgTW9kYWwgLS0+CjxkaXYgaWQ9ImZpbGVzTW9kYWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7cGFkZGluZzoyMHB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzLWxnKTtib3gtc2hhZG93OjAgMjBweCA1MHB4IHJnYmEoMCwwLDAsMC41KTt6LWluZGV4OjIwMDttYXgtd2lkdGg6NTAwcHg7d2lkdGg6OTAlO21heC1oZWlnaHQ6NzB2aDtvdmVyZmxvdzphdXRvO2ZvbnQtc2l6ZToxM3B4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtjb2xvcjp2YXIoLS10ZXh0KSI+PC9kaXY+Cgo8IS0tIEdhbWUgSW5mbyBNb2RhbCAtLT4KPGRpdiBpZD0iZ2FtZUluZm9Nb2RhbCI+PGRpdiBjbGFzcz0iZ2FtZS1pbmZvIiBpZD0iZ2FtZUluZm9Db250ZW50Ij48L2Rpdj48L2Rpdj4KCjwhLS0gU2NyZWVuc2hvdCBWaWV3ZXIgLS0+CjxkaXYgY2xhc3M9InNjcmVlbnNob3QtZnVsbHNjcmVlbiIgaWQ9InNjcmVlbnNob3RWaWV3ZXIiPgogIDxpbWcgc3JjPSIiIGFsdD0iU2NyZWVuc2hvdCIgaWQ9InNjcmVlbnNob3RJbWFnZSI+CiAgPHNwYW4gY2xhc3M9ImNsb3NlLWhpbnQiPlRhcCBhbnl3aGVyZSB0byBjbG9zZTwvc3Bhbj4KPC9kaXY+Cgo8IS0tIENvcHkgc3VtbWFyeSBtb2RhbCAtLT4KPGRpdiBpZD0iY29weU1vZGFsIiBjbGFzcz0iY29weS1tb2RhbC1iYWNrZHJvcCI+CiAgPGRpdiBjbGFzcz0iY29weS1tb2RhbCI+CiAgICA8ZGl2IGNsYXNzPSJjb3B5LW1vZGFsLWhlYWRlciI+CiAgICAgIDxzcGFuIGNsYXNzPSJjb3B5LW1vZGFsLXRpdGxlIj5TZWxlY3Rpb24gU3VtbWFyeTwvc3Bhbj4KICAgICAgPGJ1dHRvbiBpZD0iY29weU1vZGFsQ2xvc2UiIGNsYXNzPSJjb3B5LW1vZGFsLWNsb3NlIj4mdGltZXM7PC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImNvcHktbW9kYWwtYm9keSIgaWQ9ImNvcHlNb2RhbEJvZHkiPjwvZGl2PgogICAgPGRpdiBjbGFzcz0iY29weS1tb2RhbC1mb290ZXIiPgogICAgICA8YnV0dG9uIGlkPSJjb3B5TW9kYWxCdG4iIGNsYXNzPSJjb3B5LW1vZGFsLWJ0biI+Q29weSB0byBDbGlwYm9hcmQ8L2J1dHRvbj4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gTmFtZSBuYWcgbW9kYWwgLS0+CjxkaXYgaWQ9Im5hbWVOYWciIGNsYXNzPSJuYW1lLW5hZy1iYWNrZHJvcCI+CiAgPGRpdiBjbGFzcz0ibmFtZS1uYWctYm94Ij4KICAgIDxkaXYgY2xhc3M9Im5hbWUtbmFnLWljb24iPiE8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im5hbWUtbmFnLXRpdGxlIj5XaGF0J3MgeW91ciBuYW1lPzwvZGl2PgogICAgPGRpdiBjbGFzcz0ibmFtZS1uYWctc3VidGl0bGUiPldlIG5lZWQgeW91ciBuYW1lIGJlZm9yZSB5b3UgY2FuIGNvbnRpbnVlPC9kaXY+CiAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im5hbWVOYWdJbnB1dCIgY2xhc3M9Im5hbWUtbmFnLWlucHV0IiBwbGFjZWhvbGRlcj0iRW50ZXIgbmFtZSAodXNlIHVuZGVyc2NvcmVzKSIgYXV0b2NvbXBsZXRlPSJvZmYiIHNwZWxsY2hlY2s9ImZhbHNlIj4KICAgIDxidXR0b24gaWQ9Im5hbWVOYWdTdWJtaXQiIGNsYXNzPSJuYW1lLW5hZy1zdWJtaXQiPkxldCdzIEdvPC9idXR0b24+CiAgPC9kaXY+CjwvZGl2PgoKPCEtLSBUb2FzdCAmIFRoZW1lIGNvdW50ZG93biAtLT4KPGRpdiBjbGFzcz0idG9hc3QiIGlkPSJ0b2FzdCI+PC9kaXY+CjxkaXYgaWQ9InRoZW1lQ291bnRkb3duIiBjbGFzcz0idGhlbWUtY291bnRkb3duIj48c3BhbiBjbGFzcz0iY291bnRkb3duLW51bSI+Mzwvc3Bhbj48c3BhbiBjbGFzcz0iY291bnRkb3duLWxhYmVsIj5Ib2xkIHRvIGNoYW5nZSB0aGVtZTwvc3Bhbj48L2Rpdj4KCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4vLyBQcmVtYXppbmdQSEdhbWVzIENvbnNvbGUgUmVnaXN0cnkKLy8gQWRkIG5ldyBjb25zb2xlcyBieSBhZGRpbmcgZW50cmllcyB0byB0aGlzIG9iamVjdC4KLy8gRWFjaCBjb25zb2xlIG1hcHMgdG8gaXRzIGZvbGRlciB3aXRoIGEgdW5pZmllZCBnYW1lcy5qc29uIGRhdGFiYXNlLgoKLy8gTGlicmV0cm8gdGh1bWJuYWlsIFVSTCBidWlsZGVyCi8vIFJlcGxhY2VzICYqLzpgPD4/XHwgd2l0aCBfIHBlciBsaWJyZXRybyBzcGVjCnZhciBMSUJSRVRST19DRE4gPSAnaHR0cHM6Ly90aHVtYm5haWxzLmxpYnJldHJvLmNvbS8nOwpmdW5jdGlvbiBsaWJyZXRyb1NhZmUobmFtZSkgewogIHJldHVybiBuYW1lLnJlcGxhY2UoL1smKi86YDw+P1xcfF0vZywgJ18nKTsKfQoKY29uc3QgQ09OU09MRVMgPSB7CiAgc3dpdGNoOiB7CiAgICBpZDogJ3N3aXRjaCcsCiAgICBsYWJlbDogJ1N3aXRjaCcsCiAgICBjb2xvcjogJyNlNjAwMTInLAogICAgZm9sZGVyOiAnZGF0YS9zd2l0Y2gnLAogICAgZGJGaWxlOiAnZ2FtZXMuanNvbicsCiAgICBjbGllbnRGaWxlRXh0OiAnLkNMSV9QUk1aJywKICAgIGFkbWluRmlsZUV4dDogJy5QUk1aJywKICAgIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywKICAgIGFkbWluQmFzZVBhdGg6ICdLOlxcTlNQIDIwMjFcXCcsCiAgICBzdG9yYWdlTGFiZWw6ICdTRCBDYXJkIFN0b3JhZ2UnLAogICAgc3RvcmFnZUNvbnRyb2xzOiBbCiAgICAgIHsKICAgICAgICBpZDogJ2NvbnNvbGUnLAogICAgICAgIGxhYmVsOiAnQ29uc29sZScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJ3YxJywgbGFiZWw6ICd2MScgfSwKICAgICAgICAgIHsgdmFsdWU6ICd2MicsIGxhYmVsOiAndjInIH0sCiAgICAgICAgICB7IHZhbHVlOiAnbGl0ZScsIGxhYmVsOiAnbGl0ZScgfSwKICAgICAgICAgIHsgdmFsdWU6ICdvbGVkJywgbGFiZWw6ICdvbGVkJyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAndjEnLAogICAgICAgIGZpbGVuYW1lVG9rZW46IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnc2QnLAogICAgICAgIGxhYmVsOiAnU0QgQ2FyZCAoR0IpJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnMTI4JywgbGFiZWw6ICcxMjgnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMjU2JywgbGFiZWw6ICcyNTYnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNTEyJywgbGFiZWw6ICc1MTInIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMTAyNCcsIGxhYmVsOiAnMTAyNCcgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJzEyOCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ3NkJywKICAgICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdhbmRyb2lkJywKICAgICAgICBsYWJlbDogJ0FuZHJvaWQgKEdCKScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJzAnLCBsYWJlbDogJzAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMTYnLCBsYWJlbDogJzE2JyB9LAogICAgICAgICAgeyB2YWx1ZTogJzMyJywgbGFiZWw6ICczMicgfSwKICAgICAgICAgIHsgdmFsdWU6ICc2NCcsIGxhYmVsOiAnNjQnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICcwJywKICAgICAgICBmaWxlbmFtZVRva2VuOiAnZHJvaWQnLAogICAgICAgIHN0b3JhZ2VDYWxjOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogJ2xpbnV4JywKICAgICAgICBsYWJlbDogJ0xpbnV4IChHQiknLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICcwJywgbGFiZWw6ICcwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzE2JywgbGFiZWw6ICcxNicgfSwKICAgICAgICAgIHsgdmFsdWU6ICczMicsIGxhYmVsOiAnMzInIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNjQnLCBsYWJlbDogJzY0JyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnMCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ2xpbicsCiAgICAgICAgc3RvcmFnZUNhbGM6IHRydWUKICAgICAgfQogICAgXSwKICAgIGNhbGN1bGF0ZVN0b3JhZ2U6IGZ1bmN0aW9uKHZhbHVlcykgewogICAgICBjb25zdCBjb25zb2xlVmFsID0gdmFsdWVzLmNvbnNvbGUgfHwgJ3YxJzsKICAgICAgY29uc3Qgc2RNYXJrZXRlZCA9IE51bWJlcih2YWx1ZXMuc2QgfHwgMTI4KTsKICAgICAgY29uc3QgYW5kcm9pZE1hcmtldGVkID0gTnVtYmVyKHZhbHVlcy5hbmRyb2lkIHx8IDApOwogICAgICBjb25zdCBsaW51eE1hcmtldGVkID0gTnVtYmVyKHZhbHVlcy5saW51eCB8fCAwKTsKICAgICAgY29uc3Qgc2RGb3JtYXR0ZWQgPSB7IDEyODogMTE5LCAyNTY6IDIzOCwgNTEyOiA0NzMsIDEwMjQ6IDk1MyB9OwogICAgICBjb25zdCBzZCA9IHNkRm9ybWF0dGVkW3NkTWFya2V0ZWRdIHx8IE1hdGguZmxvb3Ioc2RNYXJrZXRlZCAqIDAuOTIzKTsKICAgICAgY29uc3QgZW11UGFydGl0aW9uID0gY29uc29sZVZhbCA9PT0gJ29sZWQnID8gNTggOiAyOTsKICAgICAgY29uc3QgYW5kcm9pZCA9IE1hdGguZmxvb3IoYW5kcm9pZE1hcmtldGVkICogMC45Myk7CiAgICAgIGNvbnN0IGxpbnV4ID0gTWF0aC5mbG9vcihsaW51eE1hcmtldGVkICogMC45Myk7CiAgICAgIGNvbnN0IG9zU2l6ZSA9IDg7CiAgICAgIGNvbnN0IHNkRmlsZXMgPSAxOwogICAgICBjb25zdCBhbmRyb2lkRmlsZXMgPSBhbmRyb2lkID4gMCA/IDEgOiAwOwogICAgICBjb25zdCBsaW51eEZpbGVzID0gbGludXggPiAwID8gMSA6IDA7CiAgICAgIGNvbnN0IHNkUmVtYWluZGVyID0gc2QgLSBlbXVQYXJ0aXRpb24gLSBhbmRyb2lkIC0gYW5kcm9pZEZpbGVzIC0gbGludXggLSBsaW51eEZpbGVzIC0gc2RGaWxlczsKICAgICAgY29uc3QgZW11RnJlZSA9IGVtdVBhcnRpdGlvbiAtIG9zU2l6ZTsKICAgICAgY29uc3QgcmF3U3BhY2UgPSBzZFJlbWFpbmRlciArIGVtdUZyZWU7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKHJhd1NwYWNlICogMC45NSk7CiAgICB9CiAgfSwKCiAgcHM0OiB7CiAgICBpZDogJ3BzNCcsCiAgICBsYWJlbDogJ1BTNCcsCiAgICBjb2xvcjogJyMwMDM3OTEnLAogICAgZm9sZGVyOiAnZGF0YS9wczQnLAogICAgZGJGaWxlOiAnZ2FtZXMuanNvbicsCiAgICBsaWJyZXRyb1N5c3RlbTogJ1NvbnkgLSBQbGF5U3RhdGlvbiA0JywKICAgIC8vICJBIEhhdCBpbiBUaW1lIFBTNCIg4oaSICJBIEhhdCBpbiBUaW1lIgogICAgY2xlYW5HYW1lTmFtZTogZnVuY3Rpb24obmFtZSkgewogICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccypQUzRccyokL2ksICcnKS5yZXBsYWNlKC9ccypcWy4qP1xdXHMqL2csICcnKS50cmltKCk7CiAgICB9LAogICAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWjQnLAogICAgYWRtaW5GaWxlRXh0OiAnLlBSTVo0JywKICAgIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywKICAgIGFkbWluQmFzZVBhdGg6ICdROlxcUFM0X1BLR1xcJywKICAgIHN0b3JhZ2VMYWJlbDogJ0hERCBTdG9yYWdlJywKICAgIHN0b3JhZ2VDb250cm9sczogWwogICAgICB7CiAgICAgICAgaWQ6ICdjb25zb2xlJywKICAgICAgICBsYWJlbDogJ0NvbnNvbGUnLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICdmYXQnLCBsYWJlbDogJ2ZhdCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICdzbGltJywgbGFiZWw6ICdzbGltJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ3BybycsIGxhYmVsOiAncHJvJyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnZmF0JywKICAgICAgICBmaWxlbmFtZVRva2VuOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogJ2hkZCcsCiAgICAgICAgbGFiZWw6ICdIREQgKEdCKScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJzUwMCcsIGxhYmVsOiAnNTAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzEwMDAnLCBsYWJlbDogJzEwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMjAwMCcsIGxhYmVsOiAnMjAwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICczMDAwJywgbGFiZWw6ICczMDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzQwMDAnLCBsYWJlbDogJzQwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNTAwMCcsIGxhYmVsOiAnNTAwMCcgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJzUwMCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ2hkZCcsCiAgICAgICAgc3RvcmFnZUNhbGM6IHRydWUKICAgICAgfQogICAgXSwKICAgIGNhbGN1bGF0ZVN0b3JhZ2U6IGZ1bmN0aW9uKHZhbHVlcykgewogICAgICBjb25zdCBoZGRWYWwgPSBOdW1iZXIodmFsdWVzLmhkZCB8fCA1MDApOwogICAgICBjb25zdCBidWZmYSA9IE1hdGguZmxvb3IoaGRkVmFsIC0gKGhkZFZhbCAqIDAuMTgpKTsKICAgICAgY29uc3QgdG90YWxSZXNlcnZlZCA9IGhkZFZhbCAtIGJ1ZmZhOwogICAgICByZXR1cm4gKGhkZFZhbCAtIHRvdGFsUmVzZXJ2ZWQpOwogICAgfQogIH0sCgogIHBzMzogewogICAgaWQ6ICdwczMnLAogICAgbGFiZWw6ICdQUzMnLAogICAgY29sb3I6ICcjMDAzNzkxJywKICAgIGZvbGRlcjogJ2RhdGEvcHMzJywKICAgIGRiRmlsZTogJ2dhbWVzLmpzb24nLAogICAgbGlicmV0cm9TeXN0ZW06ICdTb255IC0gUGxheVN0YXRpb24gMycsCiAgICBsaWJyZXRyb0ZvbGRlcnM6IFsnTmFtZWRfU25hcHMnLCAnTmFtZWRfQm94YXJ0cyddLAogICAgLy8gIjAwNyBMZWdlbmRzIFtCTEVTMDE2MTRdIiDihpIgIjAwNyBMZWdlbmRzIgogICAgY2xlYW5HYW1lTmFtZTogZnVuY3Rpb24obmFtZSkgewogICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccypcWy4qP1xdXHMqL2csICcnKS5yZXBsYWNlKC9ccypcKC4qP1wpXHMqL2csICcnKS50cmltKCk7CiAgICB9LAogICAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWlAnLAogICAgYWRtaW5GaWxlRXh0OiAnLlBSTVpQJywKICAgIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywKICAgIGFkbWluQmFzZVBhdGg6ICdQOlxcUFMzSVNPXFwnLAogICAgc3RvcmFnZUxhYmVsOiAnSEREIFN0b3JhZ2UnLAogICAgc3RvcmFnZUNvbnRyb2xzOiBbCiAgICAgIHsKICAgICAgICBpZDogJ2NvbnNvbGUnLAogICAgICAgIGxhYmVsOiAnQ29uc29sZScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJ2ZhdCcsIGxhYmVsOiAnZmF0JyB9LAogICAgICAgICAgeyB2YWx1ZTogJ3NsaW0nLCBsYWJlbDogJ3NsaW0nIH0sCiAgICAgICAgICB7IHZhbHVlOiAnc3VwZXJzbGltJywgbGFiZWw6ICdzdXBlcnNsaW0nIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICdzbGltJywKICAgICAgICBmaWxlbmFtZVRva2VuOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogJ2hkZCcsCiAgICAgICAgbGFiZWw6ICdIREQgKEdCKScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJzUwMCcsIGxhYmVsOiAnNTAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzEwMDAnLCBsYWJlbDogJzEwMDAnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICc1MDAnLAogICAgICAgIGZpbGVuYW1lVG9rZW46ICdoZGQnLAogICAgICAgIHN0b3JhZ2VDYWxjOiB0cnVlCiAgICAgIH0KICAgIF0sCiAgICBjYWxjdWxhdGVTdG9yYWdlOiBmdW5jdGlvbih2YWx1ZXMpIHsKICAgICAgY29uc3QgaGRkVmFsID0gTnVtYmVyKHZhbHVlcy5oZGQgfHwgNTAwKTsKICAgICAgY29uc3QgYnVmZmEgPSBNYXRoLmZsb29yKGhkZFZhbCAtIChoZGRWYWwgKiAwLjE4KSk7CiAgICAgIGNvbnN0IHRvdGFsUmVzZXJ2ZWQgPSBoZGRWYWwgLSBidWZmYTsKICAgICAgcmV0dXJuIChoZGRWYWwgLSB0b3RhbFJlc2VydmVkKTsKICAgIH0KICB9LAoKICBwczI6IHsKICAgIGlkOiAncHMyJywKICAgIGxhYmVsOiAnUFMyJywKICAgIGNvbG9yOiAnIzAwMzc5MScsCiAgICBmb2xkZXI6ICdkYXRhL3BzMicsCiAgICBkYkZpbGU6ICdnYW1lcy5qc29uJywKICAgIGxpYnJldHJvU3lzdGVtOiAnU29ueSAtIFBsYXlTdGF0aW9uIDInLAogICAgLy8gIjAwNyAtIFF1YW50dW0gb2YgU29sYWNlIChVU0EpIiDihpIgIjAwNyAtIFF1YW50dW0gb2YgU29sYWNlIgogICAgY2xlYW5HYW1lTmFtZTogZnVuY3Rpb24obmFtZSkgewogICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccypcKC4qP1wpXHMqL2csICcnKS50cmltKCk7CiAgICB9LAogICAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWjInLAogICAgYWRtaW5GaWxlRXh0OiAnLlBSTVoyJywKICAgIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywKICAgIGFkbWluQmFzZVBhdGg6ICdTOlxcU09OWVxcUFMyXFxJU09cXGR2ZFxcJywKICAgIHN0b3JhZ2VMYWJlbDogJ0hERCBTdG9yYWdlJywKICAgIHN0b3JhZ2VDb250cm9sczogWwogICAgICB7CiAgICAgICAgaWQ6ICdjb25zb2xlJywKICAgICAgICBsYWJlbDogJ0NvbnNvbGUnLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICdmYXQnLCBsYWJlbDogJ2ZhdCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICdzbGltJywgbGFiZWw6ICdzbGltJyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnc2xpbScsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdoZGQnLAogICAgICAgIGxhYmVsOiAnaGRkIChHQiknLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICc1MDAnLCBsYWJlbDogJzUwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcxMDAwJywgbGFiZWw6ICcxMDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzIwMDAnLCBsYWJlbDogJzIwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMzAwMCcsIGxhYmVsOiAnMzAwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICc0MDAwJywgbGFiZWw6ICc0MDAwJyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnNTAwJywKICAgICAgICBmaWxlbmFtZVRva2VuOiAnaGRkJywKICAgICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQogICAgICB9CiAgICBdLAogICAgY2FsY3VsYXRlU3RvcmFnZTogZnVuY3Rpb24odmFsdWVzKSB7CiAgICAgIGNvbnN0IGhkZFZhbCA9IE51bWJlcih2YWx1ZXMuaGRkIHx8IDY0KTsKICAgICAgY29uc3QgYnVmZmEgPSBNYXRoLmZsb29yKGhkZFZhbCAtIChoZGRWYWwgKiAwLjEwKSk7CiAgICAgIGNvbnN0IHRvdGFsUmVzZXJ2ZWQgPSBoZGRWYWwgLSBidWZmYTsKICAgICAgcmV0dXJuIChoZGRWYWwgLSB0b3RhbFJlc2VydmVkKTsKICAgIH0KICB9LAoKICBwc3A6IHsKICAgIGlkOiAncHNwJywKICAgIGxhYmVsOiAnUFNQJywKICAgIGNvbG9yOiAnIzAwMzc5MScsCiAgICBmb2xkZXI6ICdkYXRhL3BzcCcsCiAgICBkYkZpbGU6ICdnYW1lcy5qc29uJywKICAgIGxpYnJldHJvU3lzdGVtOiAnU29ueSAtIFBsYXlTdGF0aW9uIFBvcnRhYmxlJywKICAgIC8vICIxMDAwIFRpbnkgQ2xhd3MuVVMuTlBVWi0wMDI2Mi5QU04uR29vZCIg4oaSICIxMDAwIFRpbnkgQ2xhd3MiCiAgICBjbGVhbkdhbWVOYW1lOiBmdW5jdGlvbihuYW1lKSB7CiAgICAgIC8vIFRha2UgdGV4dCBiZWZvcmUgZmlyc3QgZG90IHRoYXQncyBmb2xsb3dlZCBieSBhIHJlZ2lvbiBjb2RlCiAgICAgIHZhciBtID0gbmFtZS5tYXRjaCgvXiguKz8pXC4oVVN8RVV8SlB8QVN8S1IpXC4vaSk7CiAgICAgIGlmIChtKSByZXR1cm4gbVsxXS50cmltKCk7CiAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoL1xzKlwoLio/XClccyovZywgJycpLnRyaW0oKTsKICAgIH0sCiAgICBjbGllbnRGaWxlRXh0OiAnLkNMSV9QUk1aUycsCiAgICBhZG1pbkZpbGVFeHQ6ICcuUFJNWlMnLAogICAgZmlsZWJpbkJ1Y2tldDogJ3hsZzRrZ2dvemJkZ3NudzQnLAogICAgYWRtaW5CYXNlUGF0aDogJ1o6XFxTT05ZXFxQU1BcXF9QU1BfSVNPX0dPT0RcXCcsCiAgICBzdG9yYWdlTGFiZWw6ICdTRCBTdG9yYWdlJywKICAgIHN0b3JhZ2VDb250cm9sczogWwogICAgICB7CiAgICAgICAgaWQ6ICdjb25zb2xlJywKICAgICAgICBsYWJlbDogJ0NvbnNvbGUnLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICdmYXQnLCBsYWJlbDogJ2ZhdCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICdzbGltJywgbGFiZWw6ICdzbGltJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ2JyaXRlJywgbGFiZWw6ICdicml0ZScgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJ3NsaW0nLAogICAgICAgIGZpbGVuYW1lVG9rZW46IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnc2QnLAogICAgICAgIGxhYmVsOiAnc2QgKEdCKScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJzMyJywgbGFiZWw6ICczMicgfSwKICAgICAgICAgIHsgdmFsdWU6ICc2NCcsIGxhYmVsOiAnNjQnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMTI4JywgbGFiZWw6ICcxMjgnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICc2NCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ3NkJywKICAgICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQogICAgICB9CiAgICBdLAogICAgY2FsY3VsYXRlU3RvcmFnZTogZnVuY3Rpb24odmFsdWVzKSB7CiAgICAgIGNvbnN0IHNkVmFsID0gTnVtYmVyKHZhbHVlcy5zZCB8fCA2NCk7CiAgICAgIGNvbnN0IGJ1ZmZhID0gTWF0aC5mbG9vcihzZFZhbCAtIChzZFZhbCAqIDAuMTApKTsKICAgICAgY29uc3QgdG90YWxSZXNlcnZlZCA9IHNkVmFsIC0gYnVmZmE7CiAgICAgIHJldHVybiAoc2RWYWwgLSB0b3RhbFJlc2VydmVkKTsKICAgIH0KICB9LAoKICAnM2RzJzogewogICAgaWQ6ICczZHMnLAogICAgbGFiZWw6ICczRFMnLAogICAgY29sb3I6ICcjYzgyMDJmJywKICAgIGZvbGRlcjogJ2RhdGEvM2RzJywKICAgIGRiRmlsZTogJ2dhbWVzLmpzb24nLAogICAgbGlicmV0cm9TeXN0ZW06ICdOaW50ZW5kbyAtIE5pbnRlbmRvIDNEUycsCiAgICAvLyAiM0QgQ2xhc3NpYyAzRCBTdHJlZXRzIG9mIFJhZ2UgVVNBIiDihpIgIjNEIENsYXNzaWMgM0QgU3RyZWV0cyBvZiBSYWdlIgogICAgY2xlYW5HYW1lTmFtZTogZnVuY3Rpb24obmFtZSkgewogICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccypcKC4qP1wpXHMqL2csICcnKS5yZXBsYWNlKC9ccysoVVNBfEVVUnxKUE58RVV8SlB8VVN8S09SfFdvcmxkKVxzKiQvaSwgJycpLnRyaW0oKTsKICAgIH0sCiAgICBjbGllbnRGaWxlRXh0OiAnLkNMSV9QUk1aMycsCiAgICBhZG1pbkZpbGVFeHQ6ICcuUFJNWjMnLAogICAgZmlsZWJpbkJ1Y2tldDogJ3hsZzRrZ2dvemJkZ3NudzQnLAogICAgYWRtaW5CYXNlUGF0aDogJ3o6XFxOSU5URU5ET1xcM0RTXFxDSUFcXCcsCiAgICBzdG9yYWdlTGFiZWw6ICdTRCBTdG9yYWdlJywKICAgIHN0b3JhZ2VDb250cm9sczogWwogICAgICB7CiAgICAgICAgaWQ6ICdjb25zb2xlJywKICAgICAgICBsYWJlbDogJ0NvbnNvbGUnLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICczRFNSRUcnLCBsYWJlbDogJzNEU1JFRycgfSwKICAgICAgICAgIHsgdmFsdWU6ICczRFNYTCcsIGxhYmVsOiAnM0RTWEwnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMkRTJywgbGFiZWw6ICcyRFMnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnTkVXM0RTUkVHJywgbGFiZWw6ICdORVczRFNSRUcnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnTkVXMkRTWEwnLCBsYWJlbDogJ05FVzJEU1hMJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ05FVzNEU1hMJywgbGFiZWw6ICdORVczRFNYTCcgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJzNEU1JFRycsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdTRCcsCiAgICAgICAgbGFiZWw6ICdTRCAoR0IpJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnMzInLCBsYWJlbDogJzMyJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzY0JywgbGFiZWw6ICc2NCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcxMjgnLCBsYWJlbDogJzEyOCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcyNTYnLCBsYWJlbDogJzI1NicgfSwKICAgICAgICAgIHsgdmFsdWU6ICc1MTInLCBsYWJlbDogJzUxMicgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJzY0JywKICAgICAgICBmaWxlbmFtZVRva2VuOiAnU0QnLAogICAgICAgIHN0b3JhZ2VDYWxjOiB0cnVlCiAgICAgIH0KICAgIF0sCiAgICBjYWxjdWxhdGVTdG9yYWdlOiBmdW5jdGlvbih2YWx1ZXMpIHsKICAgICAgY29uc3Qgc2RWYWwgPSBOdW1iZXIodmFsdWVzLlNEIHx8IDY0KTsKICAgICAgY29uc3QgYnVmZmEgPSBNYXRoLmZsb29yKHNkVmFsIC0gKHNkVmFsICogMC4xNSkpOwogICAgICBjb25zdCB0b3RhbFJlc2VydmVkID0gc2RWYWwgLSBidWZmYTsKICAgICAgcmV0dXJuIChzZFZhbCAtIHRvdGFsUmVzZXJ2ZWQpOwogICAgfQogIH0sCgogIHhib3gzNjA6IHsKICAgIGlkOiAneGJveDM2MCcsCiAgICBsYWJlbDogJ1hib3ggMzYwJywKICAgIGNvbG9yOiAnIzEwN2MxMCcsCiAgICBmb2xkZXI6ICdkYXRhL3hib3gzNjAnLAogICAgZGJGaWxlOiAnZ2FtZXMuanNvbicsCiAgICBsaWJyZXRyb1N5c3RlbTogJ01pY3Jvc29mdCAtIFhib3ggMzYwJywKICAgIC8vICIwMDcgQmxvb2RzdG9uZSIgc3RheXMsICIwIGRheSBBdHRhY2sgb24gRWFydGggX1hCTEEiIOKGkiAiMCBkYXkgQXR0YWNrIG9uIEVhcnRoIgogICAgY2xlYW5HYW1lTmFtZTogZnVuY3Rpb24obmFtZSkgewogICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccytfKFhCTEF8R09EfFhCT1h8WEJMfERMQylccyokL2ksICcnKS5yZXBsYWNlKC9ccypcKC4qP1wpXHMqL2csICcnKS50cmltKCk7CiAgICB9LAogICAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWlgnLAogICAgYWRtaW5GaWxlRXh0OiAnLlBSTVpYJywKICAgIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywKICAgIGFkbWluQmFzZVBhdGg6ICdYOlxceGJveDM2MGdhbWVzXFxnYW1lc1xcJywKICAgIHN0b3JhZ2VMYWJlbDogJ0hERCBTdG9yYWdlJywKICAgIHN0b3JhZ2VDb250cm9sczogWwogICAgICB7CiAgICAgICAgaWQ6ICdjb25zb2xlJywKICAgICAgICBsYWJlbDogJ0NvbnNvbGUnLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICdmYXQnLCBsYWJlbDogJ2ZhdCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICdzbGltJywgbGFiZWw6ICdzbGltJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ3NsaW0tZScsIGxhYmVsOiAnc2xpbSBFJyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnZmF0JywKICAgICAgICBmaWxlbmFtZVRva2VuOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogJ2hkZCcsCiAgICAgICAgbGFiZWw6ICdIREQgKEdCKScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJzUwMCcsIGxhYmVsOiAnNTAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzEwMDAnLCBsYWJlbDogJzEwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMjAwMCcsIGxhYmVsOiAnMjAwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICczMDAwJywgbGFiZWw6ICczMDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzQwMDAnLCBsYWJlbDogJzQwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNTAwMCcsIGxhYmVsOiAnNTAwMCcgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJzUwMCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ2hkZCcsCiAgICAgICAgc3RvcmFnZUNhbGM6IHRydWUKICAgICAgfQogICAgXSwKICAgIGNhbGN1bGF0ZVN0b3JhZ2U6IGZ1bmN0aW9uKHZhbHVlcykgewogICAgICBjb25zdCBoZGRWYWwgPSBOdW1iZXIodmFsdWVzLmhkZCB8fCA1MDApOwogICAgICBjb25zdCBidWZmYSA9IE1hdGguZmxvb3IoaGRkVmFsIC0gKGhkZFZhbCAqIDAuMTgpKTsKICAgICAgY29uc3QgdG90YWxSZXNlcnZlZCA9IGhkZFZhbCAtIGJ1ZmZhOwogICAgICByZXR1cm4gKGhkZFZhbCAtIHRvdGFsUmVzZXJ2ZWQpOwogICAgfQogIH0KfTsKPC9zY3JpcHQ+CjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4vLyBQcmVtYXppbmdQSEdhbWVzIERhdGEgUGFyc2VyCi8vIEZvcm1hdC1hZ25vc3RpYyBwYXJzZXIgbGF5ZXI6IHN1cHBvcnRzIFhNTCBub3csIEpTT04gaW4gdGhlIGZ1dHVyZS4KLy8gQm90aCBmb3JtYXRzIHJldHVybiB0aGUgc2FtZSBub3JtYWxpemVkIHN0cnVjdHVyZS4KCmNvbnN0IERhdGFQYXJzZXIgPSB7CiAgLyoqCiAgICogRmV0Y2ggYW5kIHBhcnNlIGEgZ2FtZSBkYXRhYmFzZSBmaWxlLgogICAqIEF1dG8tZGV0ZWN0cyBmb3JtYXQgZnJvbSBVUkwgZXh0ZW5zaW9uLgogICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBGdWxsIFVSTCB0byB0aGUgZGF0YSBmaWxlCiAgICogQHJldHVybnMge1Byb21pc2U8e3BsYXRmb3JtOiBzdHJpbmcsIHN0cnVjdHVyZVR5cGU6IHN0cmluZywgaXRlbXM6IEFycmF5fT59CiAgICovCiAgYXN5bmMgbG9hZCh1cmwpIHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTsKICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoICR7dXJsfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApOwogICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsKCiAgICBpZiAodXJsLmVuZHNXaXRoKCcuanNvbicpKSByZXR1cm4gdGhpcy5wYXJzZUpTT04odGV4dCk7CiAgICBpZiAodXJsLmVuZHNXaXRoKCcueG1sJykpICByZXR1cm4gdGhpcy5wYXJzZVhNTCh0ZXh0KTsKICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZGF0YSBmb3JtYXQ6ICcgKyB1cmwpOwogIH0sCgogIC8qKgogICAqIFBhcnNlIFhNTCBnYW1lIGRhdGFiYXNlIChjdXJyZW50IGZvcm1hdCkuCiAgICogSGFuZGxlcyBib3RoICdmb2xkZXJzJyBhbmQgJ2ZpbGVzJyBzdHJ1Y3R1cmVUeXBlLgogICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gUmF3IFhNTCBzdHJpbmcKICAgKiBAcmV0dXJucyB7e3BsYXRmb3JtOiBzdHJpbmcsIHN0cnVjdHVyZVR5cGU6IHN0cmluZywgaXRlbXM6IEFycmF5fX0KICAgKi8KICBwYXJzZVhNTCh0ZXh0KSB7CiAgICBjb25zdCB4bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHRleHQsICdhcHBsaWNhdGlvbi94bWwnKTsKICAgIGNvbnN0IHJvb3QgPSB4bWwuZG9jdW1lbnRFbGVtZW50OwogICAgY29uc3QgcGxhdGZvcm0gPSByb290LmdldEF0dHJpYnV0ZSgncGxhdGZvcm0nKSB8fCAnVW5rbm93bic7CiAgICBjb25zdCBzdHJ1Y3R1cmVUeXBlID0gcm9vdC5nZXRBdHRyaWJ1dGUoJ3N0cnVjdHVyZVR5cGUnKSB8fCAnZm9sZGVycyc7CgogICAgbGV0IGl0ZW1zID0gW107CgogICAgaWYgKHN0cnVjdHVyZVR5cGUgPT09ICdmb2xkZXJzJykgewogICAgICBpdGVtcyA9IEFycmF5LmZyb20oeG1sLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZvbGRlcicpKS5tYXAoZnVuY3Rpb24oZikgewogICAgICAgIHZhciBpdGVtID0gewogICAgICAgICAgbmFtZTogZi5nZXRBdHRyaWJ1dGUoJ25hbWUnKSwKICAgICAgICAgIHNjb3JlOiBmLmdldEF0dHJpYnV0ZSgnc2NvcmUnKSB8fCAnMCcsCiAgICAgICAgICBzaXplOiBmLmdldEF0dHJpYnV0ZSgnc2l6ZScpIHx8ICcwIEdpQicsCiAgICAgICAgICBkYXRlOiBmLmdldEF0dHJpYnV0ZSgnZGF0ZUNyZWF0ZWQnKSB8fCAnJywKICAgICAgICAgIGZpbGVDb3VudDogZi5nZXRBdHRyaWJ1dGUoJ2ZpbGVDb3VudCcpIHx8ICcwJywKICAgICAgICAgIGZpbGVzOiBBcnJheS5mcm9tKGYucXVlcnlTZWxlY3RvckFsbCgnZmlsZScpKS5tYXAoZnVuY3Rpb24oeCkgeyByZXR1cm4geC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTsgfSkKICAgICAgICB9OwogICAgICAgIGlmIChmLmdldEF0dHJpYnV0ZSgndGl0bGVJZCcpKSBpdGVtLnRpdGxlSWQgPSBmLmdldEF0dHJpYnV0ZSgndGl0bGVJZCcpOwogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGl0ZW1zID0gQXJyYXkuZnJvbSh4bWwucXVlcnlTZWxlY3RvckFsbCgnZmlsZScpKS5tYXAoZiA9PiAoewogICAgICAgIG5hbWU6IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksCiAgICAgICAgZmlsZW5hbWU6IGYuZ2V0QXR0cmlidXRlKCdmaWxlbmFtZScpIHx8IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksCiAgICAgICAgc2l6ZTogZi5nZXRBdHRyaWJ1dGUoJ3NpemUnKSB8fCAnMCBHaUInLAogICAgICAgIGRhdGU6IGYuZ2V0QXR0cmlidXRlKCdkYXRlQ3JlYXRlZCcpIHx8ICcnCiAgICAgIH0pKTsKICAgIH0KCiAgICByZXR1cm4geyBwbGF0Zm9ybSwgc3RydWN0dXJlVHlwZSwgaXRlbXMsIHhtbERvYzogeG1sIH07CiAgfSwKCiAgLyoqCiAgICogUGFyc2UgdW5pZmllZCBKU09OIGdhbWUgZGF0YWJhc2UuCiAgICogRWFjaCBnYW1lIGhhcyBsaXN0IGRhdGEgKyBtZXRhZGF0YSBtZXJnZWQgKGZyb20gWE1MICsgaWNvbl9jYWNoZSkuCiAgICogRXh0cmFjdHMgYW4gaWNvbkNhY2hlIGxvb2t1cCBmcm9tIHRoZSBlbWJlZGRlZCBtZXRhZGF0YS4KICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFJhdyBKU09OIHN0cmluZwogICAqIEByZXR1cm5zIHt7cGxhdGZvcm06IHN0cmluZywgc3RydWN0dXJlVHlwZTogc3RyaW5nLCBpdGVtczogQXJyYXksIGljb25DYWNoZTogT2JqZWN0fX0KICAgKi8KICBwYXJzZUpTT04odGV4dCkgewogICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UodGV4dCk7CiAgICBjb25zdCBnYW1lcyA9IGRhdGEuZ2FtZXMgfHwgZGF0YS5pdGVtcyB8fCBbXTsKICAgIGNvbnN0IGljb25DYWNoZSA9IHt9OwoKICAgIGdhbWVzLmZvckVhY2goZnVuY3Rpb24oZykgewogICAgICBpZiAoZy5pY29uVXJsIHx8IGcuY2F0ZWdvcnkgfHwgZy5kZXNjcmlwdGlvbikgewogICAgICAgIGljb25DYWNoZVtnLm5hbWVdID0gewogICAgICAgICAgaWNvblVybDogZy5pY29uVXJsIHx8ICcnLAogICAgICAgICAgYmFubmVyVXJsOiBnLmJhbm5lclVybCB8fCAnJywKICAgICAgICAgIG1hdGNoZWROYW1lOiBnLm1hdGNoZWROYW1lIHx8IGcubmFtZSwKICAgICAgICAgIHNjb3JlOiBnLnNjb3JlIHx8IDAsCiAgICAgICAgICBjYXRlZ29yeTogZy5jYXRlZ29yeSB8fCBbXSwKICAgICAgICAgIGRlc2NyaXB0aW9uOiBnLmRlc2NyaXB0aW9uIHx8ICcnLAogICAgICAgICAgaW50cm86IGcuaW50cm8gfHwgbnVsbCwKICAgICAgICAgIHB1Ymxpc2hlcjogZy5wdWJsaXNoZXIgfHwgbnVsbCwKICAgICAgICAgIGRldmVsb3BlcjogZy5kZXZlbG9wZXIgfHwgbnVsbCwKICAgICAgICAgIHJlbGVhc2VEYXRlOiBnLnJlbGVhc2VEYXRlIHx8IG51bGwsCiAgICAgICAgICBudW1iZXJPZlBsYXllcnM6IGcubnVtYmVyT2ZQbGF5ZXJzIHx8IG51bGwsCiAgICAgICAgICBzY3JlZW5zaG90czogZy5zY3JlZW5zaG90cyB8fCBbXSwKICAgICAgICAgIHRpdGxlSWQ6IGcudGl0bGVJZCB8fCAnJwogICAgICAgIH07CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB7CiAgICAgIHBsYXRmb3JtOiBkYXRhLnBsYXRmb3JtIHx8ICdVbmtub3duJywKICAgICAgc3RydWN0dXJlVHlwZTogZGF0YS5zdHJ1Y3R1cmVUeXBlIHx8ICdmaWxlcycsCiAgICAgIGl0ZW1zOiBnYW1lcywKICAgICAgaWNvbkNhY2hlOiBpY29uQ2FjaGUsCiAgICAgIHhtbERvYzogbnVsbAogICAgfTsKICB9Cn07Cjwvc2NyaXB0Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly8gUHJlbWF6aW5nUEhHYW1lcyAtIE1haW4gQXBwbGljYXRpb24KLy8gQ2VudHJhbGl6ZWQgZ2FtZSBwaWNrZXIgd2l0aCBSRUdVTEFSIGFuZCBNSVggbW9kZXMKCi8vID09PT09PT09PT09PT09PT09PT09IEdMT0JBTFMgPT09PT09PT09PT09PT09PT09PT0KY29uc3QgJCA9IGlkID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKY29uc3QgZXNjID0gcyA9PiAoc3x8JycpLnJlcGxhY2UoLyYvZywnJmFtcDsnKS5yZXBsYWNlKC88L2csJyZsdDsnKS5yZXBsYWNlKC8+L2csJyZndDsnKS5yZXBsYWNlKC8nL2csJyYjMzk7JykucmVwbGFjZSgvIi9nLCcmcXVvdDsnKTsKY29uc3QgaXNNb2JpbGUgPSAvTW9iaXxBbmRyb2lkfGlQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwpjb25zdCBpc0xvY2FsID0gZmFsc2U7CmNvbnN0IExPTkdfUFJFU1NfRFVSQVRJT04gPSA1MDA7CnZhciBfbGlzdERpcnR5ID0gZmFsc2U7IC8vIHRydWUgb25jZSB1c2VyIG1vZGlmaWVzIHNlbGVjdGlvbiDigJQgcHJldmVudHMgYmVmb3JldW5sb2FkIGZyb20gd2lwaW5nIHNhdmVkIGxpc3Qgb24gZnJlc2ggcGFnZXMKCmZ1bmN0aW9uIGRldGVjdExlZ2FjeU1vZGUoKSB7CiAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygodHlwZW9mIF9vdXRlclNlYXJjaCE9PSJ1bmRlZmluZWQiP19vdXRlclNlYXJjaDp3aW5kb3cubG9jYXRpb24uc2VhcmNoKSk7CiAgaWYgKHBhcmFtcy5nZXQoJ21vZGVybicpID09PSAnMScpIHJldHVybiBmYWxzZTsKICBpZiAocGFyYW1zLmdldCgnbGl0ZScpID09PSAnMScgfHwgcGFyYW1zLmdldCgnbGVnYWN5JykgPT09ICcxJykgcmV0dXJuIHRydWU7CiAgY29uc3QgdGVzdHMgPSB7CiAgICBvcHRpb25hbENoYWluaW5nOiAoKCkgPT4geyB0cnkgeyBldmFsKCdjb25zdCBvPXt9OyBvPy54Jyk7IHJldHVybiB0cnVlOyB9IGNhdGNoKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0pKCksCiAgICBmbGV4R2FwOiBDU1Muc3VwcG9ydHMgJiYgQ1NTLnN1cHBvcnRzKCdnYXAnLCAnMXB4JyksCiAgICBpbnNldDogQ1NTLnN1cHBvcnRzICYmIENTUy5zdXBwb3J0cygnaW5zZXQnLCAnMCcpCiAgfTsKICByZXR1cm4gIXRlc3RzLm9wdGlvbmFsQ2hhaW5pbmcgfHwgIXRlc3RzLmZsZXhHYXAgfHwgIXRlc3RzLmluc2V0Owp9CmxldCBpc0xlZ2FjeU1vZGUgPSBkZXRlY3RMZWdhY3lNb2RlKCk7CmlmIChpc0xlZ2FjeU1vZGUpIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsZWdhY3ktbW9kZScpOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gU1RBVEUgPT09PT09PT09PT09PT09PT09PT0KY29uc3Qgc3RhdGUgPSB7CiAgbW9kZTogJ3JlZ3VsYXInLCAgICAgICAgICAvLyAncmVndWxhcicgfCAnbWl4JwogIGFjdGl2ZUNvbnNvbGU6IG51bGwsICAgICAgIC8vIGN1cnJlbnQgY29uc29sZSBJRCAocmVndWxhciBtb2RlKSBvciBhY3RpdmUgdGFiIChtaXggbW9kZSkKICBhY3RpdmVDb25zb2xlczogW10sICAgICAgICAvLyBtaXggbW9kZTogYXJyYXkgb2YgYWN0aXZlIGNvbnNvbGUgSURzCiAgY29uc29sZVN0YXRlczoge30sICAgICAgICAgLy8gcGVyLWNvbnNvbGUgc3RhdGU6IHsgaXRlbXMsIHNlbGVjdGVkLCBpY29uQ2FjaGUsIGdlbnJlcywgLi4uIH0KICBsYXN0VXBsb2FkOiAwLAogIG92ZXJsYXlTb3J0QnlTaXplOiBmYWxzZSAgLy8gZGlzcGxheS1vbmx5IHNvcnQgdG9nZ2xlIGluIG92ZXJsYXkKfTsKCmZ1bmN0aW9uIGdldENvbnNvbGVTdGF0ZShjb25zb2xlSWQpIHsKICBpZiAoIXN0YXRlLmNvbnNvbGVTdGF0ZXNbY29uc29sZUlkXSkgewogICAgc3RhdGUuY29uc29sZVN0YXRlc1tjb25zb2xlSWRdID0gewogICAgICBpdGVtczogW10sCiAgICAgIHNlbGVjdGVkOiBbXSwKICAgICAgaWNvbkNhY2hlOiB7fSwKICAgICAgZ2VucmVzOiBuZXcgU2V0KCksCiAgICAgIGN1cnJlbnRHZW5yZTogJ2FsbCcsCiAgICAgIGN1cnJlbnRTb3J0OiAnbmFtZScsCiAgICAgIGxvYWRlZDogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBwbGF0Zm9ybTogbnVsbCwKICAgICAgc3RydWN0dXJlVHlwZTogbnVsbCwKICAgICAgeG1sRG9jOiBudWxsLAogICAgICBzZWFyY2hRdWVyeTogJycKICAgIH07CiAgfQogIHJldHVybiBzdGF0ZS5jb25zb2xlU3RhdGVzW2NvbnNvbGVJZF07Cn0KCmZ1bmN0aW9uIGFjdGl2ZVN0YXRlKCkgewogIHJldHVybiBzdGF0ZS5hY3RpdmVDb25zb2xlID8gZ2V0Q29uc29sZVN0YXRlKHN0YXRlLmFjdGl2ZUNvbnNvbGUpIDogbnVsbDsKfQoKZnVuY3Rpb24gYWN0aXZlQ29uZmlnKCkgewogIHJldHVybiBzdGF0ZS5hY3RpdmVDb25zb2xlID8gQ09OU09MRVNbc3RhdGUuYWN0aXZlQ29uc29sZV0gOiBudWxsOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBTSVpFIFVUSUxJVElFUyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiBwYXJzZVNpemVUZXh0KHMpIHsKICBpZiAoIXMpIHJldHVybiAwOwogIGNvbnN0IG0gPSAoJycrcykubWF0Y2goLyhbXGRcLl0rKVxzKihHaUJ8TWlCfEtpQnxHQnxNQnxLQnxCKS9pKTsKICBpZiAoIW0pIHJldHVybiAwOwogIGNvbnN0IHYgPSBwYXJzZUZsb2F0KG1bMV0pLCB1ID0gbVsyXS50b1VwcGVyQ2FzZSgpOwogIGlmICh1PT09J0InKSByZXR1cm4gdjsKICBpZiAodT09PSdLQid8fHU9PT0nS0lCJykgcmV0dXJuIHYqMTAyNDsKICBpZiAodT09PSdNQid8fHU9PT0nTUlCJykgcmV0dXJuIHYqMTAyNCoxMDI0OwogIHJldHVybiB2KjEwMjQqMTAyNCoxMDI0Owp9CmZ1bmN0aW9uIGJ5dGVzVG9HQihiKSB7IHJldHVybiBiIC8gKDEwMjQqMTAyNCoxMDI0KTsgfQpmdW5jdGlvbiBmb3JtYXRTaXplVG9HQihzaXplU3RyKSB7CiAgY29uc3QgYnl0ZXMgPSBwYXJzZVNpemVUZXh0KHNpemVTdHIpOwogIGNvbnN0IGdiID0gYnl0ZXNUb0dCKGJ5dGVzKTsKICBpZiAoZ2IgPCAwLjEpIHJldHVybiAoZ2IgKiAxMDI0KS50b0ZpeGVkKDApICsgJyBNQic7CiAgcmV0dXJuIGdiLnRvRml4ZWQoMSkgKyAnIEdCJzsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gVUkgSEVMUEVSUyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiB0b2FzdChtc2cpIHsgJCgnc3RhdHVzJykudGV4dENvbnRlbnQgPSBtc2c7IH0KZnVuY3Rpb24gc2hvd1RvYXN0KG1lc3NhZ2UpIHsKICBjb25zdCB0ID0gJCgndG9hc3QnKTsKICB0LnRleHRDb250ZW50ID0gbWVzc2FnZTsKICB0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICBzZXRUaW1lb3V0KCgpID0+IHQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpLCAyMDAwKTsKfQpmdW5jdGlvbiBzaG93QmFubmVyKG1lc3NhZ2UsIGR1cmF0aW9uKSB7CiAgZHVyYXRpb24gPSBkdXJhdGlvbiB8fCA0MDAwOwogIGNvbnN0IGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBiLmlubmVyVGV4dCA9IG1lc3NhZ2U7CiAgYi5zdHlsZS5jc3NUZXh0ID0gInBvc2l0aW9uOmZpeGVkO3RvcDozMCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuOCk7Y29sb3I6I2ZmZjtwYWRkaW5nOjE4cHg7Ym9yZGVyLXJhZGl1czoxNnB4O2ZvbnQtc2l6ZToyMnB4O3otaW5kZXg6OTk5OTtib3gtc2hhZG93OjAgMnB4IDZweCByZ2JhKDAsMCwwLDAuMyk7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNXMgZWFzZTt3aGl0ZS1zcGFjZTpwcmUtbGluZTttYXgtd2lkdGg6ODAlIjsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGIpOwogIHNldFRpbWVvdXQoKCkgPT4gYi5zdHlsZS5vcGFjaXR5ID0gJzAnLCBkdXJhdGlvbik7CiAgc2V0VGltZW91dCgoKSA9PiBiLnJlbW92ZSgpLCBkdXJhdGlvbiArIDUwMCk7Cn0KZnVuY3Rpb24gZGVib3VuY2UoZm4sIG1zKSB7IG1zID0gbXMgfHwgMjAwOyBsZXQgaDsgcmV0dXJuIGZ1bmN0aW9uKCkgeyBjb25zdCBhID0gYXJndW1lbnRzOyBjbGVhclRpbWVvdXQoaCk7IGggPSBzZXRUaW1lb3V0KCgpID0+IGZuLmFwcGx5KG51bGwsIGEpLCBtcyk7IH07IH0KCi8vIENvcHkgcGxhaW4gdGV4dCB0byBjbGlwYm9hcmQgd2l0aCBmYWxsYmFjawpmdW5jdGlvbiBjb3B5UGxhaW5UZXh0KHRleHQsIGNhbGxiYWNrKSB7CiAgLy8gVHJ5IGNsaXBib2FyZCBBUEkgZmlyc3QKICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCkgewogICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgY2FsbGJhY2sodHJ1ZSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbigpIHsKICAgICAgLy8gRmFsbGJhY2sgdG8gZXhlY0NvbW1hbmQKICAgICAgY2FsbGJhY2soZXhlY0NvbW1hbmRDb3B5KHRleHQpKTsKICAgIH0pOwogICAgcmV0dXJuOwogIH0KICAvLyBObyBjbGlwYm9hcmQgQVBJIOKAlCB1c2UgZXhlY0NvbW1hbmQKICBjYWxsYmFjayhleGVjQ29tbWFuZENvcHkodGV4dCkpOwp9CgpmdW5jdGlvbiBleGVjQ29tbWFuZENvcHkodGV4dCkgewogIHZhciB0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7CiAgdGEudmFsdWUgPSB0ZXh0OwogIHRhLnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAnJyk7CiAgdGEuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MXB4O2hlaWdodDoxcHg7b3BhY2l0eTowLjAxO3otaW5kZXg6OTk5OTknOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGEpOwogIHRhLmZvY3VzKCk7CiAgdGEuc2VsZWN0KCk7CiAgdmFyIG9rID0gZmFsc2U7CiAgdHJ5IHsgb2sgPSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOyB9IGNhdGNoKGUpIHsgb2sgPSBmYWxzZTsgfQogIHRhLnJlbW92ZSgpOwogIHJldHVybiBvazsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gTE9DQUxTVE9SQUdFID09PT09PT09PT09PT09PT09PT09CnZhciBMU19OQU1FX0tFWSA9ICdwcm16X2N1c3RvbWVyTmFtZSc7CnZhciBMU19MSVNUX0tFWSA9ICdwcm16X3NlbGVjdGVkTGlzdCc7CgpmdW5jdGlvbiBzYXZlQ3VzdG9tZXJOYW1lKG5hbWUpIHsKICBpZiAoaXNMb2NhbCkgcmV0dXJuOyAvLyBhZG1pbiB0eXBlcyBkaWZmZXJlbnQgbmFtZXMgZWFjaCBzZXNzaW9uCiAgaWYgKG5hbWUpIHsKICAgIHRyeSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKExTX05BTUVfS0VZLCBuYW1lKTsgfSBjYXRjaChlKSB7fQogIH0KfQoKZnVuY3Rpb24gbG9hZEN1c3RvbWVyTmFtZSgpIHsKICB0cnkgeyByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oTFNfTkFNRV9LRVkpIHx8ICcnOyB9IGNhdGNoKGUpIHsgcmV0dXJuICcnOyB9Cn0KCmZ1bmN0aW9uIHJlc3RvcmVDdXN0b21lck5hbWUoKSB7CiAgaWYgKGlzTG9jYWwpIHJldHVybjsgLy8gYWRtaW4gc3RhcnRzIGZyZXNoIGVhY2ggc2Vzc2lvbgogIHZhciBzYXZlZCA9IGxvYWRDdXN0b21lck5hbWUoKTsKICBpZiAoIXNhdmVkKSByZXR1cm47CiAgJCgnY3VzdG9tZXInKS52YWx1ZSA9IHNhdmVkOwogIGRvY3VtZW50LnRpdGxlID0gJ1ByZW1hemluZ1BIIEdhbWVzIC0gJyArIHNhdmVkOwogIC8vIFNob3cgIk5vdCB5b3U/IiBsaW5rCiAgdmFyIGxpbmsgPSAkKCdub3RZb3VMaW5rJyk7CiAgaWYgKGxpbmspIGxpbmsuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnOwp9CgpmdW5jdGlvbiBjbGVhckN1c3RvbWVyTmFtZSgpIHsKICB0cnkgeyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMU19OQU1FX0tFWSk7IH0gY2F0Y2goZSkge30KICAkKCdjdXN0b21lcicpLnZhbHVlID0gJyc7CiAgdmFyIGxpbmsgPSAkKCdub3RZb3VMaW5rJyk7CiAgaWYgKGxpbmspIGxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKTsKICBkb2N1bWVudC50aXRsZSA9ICdQcmVtYXppbmdQSCBHYW1lcyc7CgogIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBzYXZlZCBzZWxlY3Rpb24gbGlzdAogIHZhciBoYXNTYXZlZExpc3QgPSBmYWxzZTsKICB0cnkgeyBoYXNTYXZlZExpc3QgPSAhIWxvY2FsU3RvcmFnZS5nZXRJdGVtKExTX0xJU1RfS0VZKTsgfSBjYXRjaChlKSB7fQoKICB2YXIgaGFzQ3VycmVudFNlbGVjdGlvbiA9IGZhbHNlOwogIE9iamVjdC5rZXlzKHN0YXRlLmNvbnNvbGVTdGF0ZXMpLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgIGlmIChzdGF0ZS5jb25zb2xlU3RhdGVzW2lkXS5zZWxlY3RlZCAmJiBzdGF0ZS5jb25zb2xlU3RhdGVzW2lkXS5zZWxlY3RlZC5sZW5ndGggPiAwKSBoYXNDdXJyZW50U2VsZWN0aW9uID0gdHJ1ZTsKICB9KTsKCiAgaWYgKGhhc1NhdmVkTGlzdCB8fCBoYXNDdXJyZW50U2VsZWN0aW9uKSB7CiAgICAvLyBTaG93IHJlc3RvcmUtb3ItY2xlYXIgcHJvbXB0CiAgICBzaG93TGlzdFByb21wdCgpOwogIH0gZWxzZSB7CiAgICAkKCdjdXN0b21lcicpLmZvY3VzKCk7CiAgfQp9CgovLyAtLS0tIE1vZGFsIGhlbHBlciAobGVnYWN5LXNhZmUpIC0tLS0KZnVuY3Rpb24gY3JlYXRlTW9kYWwoaWQsIG1lc3NhZ2VIdG1sLCBidXR0b25zKSB7CiAgLy8gUmVtb3ZlIGV4aXN0aW5nIG1vZGFsIHdpdGggc2FtZSBpZAogIHZhciBleGlzdGluZyA9ICQoaWQpOwogIGlmIChleGlzdGluZykgZXhpc3RpbmcucmVtb3ZlKCk7CgogIC8vIExlZ2FjeS1zYWZlOiB1c2UgY29uZmlybSgpIGZhbGxiYWNrIGZvciBicm93c2VycyB0aGF0IGNhbid0IGhhbmRsZSBtb2Rlcm4gQ1NTCiAgaWYgKGlzTGVnYWN5TW9kZSkgewogICAgdmFyIHBsYWluVGV4dCA9IG1lc3NhZ2VIdG1sLnJlcGxhY2UoLzxiclxzKlwvPz4vZ2ksICdcbicpLnJlcGxhY2UoLzxbXj5dKz4vZywgJycpOwogICAgdmFyIGZpcnN0QnRuID0gYnV0dG9uc1swXTsKICAgIHZhciBzZWNvbmRCdG4gPSBidXR0b25zWzFdOwogICAgaWYgKGNvbmZpcm0ocGxhaW5UZXh0ICsgJ1xuXG5PSyA9ICcgKyBmaXJzdEJ0bi5sYWJlbCArICdcbkNhbmNlbCA9ICcgKyBzZWNvbmRCdG4ubGFiZWwpKSB7CiAgICAgIGZpcnN0QnRuLmFjdGlvbigpOwogICAgfSBlbHNlIHsKICAgICAgc2Vjb25kQnRuLmFjdGlvbigpOwogICAgfQogICAgcmV0dXJuOwogIH0KCiAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBvdmVybGF5LmlkID0gaWQ7CiAgb3ZlcmxheS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmZpeGVkO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpO3otaW5kZXg6OTk5OTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXInOwoKICB2YXIgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgYm94LnN0eWxlLmNzc1RleHQgPSAnYmFja2dyb3VuZDojMWUxZTJlO2JvcmRlci1yYWRpdXM6MTZweDtwYWRkaW5nOjI0cHggMjhweDttYXgtd2lkdGg6MzgwcHg7d2lkdGg6OTAlO3RleHQtYWxpZ246Y2VudGVyO2JveC1zaGFkb3c6MCA4cHggMzJweCByZ2JhKDAsMCwwLDAuNSknOwoKICB2YXIgbXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgbXNnLnN0eWxlLmNzc1RleHQgPSAnZm9udC1zaXplOjE1cHg7Y29sb3I6I2NkZDZmNDttYXJnaW4tYm90dG9tOjE2cHgnOwogIG1zZy5pbm5lckhUTUwgPSBtZXNzYWdlSHRtbDsKICBib3guYXBwZW5kQ2hpbGQobXNnKTsKCiAgdmFyIGJ0blJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGJ0blJvdy5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyJzsKCiAgYnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uKGJ0biwgaSkgewogICAgdmFyIGIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgIGIudGV4dENvbnRlbnQgPSBidG4ubGFiZWw7CiAgICB2YXIgYmcgPSBidG4ucHJpbWFyeSA/ICcjODliNGZhJyA6ICcjNDU0NzVhJzsKICAgIHZhciBmZyA9IGJ0bi5wcmltYXJ5ID8gJyMxZTFlMmUnIDogJyNjZGQ2ZjQnOwogICAgYi5zdHlsZS5jc3NUZXh0ID0gJ3BhZGRpbmc6MTBweCAyMHB4O2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOicgKyBiZyArICc7Y29sb3I6JyArIGZnICsgJztmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjE0cHg7bWFyZ2luOjAgNXB4JzsKICAgIGIub25jbGljayA9IGZ1bmN0aW9uKCkgeyBvdmVybGF5LnJlbW92ZSgpOyBidG4uYWN0aW9uKCk7IH07CiAgICBidG5Sb3cuYXBwZW5kQ2hpbGQoYik7CiAgfSk7CgogIGJveC5hcHBlbmRDaGlsZChidG5Sb3cpOwogIG92ZXJsYXkuYXBwZW5kQ2hpbGQoYm94KTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOwoKICAvLyBDbGljayBvdXRzaWRlIHRvIGRpc21pc3MgKHJ1bnMgZmlyc3QgYnV0dG9uIGFjdGlvbikKICBvdmVybGF5Lm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CiAgICBpZiAoZS50YXJnZXQgPT09IG92ZXJsYXkpIHsgb3ZlcmxheS5yZW1vdmUoKTsgYnV0dG9uc1swXS5hY3Rpb24oKTsgfQogIH07Cn0KCmZ1bmN0aW9uIHNob3dMaXN0UHJvbXB0KCkgewogIGNyZWF0ZU1vZGFsKCdsaXN0UHJvbXB0JywKICAgICdBIHNhdmVkIHNlbGVjdGlvbiB3YXMgZm91bmQuPGJyPkRvIHlvdSB3YW50IHRvIGtlZXAgaXQgb3Igc3RhcnQgZnJlc2g/JywKICAgIFsKICAgICAgeyBsYWJlbDogJ0tlZXAgU2VsZWN0aW9uJywgcHJpbWFyeTogdHJ1ZSwgYWN0aW9uOiBmdW5jdGlvbigpIHsgJCgnY3VzdG9tZXInKS5mb2N1cygpOyB9IH0sCiAgICAgIHsgbGFiZWw6ICdTdGFydCBGcmVzaCcsIHByaW1hcnk6IGZhbHNlLCBhY3Rpb246IGZ1bmN0aW9uKCkgewogICAgICAgIGNsZWFyU2VsZWN0ZWRMaXN0KCk7CiAgICAgICAgT2JqZWN0LmtleXMoc3RhdGUuY29uc29sZVN0YXRlcykuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgICAgICAgc3RhdGUuY29uc29sZVN0YXRlc1tpZF0uc2VsZWN0ZWQgPSBbXTsKICAgICAgICB9KTsKICAgICAgICBfcGVuZGluZ1Jlc3RvcmUgPSBudWxsOwogICAgICAgIHJlbmRlck92ZXJsYXkoKTsKICAgICAgICB1cGRhdGVUb3RhbHMoKTsKICAgICAgICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogICAgICAgIGlmIChjcykgcmVuZGVyTGlzdChjcy5pdGVtcyk7CiAgICAgICAgJCgnY3VzdG9tZXInKS5mb2N1cygpOwogICAgICAgIHNob3dUb2FzdCgnU2VsZWN0aW9uIGNsZWFyZWQnKTsKICAgICAgfX0KICAgIF0KICApOwp9CgpmdW5jdGlvbiBzaG93TGlzdFJlc3RvcmVQcm9tcHQoc2F2ZWRMaXN0KSB7CiAgdmFyIHRvdGFsUGlja3MgPSAwOwogIE9iamVjdC5rZXlzKHNhdmVkTGlzdCkuZm9yRWFjaChmdW5jdGlvbihpZCkgeyB0b3RhbFBpY2tzICs9IHNhdmVkTGlzdFtpZF0ubGVuZ3RoOyB9KTsKICB2YXIgY29uc29sZU5hbWVzID0gT2JqZWN0LmtleXMoc2F2ZWRMaXN0KS5tYXAoZnVuY3Rpb24oaWQpIHsKICAgIHZhciBjZmcgPSBDT05TT0xFU1tpZF07CiAgICByZXR1cm4gY2ZnID8gY2ZnLmxhYmVsICsgJyAoJyArIHNhdmVkTGlzdFtpZF0ubGVuZ3RoICsgJyknIDogaWQ7CiAgfSkuam9pbignLCAnKTsKCiAgY3JlYXRlTW9kYWwoJ2xpc3RSZXN0b3JlUHJvbXB0JywKICAgICc8ZGl2IHN0eWxlPSJmb250LXNpemU6MTZweDtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbTo2cHgiPlByZXZpb3VzIHNlbGVjdGlvbiBmb3VuZDwvZGl2PicgKwogICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxM3B4O2NvbG9yOiNhNmFkYzgiPicgKyB0b3RhbFBpY2tzICsgJyBnYW1lczogJyArIGVzYyhjb25zb2xlTmFtZXMpICsgJzwvZGl2PicsCiAgICBbCiAgICAgIHsgbGFiZWw6ICdSZXN0b3JlIFNlbGVjdGlvbicsIHByaW1hcnk6IHRydWUsIGFjdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgcmVzdG9yZVNhdmVkTGlzdChzYXZlZExpc3QpOwogICAgICAgICQoJ2N1c3RvbWVyJykuZm9jdXMoKTsKICAgICAgfX0sCiAgICAgIHsgbGFiZWw6ICdTdGFydCBGcmVzaCcsIHByaW1hcnk6IGZhbHNlLCBhY3Rpb246IGZ1bmN0aW9uKCkgewogICAgICAgIGNsZWFyU2VsZWN0ZWRMaXN0KCk7CiAgICAgICAgJCgnY3VzdG9tZXInKS5mb2N1cygpOwogICAgICAgIHNob3dUb2FzdCgnU3RhcnRpbmcgZnJlc2gnKTsKICAgICAgfX0KICAgIF0KICApOwp9CgovLyAtLS0tIFNlbGVjdGVkIGxpc3QgcGVyc2lzdGVuY2UgKG5vbi1sb2NhbCBvbmx5KSAtLS0tCmZ1bmN0aW9uIHNhdmVTZWxlY3RlZExpc3QoKSB7CiAgaWYgKGlzTG9jYWwpIHJldHVybjsgLy8gYWRtaW4gbWFrZXMgbGlzdHMgZm9yIG90aGVycywgZG9uJ3QgcGVyc2lzdAogIGlmICghX2xpc3REaXJ0eSkgcmV0dXJuOyAvLyBkb24ndCBvdmVyd3JpdGUgc2F2ZWQgbGlzdCBpZiB1c2VyIGhhc24ndCB0b3VjaGVkIGFueXRoaW5nCiAgdHJ5IHsKICAgIHZhciBkYXRhID0ge307CiAgICBPYmplY3Qua2V5cyhzdGF0ZS5jb25zb2xlU3RhdGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgIHZhciBjcyA9IHN0YXRlLmNvbnNvbGVTdGF0ZXNbaWRdOwogICAgICBpZiAoY3Muc2VsZWN0ZWQgJiYgY3Muc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgICAgIGRhdGFbaWRdID0gY3Muc2VsZWN0ZWQubWFwKGZ1bmN0aW9uKHMpIHsKICAgICAgICAgIHJldHVybiB7IG5hbWU6IHMubmFtZSwgZmlsZW5hbWU6IHMuZmlsZW5hbWUgfHwgcy5uYW1lLCBzaXplOiBzLnNpemUgfTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgICBpZiAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID4gMCkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMU19MSVNUX0tFWSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgfSBlbHNlIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTFNfTElTVF9LRVkpOwogICAgfQogIH0gY2F0Y2goZSkge30KfQoKZnVuY3Rpb24gbG9hZFNlbGVjdGVkTGlzdCgpIHsKICBpZiAoaXNMb2NhbCkgcmV0dXJuIG51bGw7CiAgdHJ5IHsKICAgIHZhciByYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMU19MSVNUX0tFWSk7CiAgICByZXR1cm4gcmF3ID8gSlNPTi5wYXJzZShyYXcpIDogbnVsbDsKICB9IGNhdGNoKGUpIHsgcmV0dXJuIG51bGw7IH0KfQoKZnVuY3Rpb24gY2xlYXJTZWxlY3RlZExpc3QoKSB7CiAgX2xpc3REaXJ0eSA9IHRydWU7CiAgdHJ5IHsgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTFNfTElTVF9LRVkpOyB9IGNhdGNoKGUpIHt9Cn0KCi8vIFJlcXVpcmUgY3VzdG9tZXIgbmFtZSAtIHB1bHNlIGFuZCBmb2N1cyBpZiBlbXB0eSwgbmFnIG1vZGFsIGFmdGVyIDIgYXR0ZW1wdHMKdmFyIF9uYW1lQXR0ZW1wdHMgPSAwOwpmdW5jdGlvbiByZXF1aXJlQ3VzdG9tZXJOYW1lKCkgewogIHZhciBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJycpLnRyaW0oKTsKICBpZiAoY3VzdCkgeyBfbmFtZUF0dGVtcHRzID0gMDsgcmV0dXJuIHRydWU7IH0KICBpZiAoaXNMb2NhbCkgcmV0dXJuIHRydWU7ICAvLyBhZG1pbiBkb2Vzbid0IG5lZWQgYSBuYW1lCgogIF9uYW1lQXR0ZW1wdHMrKzsKCiAgaWYgKF9uYW1lQXR0ZW1wdHMgPiAyKSB7CiAgICAvLyBTaG93IGJpZyBpbnRlcnJ1cHRpbmcgbmFnIG1vZGFsCiAgICBzaG93TmFtZU5hZygpOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gR2VudGxlOiBzY3JvbGwsIGZvY3VzLCBwdWxzZQogIHZhciBlbCA9ICQoJ2N1c3RvbWVyJyk7CiAgZWwuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnY2VudGVyJyB9KTsKICBlbC5mb2N1cygpOwogIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2N1c3RvbWVyLXJlcXVpcmVkJyk7CiAgdm9pZCBlbC5vZmZzZXRXaWR0aDsKICBlbC5jbGFzc0xpc3QuYWRkKCdjdXN0b21lci1yZXF1aXJlZCcpOwogIGVsLnBsYWNlaG9sZGVyID0gJ1BsZWFzZSBlbnRlciB5b3VyIG5hbWUhJzsKICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBlbC5jbGFzc0xpc3QucmVtb3ZlKCdjdXN0b21lci1yZXF1aXJlZCcpOyBlbC5wbGFjZWhvbGRlciA9ICdFbnRlciBuYW1lICh1c2UgdW5kZXJzY29yZXMpJzsgfSwgMjUwMCk7CiAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBzaG93TmFtZU5hZygpIHsKICB2YXIgbmFnID0gJCgnbmFtZU5hZycpOwogIHZhciBpbnB1dCA9ICQoJ25hbWVOYWdJbnB1dCcpOwogIHZhciBidG4gPSAkKCduYW1lTmFnU3VibWl0Jyk7CiAgbmFnLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICBpbnB1dC52YWx1ZSA9ICcnOwogIGJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgaW5wdXQuZm9jdXMoKTsgfSwgNDAwKTsKCiAgLy8gRW5hYmxlIGJ1dHRvbiBvbmx5IHdoZW4gaW5wdXQgaGFzIHRleHQKICBpbnB1dC5vbmlucHV0ID0gZnVuY3Rpb24oKSB7CiAgICBidG4uZGlzYWJsZWQgPSAhaW5wdXQudmFsdWUudHJpbSgpOwogIH07CgogIC8vIFN1Ym1pdCBvbiBidXR0b24gY2xpY2sKICBidG4ub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgdmFyIG5hbWUgPSBpbnB1dC52YWx1ZS50cmltKCk7CiAgICBpZiAoIW5hbWUpIHJldHVybjsKICAgICQoJ2N1c3RvbWVyJykudmFsdWUgPSBuYW1lOwogICAgc2F2ZUN1c3RvbWVyTmFtZShuYW1lKTsKICAgIG5hZy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICBfbmFtZUF0dGVtcHRzID0gMDsKICAgIHNob3dUb2FzdCgnV2VsY29tZSwgJyArIG5hbWUgKyAnIScpOwogIH07CgogIC8vIFN1Ym1pdCBvbiBFbnRlciBrZXkKICBpbnB1dC5vbmtleWRvd24gPSBmdW5jdGlvbihldikgewogICAgaWYgKGV2LmtleSA9PT0gJ0VudGVyJykgeyBidG4uY2xpY2soKTsgfQogIH07CgogIC8vIENsaWNrIGJhY2tkcm9wIHRvIGRpc21pc3MgKGJ1dCBkb24ndCBzdWJtaXQpCiAgbmFnLm9uY2xpY2sgPSBmdW5jdGlvbihldikgewogICAgaWYgKGV2LnRhcmdldCA9PT0gbmFnKSB7CiAgICAgIG5hZy5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gcGFyc2VEYXRlRmxleGlibGUocykgewogIGlmICghcykgcmV0dXJuIG51bGw7CiAgbGV0IGQgPSBuZXcgRGF0ZShzKTsKICBpZiAoIWlzTmFOKGQuZ2V0VGltZSgpKSkgcmV0dXJuIGQ7CiAgY29uc3QgeW1kID0gKCcnK3MpLm1hdGNoKC8oXGR7NH0pXEQ/KFxkezEsMn0pXEQ/KFxkezEsMn0pLyk7CiAgaWYgKHltZCkgeyBkID0gbmV3IERhdGUoTnVtYmVyKHltZFsxXSksIE51bWJlcih5bWRbMl0pLTEsIE51bWJlcih5bWRbM10pKTsgaWYgKCFpc05hTihkLmdldFRpbWUoKSkpIHJldHVybiBkOyB9CiAgcmV0dXJuIG51bGw7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IENPTlNPTEUgQ0hJUFMgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gYnVpbGRDb25zb2xlQ2hpcHMoKSB7CiAgY29uc3QgY29udGFpbmVyID0gJCgnY29uc29sZUNoaXBzJyk7CiAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogIE9iamVjdC5rZXlzKENPTlNPTEVTKS5mb3JFYWNoKGlkID0+IHsKICAgIGNvbnN0IGMgPSBDT05TT0xFU1tpZF07CiAgICBjb25zdCBjaGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICBjaGlwLmNsYXNzTmFtZSA9ICdjb25zb2xlLWNoaXAnOwogICAgY2hpcC5kYXRhc2V0LmNvbnNvbGUgPSBpZDsKICAgIGNoaXAuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2hpcC1jb2xvcicsIGMuY29sb3IpOwogICAgY2hpcC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9ImNoaXAtY2hlY2siIHN0eWxlPSJkaXNwbGF5Om5vbmUiPiYjMTAwMDM7IDwvc3Bhbj4nICsgYy5sYWJlbCArICc8c3BhbiBjbGFzcz0iY2hpcC1iYWRnZSI+MDwvc3Bhbj4nOwogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaXApOwogIH0pOwp9CgpmdW5jdGlvbiB1cGRhdGVDb25zb2xlQ2hpcHMoKSB7CiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbnNvbGUtY2hpcCcpLmZvckVhY2goY2hpcCA9PiB7CiAgICBjb25zdCBpZCA9IGNoaXAuZGF0YXNldC5jb25zb2xlOwogICAgY29uc3QgY2ZnID0gQ09OU09MRVNbaWRdOwogICAgY29uc3QgY3MgPSBzdGF0ZS5jb25zb2xlU3RhdGVzW2lkXTsKICAgIGNvbnN0IGNvdW50ID0gY3MgPyBjcy5zZWxlY3RlZC5sZW5ndGggOiAwOwoKICAgIC8vIEJhZGdlCiAgICBjb25zdCBiYWRnZSA9IGNoaXAucXVlcnlTZWxlY3RvcignLmNoaXAtYmFkZ2UnKTsKICAgIGJhZGdlLnRleHRDb250ZW50ID0gY291bnQ7CiAgICBjaGlwLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1zZWxlY3Rpb24nLCBjb3VudCA+IDApOwoKICAgIC8vIENoZWNrbWFyayAoTUlYIG1vZGUgb25seSkKICAgIGNvbnN0IGNoZWNrID0gY2hpcC5xdWVyeVNlbGVjdG9yKCcuY2hpcC1jaGVjaycpOwogICAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICAgIGNvbnN0IGluTWl4ID0gc3RhdGUuYWN0aXZlQ29uc29sZXMuaW5jbHVkZXMoaWQpOwogICAgICBpZiAoY2hlY2spIGNoZWNrLnN0eWxlLmRpc3BsYXkgPSBpbk1peCA/ICdpbmxpbmUnIDogJ25vbmUnOwogICAgfSBlbHNlIHsKICAgICAgaWYgKGNoZWNrKSBjaGVjay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgfQoKICAgIGNoaXAuc3R5bGUuYm94U2hhZG93ID0gJyc7CiAgICBjaGlwLnN0eWxlLnRyYW5zZm9ybSA9ICcnOwogICAgaWYgKHN0YXRlLm1vZGUgPT09ICdyZWd1bGFyJykgewogICAgICBjaGlwLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGlkID09PSBzdGF0ZS5hY3RpdmVDb25zb2xlKTsKICAgICAgaWYgKGlkID09PSBzdGF0ZS5hY3RpdmVDb25zb2xlKSB7CiAgICAgICAgY2hpcC5zdHlsZS5iYWNrZ3JvdW5kID0gY2ZnLmNvbG9yOwogICAgICAgIGNoaXAuc3R5bGUuYm9yZGVyQ29sb3IgPSBjZmcuY29sb3I7CiAgICAgICAgY2hpcC5zdHlsZS5jb2xvciA9ICcjZmZmJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlwLnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICBjaGlwLnN0eWxlLmJvcmRlckNvbG9yID0gJyc7CiAgICAgICAgY2hpcC5zdHlsZS5jb2xvciA9ICcnOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBjb25zdCBpbk1peCA9IHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmluY2x1ZGVzKGlkKTsKICAgICAgY29uc3QgaXNWaWV3aW5nID0gaWQgPT09IHN0YXRlLmFjdGl2ZUNvbnNvbGU7CiAgICAgIGNoaXAuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaW5NaXgpOwogICAgICBpZiAoaW5NaXggJiYgaXNWaWV3aW5nKSB7CiAgICAgICAgY2hpcC5zdHlsZS5iYWNrZ3JvdW5kID0gY2ZnLmNvbG9yOwogICAgICAgIGNoaXAuc3R5bGUuYm9yZGVyQ29sb3IgPSBjZmcuY29sb3I7CiAgICAgICAgY2hpcC5zdHlsZS5jb2xvciA9ICcjZmZmJzsKICAgICAgICBjaGlwLnN0eWxlLmJveFNoYWRvdyA9ICcwIDAgMTBweCAzcHggJyArIGNmZy5jb2xvciArICcsMCAwIDIwcHggNnB4ICcgKyBjZmcuY29sb3IgKyAnODAnOwogICAgICAgIGNoaXAuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEuMDgpJzsKICAgICAgfSBlbHNlIGlmIChpbk1peCkgewogICAgICAgIGNoaXAuc3R5bGUuYmFja2dyb3VuZCA9IGNmZy5jb2xvcjsKICAgICAgICBjaGlwLnN0eWxlLmJvcmRlckNvbG9yID0gY2ZnLmNvbG9yOwogICAgICAgIGNoaXAuc3R5bGUuY29sb3IgPSAnI2ZmZic7CiAgICAgICAgY2hpcC5zdHlsZS5ib3hTaGFkb3cgPSAnMCAwIDZweCAxcHggJyArIGNmZy5jb2xvciArICc1MCc7CiAgICAgICAgY2hpcC5zdHlsZS50cmFuc2Zvcm0gPSAnJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGlwLnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICBjaGlwLnN0eWxlLmJvcmRlckNvbG9yID0gJyc7CiAgICAgICAgY2hpcC5zdHlsZS5jb2xvciA9ICcnOwogICAgICB9CiAgICB9CiAgfSk7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IE1PREUgVE9HR0xFID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHNldE1vZGUobW9kZSkgewogIHN0YXRlLm1vZGUgPSBtb2RlOwogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RlLWJ0bicpLmZvckVhY2goYiA9PiBiLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGIuZGF0YXNldC5tb2RlID09PSBtb2RlKSk7CiAgJCgnbWFpbkNvbnRhaW5lcicpLmNsYXNzTGlzdC50b2dnbGUoJ21peC1hY3RpdmUnLCBtb2RlID09PSAnbWl4Jyk7CiAgJCgnZ3JhbmRUb3RhbCcpLmNsYXNzTGlzdC50b2dnbGUoJ3Zpc2libGUnLCBtb2RlID09PSAnbWl4Jyk7CgogIGlmIChtb2RlID09PSAnbWl4JykgewogICAgLy8gSWYgbm90aGluZyBhY3RpdmUsIGtlZXAgY3VycmVudCBjb25zb2xlIGFzIGZpcnN0IHRhYgogICAgaWYgKHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5hY3RpdmVDb25zb2xlKSB7CiAgICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLnB1c2goc3RhdGUuYWN0aXZlQ29uc29sZSk7CiAgICB9CiAgICBidWlsZE1peFRhYnMoKTsKICB9IGVsc2UgewogICAgLy8gUmVndWxhciBtb2RlOiB1c2UgdGhlIGFjdGl2ZSB0YWIgYXMgdGhlIGNvbnNvbGUKICAgIGlmICghc3RhdGUuYWN0aXZlQ29uc29sZSAmJiBzdGF0ZS5hY3RpdmVDb25zb2xlcy5sZW5ndGggPiAwKSB7CiAgICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPSBzdGF0ZS5hY3RpdmVDb25zb2xlc1swXTsKICAgIH0KICB9CiAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgaWYgKHN0YXRlLmFjdGl2ZUNvbnNvbGUpIHJlZnJlc2hDdXJyZW50VmlldygpOwp9CgokKCdtb2RlVG9nZ2xlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZS1idG4nKSkgewogICAgaWYgKCFyZXF1aXJlQ3VzdG9tZXJOYW1lKCkpIHJldHVybjsKICAgIHNldE1vZGUoZS50YXJnZXQuZGF0YXNldC5tb2RlKTsKICB9Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gQ09OU09MRSBDSElQIENMSUNLID09PT09PT09PT09PT09PT09PT09CiQoJ2NvbnNvbGVDaGlwcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogIGNvbnN0IGNoaXAgPSBlLnRhcmdldC5jbG9zZXN0KCcuY29uc29sZS1jaGlwJyk7CiAgaWYgKCFjaGlwKSByZXR1cm47CiAgaWYgKCFyZXF1aXJlQ3VzdG9tZXJOYW1lKCkpIHJldHVybjsKICBjb25zdCBpZCA9IGNoaXAuZGF0YXNldC5jb25zb2xlOwoKICBpZiAoc3RhdGUubW9kZSA9PT0gJ3JlZ3VsYXInKSB7CiAgICBpZiAoc3RhdGUuYWN0aXZlQ29uc29sZSA9PT0gaWQpIHJldHVybjsKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPSBpZDsKICAgIGxvYWRDb25zb2xlKGlkKTsKICB9IGVsc2UgewogICAgLy8gTWl4IG1vZGU6IGNsaWNrIGxvZ2ljCiAgICBjb25zdCBpZHggPSBzdGF0ZS5hY3RpdmVDb25zb2xlcy5pbmRleE9mKGlkKTsKICAgIGlmIChpZHggPj0gMCkgewogICAgICBpZiAoc3RhdGUuYWN0aXZlQ29uc29sZSA9PT0gaWQpIHsKICAgICAgICAvLyBDbGlja2luZyB0aGUgY3VycmVudGx5LXZpZXdlZCBjb25zb2xlIOKGkiByZW1vdmUgZnJvbSBtaXgKICAgICAgICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5zcGxpY2UoaWR4LCAxKTsKICAgICAgICBzdGF0ZS5hY3RpdmVDb25zb2xlID0gc3RhdGUuYWN0aXZlQ29uc29sZXNbMF0gfHwgbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBBbHJlYWR5IGluIG1peCBidXQgbm90IHZpZXdpbmcg4oaSIHN3aXRjaCB2aWV3IHRvIGl0CiAgICAgICAgc3RhdGUuYWN0aXZlQ29uc29sZSA9IGlkOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBOb3QgaW4gbWl4IOKGkiBhZGQgYW5kIHN3aXRjaCB2aWV3CiAgICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLnB1c2goaWQpOwogICAgICBzdGF0ZS5hY3RpdmVDb25zb2xlID0gaWQ7CiAgICAgIGxvYWRDb25zb2xlKGlkKTsKICAgIH0KICAgIGJ1aWxkTWl4VGFicygpOwogICAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgICBpZiAoc3RhdGUuYWN0aXZlQ29uc29sZSkgcmVmcmVzaEN1cnJlbnRWaWV3KCk7CiAgICB1cGRhdGVHcmFuZFRvdGFsKCk7CiAgfQp9KTsKCi8vID09PT09PT09PT09PT09PT09PT09IE1JWCBUQUJTIChyZXBsYWNlZCBieSBjaGlwIGdsb3cpID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIGJ1aWxkTWl4VGFicygpIHsgdXBkYXRlQ29uc29sZUNoaXBzKCk7IH0KCi8vID09PT09PT09PT09PT09PT09PT09IExPQUQgQ09OU09MRSBEQVRBID09PT09PT09PT09PT09PT09PT09CmFzeW5jIGZ1bmN0aW9uIGxvYWRDb25zb2xlKGNvbnNvbGVJZCkgewogIGNvbnN0IGNzID0gZ2V0Q29uc29sZVN0YXRlKGNvbnNvbGVJZCk7CiAgY29uc3QgY2ZnID0gQ09OU09MRVNbY29uc29sZUlkXTsKCiAgaWYgKGNzLmxvYWRlZCkgewogICAgc3RhdGUuYWN0aXZlQ29uc29sZSA9IGNvbnNvbGVJZDsKICAgIHVwZGF0ZUNvbnNvbGVDaGlwcygpOwogICAgcmVmcmVzaEN1cnJlbnRWaWV3KCk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoY3MubG9hZGluZykgcmV0dXJuOwogIGNzLmxvYWRpbmcgPSB0cnVlOwoKICAkKCdsZWZ0UGFuZUlubmVyJykuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxvYWRpbmctb3ZlcmxheSI+PGRpdiBjbGFzcz0ibG9hZGluZy1zcGlubmVyIj48L2Rpdj5Mb2FkaW5nICcgKyBjZmcubGFiZWwgKyAnIGdhbWVzLi4uPC9kaXY+JzsKCiAgdHJ5IHsKICAgIC8vIExvYWQgdW5pZmllZCBnYW1lIGRhdGFiYXNlIChKU09OIGhhcyBpY29uQ2FjaGUgZW1iZWRkZWQpCiAgICBjb25zdCBkYlVybCA9IGNmZy5mb2xkZXIgKyAnLycgKyBjZmcuZGJGaWxlOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IERhdGFQYXJzZXIubG9hZChkYlVybCk7CgogICAgY3MuaXRlbXMgPSBkYXRhLml0ZW1zOwogICAgY3MucGxhdGZvcm0gPSBkYXRhLnBsYXRmb3JtOwogICAgY3Muc3RydWN0dXJlVHlwZSA9IGRhdGEuc3RydWN0dXJlVHlwZTsKICAgIGNzLnhtbERvYyA9IGRhdGEueG1sRG9jOwogICAgaWYgKGRhdGEuaWNvbkNhY2hlICYmICFpc0xlZ2FjeU1vZGUpIGNzLmljb25DYWNoZSA9IGRhdGEuaWNvbkNhY2hlOwogICAgY3MubG9hZGVkID0gdHJ1ZTsKICAgIGNzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICBzdGF0ZS5hY3RpdmVDb25zb2xlID0gY29uc29sZUlkOwogICAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CgogICAgLy8gQnVpbGQgZ2VucmUgc2V0CiAgICBjcy5nZW5yZXMuY2xlYXIoKTsKICAgIGNzLmdlbnJlcy5hZGQoJ2FsbCcpOwogICAgT2JqZWN0LnZhbHVlcyhjcy5pY29uQ2FjaGUpLmZvckVhY2goaW5mbyA9PiB7CiAgICAgIGlmIChpbmZvLmNhdGVnb3J5ICYmIEFycmF5LmlzQXJyYXkoaW5mby5jYXRlZ29yeSkpIHsKICAgICAgICBpbmZvLmNhdGVnb3J5LmZvckVhY2goY2F0ID0+IGNzLmdlbnJlcy5hZGQoY2F0KSk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJlZnJlc2hDdXJyZW50VmlldygpOwogICAgYXBwbHlQZW5kaW5nUmVzdG9yZShjb25zb2xlSWQpOwogICAgdG9hc3QoJ0xvYWRlZCAnICsgY3MuaXRlbXMubGVuZ3RoICsgJyAnICsgY2ZnLmxhYmVsICsgJyBnYW1lcycpOwogIH0gY2F0Y2goZSkgewogICAgY3MubG9hZGluZyA9IGZhbHNlOwogICAgY29uc29sZS5lcnJvcihlKTsKICAgICQoJ2xlZnRQYW5lSW5uZXInKS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0iY29sb3I6I2I5MWMxYztwYWRkaW5nOjEycHgiPkZhaWxlZCB0byBsb2FkICcgKyBjZmcubGFiZWwgKyAnOiAnICsgZS5tZXNzYWdlICsgJzwvZGl2Pic7CiAgfQp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBSRUZSRVNIIFZJRVcgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gcmVmcmVzaEN1cnJlbnRWaWV3KCkgewogIGNvbnN0IGNzID0gYWN0aXZlU3RhdGUoKTsKICBjb25zdCBjZmcgPSBhY3RpdmVDb25maWcoKTsKICBpZiAoIWNzIHx8ICFjZmcpIHJldHVybjsKCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2VUaXRsZScpLnRleHRDb250ZW50ID0gc3RhdGUubW9kZSA9PT0gJ21peCcKICAgID8gJ1ByZW1hemluZ1BIIEdhbWVzIC0gTUlYJwogICAgOiBjZmcubGFiZWwgKyAnIEdhbWVzJzsKCiAgJCgnc3RvcmFnZUxhYmVsJykudGV4dENvbnRlbnQgPSBjZmcuc3RvcmFnZUxhYmVsIHx8ICdTdG9yYWdlJzsKCiAgLy8gU2V0IGZpbGUgaW5wdXQgZmlsdGVyIGZvciB0aGUgYWN0aXZlIGNvbnNvbGUKICB2YXIgZmlsZUluID0gJCgnZmlsZUluJyk7CiAgaWYgKGZpbGVJbikgewogICAgdmFyIGV4dHMgPSBzdGF0ZS5tb2RlID09PSAnbWl4JyA/ICcuQ0xJX1BSTVpNSVgnIDogY2ZnLmNsaWVudEZpbGVFeHQ7CiAgICBmaWxlSW4uc2V0QXR0cmlidXRlKCdhY2NlcHQnLCBleHRzKTsKICB9CgogIGJ1aWxkRHluYW1pY0NvbnRyb2xzKGNmZyk7CiAgYnVpbGRHZW5yZUZpbHRlcihjcyk7CiAgYXBwbHlTb3J0QW5kUmVuZGVyKCk7CiAgdXBkYXRlVG90YWxzKCk7CiAgcmVuZGVyU2VsZWN0ZWRQYW5lbCgpOwogIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgdXBkYXRlR3JhbmRUb3RhbCgpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBEWU5BTUlDIENPTlRST0xTID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIGJ1aWxkRHluYW1pY0NvbnRyb2xzKGNmZykgewogIGNvbnN0IGNvbnRhaW5lciA9ICQoJ2R5bmFtaWNDb250cm9scycpOwogIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdncmlkJzsKICBjb250YWluZXIuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9ICcxZnIgMWZyJzsKICBjb250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7CgogIGNmZy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChmdW5jdGlvbihjdHJsKSB7CiAgICAvLyBQcmVmaXggY29udHJvbCBJRHMgd2l0aCBjb25zb2xlIElEIHRvIGF2b2lkIGNvbmZsaWN0cwogICAgY29uc3QgY3RybElkID0gJ2N0cmxfJyArIHN0YXRlLmFjdGl2ZUNvbnNvbGUgKyAnXycgKyBjdHJsLmlkOwogICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICBsYWJlbC5jbGFzc05hbWUgPSAnc21hbGwnOwogICAgbGFiZWwudGV4dENvbnRlbnQgPSBjdHJsLmxhYmVsOwogICAgZGl2LmFwcGVuZENoaWxkKGxhYmVsKTsKCiAgICBpZiAoY3RybC50eXBlID09PSAnc2VsZWN0JykgewogICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKICAgICAgc2VsZWN0LmlkID0gY3RybElkOwogICAgICBzZWxlY3QuZGF0YXNldC5jdHJsSWQgPSBjdHJsLmlkOwogICAgICBzZWxlY3Quc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgY3RybC5sYWJlbCk7CgogICAgICAvLyBSZXN0b3JlIHByZXZpb3VzIHZhbHVlIGlmIGV4aXN0cwogICAgICBjb25zdCBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgICAgIGNvbnN0IHNhdmVkVmFsID0gY3NbJ19jdHJsXycgKyBjdHJsLmlkXTsKCiAgICAgIGN0cmwub3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG9wdCkgewogICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgIG9wdGlvbi52YWx1ZSA9IG9wdC52YWx1ZTsKICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBvcHQubGFiZWw7CiAgICAgICAgaWYgKHNhdmVkVmFsID8gb3B0LnZhbHVlID09PSBzYXZlZFZhbCA6IG9wdC52YWx1ZSA9PT0gY3RybC5kZWZhdWx0KSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICB9KTsKICAgICAgZGl2LmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsKICAgICAgICAvLyBTYXZlIHZhbHVlIHRvIGNvbnNvbGUgc3RhdGUKICAgICAgICBhY3RpdmVTdGF0ZSgpWydfY3RybF8nICsgY3RybC5pZF0gPSBzZWxlY3QudmFsdWU7CiAgICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICAgICAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7CiAgICAgIH0pOwogICAgfQogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldENvbnRyb2xWYWx1ZXMoKSB7CiAgY29uc3QgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgaWYgKCFjZmcpIHJldHVybiB7fTsKICBjb25zdCB2YWx1ZXMgPSB7fTsKICBjZmcuc3RvcmFnZUNvbnRyb2xzLmZvckVhY2goZnVuY3Rpb24oY3RybCkgewogICAgY29uc3QgZWwgPSAkKCdjdHJsXycgKyBzdGF0ZS5hY3RpdmVDb25zb2xlICsgJ18nICsgY3RybC5pZCk7CiAgICBpZiAoZWwpIHZhbHVlc1tjdHJsLmlkXSA9IGVsLnZhbHVlOwogICAgZWxzZSB7CiAgICAgIC8vIEZhbGxiYWNrIHRvIHNhdmVkIHZhbHVlCiAgICAgIGNvbnN0IGNzID0gYWN0aXZlU3RhdGUoKTsKICAgICAgdmFsdWVzW2N0cmwuaWRdID0gY3MgPyBjc1snX2N0cmxfJyArIGN0cmwuaWRdIHx8IGN0cmwuZGVmYXVsdCA6IGN0cmwuZGVmYXVsdDsKICAgIH0KICB9KTsKICByZXR1cm4gdmFsdWVzOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBHRU5SRSBGSUxURVIgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gYnVpbGRHZW5yZUZpbHRlcihjcykgewogIGNvbnN0IGNvbnRhaW5lciA9ICQoJ2dlbnJlRmlsdGVyJyk7CiAgaWYgKCFjb250YWluZXIpIHJldHVybjsKCiAgY29uc3Qgc29ydGVkR2VucmVzID0gWydhbGwnXS5jb25jYXQoQXJyYXkuZnJvbShjcy5nZW5yZXMpLmZpbHRlcihmdW5jdGlvbihnKSB7IHJldHVybiBnICE9PSAnYWxsJzsgfSkuc29ydCgpKTsKCiAgdmFyIGh0bWwgPSAnPGJ1dHRvbiBjbGFzcz0ic29ydC1jaGlwICcgKyAoY3MuY3VycmVudFNvcnQgPT09ICduYW1lJyA/ICdhY3RpdmUnIDogJycpICsgJyIgZGF0YS1zb3J0PSJuYW1lIj5BLVo8L2J1dHRvbj4nICsKICAgICc8YnV0dG9uIGNsYXNzPSJzb3J0LWNoaXAgJyArIChjcy5jdXJyZW50U29ydCA9PT0gJ2xhdGVzdCcgPyAnYWN0aXZlJyA6ICcnKSArICciIGRhdGEtc29ydD0ibGF0ZXN0Ij5MYXRlc3Q8L2J1dHRvbj4nICsKICAgICc8YnV0dG9uIGNsYXNzPSJzb3J0LWNoaXAgJyArIChjcy5jdXJyZW50U29ydCA9PT0gJ3RvcCcgPyAnYWN0aXZlJyA6ICcnKSArICciIGRhdGEtc29ydD0idG9wIj5Ub3A8L2J1dHRvbj4nICsKICAgICc8ZGl2IGNsYXNzPSJkaXZpZGVyIj48L2Rpdj4nOwoKICBzb3J0ZWRHZW5yZXMuZm9yRWFjaChmdW5jdGlvbihnZW5yZSkgewogICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz0iZ2VucmUtY2hpcCAnICsgKGdlbnJlID09PSBjcy5jdXJyZW50R2VucmUgPyAnYWN0aXZlJyA6ICcnKSArICciIGRhdGEtZ2VucmU9IicgKyBnZW5yZSArICciPicgKwogICAgICAoZ2VucmUgPT09ICdhbGwnID8gJ0FsbCBHYW1lcycgOiBnZW5yZSkgKyAnPC9idXR0b24+JzsKICB9KTsKCiAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7Cn0KCiQoJ2dlbnJlRmlsdGVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgY29uc3QgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MpIHJldHVybjsKICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnZW5yZS1jaGlwJykpIHsKICAgIGNzLmN1cnJlbnRHZW5yZSA9IGUudGFyZ2V0LmRhdGFzZXQuZ2VucmU7CiAgICAkKCdnZW5yZUZpbHRlcicpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5nZW5yZS1jaGlwJykuZm9yRWFjaChmdW5jdGlvbihjKSB7IGMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7IH0pOwogICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICByZW5kZXJMaXN0KGNzLml0ZW1zKTsKICB9CiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc29ydC1jaGlwJykpIHsKICAgIGNzLmN1cnJlbnRTb3J0ID0gZS50YXJnZXQuZGF0YXNldC5zb3J0OwogICAgJCgnZ2VucmVGaWx0ZXInKS5xdWVyeVNlbGVjdG9yQWxsKCcuc29ydC1jaGlwJykuZm9yRWFjaChmdW5jdGlvbihjKSB7IGMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7IH0pOwogICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICBhcHBseVNvcnRBbmRSZW5kZXIoKTsKICB9Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gU09SVCAmIFJFTkRFUiA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiBhcHBseVNvcnRBbmRSZW5kZXIoKSB7CiAgY29uc3QgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MgfHwgIWNzLml0ZW1zLmxlbmd0aCkgcmV0dXJuOwoKICBpZiAoY3MuY3VycmVudFNvcnQgPT09ICdsYXRlc3QnKSB7CiAgICBjcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0KSB7CiAgICAgIHZhciByYXcgPSBpdC5kYXRlIHx8IGl0LmRhdGVNb2RpZmllZCB8fCAnJzsKICAgICAgdmFyIGQgPSBwYXJzZURhdGVGbGV4aWJsZShyYXcpOwogICAgICBpdC5fcGFyc2VkRGF0ZSA9IGQgPyBkLmdldFRpbWUoKSA6IDA7CiAgICB9KTsKICAgIGNzLml0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYi5fcGFyc2VkRGF0ZSAtIGEuX3BhcnNlZERhdGU7IH0pOwogIH0gZWxzZSBpZiAoY3MuY3VycmVudFNvcnQgPT09ICd0b3AnKSB7CiAgICBjcy5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIChwYXJzZUludChiLnNjb3JlIHx8IDApIC0gcGFyc2VJbnQoYS5zY29yZSB8fCAwKSk7IH0pOwogIH0gZWxzZSB7CiAgICBjcy5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIChhLm5hbWUgfHwgJycpLmxvY2FsZUNvbXBhcmUoYi5uYW1lIHx8ICcnKTsgfSk7CiAgfQoKICByZW5kZXJMaXN0KGNzLml0ZW1zKTsKfQoKZnVuY3Rpb24gZmlsdGVyQnlHZW5yZShsaXN0KSB7CiAgY29uc3QgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MgfHwgY3MuY3VycmVudEdlbnJlID09PSAnYWxsJykgcmV0dXJuIGxpc3Q7CiAgcmV0dXJuIGxpc3QuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciBpbmZvID0gY3MuaWNvbkNhY2hlW2l0ZW0ubmFtZV07CiAgICBpZiAoIWluZm8gfHwgIWluZm8uY2F0ZWdvcnkpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiBpbmZvLmNhdGVnb3J5LmluY2x1ZGVzKGNzLmN1cnJlbnRHZW5yZSk7CiAgfSk7Cn0KCi8vIFJlc29sdmUgYSBjYWNoZWQgVVJMOiBpZiByZWxhdGl2ZSAobm8gOi8vKSwgcHJlcGVuZCBjb25zb2xlIGZvbGRlcgpmdW5jdGlvbiByZXNvbHZlQXNzZXRVcmwodXJsLCBjZmcpIHsKICBpZiAoIXVybCkgcmV0dXJuICcnOwogIGlmICh1cmwuaW5kZXhPZignOi8vJykgPT09IC0xICYmIHVybC5jaGFyQXQoMCkgIT09ICcvJykgewogICAgcmV0dXJuIChjZmcgPyBjZmcuZm9sZGVyICsgJy8nIDogJycpICsgdXJsOwogIH0KICByZXR1cm4gdXJsOwp9CgpmdW5jdGlvbiBnZXRJY29uVXJsKGdhbWVOYW1lKSB7CiAgaWYgKGlzTGVnYWN5TW9kZSkgcmV0dXJuIG51bGw7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgaWYgKCFjcyB8fCAhY2ZnKSByZXR1cm4gbnVsbDsKCiAgLy8gMS4gQ2hlY2sgcHJlLWJ1aWx0IGljb25fY2FjaGUKICB2YXIgY2FjaGVkID0gY3MuaWNvbkNhY2hlW2dhbWVOYW1lXTsKICBpZiAoY2FjaGVkICYmIGNhY2hlZC5pY29uVXJsKSByZXR1cm4gcmVzb2x2ZUFzc2V0VXJsKGNhY2hlZC5pY29uVXJsLCBjZmcpOwoKICAvLyAyLiBDb25zdHJ1Y3QgbGlicmV0cm8gdGh1bWJuYWlsIFVSTCBvbiB0aGUgZmx5CiAgaWYgKGNmZy5saWJyZXRyb1N5c3RlbSAmJiBjZmcuY2xlYW5HYW1lTmFtZSkgewogICAgcmV0dXJuIGJ1aWxkTGlicmV0cm9VcmwoY2ZnLCBnYW1lTmFtZSwgMCk7CiAgfQoKICByZXR1cm4gbnVsbDsKfQoKLy8gQnVpbGQgYSBsaWJyZXRybyBDRE4gVVJMIGZvciBhIGdhbWUsIHRyeWluZyByZWdpb24gdmFyaWFudHMKLy8gdmFyaWFudEluZGV4IHBpY2tzIHdoaWNoIHJlZ2lvbi9mb2xkZXIgY29tYm8gdG8gdHJ5CmZ1bmN0aW9uIGJ1aWxkTGlicmV0cm9VcmwoY2ZnLCBnYW1lTmFtZSwgdmFyaWFudEluZGV4KSB7CiAgdmFyIGNsZWFuID0gY2ZnLmNsZWFuR2FtZU5hbWUoZ2FtZU5hbWUpOwogIHZhciBzYWZlID0gbGlicmV0cm9TYWZlKGNsZWFuKTsKICB2YXIgZm9sZGVycyA9IGNmZy5saWJyZXRyb0ZvbGRlcnMgfHwgWydOYW1lZF9Cb3hhcnRzJ107CiAgdmFyIHJlZ2lvbnMgPSBbJyhVU0EpJywgJyhFdXJvcGUpJywgJyhKYXBhbiknLCAnKFdvcmxkKScsICcoVVNBKSAoRW4sRnIsRXMpJ107CiAgLy8gQnVpbGQgZmxhdCBsaXN0IG9mIGNhbmRpZGF0ZXM6IGVhY2ggZm9sZGVyIMOXIGVhY2ggcmVnaW9uLCB0aGVuIGJhcmUgbmFtZQogIHZhciBjYW5kaWRhdGVzID0gW107CiAgZm9yICh2YXIgZiA9IDA7IGYgPCBmb2xkZXJzLmxlbmd0aDsgZisrKSB7CiAgICBmb3IgKHZhciByID0gMDsgciA8IHJlZ2lvbnMubGVuZ3RoOyByKyspIHsKICAgICAgY2FuZGlkYXRlcy5wdXNoKGZvbGRlcnNbZl0gKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoc2FmZSArICcgJyArIHJlZ2lvbnNbcl0pICsgJy5wbmcnKTsKICAgIH0KICAgIC8vIEFsc28gdHJ5IGJhcmUgbmFtZSAobm8gcmVnaW9uKQogICAgY2FuZGlkYXRlcy5wdXNoKGZvbGRlcnNbZl0gKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoc2FmZSkgKyAnLnBuZycpOwogIH0KICB2YXIgaWR4ID0gdmFyaWFudEluZGV4IHx8IDA7CiAgaWYgKGlkeCA+PSBjYW5kaWRhdGVzLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgdmFyIGJhc2UgPSBMSUJSRVRST19DRE4gKyBlbmNvZGVVUklDb21wb25lbnQoY2ZnLmxpYnJldHJvU3lzdGVtKSArICcvJzsKICByZXR1cm4gYmFzZSArIGNhbmRpZGF0ZXNbaWR4XTsKfQoKLy8gR2V0IHRvdGFsIG51bWJlciBvZiBsaWJyZXRybyBVUkwgdmFyaWFudHMgdG8gdHJ5CmZ1bmN0aW9uIGdldExpYnJldHJvVmFyaWFudENvdW50KGNmZykgewogIHZhciBmb2xkZXJzID0gY2ZnLmxpYnJldHJvRm9sZGVycyB8fCBbJ05hbWVkX0JveGFydHMnXTsKICByZXR1cm4gZm9sZGVycy5sZW5ndGggKiA2OyAvLyA1IHJlZ2lvbnMgKyBiYXJlIG5hbWUgcGVyIGZvbGRlcgp9CgovLyBDYWxsZWQgb24gaW1nIG9uZXJyb3Ig4oCUIHRyeSBuZXh0IGxpYnJldHJvIHJlZ2lvbi9mb2xkZXIgdmFyaWFudApmdW5jdGlvbiBsaWJyZXRyb0ZhbGxiYWNrKGltZykgewogIHZhciBjZmcgPSBhY3RpdmVDb25maWcoKTsKICBpZiAoIWNmZyB8fCAhY2ZnLmxpYnJldHJvU3lzdGVtKSB7CiAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGlmIChpbWcubmV4dEVsZW1lbnRTaWJsaW5nKSBpbWcubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgcmV0dXJuOwogIH0KICB2YXIgdiA9IHBhcnNlSW50KGltZy5kYXRhc2V0LnZhcmlhbnQgfHwgJzAnKSArIDE7CiAgdmFyIG1heFZhcmlhbnRzID0gZ2V0TGlicmV0cm9WYXJpYW50Q291bnQoY2ZnKTsKICBpZiAodiA+PSBtYXhWYXJpYW50cykgewogICAgLy8gQWxsIHZhcmlhbnRzIGV4aGF1c3RlZCDigJQgc2hvdyBwbGFjZWhvbGRlcgogICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBpZiAoaW1nLm5leHRFbGVtZW50U2libGluZykgaW1nLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgIHJldHVybjsKICB9CiAgaW1nLmRhdGFzZXQudmFyaWFudCA9IHY7CiAgdmFyIG5leHRVcmwgPSBidWlsZExpYnJldHJvVXJsKGNmZywgaW1nLmRhdGFzZXQuZ2FtZSwgdik7CiAgaWYgKG5leHRVcmwpIHsKICAgIGltZy5zcmMgPSBuZXh0VXJsOwogIH0gZWxzZSB7CiAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGlmIChpbWcubmV4dEVsZW1lbnRTaWJsaW5nKSBpbWcubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIH0KfQoKZnVuY3Rpb24gZ2V0R2FtZUluZm8oZ2FtZU5hbWUpIHsKICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIHJldHVybiBjcyA/IGNzLmljb25DYWNoZVtnYW1lTmFtZV0gfHwgbnVsbCA6IG51bGw7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFJFTkRFUiBMSVNUID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHJlbmRlckxpc3QobGlzdCkgewogIGNvbnN0IGxlZnRQYW5lID0gJCgnbGVmdFBhbmVJbm5lcicpOwogIGNvbnN0IGNzID0gYWN0aXZlU3RhdGUoKTsKICBjb25zdCBjZmcgPSBhY3RpdmVDb25maWcoKTsKICBpZiAoIWNzIHx8ICFjZmcpIHJldHVybjsKCiAgbGVmdFBhbmUuaW5uZXJIVE1MID0gJyc7CiAgdmFyIGZpbHRlcmVkID0gZmlsdGVyQnlHZW5yZShsaXN0KTsKCiAgLy8gQXBwbHkgc2VhcmNoCiAgaWYgKGNzLnNlYXJjaFF1ZXJ5KSB7CiAgICBmaWx0ZXJlZCA9IHNtYXJ0U2VhcmNoKGZpbHRlcmVkLCBjcy5zZWFyY2hRdWVyeSk7CiAgfQoKICBpZiAoIWZpbHRlcmVkIHx8ICFmaWx0ZXJlZC5sZW5ndGgpIHsKICAgIGxlZnRQYW5lLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjQwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6dmFyKC0tbXV0ZWQpIj5ObyBnYW1lcyBmb3VuZDwvZGl2Pic7CiAgICByZXR1cm47CiAgfQoKICBmaWx0ZXJlZC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHJvdy5jbGFzc05hbWUgPSAnaXRlbSc7CiAgICByb3cuZGF0YXNldC5uYW1lID0gaXRlbS5uYW1lOwogICAgcm93LmRhdGFzZXQuc2l6ZSA9IGl0ZW0uc2l6ZTsKICAgIGlmIChpdGVtLmZpbGVuYW1lKSByb3cuZGF0YXNldC5maWxlbmFtZSA9IGl0ZW0uZmlsZW5hbWU7CgogICAgdmFyIGlzU2VsZWN0ZWQgPSBjcy5zZWxlY3RlZC5zb21lKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMubmFtZSA9PT0gaXRlbS5uYW1lOyB9KTsKICAgIHZhciBzaXplRGlzcGxheSA9IGZvcm1hdFNpemVUb0dCKGl0ZW0uc2l6ZSk7CiAgICB2YXIgc2NvcmVWYWwgPSBpdGVtLnNjb3JlID8gcGFyc2VJbnQoaXRlbS5zY29yZSkgOiAwOwogICAgdmFyIGljb25VcmwgPSBnZXRJY29uVXJsKGl0ZW0ubmFtZSk7CiAgICB2YXIgaXNGcm9tQ2FjaGUgPSBpY29uVXJsICYmIGNzLmljb25DYWNoZVtpdGVtLm5hbWVdICYmIGNzLmljb25DYWNoZVtpdGVtLm5hbWVdLmljb25Vcmw7CiAgICB2YXIgdGh1bWJDb250ZW50ID0gJyc7CiAgICBpZiAoaWNvblVybCAmJiBjZmcubGlicmV0cm9TeXN0ZW0pIHsKICAgICAgLy8gU3RhcnQgdmFyaWFudCBhdCAtMSBpZiBVUkwgaXMgZnJvbSBpY29uX2NhY2hlIChub3QgbGlicmV0cm8pLAogICAgICAvLyBzbyBmaXJzdCBmYWxsYmFjayB0cmllcyBsaWJyZXRybyB2YXJpYW50IDAKICAgICAgdmFyIHN0YXJ0VmFyaWFudCA9IGlzRnJvbUNhY2hlID8gLTEgOiAwOwogICAgICB0aHVtYkNvbnRlbnQgPSAnPGltZyBzcmM9IicgKyBpY29uVXJsICsgJyIgYWx0PSIiIGxvYWRpbmc9ImxhenkiIGRlY29kaW5nPSJhc3luYyIgZGF0YS1nYW1lPSInICsgZXNjKGl0ZW0ubmFtZSkgKyAnIiBkYXRhLXZhcmlhbnQ9IicgKyBzdGFydFZhcmlhbnQgKyAnIiBvbmVycm9yPSJsaWJyZXRyb0ZhbGxiYWNrKHRoaXMpIj4nOwogICAgfSBlbHNlIGlmIChpY29uVXJsKSB7CiAgICAgIHRodW1iQ29udGVudCA9ICc8aW1nIHNyYz0iJyArIGljb25VcmwgKyAnIiBhbHQ9IiIgbG9hZGluZz0ibGF6eSIgZGVjb2Rpbmc9ImFzeW5jIiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9XCdub25lXCc7dGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheT1cJ2Jsb2NrXCciPic7CiAgICB9CiAgICB2YXIgcGxhY2Vob2xkZXJTdHlsZSA9IGljb25VcmwgPyAnZGlzcGxheTpub25lJyA6ICcnOwoKICAgIHJvdy5pbm5lckhUTUwgPQogICAgICAnPGRpdiBjbGFzcz0iaXRlbS10aHVtYiI+JyArIHRodW1iQ29udGVudCArCiAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtLXRodW1iLXBsYWNlaG9sZGVyIiBzdHlsZT0iJyArIHBsYWNlaG9sZGVyU3R5bGUgKyAnIj7wn46uPC9zcGFuPjwvZGl2PicgKwogICAgICAnPGRpdiBjbGFzcz0iaXRlbS1jb250ZW50Ij4nICsKICAgICAgICAnPGRpdiBjbGFzcz0iaXRlbS10aXRsZSI+JyArIGVzYyhpdGVtLm5hbWUpICsgJzwvZGl2PicgKwogICAgICAgICc8ZGl2IGNsYXNzPSJpdGVtLXNpemUiPicgKyBzaXplRGlzcGxheSArICc8L2Rpdj4nICsKICAgICAgICAoc2NvcmVWYWwgPiAwID8gJzxkaXYgY2xhc3M9Iml0ZW0tbWV0YSI+U2NvcmU6ICcgKyBzY29yZVZhbCArICc8L2Rpdj4nIDogJycpICsKICAgICAgJzwvZGl2PicgKwogICAgICAnPGRpdiBjbGFzcz0iaXRlbS1jaGVja2JveCI+PC9kaXY+JzsKCiAgICBpZiAoaXNTZWxlY3RlZCkgcm93LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7CgogICAgLy8gTG9uZyBwcmVzcyBmb3IgZ2FtZSBpbmZvCiAgICB2YXIgcHJlc3NUaW1lciA9IG51bGwsIHByZXNzVHJpZ2dlcmVkID0gZmFsc2U7CiAgICB2YXIgc3RhcnRQcmVzcyA9IGZ1bmN0aW9uKCkgewogICAgICBwcmVzc1RyaWdnZXJlZCA9IGZhbHNlOwogICAgICBwcmVzc1RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBwcmVzc1RyaWdnZXJlZCA9IHRydWU7CiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2xvbmctcHJlc3MtYWN0aXZlJyk7CiAgICAgICAgc2hvd0dhbWVJbmZvKGl0ZW0pOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdsb25nLXByZXNzLWFjdGl2ZScpOyB9LCAyMDApOwogICAgICB9LCBMT05HX1BSRVNTX0RVUkFUSU9OKTsKICAgIH07CiAgICB2YXIgZW5kUHJlc3MgPSBmdW5jdGlvbihldikgewogICAgICBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7CiAgICAgIGlmIChwcmVzc1RyaWdnZXJlZCkgeyBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTsgfQogICAgfTsKICAgIHZhciBjYW5jZWxQcmVzcyA9IGZ1bmN0aW9uKCkgeyBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7IH07CgogICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydFByZXNzLCB7IHBhc3NpdmU6IHRydWUgfSk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlbmRQcmVzcyk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBjYW5jZWxQcmVzcyk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2FuY2VsUHJlc3MpOwogICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGV2KSB7IGlmIChldi5idXR0b24gPT09IDApIHN0YXJ0UHJlc3MoKTsgfSk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZFByZXNzKTsKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgY2FuY2VsUHJlc3MpOwoKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7CiAgICAgIGlmIChldi50YXJnZXQuY2xvc2VzdCgnLml0ZW0nKSAmJiBldi50YXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5jbGFzc0xpc3QuY29udGFpbnMoJ2xvbmctcHJlc3MtYWN0aXZlJykpIHJldHVybjsKICAgICAgaWYgKGV2LmFsdEtleSkgeyBzaG93R2FtZUluZm8oaXRlbSk7IHJldHVybjsgfQogICAgICB0b2dnbGVTZWxlY3QoaXRlbSwgcm93KTsKICAgIH0pOwoKICAgIGxlZnRQYW5lLmFwcGVuZENoaWxkKHJvdyk7CiAgfSk7CgogIHVwZGF0ZUNUQUJ1dHRvbigpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBTRUxFQ1RJT04gPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gdG9nZ2xlU2VsZWN0KGl0ZW0sIHJvd0VsKSB7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICBpZiAoIWNzKSByZXR1cm47CiAgdmFyIGlkeCA9IGNzLnNlbGVjdGVkLmZpbmRJbmRleChmdW5jdGlvbihzKSB7IHJldHVybiBzLm5hbWUgPT09IGl0ZW0ubmFtZTsgfSk7CiAgaWYgKGlkeCA+PSAwKSB7CiAgICAvLyBBbHdheXMgYWxsb3cgZGVzZWxlY3RpbmcKICAgIGNzLnNlbGVjdGVkLnNwbGljZShpZHgsIDEpOwogICAgaWYgKHJvd0VsKSByb3dFbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpOwogIH0gZWxzZSB7CiAgICAvLyBSZXF1aXJlIG5hbWUgYmVmb3JlIHNlbGVjdGluZwogICAgaWYgKCFyZXF1aXJlQ3VzdG9tZXJOYW1lKCkpIHJldHVybjsKICAgIGNzLnNlbGVjdGVkLnB1c2goeyBuYW1lOiBpdGVtLm5hbWUsIGZpbGVuYW1lOiBpdGVtLmZpbGVuYW1lIHx8IGl0ZW0ubmFtZSwgc2l6ZTogaXRlbS5zaXplIH0pOwogICAgaWYgKHJvd0VsKSByb3dFbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIH0KICBfbGlzdERpcnR5ID0gdHJ1ZTsKICB1cGRhdGVUb3RhbHMoKTsKICByZW5kZXJPdmVybGF5KCk7CiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICBidWlsZE1peFRhYnMoKTsKICAgIHVwZGF0ZUNvbnNvbGVDaGlwcygpOwogICAgdXBkYXRlR3JhbmRUb3RhbCgpOwogIH0gZWxzZSB7CiAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFRPVEFMUyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiB1cGRhdGVUb3RhbHMoKSB7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgaWYgKCFjcyB8fCAhY2ZnKSByZXR1cm47CgogIHZhciB0b3RhbEJ5dGVzID0gY3Muc2VsZWN0ZWQucmVkdWNlKGZ1bmN0aW9uKHN1bSwgcykgeyByZXR1cm4gc3VtICsgcGFyc2VTaXplVGV4dChzLnNpemUpOyB9LCAwKTsKICB2YXIgZ2IgPSBieXRlc1RvR0IodG90YWxCeXRlcyk7CgogIHZhciBzZWxlY3RlZFNpemVFbCA9ICQoJ3NlbGVjdGVkU2l6ZScpOwogIGlmIChzZWxlY3RlZFNpemVFbCkgc2VsZWN0ZWRTaXplRWwudGV4dENvbnRlbnQgPSBnYi50b0ZpeGVkKDIpOwogIHZhciBzZWxlY3RlZFNpemVEaXNwbGF5ID0gJCgnc2VsZWN0ZWRTaXplRGlzcGxheScpOwogIGlmIChzZWxlY3RlZFNpemVEaXNwbGF5KSBzZWxlY3RlZFNpemVEaXNwbGF5LnRleHRDb250ZW50ID0gZ2IudG9GaXhlZCgxKTsKCiAgLy8gVGltZSBlc3RpbWF0ZQogIHZhciBibG9hdGVkID0gdG90YWxCeXRlcyAqIDEuMjsKICB2YXIgc3BlZWQgPSAxNCAqIDEwMjQgKiAxMDI0OwogIHZhciBzZWNzID0gTWF0aC5jZWlsKGJsb2F0ZWQgLyBzcGVlZCk7CiAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcihzZWNzIC8gMzYwMCk7CiAgdmFyIG1pbnMgPSBNYXRoLmZsb29yKChzZWNzICUgMzYwMCkgLyA2MCk7CiAgdmFyIGluc3RhbGxFbCA9ICQoJ2luc3RhbGxFc3RpbWF0ZScpOwogIGlmIChpbnN0YWxsRWwpIGluc3RhbGxFbC50ZXh0Q29udGVudCA9IGhvdXJzID4gMCA/ICd+JyArIGhvdXJzICsgJ2ggJyArIG1pbnMgKyAnbScgOiAnficgKyBtaW5zICsgJ20nOwoKICB2YXIgY291bnRFbCA9ICQoJ2NvdW50Jyk7CiAgaWYgKGNvdW50RWwpIGNvdW50RWwudGV4dENvbnRlbnQgPSBjcy5zZWxlY3RlZC5sZW5ndGg7CiAgdmFyIHBhbmVsQ291bnQgPSAkKCdzZWxlY3RlZFBhbmVsQ291bnQnKTsKICBpZiAocGFuZWxDb3VudCkgcGFuZWxDb3VudC50ZXh0Q29udGVudCA9IGNzLnNlbGVjdGVkLmxlbmd0aCArICcgaXRlbScgKyAoY3Muc2VsZWN0ZWQubGVuZ3RoICE9PSAxID8gJ3MnIDogJycpOwoKICAvLyBTdG9yYWdlCiAgdmFyIHZhbHVlcyA9IGdldENvbnRyb2xWYWx1ZXMoKTsKICB2YXIgc3BhY2VGb3JHYW1lcyA9IGNmZy5jYWxjdWxhdGVTdG9yYWdlKHZhbHVlcyk7CiAgdmFyIHRvdGFsQ2FwYWNpdHkgPSBpc0Zpbml0ZShzcGFjZUZvckdhbWVzKSA/IHNwYWNlRm9yR2FtZXMgOiAwOwoKICB2YXIgc3BhY2VFbCA9ICQoJ3NwYWNlJyk7CiAgaWYgKHNwYWNlRWwpIHNwYWNlRWwudGV4dENvbnRlbnQgPSB0b3RhbENhcGFjaXR5OwoKICB2YXIgZnJlZVNwYWNlID0gTWF0aC5tYXgoMCwgdG90YWxDYXBhY2l0eSAtIGdiKTsKICB2YXIgZnJlZVNwYWNlRWwgPSAkKCdmcmVlU3BhY2UnKTsKICBpZiAoZnJlZVNwYWNlRWwpIGZyZWVTcGFjZUVsLnRleHRDb250ZW50ID0gZnJlZVNwYWNlLnRvRml4ZWQoMSk7CiAgdmFyIHVzZWRTcGFjZUVsID0gJCgndXNlZFNwYWNlJyk7CiAgaWYgKHVzZWRTcGFjZUVsKSB1c2VkU3BhY2VFbC50ZXh0Q29udGVudCA9ICcwJzsKCiAgLy8gUHJvZ3Jlc3MKICBpZiAodG90YWxDYXBhY2l0eSA+IDApIHsKICAgIHZhciBzZWxlY3RlZFBlcmNlbnQgPSBNYXRoLm1pbigoZ2IgLyB0b3RhbENhcGFjaXR5KSAqIDEwMCwgMTAwKTsKICAgICQoJ3Byb2dyZXNzVXNlZCcpLnN0eWxlLndpZHRoID0gJzAlJzsKICAgICQoJ3Byb2dyZXNzU2VsZWN0ZWQnKS5zdHlsZS53aWR0aCA9IHNlbGVjdGVkUGVyY2VudCArICclJzsKICB9IGVsc2UgewogICAgJCgncHJvZ3Jlc3NVc2VkJykuc3R5bGUud2lkdGggPSAnMCUnOwogICAgJCgncHJvZ3Jlc3NTZWxlY3RlZCcpLnN0eWxlLndpZHRoID0gJzAlJzsKICB9CgogIC8vIFdhcm5pbmcKICB2YXIgY3RhVXBsb2FkID0gJCgnY3RhVXBsb2FkJyk7CiAgaWYgKGN0YVVwbG9hZCkgewogICAgaWYgKHRvdGFsQ2FwYWNpdHkgPiAwICYmIGdiID4gdG90YWxDYXBhY2l0eSkgewogICAgICBjdGFVcGxvYWQuY2xhc3NMaXN0LmFkZCgnd2FybmluZycpOwogICAgICAkKCdjdGFUZXh0JykudGV4dENvbnRlbnQgPSAnRXhjZWVkcyBMaW1pdCEnOwogICAgfSBlbHNlIHsKICAgICAgY3RhVXBsb2FkLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKTsKICAgICAgJCgnY3RhVGV4dCcpLnRleHRDb250ZW50ID0gJ1VwbG9hZCc7CiAgICB9CiAgfQoKICAvLyBDb2xvciBkYW5nZXIKICBpZiAoZ2IgPiB0b3RhbENhcGFjaXR5ICYmIHRvdGFsQ2FwYWNpdHkgPiAwKSB7CiAgICBpZiAoc2VsZWN0ZWRTaXplRWwpIHsgc2VsZWN0ZWRTaXplRWwuc3R5bGUuY29sb3IgPSAndmFyKC0tZGFuZ2VyKSc7IHNlbGVjdGVkU2l6ZUVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7IH0KICAgIGlmIChzZWxlY3RlZFNpemVEaXNwbGF5KSBzZWxlY3RlZFNpemVEaXNwbGF5LnN0eWxlLmNvbG9yID0gJ3ZhcigtLWRhbmdlciknOwogIH0gZWxzZSB7CiAgICBpZiAoc2VsZWN0ZWRTaXplRWwpIHsgc2VsZWN0ZWRTaXplRWwuc3R5bGUuY29sb3IgPSAnJzsgc2VsZWN0ZWRTaXplRWwuc3R5bGUuZm9udFdlaWdodCA9ICcnOyB9CiAgICBpZiAoc2VsZWN0ZWRTaXplRGlzcGxheSkgc2VsZWN0ZWRTaXplRGlzcGxheS5zdHlsZS5jb2xvciA9ICcnOwogIH0KCiAgLy8gQ1RBIGJhZGdlIC0gdG90YWwgYWNyb3NzIGFsbCBjb25zb2xlcyBpbiBtaXggbW9kZQogIHZhciB0b3RhbENvdW50ID0gMDsKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgdG90YWxDb3VudCArPSBnZXRDb25zb2xlU3RhdGUoaWQpLnNlbGVjdGVkLmxlbmd0aDsKICAgIH0pOwogIH0gZWxzZSB7CiAgICB0b3RhbENvdW50ID0gY3Muc2VsZWN0ZWQubGVuZ3RoOwogIH0KICAkKCdjdGFCYWRnZScpLnRleHRDb250ZW50ID0gdG90YWxDb3VudDsKCiAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7CiAgdXBkYXRlQ1RBQnV0dG9uKCk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUNUQUJ1dHRvbigpIHsKICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MpIHJldHVybjsKCiAgdmFyIHRvdGFsQ291bnQgPSAwLCB0b3RhbEJ5dGVzID0gMDsKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgdmFyIHMgPSBnZXRDb25zb2xlU3RhdGUoaWQpOwogICAgICB0b3RhbENvdW50ICs9IHMuc2VsZWN0ZWQubGVuZ3RoOwogICAgICB0b3RhbEJ5dGVzICs9IHMuc2VsZWN0ZWQucmVkdWNlKGZ1bmN0aW9uKHN1bSwgc2VsKSB7IHJldHVybiBzdW0gKyBwYXJzZVNpemVUZXh0KHNlbC5zaXplKTsgfSwgMCk7CiAgICB9KTsKICB9IGVsc2UgewogICAgdG90YWxDb3VudCA9IGNzLnNlbGVjdGVkLmxlbmd0aDsKICAgIHRvdGFsQnl0ZXMgPSBjcy5zZWxlY3RlZC5yZWR1Y2UoZnVuY3Rpb24oc3VtLCBzKSB7IHJldHVybiBzdW0gKyBwYXJzZVNpemVUZXh0KHMuc2l6ZSk7IH0sIDApOwogIH0KCiAgdmFyIGdiID0gYnl0ZXNUb0dCKHRvdGFsQnl0ZXMpLnRvRml4ZWQoMSk7CiAgdmFyIGN0YVRleHQgPSAkKCdjdGFUZXh0Jyk7CiAgaWYgKCEkKCdjdGFVcGxvYWQnKS5jbGFzc0xpc3QuY29udGFpbnMoJ3dhcm5pbmcnKSkgewogICAgY3RhVGV4dC50ZXh0Q29udGVudCA9IHRvdGFsQ291bnQgPiAwCiAgICAgID8gJ1VwbG9hZCAnICsgdG90YWxDb3VudCArICcgR2FtZScgKyAodG90YWxDb3VudCAhPT0gMSA/ICdzJyA6ICcnKSArICcgKCcgKyBnYiArICcgR0IpJwogICAgICA6ICdVcGxvYWQgU2VsZWN0aW9uJzsKICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IEdSQU5EIFRPVEFMIChNSVgpID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHVwZGF0ZUdyYW5kVG90YWwoKSB7CiAgaWYgKHN0YXRlLm1vZGUgIT09ICdtaXgnKSByZXR1cm47CgogIHZhciBicmVha2Rvd24gPSAkKCdncmFuZFRvdGFsQnJlYWtkb3duJyk7CiAgYnJlYWtkb3duLmlubmVySFRNTCA9ICcnOwogIHZhciBncmFuZFRpdGxlcyA9IDAsIGdyYW5kQnl0ZXMgPSAwOwoKICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICB2YXIgY2ZnID0gQ09OU09MRVNbaWRdOwogICAgdmFyIGNzID0gZ2V0Q29uc29sZVN0YXRlKGlkKTsKICAgIHZhciBjb3VudCA9IGNzLnNlbGVjdGVkLmxlbmd0aDsKICAgIHZhciBieXRlcyA9IGNzLnNlbGVjdGVkLnJlZHVjZShmdW5jdGlvbihzdW0sIHMpIHsgcmV0dXJuIHN1bSArIHBhcnNlU2l6ZVRleHQocy5zaXplKTsgfSwgMCk7CiAgICB2YXIgZ2IgPSBieXRlc1RvR0IoYnl0ZXMpOwogICAgZ3JhbmRUaXRsZXMgKz0gY291bnQ7CiAgICBncmFuZEJ5dGVzICs9IGJ5dGVzOwoKICAgIC8vIENoZWNrIHN0b3JhZ2UgbGltaXQgZm9yIHRoaXMgY29uc29sZQogICAgdmFyIHZhbHVlcyA9IHt9OwogICAgY2ZnLnN0b3JhZ2VDb250cm9scy5mb3JFYWNoKGZ1bmN0aW9uKGN0cmwpIHsKICAgICAgdmFyIGVsID0gJCgnY3RybF8nICsgaWQgKyAnXycgKyBjdHJsLmlkKTsKICAgICAgdmFsdWVzW2N0cmwuaWRdID0gZWwgPyBlbC52YWx1ZSA6IChjc1snX2N0cmxfJyArIGN0cmwuaWRdIHx8IGN0cmwuZGVmYXVsdCk7CiAgICB9KTsKICAgIHZhciBjYXBhY2l0eSA9IGNmZy5jYWxjdWxhdGVTdG9yYWdlKHZhbHVlcyk7CiAgICB2YXIgZXhjZWVkZWQgPSBjYXBhY2l0eSA+IDAgJiYgZ2IgPiBjYXBhY2l0eTsKCiAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICByb3cuY2xhc3NOYW1lID0gJ2dyYW5kLXRvdGFsLXJvdycgKyAoZXhjZWVkZWQgPyAnIGV4Y2VlZGVkJyA6ICcnKTsKICAgIHJvdy5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9ImNvbnNvbGUtbGFiZWwiPicgKyBjZmcubGFiZWwgKyAnPC9zcGFuPicgKwogICAgICAnPHNwYW4+JyArIGNvdW50ICsgJyB0aXRsZXMgLyAnICsgZ2IudG9GaXhlZCgxKSArICcgR0InICsKICAgICAgKGV4Y2VlZGVkID8gJyAoT1ZFUiEpJyA6ICcnKSArICc8L3NwYW4+JzsKICAgIGJyZWFrZG93bi5hcHBlbmRDaGlsZChyb3cpOwogIH0pOwoKICB2YXIgZ3JhbmRHQiA9IGJ5dGVzVG9HQihncmFuZEJ5dGVzKTsKICAkKCdncmFuZFRvdGFsU2l6ZScpLnRleHRDb250ZW50ID0gZ3JhbmRUaXRsZXMgKyAnIHRpdGxlcyAvICcgKyBncmFuZEdCLnRvRml4ZWQoMSkgKyAnIEdCJzsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gRklMRU5BTUUgUFJFVklFVyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKSB7CiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIGlmICghY2ZnKSB7ICQoJ2ZpbGVuYW1lUHJldmlldycpLnRleHRDb250ZW50ID0gJ1NlbGVjdCBhIGNvbnNvbGUuLi4nOyByZXR1cm47IH0KCiAgdmFyIGN1c3RvbWVyID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJ2N1c3RvbWVyJykudHJpbSgpLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpLnRvTG93ZXJDYXNlKCk7CiAgdmFyIHZhbHVlcyA9IGdldENvbnRyb2xWYWx1ZXMoKTsKICB2YXIgdG9rZW5zID0gW2N1c3RvbWVyXTsKCiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICB0b2tlbnMucHVzaCgnTUlYJyk7CiAgfQoKICBjZmcuc3RvcmFnZUNvbnRyb2xzLmZvckVhY2goZnVuY3Rpb24oY3RybCkgewogICAgaWYgKGN0cmwuZmlsZW5hbWVUb2tlbikgewogICAgICB2YXIgdmFsID0gdmFsdWVzW2N0cmwuaWRdIHx8IGN0cmwuZGVmYXVsdDsKICAgICAgdmFyIHRva2VuID0gY3RybC5maWxlbmFtZVRva2VuID09PSB0cnVlID8gdmFsIDogKGN0cmwuZmlsZW5hbWVUb2tlbiArIHZhbCk7CiAgICAgIHRva2Vucy5wdXNoKHRva2VuKTsKICAgIH0KICB9KTsKCiAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgdmFyIHN0YW1wID0gbm93LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArCiAgICBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgJzAnKTsKICB0b2tlbnMucHVzaChzdGFtcCk7CgogIHZhciBleHQgPSBzdGF0ZS5tb2RlID09PSAnbWl4JyA/ICcuQ0xJX1BSTVpNSVgnIDogY2ZnLmNsaWVudEZpbGVFeHQ7CiAgJCgnZmlsZW5hbWVQcmV2aWV3JykudGV4dENvbnRlbnQgPSB0b2tlbnMuam9pbignXycpICsgZXh0Owp9CgokKCdjdXN0b21lcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZGVib3VuY2UoZnVuY3Rpb24oKSB7CiAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7CiAgdmFyIGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnJykudHJpbSgpOwogIGRvY3VtZW50LnRpdGxlID0gY3VzdCA/ICdQcmVtYXppbmdQSCBHYW1lcyAtICcgKyBjdXN0IDogJ1ByZW1hemluZ1BIIEdhbWVzJzsKICBpZiAoY3VzdCkgc2F2ZUN1c3RvbWVyTmFtZShjdXN0KTsKfSwgNTAwKSk7CgovLyA9PT09PT09PT09PT09PT09PT09PSBTRUFSQ0ggPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gc21hcnRTZWFyY2goaXRlbXMsIHF1ZXJ5KSB7CiAgaWYgKCFxdWVyeSB8fCAhcXVlcnkudHJpbSgpKSByZXR1cm4gaXRlbXM7CiAgdmFyIHEgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICB2YXIgdGVybXMgPSBbXTsKICB2YXIgcXVvdGVSZWdleCA9IC8iKFteIl0rKSJ8JyhbXiddKyknfChcUyspL2c7CiAgdmFyIG1hdGNoOwogIHdoaWxlICgobWF0Y2ggPSBxdW90ZVJlZ2V4LmV4ZWMocSkpICE9PSBudWxsKSB7CiAgICB0ZXJtcy5wdXNoKChtYXRjaFsxXSB8fCBtYXRjaFsyXSB8fCBtYXRjaFszXSkudG9Mb3dlckNhc2UoKSk7CiAgfQogIGlmICh0ZXJtcy5sZW5ndGggPT09IDApIHJldHVybiBpdGVtczsKICByZXR1cm4gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciBzZWFyY2hUZXh0ID0gKGl0ZW0ubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXlx3XHNdL2csICcgJyk7CiAgICByZXR1cm4gdGVybXMuZXZlcnkoZnVuY3Rpb24odGVybSkgeyByZXR1cm4gc2VhcmNoVGV4dC5pbmNsdWRlcyh0ZXJtKTsgfSk7CiAgfSk7Cn0KCiQoJ3NlYXJjaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZGVib3VuY2UoZnVuY3Rpb24oZSkgewogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgaWYgKCFjcykgcmV0dXJuOwogIGNzLnNlYXJjaFF1ZXJ5ID0gZS50YXJnZXQudmFsdWUgfHwgJyc7CiAgcmVuZGVyTGlzdChjcy5pdGVtcyk7Cn0sIDE4MCkpOwoKJCgnY2xlYXJTZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICQoJ3NlYXJjaCcpLnZhbHVlID0gJyc7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICBpZiAoY3MpIHsgY3Muc2VhcmNoUXVlcnkgPSAnJzsgcmVuZGVyTGlzdChjcy5pdGVtcyk7IH0KfSk7CgovLyBEb3VibGUtY2xpY2sgWCBidXR0b24gPSBoYXJkIHJlZnJlc2gKJCgnY2xlYXJTZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uKCkgewogIGxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKfSk7CgovLyBFbnRlciBrZXkgPSBhZGQgYWxsIHZpc2libGUgdG8gc2VsZWN0aW9uCiQoJ3NlYXJjaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldikgewogIGlmIChldi5rZXkgIT09ICdFbnRlcicpIHJldHVybjsKICBldi5wcmV2ZW50RGVmYXVsdCgpOwogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgaWYgKCFjcykgcmV0dXJuOwoKICB2YXIgdmlzaWJsZUl0ZW1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLm9mZnNldFBhcmVudCAhPT0gbnVsbDsgfSk7CiAgdmFyIHRvQWRkID0gdmlzaWJsZUl0ZW1zLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gIWNzLnNlbGVjdGVkLnNvbWUoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5uYW1lID09PSBlbC5kYXRhc2V0Lm5hbWU7IH0pOyB9KTsKCiAgaWYgKHRvQWRkLmxlbmd0aCA9PT0gMCkgeyBzaG93VG9hc3QoJ0FsbCB2aXNpYmxlIGl0ZW1zIGFscmVhZHkgc2VsZWN0ZWQnKTsgcmV0dXJuOyB9CgogIHZhciB0b3RhbEJ5dGVzID0gMDsKICB0b0FkZC5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7IHRvdGFsQnl0ZXMgKz0gcGFyc2VTaXplVGV4dChlbC5kYXRhc2V0LnNpemUpOyB9KTsKICB2YXIgdG90YWxHQiA9IGJ5dGVzVG9HQih0b3RhbEJ5dGVzKS50b0ZpeGVkKDIpOwoKICBpZiAoIWNvbmZpcm0oJ0FkZCAnICsgdG9BZGQubGVuZ3RoICsgJyBnYW1lKHMpIGZyb20gc2VhcmNoIHJlc3VsdHM/XG5cblRvdGFsIHNpemU6ICcgKyB0b3RhbEdCICsgJyBHQicpKSByZXR1cm47CgogIHRvQWRkLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgIGNzLnNlbGVjdGVkLnB1c2goeyBuYW1lOiBlbC5kYXRhc2V0Lm5hbWUsIGZpbGVuYW1lOiBlbC5kYXRhc2V0LmZpbGVuYW1lIHx8IGVsLmRhdGFzZXQubmFtZSwgc2l6ZTogZWwuZGF0YXNldC5zaXplIH0pOwogICAgZWwuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICB9KTsKCiAgdXBkYXRlVG90YWxzKCk7CiAgcmVuZGVyT3ZlcmxheSgpOwogIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgeyBidWlsZE1peFRhYnMoKTsgdXBkYXRlR3JhbmRUb3RhbCgpOyB9CiAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgc2hvd1RvYXN0KCdBZGRlZCAnICsgdG9BZGQubGVuZ3RoICsgJyBpdGVtcycpOwogIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHZhciBzID0gJCgnc2VhcmNoJyk7IHMuZm9jdXMoKTsgcy5zZWxlY3QoKTsgfSwgMCk7Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gT1ZFUkxBWSA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiByZW5kZXJPdmVybGF5U3RhdHMoKSB7CiAgdmFyIHN0YXRzRWwgPSAkKCdvdmVybGF5U3RhdHMnKTsKICBpZiAoIXN0YXRzRWwpIHJldHVybjsKCiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICAvLyBQZXItY29uc29sZSBicmVha2Rvd24KICAgIHZhciBodG1sID0gJyc7CiAgICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgIHZhciBjZmcgPSBDT05TT0xFU1tpZF07CiAgICAgIHZhciBjcyA9IGdldENvbnNvbGVTdGF0ZShpZCk7CiAgICAgIGlmIChjcy5zZWxlY3RlZC5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgdmFyIGJ5dGVzID0gY3Muc2VsZWN0ZWQucmVkdWNlKGZ1bmN0aW9uKHN1bSwgcykgeyByZXR1cm4gc3VtICsgcGFyc2VTaXplVGV4dChzLnNpemUpOyB9LCAwKTsKICAgICAgdmFyIGdiID0gYnl0ZXNUb0dCKGJ5dGVzKTsKICAgICAgdmFyIHZhbHVlcyA9IHt9OwogICAgICBjZmcuc3RvcmFnZUNvbnRyb2xzLmZvckVhY2goZnVuY3Rpb24oY3RybCkgewogICAgICAgIHZhciBlbCA9ICQoJ2N0cmxfJyArIGlkICsgJ18nICsgY3RybC5pZCk7CiAgICAgICAgdmFsdWVzW2N0cmwuaWRdID0gZWwgPyBlbC52YWx1ZSA6IGN0cmwuZGVmYXVsdDsKICAgICAgfSk7CiAgICAgIHZhciBjYXAgPSBjZmcuY2FsY3VsYXRlU3RvcmFnZSh2YWx1ZXMpOwogICAgICB2YXIgY2FwVmFsaWQgPSBpc0Zpbml0ZShjYXApICYmIGNhcCA+IDA7CiAgICAgIHZhciByZW0gPSBjYXBWYWxpZCA/IE1hdGgubWF4KDAsIGNhcCAtIGdiKSA6IG51bGw7CiAgICAgIHZhciBvdmVyID0gY2FwVmFsaWQgJiYgZ2IgPiBjYXA7CiAgICAgIGh0bWwgKz0gJzxkaXYgc3R5bGU9InBhZGRpbmc6OHB4IDAgNHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7bWFyZ2luLWJvdHRvbTo0cHgiPicgKwogICAgICAgICc8ZGl2IHN0eWxlPSJmb250LXNpemU6MTFweDtmb250LXdlaWdodDo3MDA7Y29sb3I6JyArIGNmZy5jb2xvciArICc7bWFyZ2luLWJvdHRvbTo2cHgiPicgKyBjZmcubGFiZWwgKyAnPC9kaXY+JyArCiAgICAgICAgJzxkaXYgY2xhc3M9Im92ZXJsYXktc3RhdHMiPicgKwogICAgICAgICAgKGNhcFZhbGlkID8gJzxkaXYgY2xhc3M9Im9zdCI+PGRpdiBjbGFzcz0ib3N0LWxhYmVsIj5BbGxvY2F0aW9uPC9kaXY+PGRpdiBjbGFzcz0ib3N0LXZhbCI+JyArIGNhcC50b0ZpeGVkKDEpICsgJyBHQjwvZGl2PjwvZGl2PicgOiAnJykgKwogICAgICAgICAgJzxkaXYgY2xhc3M9Im9zdCI+PGRpdiBjbGFzcz0ib3N0LWxhYmVsIj5TZWxlY3RlZDwvZGl2PjxkaXYgY2xhc3M9Im9zdC12YWwnICsgKG92ZXIgPyAnIGRhbmdlcicgOiAnJykgKyAnIj4nICsgZ2IudG9GaXhlZCgyKSArICcgR0I8L2Rpdj48L2Rpdj4nICsKICAgICAgICAgIChjYXBWYWxpZCA/ICc8ZGl2IGNsYXNzPSJvc3QiPjxkaXYgY2xhc3M9Im9zdC1sYWJlbCI+UmVtYWluaW5nPC9kaXY+PGRpdiBjbGFzcz0ib3N0LXZhbCcgKyAob3ZlciA/ICcgZGFuZ2VyJyA6ICcgb2snKSArICciPicgKyAob3ZlciA/ICctJyArIChnYiAtIGNhcCkudG9GaXhlZCgyKSA6IHJlbS50b0ZpeGVkKDIpKSArICcgR0I8L2Rpdj48L2Rpdj4nIDogJycpICsKICAgICAgICAgICc8ZGl2IGNsYXNzPSJvc3QiPjxkaXYgY2xhc3M9Im9zdC1sYWJlbCI+VGl0bGVzPC9kaXY+PGRpdiBjbGFzcz0ib3N0LXZhbCI+JyArIGNzLnNlbGVjdGVkLmxlbmd0aCArICc8L2Rpdj48L2Rpdj4nICsKICAgICAgICAgIChjYXBWYWxpZCA/ICc8ZGl2IGNsYXNzPSJvdmVybGF5LXN0YXRzLWJhciI+PGRpdiBjbGFzcz0ib3ZlcmxheS1zdGF0cy1iYXItZmlsbCcgKyAob3ZlciA/ICcgZGFuZ2VyJyA6ICcnKSArICciIHN0eWxlPSJ3aWR0aDonICsgTWF0aC5taW4oMTAwLCAoZ2IvY2FwKSoxMDApLnRvRml4ZWQoMSkgKyAnJSI+PC9kaXY+PC9kaXY+JyA6ICcnKSArCiAgICAgICAgJzwvZGl2PicgKwogICAgICAnPC9kaXY+JzsKICAgIH0pOwogICAgc3RhdHNFbC5pbm5lckhUTUwgPSBodG1sIHx8ICcnOwogICAgc3RhdHNFbC5zdHlsZS5kaXNwbGF5ID0gaHRtbCA/ICdibG9jaycgOiAnbm9uZSc7CiAgfSBlbHNlIHsKICAgIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgICBpZiAoIWNzIHx8ICFjZmcpIHsgc3RhdHNFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyByZXR1cm47IH0KICAgIHZhciBieXRlcyA9IGNzLnNlbGVjdGVkLnJlZHVjZShmdW5jdGlvbihzdW0sIHMpIHsgcmV0dXJuIHN1bSArIHBhcnNlU2l6ZVRleHQocy5zaXplKTsgfSwgMCk7CiAgICB2YXIgZ2IgPSBieXRlc1RvR0IoYnl0ZXMpOwogICAgdmFyIHZhbHVlcyA9IGdldENvbnRyb2xWYWx1ZXMoKTsKICAgIHZhciBjYXAgPSBjZmcuY2FsY3VsYXRlU3RvcmFnZSh2YWx1ZXMpOwogICAgdmFyIGNhcFZhbGlkID0gaXNGaW5pdGUoY2FwKSAmJiBjYXAgPiAwOwogICAgdmFyIHJlbSA9IGNhcFZhbGlkID8gTWF0aC5tYXgoMCwgY2FwIC0gZ2IpIDogbnVsbDsKICAgIHZhciBvdmVyID0gY2FwVmFsaWQgJiYgZ2IgPiBjYXA7CiAgICBzdGF0c0VsLmlubmVySFRNTCA9CiAgICAgICc8ZGl2IGNsYXNzPSJvdmVybGF5LXN0YXRzIj4nICsKICAgICAgICAoY2FwVmFsaWQgPyAnPGRpdiBjbGFzcz0ib3N0Ij48ZGl2IGNsYXNzPSJvc3QtbGFiZWwiPkFsbG9jYXRpb248L2Rpdj48ZGl2IGNsYXNzPSJvc3QtdmFsIj4nICsgY2FwLnRvRml4ZWQoMSkgKyAnIEdCPC9kaXY+PC9kaXY+JyA6ICcnKSArCiAgICAgICAgJzxkaXYgY2xhc3M9Im9zdCI+PGRpdiBjbGFzcz0ib3N0LWxhYmVsIj5TZWxlY3RlZDwvZGl2PjxkaXYgY2xhc3M9Im9zdC12YWwnICsgKG92ZXIgPyAnIGRhbmdlcicgOiAnJykgKyAnIj4nICsgZ2IudG9GaXhlZCgyKSArICcgR0I8L2Rpdj48L2Rpdj4nICsKICAgICAgICAoY2FwVmFsaWQgPyAnPGRpdiBjbGFzcz0ib3N0Ij48ZGl2IGNsYXNzPSJvc3QtbGFiZWwiPlJlbWFpbmluZzwvZGl2PjxkaXYgY2xhc3M9Im9zdC12YWwnICsgKG92ZXIgPyAnIGRhbmdlcicgOiAnIG9rJykgKyAnIj4nICsgKG92ZXIgPyAnLScgKyAoZ2IgLSBjYXApLnRvRml4ZWQoMikgOiByZW0udG9GaXhlZCgyKSkgKyAnIEdCPC9kaXY+PC9kaXY+JyA6ICcnKSArCiAgICAgICAgJzxkaXYgY2xhc3M9Im9zdCI+PGRpdiBjbGFzcz0ib3N0LWxhYmVsIj5UaXRsZXM8L2Rpdj48ZGl2IGNsYXNzPSJvc3QtdmFsIj4nICsgY3Muc2VsZWN0ZWQubGVuZ3RoICsgJzwvZGl2PjwvZGl2PicgKwogICAgICAgIChjYXBWYWxpZCA/ICc8ZGl2IGNsYXNzPSJvdmVybGF5LXN0YXRzLWJhciI+PGRpdiBjbGFzcz0ib3ZlcmxheS1zdGF0cy1iYXItZmlsbCcgKyAob3ZlciA/ICcgZGFuZ2VyJyA6ICcnKSArICciIHN0eWxlPSJ3aWR0aDonICsgTWF0aC5taW4oMTAwLCAoZ2IvY2FwKSoxMDApLnRvRml4ZWQoMSkgKyAnJSI+PC9kaXY+PC9kaXY+JyA6ICcnKSArCiAgICAgICc8L2Rpdj4nOwogICAgc3RhdHNFbC5zdHlsZS5kaXNwbGF5ID0gY3Muc2VsZWN0ZWQubGVuZ3RoID4gMCA/ICdibG9jaycgOiAnbm9uZSc7CiAgfQp9CgpmdW5jdGlvbiByZW5kZXJPdmVybGF5KCkgewogIHZhciBvdmVybGF5Qm9keSA9ICQoJ292ZXJsYXlCb2R5Jyk7CiAgb3ZlcmxheUJvZHkuaW5uZXJIVE1MID0gJyc7CiAgdmFyIHNvcnRCeVNpemUgPSAhIXN0YXRlLm92ZXJsYXlTb3J0QnlTaXplOwoKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIC8vIFNob3cgYWxsIGNvbnNvbGVzJyBzZWxlY3Rpb25zIGdyb3VwZWQKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oY29uc29sZUlkKSB7CiAgICAgIHZhciBjZmcgPSBDT05TT0xFU1tjb25zb2xlSWRdOwogICAgICB2YXIgY3MgPSBnZXRDb25zb2xlU3RhdGUoY29uc29sZUlkKTsKICAgICAgaWYgKGNzLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBoZWFkZXIuc3R5bGUuY3NzVGV4dCA9ICdwYWRkaW5nOjhweCAxMnB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjonICsgY2ZnLmNvbG9yICsgJztmb250LXNpemU6MTRweDttYXJnaW4tdG9wOjhweDsnOwogICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBjZmcubGFiZWwgKyAnICgnICsgY3Muc2VsZWN0ZWQubGVuZ3RoICsgJyknOwogICAgICBvdmVybGF5Qm9keS5hcHBlbmRDaGlsZChoZWFkZXIpOwoKICAgICAgLy8gZGlzcGxheSBvcmRlcjogc29ydGVkIGJ5IHNpemUgZGVzYywgb3Igb3JpZ2luYWwgKHJlYWwgaW5kaWNlcyBwcmVzZXJ2ZWQpCiAgICAgIHZhciBkaXNwbGF5SXRlbXMgPSBjcy5zZWxlY3RlZC5tYXAoZnVuY3Rpb24ocywgaSkgeyByZXR1cm4geyBzOiBzLCBpOiBpIH07IH0pOwogICAgICBpZiAoc29ydEJ5U2l6ZSkgZGlzcGxheUl0ZW1zID0gZGlzcGxheUl0ZW1zLnNsaWNlKCkuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBwYXJzZVNpemVUZXh0KGIucy5zaXplKSAtIHBhcnNlU2l6ZVRleHQoYS5zLnNpemUpOyB9KTsKICAgICAgZGlzcGxheUl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZCwgcmFuaykgewogICAgICAgIGFwcGVuZE92ZXJsYXlSb3cob3ZlcmxheUJvZHksIGQucywgZC5pLCByYW5rLCBjcywgY29uc29sZUlkKTsKICAgICAgfSk7CiAgICB9KTsKICB9IGVsc2UgewogICAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICAgIGlmICghY3MpIHJldHVybjsKICAgIHZhciBkaXNwbGF5SXRlbXMgPSBjcy5zZWxlY3RlZC5tYXAoZnVuY3Rpb24ocywgaSkgeyByZXR1cm4geyBzOiBzLCBpOiBpIH07IH0pOwogICAgaWYgKHNvcnRCeVNpemUpIGRpc3BsYXlJdGVtcyA9IGRpc3BsYXlJdGVtcy5zbGljZSgpLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gcGFyc2VTaXplVGV4dChiLnMuc2l6ZSkgLSBwYXJzZVNpemVUZXh0KGEucy5zaXplKTsgfSk7CiAgICBkaXNwbGF5SXRlbXMuZm9yRWFjaChmdW5jdGlvbihkLCByYW5rKSB7CiAgICAgIGFwcGVuZE92ZXJsYXlSb3cob3ZlcmxheUJvZHksIGQucywgZC5pLCByYW5rLCBjcywgc3RhdGUuYWN0aXZlQ29uc29sZSk7CiAgICB9KTsKICB9CgogIHZhciB0b3RhbENvdW50ID0gMDsKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsgdG90YWxDb3VudCArPSBnZXRDb25zb2xlU3RhdGUoaWQpLnNlbGVjdGVkLmxlbmd0aDsgfSk7CiAgfSBlbHNlIHsKICAgIHZhciBjczIgPSBhY3RpdmVTdGF0ZSgpOwogICAgdG90YWxDb3VudCA9IGNzMiA/IGNzMi5zZWxlY3RlZC5sZW5ndGggOiAwOwogIH0KICAkKCdvdmVybGF5Q291bnQnKS50ZXh0Q29udGVudCA9IHRvdGFsQ291bnQ7CiAgcmVuZGVyT3ZlcmxheVN0YXRzKCk7CiAgcmVuZGVyU2VsZWN0ZWRQYW5lbCgpOwogIHNhdmVTZWxlY3RlZExpc3QoKTsKfQoKZnVuY3Rpb24gYXBwZW5kT3ZlcmxheVJvdyhjb250YWluZXIsIHMsIGksIHJhbmssIGNzLCBjb25zb2xlSWQpIHsKICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgcm93LmNsYXNzTmFtZSA9ICdyb3cnOwogIHZhciByYXdJY29uID0gY3MuaWNvbkNhY2hlW3MubmFtZV0gPyBjcy5pY29uQ2FjaGVbcy5uYW1lXS5pY29uVXJsIDogbnVsbDsKICB2YXIgaWNvblVybCA9IGlzTGVnYWN5TW9kZSA/IG51bGwgOiByZXNvbHZlQXNzZXRVcmwocmF3SWNvbiwgQ09OU09MRVNbY29uc29sZUlkXSk7CiAgdmFyIHNpemVEaXNwbGF5ID0gZm9ybWF0U2l6ZVRvR0Iocy5zaXplKTsKICByb3cuaW5uZXJIVE1MID0KICAgICc8ZGl2IGNsYXNzPSJpdGVtLXRodW1iIiBzdHlsZT0id2lkdGg6NDRweDtoZWlnaHQ6NDRweDtmbGV4LXNocmluazowIj4nICsKICAgICAgKGljb25VcmwgPyAnPGltZyBzcmM9IicgKyBpY29uVXJsICsgJyIgYWx0PSIiIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo2cHgiPicgOiAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxOHB4Ij7wn46uPC9zcGFuPicpICsKICAgICc8L2Rpdj4nICsKICAgICc8ZGl2IGNsYXNzPSJyb3ctaW5mbyI+PHN0cm9uZz4nICsgKHJhbmsrMSkgKyAnLiAnICsgZXNjKHMubmFtZSkgKyAnPC9zdHJvbmc+PGRpdiBjbGFzcz0ibWV0YSI+JyArIHNpemVEaXNwbGF5ICsgJzwvZGl2PjwvZGl2PicgKwogICAgJzxkaXYgY2xhc3M9InJvdy1hY3Rpb25zIj4nICsKICAgICAgJzxidXR0b24gY2xhc3M9Imljb24gdXAiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41Ij48cGF0aCBkPSJNMTggMTVsLTYtNi02IDYiLz48L3N2Zz48L2J1dHRvbj4nICsKICAgICAgJzxidXR0b24gY2xhc3M9Imljb24gZG93biI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiPjxwYXRoIGQ9Ik02IDlsNiA2IDYtNiIvPjwvc3ZnPjwvYnV0dG9uPicgKwogICAgICAnPGJ1dHRvbiBjbGFzcz0iaWNvbiByZW1vdmUiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41Ij48bGluZSB4MT0iMTgiIHkxPSI2IiB4Mj0iNiIgeTI9IjE4Ii8+PGxpbmUgeDE9IjYiIHkxPSI2IiB4Mj0iMTgiIHkyPSIxOCIvPjwvc3ZnPjwvYnV0dG9uPicgKwogICAgJzwvZGl2Pic7CgogIHJvdy5xdWVyeVNlbGVjdG9yKCcudXAnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgaWYgKGkgPiAwKSB7IHZhciB0bXAgPSBjcy5zZWxlY3RlZFtpLTFdOyBjcy5zZWxlY3RlZFtpLTFdID0gY3Muc2VsZWN0ZWRbaV07IGNzLnNlbGVjdGVkW2ldID0gdG1wOyByZW5kZXJPdmVybGF5KCk7IHJlbmRlckxpc3QoZ2V0Q29uc29sZVN0YXRlKGNvbnNvbGVJZCkuaXRlbXMpOyB1cGRhdGVUb3RhbHMoKTsgfQogIH0pOwogIHJvdy5xdWVyeVNlbGVjdG9yKCcuZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICBpZiAoaSA8IGNzLnNlbGVjdGVkLmxlbmd0aCAtIDEpIHsgdmFyIHRtcCA9IGNzLnNlbGVjdGVkW2krMV07IGNzLnNlbGVjdGVkW2krMV0gPSBjcy5zZWxlY3RlZFtpXTsgY3Muc2VsZWN0ZWRbaV0gPSB0bXA7IHJlbmRlck92ZXJsYXkoKTsgcmVuZGVyTGlzdChnZXRDb25zb2xlU3RhdGUoY29uc29sZUlkKS5pdGVtcyk7IHVwZGF0ZVRvdGFscygpOyB9CiAgfSk7CiAgcm93LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgdmFyIHJlbW92ZWQgPSBjcy5zZWxlY3RlZC5zcGxpY2UoaSwgMSlbMF07CiAgICAvLyBVcGRhdGUgbGVmdCBwYW5lIGlmIHRoaXMgY29uc29sZSBpcyBhY3RpdmUKICAgIGlmIChjb25zb2xlSWQgPT09IHN0YXRlLmFjdGl2ZUNvbnNvbGUpIHsKICAgICAgdmFyIGxlZnRSb3cgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoZnVuY3Rpb24oeCkgeyByZXR1cm4geC5kYXRhc2V0Lm5hbWUgPT09IHJlbW92ZWQubmFtZTsgfSk7CiAgICAgIGlmIChsZWZ0Um93KSBsZWZ0Um93LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7CiAgICB9CiAgICByZW5kZXJPdmVybGF5KCk7CiAgICB1cGRhdGVUb3RhbHMoKTsKICAgIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgeyBidWlsZE1peFRhYnMoKTsgdXBkYXRlR3JhbmRUb3RhbCgpOyB9CiAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICB9KTsKCiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdyk7Cn0KCiQoJ2N0YVNob3cnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAkKCdvdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgcmVuZGVyT3ZlcmxheSgpOyB9KTsKJCgnY2xvc2VPdmVybGF5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgJCgnb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0pOwokKCdvdmVybGF5U29ydEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgc3RhdGUub3ZlcmxheVNvcnRCeVNpemUgPSAhc3RhdGUub3ZlcmxheVNvcnRCeVNpemU7CiAgdGhpcy50ZXh0Q29udGVudCA9IHN0YXRlLm92ZXJsYXlTb3J0QnlTaXplID8gJ09yaWdpbmFsIE9yZGVyJyA6ICdTb3J0IGJ5IFNpemUnOwogIHRoaXMuc3R5bGUuY29sb3IgPSBzdGF0ZS5vdmVybGF5U29ydEJ5U2l6ZSA/ICd2YXIoLS1hY2NlbnQpJyA6ICcnOwogIHJlbmRlck92ZXJsYXkoKTsKfSk7CgovLyA9PT09PT09PT09PT09PT09PT09PSBDT05GSUcgVE9HR0xFIChtb2JpbGUpID09PT09PT09PT09PT09PT09PT09CihmdW5jdGlvbigpIHsKICB2YXIgdG9nZ2xlQnRuID0gJCgndG9nZ2xlQ29uZmlnJyk7CiAgdmFyIGNvbmZpZ1NlY3Rpb24gPSAkKCdjb25maWdTZWN0aW9uJyk7CiAgaWYgKHRvZ2dsZUJ0biAmJiBjb25maWdTZWN0aW9uKSB7CiAgICBjb25maWdTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgdG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBpc1Zpc2libGUgPSBjb25maWdTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpOwogICAgICB0b2dnbGVCdG4udGV4dENvbnRlbnQgPSBpc1Zpc2libGUgPyAnSGlkZSBDb25maWd1cmF0aW9uJyA6ICdTaG93IENvbmZpZ3VyYXRpb24nOwogICAgfSk7CiAgfQp9KSgpOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gU0VMRUNURUQgUEFORUwgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gcmVuZGVyU2VsZWN0ZWRQYW5lbCgpIHsKICB2YXIgYm9keSA9ICQoJ3NlbGVjdGVkUGFuZWxCb2R5Jyk7CiAgaWYgKCFib2R5KSByZXR1cm47CiAgYm9keS5pbm5lckhUTUwgPSAnJzsKICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MgfHwgY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7CiAgICBib2R5LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjIwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToxM3B4Ij5ObyBnYW1lcyBzZWxlY3RlZCB5ZXQ8L2Rpdj4nOwogICAgcmV0dXJuOwogIH0KICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHMsIGkpIHsKICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHJvdy5jbGFzc05hbWUgPSAnc2VsZWN0ZWQtaXRlbSc7CiAgICB2YXIgc2l6ZURpc3BsYXkgPSBmb3JtYXRTaXplVG9HQihzLnNpemUpOwogICAgdmFyIGljb25VcmwgPSBnZXRJY29uVXJsKHMubmFtZSk7CiAgICByb3cuaW5uZXJIVE1MID0KICAgICAgJzxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tdGh1bWIiPicgKwogICAgICAgIChpY29uVXJsID8gJzxpbWcgc3JjPSInICsgaWNvblVybCArICciIGFsdD0iIiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvdmVyO2JvcmRlci1yYWRpdXM6NnB4Ij4nIDogJzxzcGFuIHN0eWxlPSJmb250LXNpemU6MThweCI+8J+Orjwvc3Bhbj4nKSArCiAgICAgICc8L2Rpdj4nICsKICAgICAgJzxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tY29udGVudCI+PGRpdiBjbGFzcz0ic2VsZWN0ZWQtaXRlbS10aXRsZSI+JyArIGVzYyhzLm5hbWUpICsgJzwvZGl2PjwvZGl2PicgKwogICAgICAnPGRpdiBjbGFzcz0ic2VsZWN0ZWQtaXRlbS1zaXplIj4nICsgc2l6ZURpc3BsYXkgKyAnPC9kaXY+JyArCiAgICAgICc8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLWFjdGlvbnMiPicgKwogICAgICAgICc8YnV0dG9uIGNsYXNzPSJ1cCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiPjxwYXRoIGQ9Ik0xOCAxNWwtNi02LTYgNiIvPjwvc3ZnPjwvYnV0dG9uPicgKwogICAgICAgICc8YnV0dG9uIGNsYXNzPSJkb3duIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSI+PHBhdGggZD0iTTYgOWw2IDYgNi02Ii8+PC9zdmc+PC9idXR0b24+JyArCiAgICAgICAgJzxidXR0b24gY2xhc3M9InJlbW92ZSI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+PC9idXR0b24+JyArCiAgICAgICc8L2Rpdj4nOwoKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcudXAnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoaSA+IDApIHsgdmFyIHRtcCA9IGNzLnNlbGVjdGVkW2ktMV07IGNzLnNlbGVjdGVkW2ktMV0gPSBjcy5zZWxlY3RlZFtpXTsgY3Muc2VsZWN0ZWRbaV0gPSB0bXA7IHJlbmRlck92ZXJsYXkoKTsgcmVuZGVyTGlzdChjcy5pdGVtcyk7IHVwZGF0ZVRvdGFscygpOyB9CiAgICB9KTsKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcuZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChpIDwgY3Muc2VsZWN0ZWQubGVuZ3RoIC0gMSkgeyB2YXIgdG1wID0gY3Muc2VsZWN0ZWRbaSsxXTsgY3Muc2VsZWN0ZWRbaSsxXSA9IGNzLnNlbGVjdGVkW2ldOyBjcy5zZWxlY3RlZFtpXSA9IHRtcDsgcmVuZGVyT3ZlcmxheSgpOyByZW5kZXJMaXN0KGNzLml0ZW1zKTsgdXBkYXRlVG90YWxzKCk7IH0KICAgIH0pOwogICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICBjcy5zZWxlY3RlZC5zcGxpY2UoaSwgMSk7CiAgICAgIHJlbmRlck92ZXJsYXkoKTsgcmVuZGVyTGlzdChjcy5pdGVtcyk7IHVwZGF0ZVRvdGFscygpOwogICAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsgYnVpbGRNaXhUYWJzKCk7IHVwZGF0ZUdyYW5kVG90YWwoKTsgfQogICAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICAgIH0pOwoKICAgIGJvZHkuYXBwZW5kQ2hpbGQocm93KTsKICB9KTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gR0FNRSBJTkZPIE1PREFMID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIGZvcm1hdFJlbGVhc2VEYXRlKGRhdGVOdW0pIHsKICBpZiAoIWRhdGVOdW0pIHJldHVybiBudWxsOwogIHZhciBzdHIgPSBTdHJpbmcoZGF0ZU51bSk7CiAgaWYgKHN0ci5sZW5ndGggIT09IDgpIHJldHVybiBudWxsOwogIHJldHVybiBzdHIuc2xpY2UoMCw0KSArICctJyArIHN0ci5zbGljZSg0LDYpICsgJy0nICsgc3RyLnNsaWNlKDYsOCk7Cn0KCmZ1bmN0aW9uIHNob3dHYW1lSW5mbyhpdGVtKSB7CiAgdmFyIGluZm8gPSBnZXRHYW1lSW5mbyhpdGVtLm5hbWUpOwogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgdmFyIG1vZGFsID0gJCgnZ2FtZUluZm9Nb2RhbCcpOwogIHZhciBjb250ZW50ID0gJCgnZ2FtZUluZm9Db250ZW50Jyk7CgogIHZhciBjZmcgPSBhY3RpdmVDb25maWcoKTsKICB2YXIgYmFubmVyUmF3ID0gaW5mbyAmJiBpbmZvLmJhbm5lclVybCA/IGluZm8uYmFubmVyVXJsIDogKGluZm8gJiYgaW5mby5pY29uVXJsID8gaW5mby5pY29uVXJsIDogJycpOwogIHZhciBiYW5uZXJVcmwgPSByZXNvbHZlQXNzZXRVcmwoYmFubmVyUmF3LCBjZmcpOwogIHZhciBpY29uVXJsID0gcmVzb2x2ZUFzc2V0VXJsKGluZm8gPyBpbmZvLmljb25VcmwgfHwgJycgOiAnJywgY2ZnKTsKICB2YXIgdGl0bGUgPSBpbmZvID8gaW5mby5tYXRjaGVkTmFtZSB8fCBpdGVtLm5hbWUgOiBpdGVtLm5hbWU7CiAgdmFyIHB1Ymxpc2hlciA9IGluZm8gPyBpbmZvLnB1Ymxpc2hlciB8fCAnVW5rbm93biBQdWJsaXNoZXInIDogJ1Vua25vd24gUHVibGlzaGVyJzsKICB2YXIgY2F0ZWdvcmllcyA9IGluZm8gPyBpbmZvLmNhdGVnb3J5IHx8IFtdIDogW107CiAgdmFyIGRlc2NyaXB0aW9uID0gaW5mbyA/IGluZm8uZGVzY3JpcHRpb24gfHwgJycgOiAnJzsKICB2YXIgaW50cm8gPSBpbmZvID8gaW5mby5pbnRybyB8fCAnJyA6ICcnOwogIHZhciBzY3JlZW5zaG90cyA9IChpbmZvID8gaW5mby5zY3JlZW5zaG90cyB8fCBbXSA6IFtdKS5tYXAoZnVuY3Rpb24odSkgeyByZXR1cm4gcmVzb2x2ZUFzc2V0VXJsKHUsIGNmZyk7IH0pOwogIHZhciByZWxlYXNlRGF0ZSA9IGZvcm1hdFJlbGVhc2VEYXRlKGluZm8gPyBpbmZvLnJlbGVhc2VEYXRlIDogbnVsbCk7CiAgdmFyIHBsYXllcnMgPSBpbmZvID8gaW5mby5udW1iZXJPZlBsYXllcnMgOiBudWxsOwogIHZhciBoYXNGaWxlcyA9IGl0ZW0uZmlsZXMgJiYgaXRlbS5maWxlcy5sZW5ndGggPiAwOwogIHZhciBpc1NlbGVjdGVkID0gY3MgJiYgY3Muc2VsZWN0ZWQuc29tZShmdW5jdGlvbihzKSB7IHJldHVybiBzLm5hbWUgPT09IGl0ZW0ubmFtZTsgfSk7CgogIGNvbnRlbnQuaW5uZXJIVE1MID0KICAgICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8taGVhZGVyIj4nICsKICAgICAgKGJhbm5lclVybCA/ICc8aW1nIGNsYXNzPSJnYW1lLWluZm8tYmFubmVyIiBzcmM9IicgKyBiYW5uZXJVcmwgKyAnIiBhbHQ9IiIgb25lcnJvcj0idGhpcy5zdHlsZS5kaXNwbGF5PVwnbm9uZVwnIj4nIDogJzxkaXYgY2xhc3M9ImdhbWUtaW5mby1iYW5uZXIiPjwvZGl2PicpICsKICAgICAgKGljb25VcmwgPyAnPGltZyBjbGFzcz0iZ2FtZS1pbmZvLWljb24iIHNyYz0iJyArIGljb25VcmwgKyAnIiBhbHQ9IiI+JyA6ICcnKSArCiAgICAgICc8YnV0dG9uIGNsYXNzPSJnYW1lLWluZm8tY2xvc2UiIG9uY2xpY2s9ImNsb3NlR2FtZUluZm8oKSI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PGxpbmUgeDE9IjE4IiB5MT0iNiIgeDI9IjYiIHkyPSIxOCIvPjxsaW5lIHgxPSI2IiB5MT0iNiIgeDI9IjE4IiB5Mj0iMTgiLz48L3N2Zz48L2J1dHRvbj4nICsKICAgICc8L2Rpdj4nICsKICAgICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tdGl0bGUiPicgKyBlc2ModGl0bGUpICsgJzwvZGl2PicgKwogICAgJzxkaXYgY2xhc3M9ImdhbWUtaW5mby1wdWJsaXNoZXIiPicgKyBlc2MocHVibGlzaGVyKSArICc8L2Rpdj4nICsKICAgICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tbWV0YSI+JyArCiAgICAgIGNhdGVnb3JpZXMubWFwKGZ1bmN0aW9uKGMpIHsgcmV0dXJuICc8c3BhbiBjbGFzcz0iZ2FtZS1pbmZvLXRhZyBnZW5yZSI+JyArIGVzYyhjKSArICc8L3NwYW4+JzsgfSkuam9pbignJykgKwogICAgICAocmVsZWFzZURhdGUgPyAnPHNwYW4gY2xhc3M9ImdhbWUtaW5mby10YWciPicgKyByZWxlYXNlRGF0ZSArICc8L3NwYW4+JyA6ICcnKSArCiAgICAgIChwbGF5ZXJzID8gJzxzcGFuIGNsYXNzPSJnYW1lLWluZm8tdGFnIj4nICsgcGxheWVycyArICcgUGxheWVyJyArIChwbGF5ZXJzID4gMSA/ICdzJyA6ICcnKSArICc8L3NwYW4+JyA6ICcnKSArCiAgICAgICc8c3BhbiBjbGFzcz0iZ2FtZS1pbmZvLXRhZyI+JyArIGZvcm1hdFNpemVUb0dCKGl0ZW0uc2l6ZSkgKyAnPC9zcGFuPicgKwogICAgICAoaGFzRmlsZXMgPyAnPHNwYW4gY2xhc3M9ImdhbWUtaW5mby10YWciPicgKyBpdGVtLmZpbGVzLmxlbmd0aCArICcgZmlsZXM8L3NwYW4+JyA6ICcnKSArCiAgICAnPC9kaXY+JyArCiAgICAoaGFzRmlsZXMgPyAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXNlY3Rpb24gZ2FtZS1pbmZvLWZpbGVzLXNlY3Rpb24iPjxidXR0b24gY2xhc3M9ImdhbWUtaW5mby1maWxlcy1idG4iIG9uY2xpY2s9InRvZ2dsZUZpbGVzU2VjdGlvbih0aGlzKSI+PHNwYW4+U2hvdyAnICsgaXRlbS5maWxlcy5sZW5ndGggKyAnIEZpbGVzPC9zcGFuPjxzdmcgY2xhc3M9ImNoZXZyb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiPjxwYXRoIGQ9Ik02IDlsNiA2IDYtNiIvPjwvc3ZnPjwvYnV0dG9uPjxkaXYgY2xhc3M9ImdhbWUtaW5mby1maWxlcyIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+JyArIGl0ZW0uZmlsZXMubWFwKGZ1bmN0aW9uKGYpIHsgcmV0dXJuICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tZmlsZSI+JyArIGVzYyhmKSArICc8L2Rpdj4nOyB9KS5qb2luKCcnKSArICc8L2Rpdj48L2Rpdj4nIDogJycpICsKICAgIChpbnRybyB8fCBkZXNjcmlwdGlvbiA/ICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tc2VjdGlvbiI+PGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXNlY3Rpb24tdGl0bGUiPkFib3V0PC9kaXY+JyArIChpbnRybyA/ICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8taW50cm8iPiInICsgZXNjKGludHJvKSArICciPC9kaXY+JyA6ICcnKSArIChkZXNjcmlwdGlvbiA/ICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tZGVzY3JpcHRpb24iPicgKyBlc2MoZGVzY3JpcHRpb24uc2xpY2UoMCw1MDApKSArIChkZXNjcmlwdGlvbi5sZW5ndGggPiA1MDAgPyAnLi4uJyA6ICcnKSArICc8L2Rpdj4nIDogJycpICsgJzwvZGl2PicgOiAnJykgKwogICAgKHNjcmVlbnNob3RzLmxlbmd0aCA+IDAgPyAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXNlY3Rpb24iPjxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uLXRpdGxlIj5TY3JlZW5zaG90czwvZGl2PjxkaXYgY2xhc3M9ImdhbWUtaW5mby1zY3JlZW5zaG90cyI+JyArIHNjcmVlbnNob3RzLm1hcChmdW5jdGlvbih1cmwpIHsgcmV0dXJuICc8aW1nIHNyYz0iJyArIHVybCArICciIGFsdD0iU2NyZWVuc2hvdCIgb25jbGljaz0ic2hvd1NjcmVlbnNob3QoXCcnICsgdXJsICsgJ1wnKSIgbG9hZGluZz0ibGF6eSIgZGVjb2Rpbmc9ImFzeW5jIj4nOyB9KS5qb2luKCcnKSArICc8L2Rpdj48L2Rpdj4nIDogJycpICsKICAgICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tYWN0aW9ucyI+PGJ1dHRvbiBjbGFzcz0iYnRuICcgKyAoaXNTZWxlY3RlZCA/ICdkYW5nZXInIDogJ2J0bi1wcmltYXJ5JykgKyAnIiBvbmNsaWNrPSJ0b2dnbGVGcm9tSW5mbyhcJycgKyBlc2MoaXRlbS5uYW1lKS5yZXBsYWNlKC8nL2csICJcXCciKSArICdcJykiPicgKyAoaXNTZWxlY3RlZCA/ICdSZW1vdmUgZnJvbSBMaXN0JyA6ICdBZGQgdG8gTGlzdCcpICsgJzwvYnV0dG9uPjxidXR0b24gY2xhc3M9ImJ0biBnaG9zdCIgb25jbGljaz0iY2xvc2VHYW1lSW5mbygpIj5DbG9zZTwvYnV0dG9uPjwvZGl2Pic7CgogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsKfQoKZnVuY3Rpb24gY2xvc2VHYW1lSW5mbygpIHsgJCgnZ2FtZUluZm9Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJzsgfQoKZnVuY3Rpb24gdG9nZ2xlRmlsZXNTZWN0aW9uKGJ0bikgewogIHZhciBmaWxlc0RpdiA9IGJ0bi5uZXh0RWxlbWVudFNpYmxpbmc7CiAgdmFyIGlzT3BlbiA9IGZpbGVzRGl2LnN0eWxlLmRpc3BsYXkgIT09ICdub25lJzsKICBmaWxlc0Rpdi5zdHlsZS5kaXNwbGF5ID0gaXNPcGVuID8gJ25vbmUnIDogJ2ZsZXgnOwogIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJywgIWlzT3Blbik7CiAgYnRuLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS50ZXh0Q29udGVudCA9IGJ0bi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQucmVwbGFjZShpc09wZW4gPyAnSGlkZScgOiAnU2hvdycsIGlzT3BlbiA/ICdTaG93JyA6ICdIaWRlJyk7Cn0KCmZ1bmN0aW9uIHRvZ2dsZUZyb21JbmZvKGdhbWVOYW1lKSB7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICBpZiAoIWNzKSByZXR1cm47CiAgdmFyIGl0ZW0gPSBjcy5pdGVtcy5maW5kKGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGkubmFtZSA9PT0gZ2FtZU5hbWU7IH0pOwogIGlmIChpdGVtKSB7CiAgICB2YXIgaWR4ID0gY3Muc2VsZWN0ZWQuZmluZEluZGV4KGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMubmFtZSA9PT0gZ2FtZU5hbWU7IH0pOwogICAgaWYgKGlkeCA+PSAwKSB7IGNzLnNlbGVjdGVkLnNwbGljZShpZHgsIDEpOyBzaG93VG9hc3QoJ1JlbW92ZWQgZnJvbSBsaXN0Jyk7IH0KICAgIGVsc2UgeyBjcy5zZWxlY3RlZC5wdXNoKGl0ZW0pOyBzaG93VG9hc3QoJ0FkZGVkIHRvIGxpc3QnKTsgfQogICAgcmVuZGVyTGlzdChjcy5pdGVtcyk7IHJlbmRlck92ZXJsYXkoKTsgdXBkYXRlVG90YWxzKCk7CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsgYnVpbGRNaXhUYWJzKCk7IHVwZGF0ZUdyYW5kVG90YWwoKTsgfQogICAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgICBzZXRUaW1lb3V0KGNsb3NlR2FtZUluZm8sIDgwMCk7CiAgfQp9CgpmdW5jdGlvbiBzaG93U2NyZWVuc2hvdCh1cmwpIHsgJCgnc2NyZWVuc2hvdEltYWdlJykuc3JjID0gdXJsOyAkKCdzY3JlZW5zaG90Vmlld2VyJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IH0KJCgnc2NyZWVuc2hvdFZpZXdlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7ICQoJ3NjcmVlbnNob3RWaWV3ZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsgfSk7CiQoJ2dhbWVJbmZvTW9kYWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsgaWYgKGUudGFyZ2V0LmlkID09PSAnZ2FtZUluZm9Nb2RhbCcpIGNsb3NlR2FtZUluZm8oKTsgfSk7CgovLyA9PT09PT09PT09PT09PT09PT09PSBTQVZFIC8gRVhQT1JUID09PT09PT09PT09PT09PT09PT09CnZhciBsYXN0RXhwb3J0VGltZSA9IDA7CnZhciBNSU5fREVMQVkgPSAxMDAwOwoKJCgnc2F2ZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgdmFyIG5vdyA9IERhdGUubm93KCk7CiAgaWYgKG5vdyAtIGxhc3RFeHBvcnRUaW1lIDwgTUlOX0RFTEFZKSB7IGFsZXJ0KCdQbGVhc2Ugd2FpdCcpOyByZXR1cm47IH0KICBsYXN0RXhwb3J0VGltZSA9IG5vdzsKCiAgaWYgKCFyZXF1aXJlQ3VzdG9tZXJOYW1lKCkpIHJldHVybjsKICB2YXIgY3VzdCA9ICgkKCdjdXN0b21lcicpLnZhbHVlIHx8ICcnKS50cmltKCk7CgogIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgewogICAgc2F2ZU1peEZpbGVzKGN1c3QpOwogIH0gZWxzZSB7CiAgICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogICAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogICAgaWYgKCFjcyB8fCBjcy5zZWxlY3RlZC5sZW5ndGggPT09IDApIHsgYWxlcnQoJ05vIGl0ZW1zIHNlbGVjdGVkJyk7IHJldHVybjsgfQogICAgdmFyIGZpbGVuYW1lID0gJCgnZmlsZW5hbWVQcmV2aWV3JykudGV4dENvbnRlbnQgfHwgKCdsaXN0JyArIGNmZy5jbGllbnRGaWxlRXh0KTsKICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2NzLnNlbGVjdGVkLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBzLm5hbWU7IH0pLmpvaW4oJ1xuJyldLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsKICAgIGRvd25sb2FkQmxvYihibG9iLCBmaWxlbmFtZSk7CiAgICB0b2FzdCgnU2F2ZWQgY2xpZW50IGZpbGUnKTsKICB9Cn0pOwoKZnVuY3Rpb24gc2F2ZU1peEZpbGVzKGN1c3QpIHsKICB2YXIgaGFzQW55ID0gZmFsc2U7CiAgc3RhdGUuYWN0aXZlQ29uc29sZXMuZm9yRWFjaChmdW5jdGlvbihpZCkgeyBpZiAoZ2V0Q29uc29sZVN0YXRlKGlkKS5zZWxlY3RlZC5sZW5ndGggPiAwKSBoYXNBbnkgPSB0cnVlOyB9KTsKICBpZiAoIWhhc0FueSkgeyBhbGVydCgnTm8gaXRlbXMgc2VsZWN0ZWQnKTsgcmV0dXJuOyB9CgogIHZhciBzdGFtcCA9IGdlbmVyYXRlVGltZXN0YW1wKCk7CiAgdmFyIGN1c3RvbWVyID0gY3VzdC5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKS50b0xvd2VyQ2FzZSgpOwoKICAvLyAxLiBDb21iaW5lZCBNSVggZmlsZQogIHZhciBtaXhDb250ZW50ID0gJyc7CiAgc3RhdGUuYWN0aXZlQ29uc29sZXMuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgdmFyIGNmZyA9IENPTlNPTEVTW2lkXTsKICAgIHZhciBjcyA9IGdldENvbnNvbGVTdGF0ZShpZCk7CiAgICBpZiAoY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICBtaXhDb250ZW50ICs9ICdbJyArIGNmZy5sYWJlbCArICddXG4nOwogICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzKSB7IG1peENvbnRlbnQgKz0gcy5uYW1lICsgJ1xuJzsgfSk7CiAgICBtaXhDb250ZW50ICs9ICdcbic7CiAgfSk7CiAgdmFyIG1peEZpbGVuYW1lID0gY3VzdG9tZXIgKyAnX01JWF8nICsgc3RhbXAgKyAnLkNMSV9QUk1aTUlYJzsKICBkb3dubG9hZEJsb2IobmV3IEJsb2IoW21peENvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KSwgbWl4RmlsZW5hbWUpOwoKICBzaG93VG9hc3QoJ1NhdmVkIE1JWCBmaWxlJyk7Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlVGltZXN0YW1wKCkgewogIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogIHJldHVybiBub3cuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsKICAgIFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykgKwogICAgU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJykgKwogICAgU3RyaW5nKG5vdy5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0U2Vjb25kcygpKS5wYWRTdGFydCgyLCAnMCcpOwp9CgpmdW5jdGlvbiBkb3dubG9hZEJsb2IoYmxvYiwgZmlsZW5hbWUpIHsKICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogIGEuY2xpY2soKTsKICBhLnJlbW92ZSgpOwogIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gQURNSU4gRVhQT1JUID09PT09PT09PT09PT09PT09PT09CiQoJ2FkbWluRXhwb3J0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbigpIHsKICB2YXIgbm93ID0gRGF0ZS5ub3coKTsKICBpZiAobm93IC0gbGFzdEV4cG9ydFRpbWUgPCBNSU5fREVMQVkpIHsgc2hvd0Jhbm5lcignUGxlYXNlIHdhaXQnLCAyMDAwKTsgcmV0dXJuOyB9CiAgbGFzdEV4cG9ydFRpbWUgPSBub3c7CgogIGlmICghcmVxdWlyZUN1c3RvbWVyTmFtZSgpKSByZXR1cm47CiAgdmFyIGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnJykudHJpbSgpOwoKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIGFkbWluRXhwb3J0TWl4KGN1c3QpOwogIH0gZWxzZSB7CiAgICBhZG1pbkV4cG9ydFNpbmdsZShjdXN0KTsKICB9Cn0pOwoKYXN5bmMgZnVuY3Rpb24gYWRtaW5FeHBvcnRTaW5nbGUoY3VzdCkgewogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIGlmICghY3MgfHwgY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7IHNob3dCYW5uZXIoJ05vIGl0ZW1zIHNlbGVjdGVkJywgMjAwMCk7IHJldHVybjsgfQoKICB0cnkgewogICAgdmFyIGNvbnRlbnQgPSAnJzsKICAgIHZhciBwYXRocyA9IFtdOwoKICAgIGlmIChjcy5zdHJ1Y3R1cmVUeXBlID09PSAnZm9sZGVycycpIHsKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzZWwpIHsKICAgICAgICB2YXIgaXRlbSA9IGNzLml0ZW1zLmZpbmQoZnVuY3Rpb24oaXQpIHsgcmV0dXJuIGl0Lm5hbWUgPT09IHNlbC5uYW1lOyB9KTsKICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmZpbGVzKSB7CiAgICAgICAgICBpdGVtLmZpbGVzLmZvckVhY2goZnVuY3Rpb24oZm5hbWUpIHsKICAgICAgICAgICAgdmFyIHBhdGggPSBjZmcuYWRtaW5CYXNlUGF0aCArIGl0ZW0ubmFtZSArICdcXCcgKyBmbmFtZTsKICAgICAgICAgICAgY29udGVudCArPSBwYXRoICsgJ1xuJzsKICAgICAgICAgICAgcGF0aHMucHVzaChwYXRoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHNlbCkgewogICAgICAgIHZhciBwYXRoID0gY2ZnLmFkbWluQmFzZVBhdGggKyAoc2VsLmZpbGVuYW1lIHx8IHNlbC5uYW1lKTsKICAgICAgICBjb250ZW50ICs9IHBhdGggKyAnXG4nOwogICAgICAgIHBhdGhzLnB1c2gocGF0aCk7CiAgICAgIH0pOwogICAgfQoKICAgIHZhciBzdGFtcCA9IGdlbmVyYXRlVGltZXN0YW1wKCk7CiAgICB2YXIgZm5hbWUgPSBjdXN0LnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpICsgJ18nICsgc3RhbXAgKyBjZmcuYWRtaW5GaWxlRXh0OwogICAgZG93bmxvYWRCbG9iKG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSksIGZuYW1lKTsKICAgIHNob3dUb2FzdCgnQWRtaW4gZXhwb3J0IHNhdmVkJyk7CgogICAgLy8gVHJ5IGxpc3RlbmVyCiAgICB0cnkgewogICAgICB2YXIgc3RhdHVzUmVzID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9zdGF0dXMnKTsKICAgICAgaWYgKHN0YXR1c1Jlcy5vayAmJiBjb25maXJtKCdMaXN0ZW5lciBkZXRlY3RlZCEgUnVuIGhhcmRsaW5rIGZvciAnICsgY3Muc2VsZWN0ZWQubGVuZ3RoICsgJyBpdGVtcz8nKSkgewogICAgICAgIHZhciByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL3J1bicsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHBhdGhzOiBwYXRocywgY3VzdG9tZXI6IGN1c3QgfSkKICAgICAgICB9KTsKICAgICAgICB2YXIgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ29rJykgc2hvd0Jhbm5lcignRG9uZSEgJyArIHJlc3VsdC5zdWNjZXNzICsgJyBmaWxlcyBsaW5rZWQnLCAyMDAwKTsKICAgICAgfQogICAgfSBjYXRjaChlKSB7IC8qIGxpc3RlbmVyIG5vdCBydW5uaW5nICovIH0KICB9IGNhdGNoKGUpIHsKICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICBzaG93QmFubmVyKCdBZG1pbiBleHBvcnQgZmFpbGVkJywgMjAwMCk7CiAgfQp9Cgphc3luYyBmdW5jdGlvbiBhZG1pbkV4cG9ydE1peChjdXN0KSB7CiAgdmFyIHN0YW1wID0gZ2VuZXJhdGVUaW1lc3RhbXAoKTsKICB2YXIgY3VzdG9tZXIgPSBjdXN0LnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpOwoKICAvLyBDb21iaW5lZCBhZG1pbiBmaWxlCiAgdmFyIG1peENvbnRlbnQgPSAnJzsKICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICB2YXIgY2ZnID0gQ09OU09MRVNbaWRdOwogICAgdmFyIGNzID0gZ2V0Q29uc29sZVN0YXRlKGlkKTsKICAgIGlmIChjcy5zZWxlY3RlZC5sZW5ndGggPT09IDApIHJldHVybjsKCiAgICBtaXhDb250ZW50ICs9ICdbJyArIGNmZy5sYWJlbCArICddXG4nOwogICAgaWYgKGNzLnN0cnVjdHVyZVR5cGUgPT09ICdmb2xkZXJzJykgewogICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHNlbCkgewogICAgICAgIHZhciBpdGVtID0gY3MuaXRlbXMuZmluZChmdW5jdGlvbihpdCkgeyByZXR1cm4gaXQubmFtZSA9PT0gc2VsLm5hbWU7IH0pOwogICAgICAgIGlmIChpdGVtICYmIGl0ZW0uZmlsZXMpIHsKICAgICAgICAgIGl0ZW0uZmlsZXMuZm9yRWFjaChmdW5jdGlvbihmbmFtZSkgewogICAgICAgICAgICBtaXhDb250ZW50ICs9IGNmZy5hZG1pbkJhc2VQYXRoICsgaXRlbS5uYW1lICsgJ1xcJyArIGZuYW1lICsgJ1xuJzsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHNlbCkgewogICAgICAgIG1peENvbnRlbnQgKz0gY2ZnLmFkbWluQmFzZVBhdGggKyAoc2VsLmZpbGVuYW1lIHx8IHNlbC5uYW1lKSArICdcbic7CiAgICAgIH0pOwogICAgfQogICAgbWl4Q29udGVudCArPSAnXG4nOwogIH0pOwoKICBkb3dubG9hZEJsb2IobmV3IEJsb2IoW21peENvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KSwgY3VzdG9tZXIgKyAnX01JWF8nICsgc3RhbXAgKyAnLlBSTVpNSVgnKTsKCiAgLy8gUGVyLWNvbnNvbGUgYWRtaW4gZmlsZXMKICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICB2YXIgY2ZnID0gQ09OU09MRVNbaWRdOwogICAgdmFyIGNzID0gZ2V0Q29uc29sZVN0YXRlKGlkKTsKICAgIGlmIChjcy5zZWxlY3RlZC5sZW5ndGggPT09IDApIHJldHVybjsKCiAgICB2YXIgY29udGVudCA9ICcnOwogICAgaWYgKGNzLnN0cnVjdHVyZVR5cGUgPT09ICdmb2xkZXJzJykgewogICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHNlbCkgewogICAgICAgIHZhciBpdGVtID0gY3MuaXRlbXMuZmluZChmdW5jdGlvbihpdCkgeyByZXR1cm4gaXQubmFtZSA9PT0gc2VsLm5hbWU7IH0pOwogICAgICAgIGlmIChpdGVtICYmIGl0ZW0uZmlsZXMpIHsKICAgICAgICAgIGl0ZW0uZmlsZXMuZm9yRWFjaChmdW5jdGlvbihmbmFtZSkgewogICAgICAgICAgICBjb250ZW50ICs9IGNmZy5hZG1pbkJhc2VQYXRoICsgaXRlbS5uYW1lICsgJ1xcJyArIGZuYW1lICsgJ1xuJzsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHNlbCkgewogICAgICAgIGNvbnRlbnQgKz0gY2ZnLmFkbWluQmFzZVBhdGggKyAoc2VsLmZpbGVuYW1lIHx8IHNlbC5uYW1lKSArICdcbic7CiAgICAgIH0pOwogICAgfQoKICAgIHZhciBmbmFtZSA9IGN1c3RvbWVyICsgJ18nICsgc3RhbXAgKyBjZmcuYWRtaW5GaWxlRXh0OwogICAgZG93bmxvYWRCbG9iKG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSksIGZuYW1lKTsKICB9KTsKCiAgc2hvd1RvYXN0KCdBZG1pbiBNSVggZXhwb3J0IHNhdmVkJyk7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFVQTE9BRCA9PT09PT09PT09PT09PT09PT09PQokKCdjdGFVcGxvYWQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRvVXBsb2FkKTsKCmFzeW5jIGZ1bmN0aW9uIGRvVXBsb2FkKCkgewogIGlmICghcmVxdWlyZUN1c3RvbWVyTmFtZSgpKSByZXR1cm47CiAgdmFyIGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnJykudHJpbSgpOwoKICB2YXIgaGFzU2VsZWN0aW9uID0gZmFsc2U7CiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7IGlmIChnZXRDb25zb2xlU3RhdGUoaWQpLnNlbGVjdGVkLmxlbmd0aCA+IDApIGhhc1NlbGVjdGlvbiA9IHRydWU7IH0pOwogIH0gZWxzZSB7CiAgICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogICAgaGFzU2VsZWN0aW9uID0gY3MgJiYgY3Muc2VsZWN0ZWQubGVuZ3RoID4gMDsKICB9CiAgaWYgKCFoYXNTZWxlY3Rpb24pIHsgYWxlcnQoJ05vIGl0ZW1zIHNlbGVjdGVkJyk7IHJldHVybjsgfQogIGlmICghY29uZmlybSgnVXBsb2FkIGxpc3QgZm9yICcgKyBjdXN0ICsgJz8nKSkgcmV0dXJuOwoKICB2YXIgbm93ID0gRGF0ZS5ub3coKTsKICBpZiAobm93IC0gc3RhdGUubGFzdFVwbG9hZCA8IDE1MDAwKSB7IGFsZXJ0KCdQbGVhc2Ugd2FpdCAxNSBzZWNvbmRzIGJldHdlZW4gdXBsb2FkcycpOyByZXR1cm47IH0KCiAgdmFyIGJ0biA9ICQoJ2N0YVVwbG9hZCcpOwogIHZhciBjdGFUZXh0ID0gJCgnY3RhVGV4dCcpOwogIHZhciBvcmlnaW5hbFRleHQgPSBjdGFUZXh0LnRleHRDb250ZW50OwoKICAvLyBFbnRlciBsb2FkaW5nIHN0YXRlCiAgYnRuLmNsYXNzTGlzdC5hZGQoJ3VwbG9hZGluZycpOwogIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nJywgJ3VwbG9hZC1kb25lJyk7CiAgY3RhVGV4dC50ZXh0Q29udGVudCA9ICdVcGxvYWRpbmcuLi4nOwoKICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgdmFyIGJ1Y2tldCA9IGNmZyA/IGNmZy5maWxlYmluQnVja2V0IDogJ3hsZzRrZ2dvemJkZ3NudzQnOwoKICB0cnkgewogICAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICAgIHZhciBtaXhDb250ZW50ID0gJyc7CiAgICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgICB2YXIgYyA9IENPTlNPTEVTW2lkXTsKICAgICAgICB2YXIgY3MgPSBnZXRDb25zb2xlU3RhdGUoaWQpOwogICAgICAgIGlmIChjcy5zZWxlY3RlZC5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICBtaXhDb250ZW50ICs9ICdbJyArIGMubGFiZWwgKyAnXVxuJzsKICAgICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHMpIHsgbWl4Q29udGVudCArPSBzLm5hbWUgKyAnXG4nOyB9KTsKICAgICAgICBtaXhDb250ZW50ICs9ICdcbic7CiAgICAgIH0pOwogICAgICB2YXIgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCAoJ2xpc3QuQ0xJX1BSTVpNSVgnKTsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbbWl4Q29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOwogICAgICBhd2FpdCB1cGxvYWRUb0ZpbGViaW4oYmxvYiwgZmlsZW5hbWUsIGJ1Y2tldCk7CiAgICB9IGVsc2UgewogICAgICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogICAgICB2YXIgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCAoJ2xpc3QnICsgY2ZnLmNsaWVudEZpbGVFeHQpOwogICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjcy5zZWxlY3RlZC5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5uYW1lOyB9KS5qb2luKCdcbicpXSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7CiAgICAgIGF3YWl0IHVwbG9hZFRvRmlsZWJpbihibG9iLCBmaWxlbmFtZSwgYnVja2V0KTsKICAgIH0KCiAgICAvLyBTdWNjZXNzIHN0YXRlCiAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndXBsb2FkaW5nJyk7CiAgICBidG4uY2xhc3NMaXN0LmFkZCgndXBsb2FkLWRvbmUnKTsKICAgIGN0YVRleHQudGV4dENvbnRlbnQgPSAnVXBsb2FkZWQhJzsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCd1cGxvYWQtZG9uZScpOwogICAgICBjdGFUZXh0LnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0OwogICAgfSwgMzAwMCk7CiAgfSBjYXRjaChlKSB7CiAgICAvLyBFcnJvciBzdGF0ZQogICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3VwbG9hZGluZycpOwogICAgY3RhVGV4dC50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDsKICB9Cn0KCmZ1bmN0aW9uIGZldGNoV2l0aFRpbWVvdXQodXJsLCBvcHRzLCBtcykgewogIHZhciBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOwogIG9wdHMuc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7CiAgdmFyIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgY29udHJvbGxlci5hYm9ydCgpOyB9LCBtcyB8fCAxNTAwMCk7CiAgcmV0dXJuIGZldGNoKHVybCwgb3B0cykuZmluYWxseShmdW5jdGlvbigpIHsgY2xlYXJUaW1lb3V0KHRpbWVyKTsgfSk7Cn0KCmFzeW5jIGZ1bmN0aW9uIHRyeUZpbGViaW4oYmxvYiwgZmlsZW5hbWUsIGJ1Y2tldCkgewogIHZhciB1cmwgPSAnaHR0cHM6Ly9maWxlYmluLm5ldC8nICsgYnVja2V0ICsgJy8nICsgZmlsZW5hbWU7CiAgdmFyIHIgPSBhd2FpdCBmZXRjaFdpdGhUaW1lb3V0KHVybCwgeyBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nIH0sIGJvZHk6IGJsb2IgfSwgMjAwMDApOwogIGlmIChyLm9rIHx8IHIuc3RhdHVzID09PSAyMDEpIHsKICAgIHN0YXRlLmxhc3RVcGxvYWQgPSBEYXRlLm5vdygpOwogICAgY2xlYXJTZWxlY3RlZExpc3QoKTsKICAgICQoJ3NoYXJlYWJsZScpLnZhbHVlID0gJ2h0dHBzOi8vZmlsZWJpbi5uZXQvJyArIGJ1Y2tldCArICcvJyArIGZpbGVuYW1lOwogICAgc2hvd0Jhbm5lcignVXBsb2FkIENvbXBsZXRlIC0gUHJlc3MgQ29weSBMaW5rIGFuZCBzZW5kIGl0IHRvIG91ciBjaGF0Jyk7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgcmV0dXJuIGZhbHNlOwp9Cgphc3luYyBmdW5jdGlvbiB1cGxvYWRUb0ZpbGViaW4oYmxvYiwgZmlsZW5hbWUsIGJ1Y2tldCkgewogIC8vIFRyeSBmaWxlYmluIChhdHRlbXB0IDEpCiAgdHJ5IHsKICAgIGlmIChhd2FpdCB0cnlGaWxlYmluKGJsb2IsIGZpbGVuYW1lLCBidWNrZXQpKSByZXR1cm4gdHJ1ZTsKICB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdmaWxlYmluIGF0dGVtcHQgMTonLCBlLm1lc3NhZ2UpOyB9CgogIC8vIEJyaWVmIHBhdXNlIHRoZW4gcmV0cnkgZmlsZWJpbiAoYXR0ZW1wdCAyKQogIGF3YWl0IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHIpIHsgc2V0VGltZW91dChyLCAyMDAwKTsgfSk7CiAgdHJ5IHsKICAgIGlmIChhd2FpdCB0cnlGaWxlYmluKGJsb2IsIGZpbGVuYW1lLCBidWNrZXQpKSByZXR1cm4gdHJ1ZTsKICB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdmaWxlYmluIGF0dGVtcHQgMjonLCBlLm1lc3NhZ2UpOyB9CgogIC8vIExhc3QgcmVzb3J0OiBnb2ZpbGUKICB0cnkgewogICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTsKICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgYmxvYiwgZmlsZW5hbWUpOwogICAgdmFyIHJlcyA9IGF3YWl0IGZldGNoV2l0aFRpbWVvdXQoJ2h0dHBzOi8vdXBsb2FkLmdvZmlsZS5pby91cGxvYWRGaWxlJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogZm9ybSB9LCAyMDAwMCk7CiAgICB2YXIgaiA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICBpZiAoai5zdGF0dXMgPT09ICdvaycpIHsKICAgICAgc3RhdGUubGFzdFVwbG9hZCA9IERhdGUubm93KCk7CiAgICAgICQoJ3NoYXJlYWJsZScpLnZhbHVlID0gai5kYXRhLmRvd25sb2FkUGFnZTsKICAgICAgc2hvd0Jhbm5lcignVXBsb2FkIENvbXBsZXRlIChHb0ZpbGUpIC0gUHJlc3MgQ29weSBMaW5rIGFuZCBzZW5kIGl0IHRvIG91ciBjaGF0Jyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKCdnb2ZpbGUgZmFsbGJhY2s6JywgZS5tZXNzYWdlKTsgfQoKICBzaG93QmFubmVyKCdVcGxvYWQgZmFpbGVkIC0gcGxlYXNlIFNhdmUgeW91ciBsaXN0IGFuZCB0cnkgYWdhaW4gbGF0ZXInLCA1MDAwKTsKICB0aHJvdyBuZXcgRXJyb3IoJ1VwbG9hZCBmYWlsZWQnKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gQ09QWSBMSU5LID09PT09PT09PT09PT09PT09PT09CiQoJ2NvcHlMaW5rJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICBpZiAoIXJlcXVpcmVDdXN0b21lck5hbWUoKSkgcmV0dXJuOwogIHZhciBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJycpLnRyaW0oKTsKCiAgdmFyIHJhd0xpbmsgPSAkKCdzaGFyZWFibGUnKS52YWx1ZS50cmltKCk7CiAgdmFyIGxpbmsgPSByYXdMaW5rLnJlcGxhY2UoL15odHRwcz86XC9cLy8sICdoeHhwY2ZmJykucmVwbGFjZSgvXC4vZywgJ19kb3RfJyk7CgogIC8vIEJ1aWxkIHBlci1jb25zb2xlIGdyb3VwZWQgc2VsZWN0aW9uCiAgdmFyIHRvdGFsQ291bnQgPSAwLCB0b3RhbEJ5dGVzID0gMDsKICB2YXIgZ3JvdXBzID0gW107IC8vIHsgbGFiZWwsIGl0ZW1zOiBbe25hbWUsIHNpemV9XSB9CgogIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgewogICAgLy8gR2F0aGVyIGZyb20gQUxMIGNvbnNvbGVzIHRoYXQgaGF2ZSBzZWxlY3Rpb25zIChub3QganVzdCBhY3RpdmVDb25zb2xlcykKICAgIHZhciBjb25zb2xlSWRzID0gc3RhdGUuYWN0aXZlQ29uc29sZXMuc2xpY2UoKTsKICAgIC8vIEFsc28gY2hlY2sgYW55IGNvbnNvbGVTdGF0ZXMgbm90IGluIGFjdGl2ZUNvbnNvbGVzIChzYWZldHkpCiAgICBPYmplY3Qua2V5cyhzdGF0ZS5jb25zb2xlU3RhdGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgIGlmIChjb25zb2xlSWRzLmluZGV4T2YoaWQpID09PSAtMSAmJiBzdGF0ZS5jb25zb2xlU3RhdGVzW2lkXS5zZWxlY3RlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc29sZUlkcy5wdXNoKGlkKTsKICAgICAgfQogICAgfSk7CiAgICBjb25zb2xlSWRzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgdmFyIGNzID0gc3RhdGUuY29uc29sZVN0YXRlc1tpZF07CiAgICAgIGlmICghY3MgfHwgY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgIHZhciBjID0gQ09OU09MRVNbaWRdOwogICAgICBpZiAoIWMpIHJldHVybjsKICAgICAgdmFyIGcgPSB7IGxhYmVsOiBjLmxhYmVsLCBjb2xvcjogYy5jb2xvciwgaXRlbXM6IFtdIH07CiAgICAgIGNzLnNlbGVjdGVkLmZvckVhY2goZnVuY3Rpb24ocykgewogICAgICAgIGcuaXRlbXMucHVzaCh7IG5hbWU6IHMubmFtZSwgc2l6ZTogZm9ybWF0U2l6ZVRvR0Iocy5zaXplKSB9KTsKICAgICAgICB0b3RhbEJ5dGVzICs9IHBhcnNlU2l6ZVRleHQocy5zaXplKTsKICAgICAgICB0b3RhbENvdW50Kys7CiAgICAgIH0pOwogICAgICBncm91cHMucHVzaChnKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogICAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogICAgaWYgKGNzICYmIGNzLnNlbGVjdGVkLmxlbmd0aCA+IDApIHsKICAgICAgdmFyIGcgPSB7IGxhYmVsOiBjZmcubGFiZWwsIGNvbG9yOiBjZmcuY29sb3IsIGl0ZW1zOiBbXSB9OwogICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHMpIHsKICAgICAgICBnLml0ZW1zLnB1c2goeyBuYW1lOiBzLm5hbWUsIHNpemU6IGZvcm1hdFNpemVUb0dCKHMuc2l6ZSkgfSk7CiAgICAgICAgdG90YWxCeXRlcyArPSBwYXJzZVNpemVUZXh0KHMuc2l6ZSk7CiAgICAgICAgdG90YWxDb3VudCsrOwogICAgICB9KTsKICAgICAgZ3JvdXBzLnB1c2goZyk7CiAgICB9CiAgfQoKICBpZiAodG90YWxDb3VudCA9PT0gMCkgeyBzaG93VG9hc3QoJ05vIGl0ZW1zIHNlbGVjdGVkJyk7IHJldHVybjsgfQoKICB2YXIgdG90YWxHQiA9IGJ5dGVzVG9HQih0b3RhbEJ5dGVzKS50b0ZpeGVkKDIpOwogIHZhciBmaWxlbmFtZSA9ICQoJ2ZpbGVuYW1lUHJldmlldycpLnRleHRDb250ZW50IHx8ICdsaXN0JzsKICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICB2YXIgc3RhbXAgPSBub3cudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgeyB5ZWFyOidudW1lcmljJywgbW9udGg6JzItZGlnaXQnLCBkYXk6JzItZGlnaXQnLCBob3VyOicyLWRpZ2l0JywgbWludXRlOicyLWRpZ2l0Jywgc2Vjb25kOicyLWRpZ2l0JyB9KTsKICB2YXIgbGlua1RvVXNlID0gbGluayB8fCAnKE5vIGxpbmsgdXBsb2FkZWQpJzsKCiAgLy8gQnVpbGQgcGxhaW4gdGV4dCBmb3IgY2xpcGJvYXJkCiAgdmFyIHRpdGxlc0FyciA9IFtdOwogIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKGcpIHsKICAgIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgewogICAgICBnLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oaSkgeyB0aXRsZXNBcnIucHVzaCgnWycgKyBnLmxhYmVsICsgJ10gJyArIGkubmFtZSk7IH0pOwogICAgfSBlbHNlIHsKICAgICAgZy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGkpIHsgdGl0bGVzQXJyLnB1c2goaS5uYW1lKTsgfSk7CiAgICB9CiAgfSk7CiAgdmFyIHN1bW1hcnlUZXh0ID0gJ0N1c3RvbWVyOiAnICsgY3VzdCArICdcbkZpbGVuYW1lOiAnICsgZmlsZW5hbWUgKyAnXG5RdWFudGl0eTogJyArIHRvdGFsQ291bnQgKyAnIGl0ZW1zXG5Ub3RhbCBTaXplOiAnICsgdG90YWxHQiArICcgR0JcbkdlbmVyYXRlZDogJyArIHN0YW1wICsgJ1xuXG4nICsgbGlua1RvVXNlICsgJ1xuXG4nOwogIHZhciBmaW5hbFRleHQgPSBzdW1tYXJ5VGV4dCArIHRpdGxlc0Fyci5qb2luKCdcbicpOwoKICAvLyBTaG93IHRoZSBjb3B5IG1vZGFsCiAgc2hvd0NvcHlNb2RhbCh7CiAgICBjdXN0b21lcjogY3VzdCwKICAgIGZpbGVuYW1lOiBmaWxlbmFtZSwKICAgIHRvdGFsQ291bnQ6IHRvdGFsQ291bnQsCiAgICB0b3RhbEdCOiB0b3RhbEdCLAogICAgc3RhbXA6IHN0YW1wLAogICAgbGluazogbGlua1RvVXNlLAogICAgZ3JvdXBzOiBncm91cHMsCiAgICBjbGlwYm9hcmRUZXh0OiBmaW5hbFRleHQKICB9KTsKfSk7CgpmdW5jdGlvbiBzaG93Q29weU1vZGFsKGRhdGEpIHsKICB2YXIgbW9kYWwgPSAkKCdjb3B5TW9kYWwnKTsKICB2YXIgYm9keSA9ICQoJ2NvcHlNb2RhbEJvZHknKTsKCiAgLy8gQnVpbGQgaGVhZGVyIHN1bW1hcnkKICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPSJjb3B5LXN1bW1hcnkiPic7CiAgaHRtbCArPSAnPGRpdiBjbGFzcz0iY29weS1zdW1tYXJ5LXJvdyI+PHNwYW4gY2xhc3M9ImNvcHktbGFiZWwiPkN1c3RvbWVyPC9zcGFuPjxzcGFuIGNsYXNzPSJjb3B5LXZhbHVlIj4nICsgZXNjKGRhdGEuY3VzdG9tZXIpICsgJzwvc3Bhbj48L2Rpdj4nOwogIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktc3VtbWFyeS1yb3ciPjxzcGFuIGNsYXNzPSJjb3B5LWxhYmVsIj5GaWxlPC9zcGFuPjxzcGFuIGNsYXNzPSJjb3B5LXZhbHVlIGNvcHktZmlsZW5hbWUiPicgKyBlc2MoZGF0YS5maWxlbmFtZSkgKyAnPC9zcGFuPjwvZGl2Pic7CiAgaHRtbCArPSAnPGRpdiBjbGFzcz0iY29weS1zdW1tYXJ5LXJvdyI+PHNwYW4gY2xhc3M9ImNvcHktbGFiZWwiPlRvdGFsPC9zcGFuPjxzcGFuIGNsYXNzPSJjb3B5LXZhbHVlIj4nICsgZGF0YS50b3RhbENvdW50ICsgJyBpdGVtcyAmbWlkZG90OyAnICsgZGF0YS50b3RhbEdCICsgJyBHQjwvc3Bhbj48L2Rpdj4nOwogIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktc3VtbWFyeS1yb3ciPjxzcGFuIGNsYXNzPSJjb3B5LWxhYmVsIj5EYXRlPC9zcGFuPjxzcGFuIGNsYXNzPSJjb3B5LXZhbHVlIj4nICsgZXNjKGRhdGEuc3RhbXApICsgJzwvc3Bhbj48L2Rpdj4nOwogIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktc3VtbWFyeS1yb3ciPjxzcGFuIGNsYXNzPSJjb3B5LWxhYmVsIj5MaW5rPC9zcGFuPjxzcGFuIGNsYXNzPSJjb3B5LXZhbHVlIGNvcHktbGluayI+JyArIGVzYyhkYXRhLmxpbmspICsgJzwvc3Bhbj48L2Rpdj4nOwogIGh0bWwgKz0gJzwvZGl2Pic7CgogIC8vIEJ1aWxkIGdhbWUgbGlzdCBwZXIgZ3JvdXAKICBkYXRhLmdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKGcpIHsKICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktZ3JvdXAiPic7CiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJjb3B5LWdyb3VwLWhlYWRlciIgc3R5bGU9ImJvcmRlci1sZWZ0LWNvbG9yOicgKyBnLmNvbG9yICsgJyI+JyArIGVzYyhnLmxhYmVsKSArICcgPHNwYW4gY2xhc3M9ImNvcHktZ3JvdXAtY291bnQiPignICsgZy5pdGVtcy5sZW5ndGggKyAnKTwvc3Bhbj48L2Rpdj4nOwogICAgaHRtbCArPSAnPGRpdiBjbGFzcz0iY29weS1ncm91cC1pdGVtcyI+JzsKICAgIGcuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpZHgpIHsKICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0iY29weS1pdGVtIj48c3BhbiBjbGFzcz0iY29weS1pdGVtLW51bSI+JyArIChpZHggKyAxKSArICc8L3NwYW4+PHNwYW4gY2xhc3M9ImNvcHktaXRlbS1uYW1lIj4nICsgZXNjKGl0ZW0ubmFtZSkgKyAnPC9zcGFuPjxzcGFuIGNsYXNzPSJjb3B5LWl0ZW0tc2l6ZSI+JyArIGVzYyhpdGVtLnNpemUpICsgJzwvc3Bhbj48L2Rpdj4nOwogICAgfSk7CiAgICBodG1sICs9ICc8L2Rpdj48L2Rpdj4nOwogIH0pOwoKICBib2R5LmlubmVySFRNTCA9IGh0bWw7CiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKCiAgLy8gQ29weSBidXR0b24KICAkKCdjb3B5TW9kYWxCdG4nKS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CiAgICBjb3B5UGxhaW5UZXh0KGRhdGEuY2xpcGJvYXJkVGV4dCwgZnVuY3Rpb24ob2spIHsKICAgICAgaWYgKG9rKSB7CiAgICAgICAgJCgnY29weU1vZGFsQnRuJykudGV4dENvbnRlbnQgPSAnQ29waWVkISc7CiAgICAgICAgJCgnY29weU1vZGFsQnRuJykuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1hY2NlbnQpJzsKICAgICAgICAkKCdjb3B5TW9kYWxCdG4nKS5zdHlsZS5jb2xvciA9ICcjMDAwJzsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICQoJ2NvcHlNb2RhbEJ0bicpLnRleHRDb250ZW50ID0gJ0NvcHkgdG8gQ2xpcGJvYXJkJzsKICAgICAgICAgICQoJ2NvcHlNb2RhbEJ0bicpLnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICAgICQoJ2NvcHlNb2RhbEJ0bicpLnN0eWxlLmNvbG9yID0gJyc7CiAgICAgICAgfSwgMTIwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2hvd1RvYXN0KCdDb3B5IGZhaWxlZCDigJQgdHJ5IG1hbnVhbGx5Jyk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIC8vIENsb3NlCiAgJCgnY29weU1vZGFsQ2xvc2UnKS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH07CiAgbW9kYWwub25jbGljayA9IGZ1bmN0aW9uKGV2KSB7IGlmIChldi50YXJnZXQgPT09IG1vZGFsKSBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBGSUxFIE9QRU4gPT09PT09PT09PT09PT09PT09PT0KJCgnZmlsZUluJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHsKICB2YXIgZiA9IGV2LnRhcmdldC5maWxlc1swXTsKICBpZiAoIWYpIHJldHVybjsKCiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgaWYgKCFjcyB8fCAhY2ZnKSB7IGFsZXJ0KCdTZWxlY3QgYSBjb25zb2xlIGZpcnN0Jyk7IHJldHVybjsgfQoKICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgdmFyIGxpbmVzID0gZS50YXJnZXQucmVzdWx0LnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBzLnRyaW0oKTsgfSkuZmlsdGVyKEJvb2xlYW4pOwogICAgY3Muc2VsZWN0ZWQgPSBbXTsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykuZm9yRWFjaChmdW5jdGlvbihpKSB7IGkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsgfSk7CgogICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbih0aXRsZSkgewogICAgICB2YXIgbGVmdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkuZmluZChmdW5jdGlvbihpKSB7IHJldHVybiBpLmRhdGFzZXQubmFtZSA9PT0gdGl0bGU7IH0pOwogICAgICBpZiAobGVmdCkgewogICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgICBjcy5zZWxlY3RlZC5wdXNoKHsgbmFtZTogbGVmdC5kYXRhc2V0Lm5hbWUsIGZpbGVuYW1lOiBsZWZ0LmRhdGFzZXQuZmlsZW5hbWUgfHwgbGVmdC5kYXRhc2V0Lm5hbWUsIHNpemU6IGxlZnQuZGF0YXNldC5zaXplIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBtYXliZSA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkuZmluZChmdW5jdGlvbihpKSB7IHJldHVybiBpLmRhdGFzZXQubmFtZSAmJiBpLmRhdGFzZXQubmFtZS50b0xvd2VyQ2FzZSgpID09PSB0aXRsZS50b0xvd2VyQ2FzZSgpOyB9KTsKICAgICAgICBpZiAobWF5YmUpIHsKICAgICAgICAgIG1heWJlLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7CiAgICAgICAgICBjcy5zZWxlY3RlZC5wdXNoKHsgbmFtZTogbWF5YmUuZGF0YXNldC5uYW1lLCBmaWxlbmFtZTogbWF5YmUuZGF0YXNldC5maWxlbmFtZSB8fCBtYXliZS5kYXRhc2V0Lm5hbWUsIHNpemU6IG1heWJlLmRhdGFzZXQuc2l6ZSB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgdXBkYXRlVG90YWxzKCk7CiAgICByZW5kZXJPdmVybGF5KCk7CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsgYnVpbGRNaXhUYWJzKCk7IHVwZGF0ZUdyYW5kVG90YWwoKTsgfQogICAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgfTsKICByZWFkZXIucmVhZEFzVGV4dChmKTsKfSk7CgovLyA9PT09PT09PT09PT09PT09PT09PSBVUExPQURTIExJU1QgPT09PT09PT09PT09PT09PT09PT0KdmFyIGJpbkxpc3RQYWdlID0gMDsKdmFyIGJpbkxpc3RQYWdlU2l6ZSA9IDEwOwp2YXIgY2FjaGVkQmluRmlsZXMgPSBudWxsOwoKJCgnYmluTGlzdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24oKSB7CiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIGlmICghY2ZnKSB7IHNob3dUb2FzdCgnU2VsZWN0IGEgY29uc29sZSBmaXJzdCcpOyByZXR1cm47IH0KCiAgdmFyIGJ1Y2tldCA9IGNmZy5maWxlYmluQnVja2V0OwogIHZhciB1cmwgPSAnaHR0cHM6Ly9maWxlYmluLm5ldC8nICsgYnVja2V0ICsgJz9qc29uJzsKICB2YXIgYXR0ZW1wdHMgPSAyOwogIHZhciBqID0gbnVsbDsKICBmb3IgKHZhciBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBhdHRlbXB0czsgYXR0ZW1wdCsrKSB7CiAgICB0cnkgewogICAgICB2YXIgciA9IGF3YWl0IGZldGNoV2l0aFRpbWVvdXQodXJsLCB7IGhlYWRlcnM6IHsgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH0sIDE1MDAwKTsKICAgICAgaWYgKHIub2spIHsgaiA9IGF3YWl0IHIuanNvbigpOyBicmVhazsgfQogICAgICBpZiAoYXR0ZW1wdCA8IGF0dGVtcHRzKSB7IGF3YWl0IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHcpIHsgc2V0VGltZW91dCh3LCAyMDAwKTsgfSk7IH0KICAgIH0gY2F0Y2goZSkgewogICAgICBjb25zb2xlLndhcm4oJ2Jpbkxpc3QgYXR0ZW1wdCAnICsgYXR0ZW1wdCArICc6JywgZS5tZXNzYWdlKTsKICAgICAgaWYgKGF0dGVtcHQgPCBhdHRlbXB0cykgeyBhd2FpdCBuZXcgUHJvbWlzZShmdW5jdGlvbih3KSB7IHNldFRpbWVvdXQodywgMjAwMCk7IH0pOyB9CiAgICB9CiAgfQogIGlmICghaikgeyBzaG93VG9hc3QoJ0NvdWxkIG5vdCByZWFjaCBmaWxlYmluIC0gdHJ5IGFnYWluIGxhdGVyJyk7IHJldHVybjsgfQogIGlmICghai5maWxlcyB8fCAhai5maWxlcy5sZW5ndGgpIHsgc2hvd1RvYXN0KCdObyBmaWxlcyBmb3VuZCcpOyByZXR1cm47IH0KCiAgLy8gU2hvdyBhbGwgQ0xJIGZpbGVzLCBub3QganVzdCBjdXJyZW50IHBsYXRmb3JtCiAgdmFyIGFsbEV4dHMgPSBbJy5DTElfUFJNWicsICcuQ0xJX1BSTVo0JywgJy5DTElfUFJNWlAnLCAnLkNMSV9QUk1aMicsICcuQ0xJX1BSTVpTJywgJy5DTElfUFJNWjMnLCAnLkNMSV9QUk1aWCcsICcuQ0xJX1BSTVpNSVgnXTsKICB2YXIgcGxhdGZvcm1GaWxlcyA9IGouZmlsZXMuZmlsdGVyKGZ1bmN0aW9uKGZpbGUpIHsKICAgIHJldHVybiBhbGxFeHRzLnNvbWUoZnVuY3Rpb24oZXh0KSB7IHJldHVybiBmaWxlLmZpbGVuYW1lLmVuZHNXaXRoKGV4dCk7IH0pOwogIH0pOwogIGlmIChwbGF0Zm9ybUZpbGVzLmxlbmd0aCA9PT0gMCkgeyBzaG93VG9hc3QoJ05vIHVwbG9hZCBmaWxlcyBmb3VuZCcpOyByZXR1cm47IH0KCiAgY2FjaGVkQmluRmlsZXMgPSBwbGF0Zm9ybUZpbGVzLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gbmV3IERhdGUoYi51cGRhdGVkX2F0KSAtIG5ldyBEYXRlKGEudXBkYXRlZF9hdCk7IH0pOwogIGJpbkxpc3RQYWdlID0gMDsKICByZW5kZXJCaW5MaXN0KCk7Cn0pOwoKZnVuY3Rpb24gcmVuZGVyQmluTGlzdCgpIHsKICBpZiAoIWNhY2hlZEJpbkZpbGVzKSByZXR1cm47CiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIHZhciBzdGFydCA9IGJpbkxpc3RQYWdlICogYmluTGlzdFBhZ2VTaXplOwogIHZhciBwYWdlRmlsZXMgPSBjYWNoZWRCaW5GaWxlcy5zbGljZShzdGFydCwgc3RhcnQgKyBiaW5MaXN0UGFnZVNpemUpOwogIHZhciBoYXNNb3JlID0gc3RhcnQgKyBiaW5MaXN0UGFnZVNpemUgPCBjYWNoZWRCaW5GaWxlcy5sZW5ndGg7CgogIHZhciBodG1sID0gJzxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpsZWZ0O21hcmdpbi1ib3R0b206OHB4OyI+JyArCiAgICAnPGJ1dHRvbiBpZD0iY2xvc2VCaW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7Ij5DbG9zZTwvYnV0dG9uPicgKwogICAgJzxzdHJvbmc+UmVjZW50IFVwbG9hZHM8L3N0cm9uZz48L2Rpdj4nICsKICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjhweDttYXJnaW4tYm90dG9tOjhweDsiPicgKwogICAgJzxidXR0b24gaWQ9InByZXZQYWdlIiBjbGFzcz0iYnRuIGdob3N0IiBzdHlsZT0icGFkZGluZzo0cHggOHB4O2ZsZXg6MTsiICcgKyAoYmluTGlzdFBhZ2UgPT09IDAgPyAnZGlzYWJsZWQnIDogJycpICsgJz5QcmV2PC9idXR0b24+JyArCiAgICAnPHNwYW4gc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6IzZiNzI4MDsiPlBhZ2UgJyArIChiaW5MaXN0UGFnZSArIDEpICsgJzwvc3Bhbj4nICsKICAgICc8YnV0dG9uIGlkPSJuZXh0UGFnZSIgY2xhc3M9ImJ0biBnaG9zdCIgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtmbGV4OjE7IiAnICsgKCFoYXNNb3JlID8gJ2Rpc2FibGVkJyA6ICcnKSArICc+TmV4dDwvYnV0dG9uPjwvZGl2PicgKwogICAgJzx1bCBzdHlsZT0ibWFyZ2luOjA7cGFkZGluZy1sZWZ0OjIwcHg7bGlzdC1zdHlsZTpub25lOyI+JzsKCiAgcGFnZUZpbGVzLmZvckVhY2goZnVuY3Rpb24oZmlsZSkgewogICAgdmFyIGZpbGVVcmwgPSAnaHR0cHM6Ly9maWxlYmluLm5ldC8nICsgY2ZnLmZpbGViaW5CdWNrZXQgKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZS5maWxlbmFtZSk7CiAgICB2YXIgZCA9IG5ldyBEYXRlKGZpbGUudXBkYXRlZF9hdCk7CiAgICB2YXIgZGF0ZVN0ciA9IGQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkucmVwbGFjZSgvLS9nLCAnJyk7CiAgICB2YXIgaCA9IGQuZ2V0SG91cnMoKSwgbSA9IGQuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgIHZhciBhbXBtID0gaCA+PSAxMiA/ICdQTScgOiAnQU0nOwogICAgdmFyIHRpbWVTdHIgPSAoaCAlIDEyIHx8IDEyKSArICc6JyArIG0gKyAnICcgKyBhbXBtOwogICAgdmFyIHN0cmlwcGVkID0gZmlsZS5maWxlbmFtZS5zcGxpdCgnLicpLnNsaWNlKDAsIC0xKS5qb2luKCcuJyk7CiAgICBodG1sICs9ICc8bGkgc3R5bGU9Im1hcmdpbi1ib3R0b206NnB4O2ZvbnQtc2l6ZToxMnB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDsiPicgKwogICAgICAnPGJ1dHRvbiBjbGFzcz0iYnRuLWxvYWQtZmlsZSIgZGF0YS11cmw9IicgKyBmaWxlVXJsICsgJyIgZGF0YS1maWxlbmFtZT0iJyArIGZpbGUuZmlsZW5hbWUgKyAnIiBzdHlsZT0icGFkZGluZzoycHggNnB4O2ZvbnQtc2l6ZToxMHB4O2JhY2tncm91bmQ6IzNiODJmNjtjb2xvcjojZmZmO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O2N1cnNvcjpwb2ludGVyOyI+TG9hZDwvYnV0dG9uPicgKwogICAgICAnPGEgaHJlZj0iJyArIGZpbGVVcmwgKyAnIiB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9InRleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOiMwMzY2ZDY7ZmxleDoxOyI+JyArIGRhdGVTdHIgKyAnICcgKyB0aW1lU3RyICsgJyB8ICcgKyBzdHJpcHBlZCArICcgfCAnICsgKGZpbGUuYnl0ZXNfcmVhZGFibGUgfHwgJycpICsgJzwvYT48L2xpPic7CiAgfSk7CiAgaHRtbCArPSAnPC91bD4nOwoKICB2YXIgY29udGFpbmVyID0gJCgnZmlsZUxpc3RDb250YWluZXInKTsKICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDsKICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmQgPSAnI2Y5ZmFmYic7CiAgY29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTJweCc7CiAgY29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnOwogIGNvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSAnMzAwcHgnOwogIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7CgogICQoJ2Nsb3NlQmluJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGNhY2hlZEJpbkZpbGVzID0gbnVsbDsgfSk7CiAgdmFyIHByZXYgPSAkKCdwcmV2UGFnZScpOwogIGlmIChwcmV2ICYmIGJpbkxpc3RQYWdlID4gMCkgcHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyBiaW5MaXN0UGFnZS0tOyByZW5kZXJCaW5MaXN0KCk7IH0pOwogIHZhciBuZXh0ID0gJCgnbmV4dFBhZ2UnKTsKICBpZiAobmV4dCAmJiBoYXNNb3JlKSBuZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IGJpbkxpc3RQYWdlKys7IHJlbmRlckJpbkxpc3QoKTsgfSk7CgogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tbG9hZC1maWxlJykuZm9yRWFjaChmdW5jdGlvbihidG4pIHsKICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICB2YXIgdXJsID0gYnRuLmRhdGFzZXQudXJsOwogICAgICBidG4udGV4dENvbnRlbnQgPSAnLi4uJzsKICAgICAgYnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9mZXRjaCcsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXJsOiB1cmwgfSkKICAgICAgICB9KTsKICAgICAgICB2YXIgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyAhPT0gJ29rJykgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5tZXNzYWdlIHx8ICdGZXRjaCBmYWlsZWQnKTsKCiAgICAgICAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICAgICAgICB2YXIgbGluZXMgPSByZXN1bHQuY29udGVudC5zcGxpdCgnXG4nKS5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy50cmltKCk7IH0pLmZpbHRlcihCb29sZWFuKTsKICAgICAgICBjcy5zZWxlY3RlZCA9IFtdOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykuZm9yRWFjaChmdW5jdGlvbihpKSB7IGkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsgfSk7CiAgICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbih0aXRsZSkgewogICAgICAgICAgdmFyIGxlZnQgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoZnVuY3Rpb24oaSkgeyByZXR1cm4gaS5kYXRhc2V0Lm5hbWUgPT09IHRpdGxlOyB9KTsKICAgICAgICAgIGlmIChsZWZ0KSB7CiAgICAgICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgY3Muc2VsZWN0ZWQucHVzaCh7IG5hbWU6IGxlZnQuZGF0YXNldC5uYW1lLCBmaWxlbmFtZTogbGVmdC5kYXRhc2V0LmZpbGVuYW1lIHx8IGxlZnQuZGF0YXNldC5uYW1lLCBzaXplOiBsZWZ0LmRhdGFzZXQuc2l6ZSB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB1cGRhdGVUb3RhbHMoKTsKICAgICAgICBzaG93QmFubmVyKCdMb2FkZWQgJyArIGxpbmVzLmxlbmd0aCArICcgaXRlbXMnLCAyMDAwKTsKICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBjYWNoZWRCaW5GaWxlcyA9IG51bGw7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIHNob3dCYW5uZXIoJ0xpc3RlbmVyIG5vdCBydW5uaW5nIG9yIGxvYWQgZmFpbGVkJywgMzAwMCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0xvYWQnOwogICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICB9KTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gTUFUQ0ggTElTVCA9PT09PT09PT09PT09PT09PT09PQokKCdtYXRjaExpc3QnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgaWYgKCFjcyB8fCBjcy5pdGVtcy5sZW5ndGggPT09IDApIHsgc2hvd1RvYXN0KCdMb2FkIGEgY29uc29sZSBmaXJzdCcpOyByZXR1cm47IH0KCiAgdmFyIG1vZGFsID0gJCgnZmlsZXNNb2RhbCcpOwogIG1vZGFsLmlubmVySFRNTCA9ICcnOwogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIG1vZGFsLnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JzsKCiAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGhlYWRlci5pbm5lckhUTUwgPSAnPHN0cm9uZz5NYXRjaCBVc2VyIExpc3Q8L3N0cm9uZz48YnI+PHNwYW4gY2xhc3M9Im1ldGEiPlBhc3RlIHVzZXJcJ3MgZ2FtZSBsaXN0IChvbmUgcGVyIGxpbmUpPC9zcGFuPic7CiAgbW9kYWwuYXBwZW5kQ2hpbGQoaGVhZGVyKTsKCiAgdmFyIHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsKICB0ZXh0YXJlYS5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOjEwMCU7bWluLWhlaWdodDoyMDBweDttYXJnaW4tdG9wOjEycHg7cGFkZGluZzo4cHg7Ym9yZGVyOjFweCBzb2xpZCAjNDM0MzQ1O2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtZmFtaWx5Om1vbm9zcGFjZTtmb250LXNpemU6MTNweDsnOwogIHRleHRhcmVhLnBsYWNlaG9sZGVyID0gJ0dhbWUgVGl0bGUgMVxuR2FtZSBUaXRsZSAyXG4uLi4nOwogIG1vZGFsLmFwcGVuZENoaWxkKHRleHRhcmVhKTsKCiAgdmFyIGJ0blJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGJ0blJvdy5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6ZmxleDttYXJnaW4tdG9wOjEycHg7JzsKICB2YXIgbWF0Y2hCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICBtYXRjaEJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9ICc4cHgnOwogIG1hdGNoQnRuLnRleHRDb250ZW50ID0gJ0FuYWx5emUgJiBNYXRjaCc7CiAgbWF0Y2hCdG4uY2xhc3NOYW1lID0gJ2J0biBidG4tcHJpbWFyeSc7CiAgbWF0Y2hCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyBzaG93TWF0Y2hSZXN1bHRzKHRleHRhcmVhLnZhbHVlLnRyaW0oKSwgY3MpOyB9OwogIGJ0blJvdy5hcHBlbmRDaGlsZChtYXRjaEJ0bik7CiAgdmFyIGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgY2xvc2VCdG4udGV4dENvbnRlbnQgPSAnQ2FuY2VsJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH07CiAgYnRuUm93LmFwcGVuZENoaWxkKGNsb3NlQnRuKTsKICBtb2RhbC5hcHBlbmRDaGlsZChidG5Sb3cpOwp9KTsKCmZ1bmN0aW9uIHNob3dNYXRjaFJlc3VsdHModXNlckxpc3QsIGNzKSB7CiAgaWYgKCF1c2VyTGlzdCkgeyBhbGVydCgnUGxlYXNlIHBhc3RlIGEgZ2FtZSBsaXN0Jyk7IHJldHVybjsgfQogIHZhciBsaW5lcyA9IHVzZXJMaXN0LnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBzLnRyaW0oKTsgfSkuZmlsdGVyKEJvb2xlYW4pOwogIHZhciByZXN1bHRzID0geyBleGFjdDogW10sIGhpZ2g6IFtdLCBub3RGb3VuZDogW10gfTsKCiAgbGluZXMuZm9yRWFjaChmdW5jdGlvbih1c2VyVGl0bGUpIHsKICAgIHZhciBub3JtYWxpemVkID0gdXNlclRpdGxlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15cd1xzXS9nLCAnICcpLnJlcGxhY2UoL1xzKy9nLCAnICcpLnRyaW0oKTsKICAgIHZhciBleGFjdE1hdGNoID0gY3MuaXRlbXMuZmluZChmdW5jdGlvbihpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXlx3XHNdL2csICcgJykucmVwbGFjZSgvXHMrL2csICcgJykudHJpbSgpID09PSBub3JtYWxpemVkOwogICAgfSk7CiAgICBpZiAoZXhhY3RNYXRjaCkgewogICAgICByZXN1bHRzLmV4YWN0LnB1c2goeyBvcmlnaW5hbDogdXNlclRpdGxlLCBtYXRjaGVkOiBleGFjdE1hdGNoLm5hbWUsIHNpemU6IGV4YWN0TWF0Y2guc2l6ZSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIFN1YnN0cmluZyBtYXRjaAogICAgICB2YXIgcGFydGlhbE1hdGNoID0gY3MuaXRlbXMuZmluZChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgdmFyIGRiTm9ybSA9IGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teXHdcc10vZywgJyAnKS5yZXBsYWNlKC9ccysvZywgJyAnKS50cmltKCk7CiAgICAgICAgcmV0dXJuIGRiTm9ybS5pbmNsdWRlcyhub3JtYWxpemVkKSB8fCBub3JtYWxpemVkLmluY2x1ZGVzKGRiTm9ybSk7CiAgICAgIH0pOwogICAgICBpZiAocGFydGlhbE1hdGNoKSB7CiAgICAgICAgcmVzdWx0cy5oaWdoLnB1c2goeyBvcmlnaW5hbDogdXNlclRpdGxlLCBtYXRjaGVkOiBwYXJ0aWFsTWF0Y2gubmFtZSwgc2l6ZTogcGFydGlhbE1hdGNoLnNpemUgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0cy5ub3RGb3VuZC5wdXNoKHVzZXJUaXRsZSk7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgdmFyIHRvdGFsTWF0Y2hlZCA9IHJlc3VsdHMuZXhhY3QubGVuZ3RoICsgcmVzdWx0cy5oaWdoLmxlbmd0aDsKICB2YXIgbW9kYWwgPSAkKCdmaWxlc01vZGFsJyk7CiAgbW9kYWwuaW5uZXJIVE1MID0gJyc7CiAgbW9kYWwuc3R5bGUubWF4V2lkdGggPSAnNzAwcHgnOwogIG1vZGFsLnN0eWxlLm1heEhlaWdodCA9ICc4MHZoJzsKCiAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGhlYWRlci5pbm5lckhUTUwgPSAnPHN0cm9uZz5NYXRjaCBSZXN1bHRzPC9zdHJvbmc+PGJyPjxzcGFuIGNsYXNzPSJtZXRhIj5NYXRjaGVkOiAnICsgdG90YWxNYXRjaGVkICsgJyAvICcgKyBsaW5lcy5sZW5ndGggKyAnPC9zcGFuPic7CiAgbW9kYWwuYXBwZW5kQ2hpbGQoaGVhZGVyKTsKCiAgdmFyIHJjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgcmMuc3R5bGUuY3NzVGV4dCA9ICdtYXJnaW4tdG9wOjEycHg7bWF4LWhlaWdodDo0MDBweDtvdmVyZmxvdy15OmF1dG87JzsKCiAgaWYgKHJlc3VsdHMuZXhhY3QubGVuZ3RoID4gMCkgewogICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjhweDsiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOiMxMGI5ODE7Ij5FeGFjdCAoJyArIHJlc3VsdHMuZXhhY3QubGVuZ3RoICsgJyk8L3N0cm9uZz48L2Rpdj4nOwogICAgcmVzdWx0cy5leGFjdC5mb3JFYWNoKGZ1bmN0aW9uKHIpIHsKICAgICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZjBmZGY0O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMTBiOTgxO21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMxMTE7Ij4nICsgZXNjKHIubWF0Y2hlZCkgKyAnIDxzcGFuIHN0eWxlPSJjb2xvcjojNmI3MjgwOyI+JyArIGVzYyhyLnNpemUpICsgJzwvc3Bhbj48L2Rpdj4nOwogICAgfSk7CiAgfQogIGlmIChyZXN1bHRzLmhpZ2gubGVuZ3RoID4gMCkgewogICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJtYXJnaW46MTJweCAwIDhweDsiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOiMzYjgyZjY7Ij5QYXJ0aWFsICgnICsgcmVzdWx0cy5oaWdoLmxlbmd0aCArICcpPC9zdHJvbmc+PC9kaXY+JzsKICAgIHJlc3VsdHMuaGlnaC5mb3JFYWNoKGZ1bmN0aW9uKHIpIHsKICAgICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZWZmNmZmO2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjM2I4MmY2O21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMxMTE7Ij4nICsgZXNjKHIub3JpZ2luYWwpICsgJyAmcmFycjsgPHN0cm9uZz4nICsgZXNjKHIubWF0Y2hlZCkgKyAnPC9zdHJvbmc+PC9kaXY+JzsKICAgIH0pOwogIH0KICBpZiAocmVzdWx0cy5ub3RGb3VuZC5sZW5ndGggPiAwKSB7CiAgICByYy5pbm5lckhUTUwgKz0gJzxkaXYgc3R5bGU9Im1hcmdpbjoxMnB4IDAgOHB4OyI+PHN0cm9uZyBzdHlsZT0iY29sb3I6I2VmNDQ0NDsiPk5vdCBGb3VuZCAoJyArIHJlc3VsdHMubm90Rm91bmQubGVuZ3RoICsgJyk8L3N0cm9uZz48L2Rpdj4nOwogICAgcmVzdWx0cy5ub3RGb3VuZC5mb3JFYWNoKGZ1bmN0aW9uKHQpIHsKICAgICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZmVmMmYyO2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZWY0NDQ0O21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMxMTE7Ij4nICsgZXNjKHQpICsgJzwvZGl2Pic7CiAgICB9KTsKICB9CiAgbW9kYWwuYXBwZW5kQ2hpbGQocmMpOwoKICB2YXIgYnRuUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgYnRuUm93LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpmbGV4O21hcmdpbi10b3A6MTJweDtmbGV4LXdyYXA6d3JhcDsnOwogIGlmICh0b3RhbE1hdGNoZWQgPiAwKSB7CiAgICB2YXIgYWRkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICBhZGRCdG4udGV4dENvbnRlbnQgPSAnQWRkICcgKyB0b3RhbE1hdGNoZWQgKyAnIE1hdGNoZXMnOwogICAgYWRkQnRuLmNsYXNzTmFtZSA9ICdidG4gYnRuLXByaW1hcnknOwogICAgYWRkQnRuLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzhweCc7CiAgICBhZGRCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgYWRkZWQgPSAwOwogICAgICBbXS5jb25jYXQocmVzdWx0cy5leGFjdCwgcmVzdWx0cy5oaWdoKS5mb3JFYWNoKGZ1bmN0aW9uKHIpIHsKICAgICAgICBpZiAoIWNzLnNlbGVjdGVkLnNvbWUoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5uYW1lID09PSByLm1hdGNoZWQ7IH0pKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IGNzLml0ZW1zLmZpbmQoZnVuY3Rpb24oaXQpIHsgcmV0dXJuIGl0Lm5hbWUgPT09IHIubWF0Y2hlZDsgfSk7CiAgICAgICAgICBpZiAoaXRlbSkgeyBjcy5zZWxlY3RlZC5wdXNoKHsgbmFtZTogaXRlbS5uYW1lLCBmaWxlbmFtZTogaXRlbS5maWxlbmFtZSB8fCBpdGVtLm5hbWUsIHNpemU6IGl0ZW0uc2l6ZSB9KTsgYWRkZWQrKzsgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHVwZGF0ZVRvdGFscygpOyByZW5kZXJPdmVybGF5KCk7IHJlbmRlckxpc3QoY3MuaXRlbXMpOwogICAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsgYnVpbGRNaXhUYWJzKCk7IHVwZGF0ZUdyYW5kVG90YWwoKTsgfQogICAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICAgICAgc2hvd1RvYXN0KCdBZGRlZCAnICsgYWRkZWQgKyAnIGdhbWVzJyk7CiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9OwogICAgYnRuUm93LmFwcGVuZENoaWxkKGFkZEJ0bik7CiAgfQogIHZhciBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGNsb3NlQnRuLnRleHRDb250ZW50ID0gJ0Nsb3NlJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH07CiAgYnRuUm93LmFwcGVuZENoaWxkKGNsb3NlQnRuKTsKICBtb2RhbC5hcHBlbmRDaGlsZChidG5Sb3cpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBUSEVNRSBUT0dHTEUgPT09PT09PT09PT09PT09PT09PT0KdmFyIG5pbnRlbmRvVGltZXIgPSBudWxsLCBuaW50ZW5kb0NvdW50ZG93biA9IG51bGw7CnZhciBOSU5URU5ET19IT0xEX1RJTUUgPSAyNTAwOwp2YXIgY2xlYXJCdG4gPSAkKCdjbGVhclNlYXJjaCcpOwp2YXIgY291bnRkb3duRWwgPSAkKCd0aGVtZUNvdW50ZG93bicpOwp2YXIgY291bnRkb3duTnVtID0gY291bnRkb3duRWwucXVlcnlTZWxlY3RvcignLmNvdW50ZG93bi1udW0nKTsKCmZ1bmN0aW9uIGdldEN1cnJlbnRNb2RlKCkgewogIGlmIChpc0xlZ2FjeU1vZGUpIHJldHVybiAnbGVnYWN5JzsKICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScpID09PSAnbmludGVuZG8nKSByZXR1cm4gJ25pbnRlbmRvJzsKICByZXR1cm4gJ21haW4nOwp9CmZ1bmN0aW9uIGdldE5leHRNb2RlKCkgewogIHZhciBjID0gZ2V0Q3VycmVudE1vZGUoKTsKICBpZiAoYyA9PT0gJ21haW4nKSByZXR1cm4gJ25pbnRlbmRvJzsKICBpZiAoYyA9PT0gJ25pbnRlbmRvJykgcmV0dXJuICdsZWdhY3knOwogIHJldHVybiAnbWFpbic7Cn0KZnVuY3Rpb24gZ2V0TW9kZUxhYmVsKG0pIHsKICBpZiAobSA9PT0gJ21haW4nKSByZXR1cm4gJ01haW4gVGhlbWUnOwogIGlmIChtID09PSAnbmludGVuZG8nKSByZXR1cm4gJ05pbnRlbmRvIFRoZW1lJzsKICByZXR1cm4gJ0xlZ2FjeSBNb2RlJzsKfQoKZnVuY3Rpb24gc3RhcnROaW50ZW5kb1RpbWVyKGUpIHsKICBlLnByZXZlbnREZWZhdWx0KCk7CiAgY2xlYXJCdG4uY2xhc3NMaXN0LmFkZCgnaG9sZGluZycpOwogIHZhciByZW1haW5pbmcgPSAzOwogIGNvdW50ZG93bk51bS50ZXh0Q29udGVudCA9IHJlbWFpbmluZzsKICBjb3VudGRvd25FbC5xdWVyeVNlbGVjdG9yKCcuY291bnRkb3duLWxhYmVsJykudGV4dENvbnRlbnQgPSAnSG9sZCBmb3IgJyArIGdldE1vZGVMYWJlbChnZXROZXh0TW9kZSgpKTsKICBjb3VudGRvd25FbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgbmludGVuZG9Db3VudGRvd24gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgcmVtYWluaW5nLS07IGlmIChyZW1haW5pbmcgPiAwKSBjb3VudGRvd25OdW0udGV4dENvbnRlbnQgPSByZW1haW5pbmc7IH0sIDgwMCk7CiAgbmludGVuZG9UaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICBjbGVhckludGVydmFsKG5pbnRlbmRvQ291bnRkb3duKTsKICAgIGNvdW50ZG93bkVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgIGNsZWFyQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hvbGRpbmcnKTsKICAgIHZhciBuZXh0ID0gZ2V0TmV4dE1vZGUoKTsKICAgIHZhciB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgIGlmIChuZXh0ID09PSAnbGVnYWN5JykgewogICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgnbW9kZXJuJyk7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdsZWdhY3knLCAnMScpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGhlbWUnKTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKTsKICAgIH0gZWxzZSBpZiAobmV4dCA9PT0gJ21haW4nKSB7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdsZWdhY3knKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3RoZW1lJyk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKCk7CiAgICB9IGVsc2UgewogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgJ25pbnRlbmRvJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsICduaW50ZW5kbycpOwogICAgICBzaG93VG9hc3QoJ05pbnRlbmRvIFRoZW1lIEFjdGl2YXRlZCEnKTsKICAgIH0KICB9LCBOSU5URU5ET19IT0xEX1RJTUUpOwp9CgpmdW5jdGlvbiBjYW5jZWxOaW50ZW5kb1RpbWVyKCkgewogIGNsZWFyVGltZW91dChuaW50ZW5kb1RpbWVyKTsKICBjbGVhckludGVydmFsKG5pbnRlbmRvQ291bnRkb3duKTsKICBjb3VudGRvd25FbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgY2xlYXJCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaG9sZGluZycpOwp9CgpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydE5pbnRlbmRvVGltZXIpOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc3RhcnROaW50ZW5kb1RpbWVyLCB7IHBhc3NpdmU6IGZhbHNlIH0pOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2FuY2VsTmludGVuZG9UaW1lcik7CmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKSA9PT0gJ25pbnRlbmRvJykgewogIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCAnbmludGVuZG8nKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gUkVTVE9SRSBTQVZFRCBMSVNUID09PT09PT09PT09PT09PT09PT09CnZhciBfcGVuZGluZ1Jlc3RvcmUgPSBudWxsOyAvLyB7IGNvbnNvbGVJZDogW3tuYW1lLGZpbGVuYW1lLHNpemV9LC4uLl0sIC4uLiB9CgpmdW5jdGlvbiByZXN0b3JlU2F2ZWRMaXN0KHNhdmVkRGF0YSkgewogIC8vIHNhdmVkRGF0YSA9IHsgcHM0OiBbe25hbWUsZmlsZW5hbWUsc2l6ZX0sLi4uXSwgc3dpdGNoOiBbLi4uXSwgLi4uIH0KICBfbGlzdERpcnR5ID0gdHJ1ZTsKICBfcGVuZGluZ1Jlc3RvcmUgPSBzYXZlZERhdGE7CiAgLy8gRm9yIGFueSBjb25zb2xlIGFscmVhZHkgbG9hZGVkLCBhcHBseSBub3cKICBPYmplY3Qua2V5cyhzYXZlZERhdGEpLmZvckVhY2goZnVuY3Rpb24oY29uc29sZUlkKSB7CiAgICB2YXIgY3MgPSBzdGF0ZS5jb25zb2xlU3RhdGVzW2NvbnNvbGVJZF07CiAgICBpZiAoY3MgJiYgY3MubG9hZGVkKSB7CiAgICAgIGFwcGx5UGVuZGluZ1Jlc3RvcmUoY29uc29sZUlkKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gYXBwbHlQZW5kaW5nUmVzdG9yZShjb25zb2xlSWQpIHsKICBpZiAoIV9wZW5kaW5nUmVzdG9yZSB8fCAhX3BlbmRpbmdSZXN0b3JlW2NvbnNvbGVJZF0pIHJldHVybjsKICB2YXIgY3MgPSBnZXRDb25zb2xlU3RhdGUoY29uc29sZUlkKTsKICB2YXIgcGVuZGluZyA9IF9wZW5kaW5nUmVzdG9yZVtjb25zb2xlSWRdOwogIGRlbGV0ZSBfcGVuZGluZ1Jlc3RvcmVbY29uc29sZUlkXTsKCiAgLy8gT25seSByZXN0b3JlIGlmIGN1cnJlbnRseSBlbXB0eSAoZG9uJ3Qgb3ZlcndyaXRlIHVzZXIncyBuZXcgcGlja3MpCiAgaWYgKGNzLnNlbGVjdGVkLmxlbmd0aCA+IDApIHJldHVybjsKCiAgcGVuZGluZy5mb3JFYWNoKGZ1bmN0aW9uKHNhdmVkKSB7CiAgICAvLyBWZXJpZnkgZ2FtZSBleGlzdHMgaW4gbG9hZGVkIGl0ZW1zCiAgICB2YXIgZm91bmQgPSBjcy5pdGVtcy5maW5kKGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gc2F2ZWQubmFtZTsgfSk7CiAgICBpZiAoZm91bmQpIHsKICAgICAgY3Muc2VsZWN0ZWQucHVzaCh7IG5hbWU6IGZvdW5kLm5hbWUsIGZpbGVuYW1lOiBmb3VuZC5maWxlbmFtZSB8fCBmb3VuZC5uYW1lLCBzaXplOiBmb3VuZC5zaXplIH0pOwogICAgfQogIH0pOwoKICBpZiAoY3Muc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgcmVuZGVyT3ZlcmxheSgpOwogICAgdXBkYXRlVG90YWxzKCk7CiAgICByZW5kZXJMaXN0KGNzLml0ZW1zKTsKICAgIHNob3dUb2FzdCgnUmVzdG9yZWQgJyArIGNzLnNlbGVjdGVkLmxlbmd0aCArICcgc2F2ZWQgcGlja3MnKTsKICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFBSRVZFTlQgQUNDSURFTlRBTCBDTE9TRSA9PT09PT09PT09PT09PT09PT09PQp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgZnVuY3Rpb24oZSkgewogIC8vIFNhdmUgbGlzdCBvbmUgZmluYWwgdGltZSBiZWZvcmUgY2xvc2UKICBzYXZlU2VsZWN0ZWRMaXN0KCk7CiAgLy8gV2FybiBpZiB0aGVyZSBhcmUgdW4tdXBsb2FkZWQgc2VsZWN0aW9ucwogIHZhciBoYXNTZWxlY3Rpb24gPSBmYWxzZTsKICBPYmplY3Qua2V5cyhzdGF0ZS5jb25zb2xlU3RhdGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICBpZiAoc3RhdGUuY29uc29sZVN0YXRlc1tpZF0uc2VsZWN0ZWQubGVuZ3RoID4gMCkgaGFzU2VsZWN0aW9uID0gdHJ1ZTsKICB9KTsKICBpZiAoaGFzU2VsZWN0aW9uICYmIHN0YXRlLmxhc3RVcGxvYWQgPT09IDApIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsgZS5yZXR1cm5WYWx1ZSA9ICcnOyByZXR1cm4gJyc7CiAgfQp9KTsKCi8vID09PT09PT09PT09PT09PT09PT09IFVSTCBQQVJBTVMgPT09PT09PT09PT09PT09PT09PT0KdmFyIF91cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCh0eXBlb2YgX291dGVyU2VhcmNoIT09InVuZGVmaW5lZCI/X291dGVyU2VhcmNoOndpbmRvdy5sb2NhdGlvbi5zZWFyY2gpKTsKdmFyIF9wYXJhbUNvbnNvbGUgPSAoX3VybFBhcmFtcy5nZXQoJ2NvbnNvbGUnKSB8fCAnJykudG9Mb3dlckNhc2UoKTsKdmFyIF9wYXJhbU5hbWUgPSBfdXJsUGFyYW1zLmdldCgnbmFtZScpIHx8ICcnOwoKLy8gVmFsaWRhdGUgP2NvbnNvbGU9IHBhcmFtIGFnYWluc3QgcmVnaXN0cnkKaWYgKF9wYXJhbUNvbnNvbGUgJiYgIUNPTlNPTEVTW19wYXJhbUNvbnNvbGVdKSBfcGFyYW1Db25zb2xlID0gJyc7CgovLyA9PT09PT09PT09PT09PT09PT09PSBMQU5ESU5HIE1PREFMID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHNob3dMYW5kaW5nTW9kYWwoKSB7CiAgdmFyIHNhdmVkTmFtZSA9IGxvYWRDdXN0b21lck5hbWUoKSB8fCAnJzsKICB2YXIgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBtb2RhbC5pZCA9ICdsYW5kaW5nTW9kYWwnOwogIG1vZGFsLnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDtiYWNrZ3JvdW5kOnJnYmEoMTAsMTQsMjYsMC45OCk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt6LWluZGV4Ojk5OTk7cGFkZGluZzoyNHB4O2JhY2tkcm9wLWZpbHRlcjpibHVyKDEwcHgpO292ZXJmbG93LXk6YXV0byc7CiAgdmFyIGNvbnNvbGVMaXN0ID0gT2JqZWN0LmtleXMoQ09OU09MRVMpOwogIHZhciBjYXJkcyA9ICcnOwogIGNvbnNvbGVMaXN0LmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgIHZhciBjID0gQ09OU09MRVNbaWRdOwogICAgY2FyZHMgKz0gJzxkaXYgY2xhc3M9ImxtLWNhcmQiIGRhdGEtaWQ9IicgKyBpZCArICciIHN0eWxlPSItLWNjOicgKyBjLmNvbG9yICsgJyI+JyArCiAgICAgICc8ZGl2IHN0eWxlPSJ3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQ6JyArIGMuY29sb3IgKyAnO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmb250LXNpemU6MTNweDtmb250LXdlaWdodDo3MDA7Y29sb3I6I2ZmZjttYXJnaW4tYm90dG9tOjZweCI+JyArIGMubGFiZWwuc2xpY2UoMCwzKS50b1VwcGVyQ2FzZSgpICsgJzwvZGl2PicgKwogICAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwIj4nICsgYy5sYWJlbCArICc8L2Rpdj48L2Rpdj4nOwogIH0pOwogIG1vZGFsLmlubmVySFRNTCA9CiAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOmNsYW1wKDI2cHgsNXZ3LDM4cHgpO2ZvbnQtd2VpZ2h0OjgwMDt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tYm90dG9tOjZweDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxMzVkZWcsIzNiODJmNiwjOGI1Y2Y2KTstd2Via2l0LWJhY2tncm91bmQtY2xpcDp0ZXh0Oy13ZWJraXQtdGV4dC1maWxsLWNvbG9yOnRyYW5zcGFyZW50O2JhY2tncm91bmQtY2xpcDp0ZXh0Ij5QcmVtYXppbmdQSCBHYW1lczwvZGl2PicgKwogICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxM3B4O2NvbG9yOiM5NGEzYjg7bWFyZ2luLWJvdHRvbToyOHB4O3RleHQtYWxpZ246Y2VudGVyIj5TZWxlY3QgeW91ciBjb25zb2xlIGFuZCBlbnRlciB5b3VyIG5hbWUgdG8gZ2V0IHN0YXJ0ZWQ8L2Rpdj4nICsKICAgICc8ZGl2IHN0eWxlPSJ3aWR0aDoxMDAlO21heC13aWR0aDo0MDBweDttYXJnaW4tYm90dG9tOjI0cHgiPicgKwogICAgICAnPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiM5NGEzYjg7bWFyZ2luLWJvdHRvbTo2cHg7Zm9udC13ZWlnaHQ6NTAwIj5Zb3VyIE5hbWU8L2xhYmVsPicgKwogICAgICAnPGlucHV0IGlkPSJsbU5hbWUiIHR5cGU9InRleHQiIHZhbHVlPSInICsgZXNjKHNhdmVkTmFtZSkgKyAnIiBwbGFjZWhvbGRlcj0iRW50ZXIgeW91ciBuYW1lICh1c2UgdW5kZXJzY29yZXMgZm9yIHNwYWNlcykiIGF1dG9jb21wbGV0ZT0ib2ZmIiBzcGVsbGNoZWNrPSJmYWxzZSIgJyArCiAgICAgICAgJ3N0eWxlPSJ3aWR0aDoxMDAlO3BhZGRpbmc6MTJweCAxNHB4O2JhY2tncm91bmQ6IzFlMjkzYjtib3JkZXI6MnB4IHNvbGlkICMzMzQxNTU7Ym9yZGVyLXJhZGl1czoxMHB4O2NvbG9yOiNmMWY1Zjk7Zm9udC1zaXplOjE1cHg7b3V0bGluZTpub25lO2JveC1zaXppbmc6Ym9yZGVyLWJveCI+JyArCiAgICAnPC9kaXY+JyArCiAgICAnPGRpdiBzdHlsZT0id2lkdGg6MTAwJTttYXgtd2lkdGg6NDgwcHg7bWFyZ2luLWJvdHRvbToyNHB4Ij4nICsKICAgICAgJzxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6MTJweDtjb2xvcjojOTRhM2I4O21hcmdpbi1ib3R0b206MTBweDtmb250LXdlaWdodDo1MDA7dGV4dC1hbGlnbjpjZW50ZXIiPkNob29zZSBZb3VyIENvbnNvbGU8L2xhYmVsPicgKwogICAgICAnPGRpdiBpZD0ibG1HcmlkIiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoYXV0by1maXQsbWlubWF4KDEyMHB4LDFmcikpO2dhcDo4cHgiPicgKyBjYXJkcyArICc8L2Rpdj4nICsKICAgICc8L2Rpdj4nICsKICAgICc8YnV0dG9uIGlkPSJsbUdvIiBkaXNhYmxlZCBzdHlsZT0id2lkdGg6MTAwJTttYXgtd2lkdGg6NDAwcHg7cGFkZGluZzoxNHB4O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDEzNWRlZywjM2I4MmY2LCMyNTYzZWIpO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MTBweDtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxNnB4O2ZvbnQtd2VpZ2h0OjcwMDtjdXJzb3I6cG9pbnRlcjtvcGFjaXR5OjAuNDtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb246YWxsIC4ycyI+U2VsZWN0IGEgY29uc29sZTwvYnV0dG9uPicgKwogICAgJzxidXR0b24gaWQ9ImxtTWl4IiBzdHlsZT0id2lkdGg6MTAwJTttYXgtd2lkdGg6NDAwcHg7cGFkZGluZzoxMnB4O21hcmdpbi10b3A6MTBweDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjoycHggc29saWQgIzMzNDE1NTtib3JkZXItcmFkaXVzOjEwcHg7Y29sb3I6Izk0YTNiODtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgLjJzO29wYWNpdHk6MC41O3BvaW50ZXItZXZlbnRzOm5vbmUiPm9yIHN0YXJ0IGluIE1JWCBtb2RlIChhbGwgY29uc29sZXMpPC9idXR0b24+JzsKCiAgLy8gSW5qZWN0IGNhcmQgc3R5bGVzCiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICBzdHlsZS50ZXh0Q29udGVudCA9ICcubG0tY2FyZHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmc6MTZweCAxMHB4O2JhY2tncm91bmQ6IzFlMjkzYjtib3JkZXI6MnB4IHNvbGlkICMzMzQxNTU7Ym9yZGVyLXJhZGl1czoxMnB4O2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIC4yczt1c2VyLXNlbGVjdDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZX0nICsKICAgICcubG0tY2FyZDpob3ZlcntiYWNrZ3JvdW5kOiMyNzM0NDk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTJweCl9JyArCiAgICAnLmxtLWNhcmQuc2VsZWN0ZWR7Ym9yZGVyLWNvbG9yOnZhcigtLWNjKTtiYWNrZ3JvdW5kOnJnYmEoNTksMTMwLDI0NiwwLjEyKTtib3gtc2hhZG93OjAgMCAxNnB4IHJnYmEoNTksMTMwLDI0NiwwLjIpfSc7CiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7CgogIHZhciBzZWxlY3RlZENvbnNvbGUgPSBudWxsOwogIHZhciBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG1OYW1lJyk7CiAgdmFyIGdvQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xtR28nKTsKICB2YXIgbWl4QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xtTWl4Jyk7CgogIC8vIENvbnNvbGUgY2FyZCBzaW5nbGUtc2VsZWN0CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xtR3JpZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgdmFyIGNhcmQgPSBlLnRhcmdldC5jbG9zZXN0KCcubG0tY2FyZCcpOwogICAgaWYgKCFjYXJkKSByZXR1cm47CiAgICB2YXIgaWQgPSBjYXJkLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpOwogICAgdmFyIHByZXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG0tY2FyZC5zZWxlY3RlZCcpOwogICAgaWYgKHByZXYpIHByZXYuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsKICAgIGlmIChzZWxlY3RlZENvbnNvbGUgPT09IGlkKSB7CiAgICAgIHNlbGVjdGVkQ29uc29sZSA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBzZWxlY3RlZENvbnNvbGUgPSBpZDsKICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogICAgfQogICAgdXBkYXRlR29CdG4oKTsKICB9KTsKCiAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdXBkYXRlR29CdG4pOwogIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKCkgeyB0aGlzLnN0eWxlLmJvcmRlckNvbG9yID0gJyMzYjgyZjYnOyB9KTsKICBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKCkgeyB0aGlzLnN0eWxlLmJvcmRlckNvbG9yID0gJyMzMzQxNTUnOyB9KTsKCiAgZnVuY3Rpb24gdXBkYXRlR29CdG4oKSB7CiAgICB2YXIgaGFzTmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7CiAgICB2YXIgcmVhZHkgPSBzZWxlY3RlZENvbnNvbGUgJiYgaGFzTmFtZTsKICAgIGdvQnRuLnN0eWxlLm9wYWNpdHkgPSByZWFkeSA/ICcxJyA6ICcwLjQnOwogICAgZ29CdG4uc3R5bGUucG9pbnRlckV2ZW50cyA9IHJlYWR5ID8gJ2F1dG8nIDogJ25vbmUnOwogICAgZ29CdG4uZGlzYWJsZWQgPSAhcmVhZHk7CiAgICBnb0J0bi5zdHlsZS5ib3hTaGFkb3cgPSByZWFkeSA/ICcwIDRweCAyMHB4IHJnYmEoNTksMTMwLDI0NiwwLjQpJyA6ICdub25lJzsKICAgIGdvQnRuLnRleHRDb250ZW50ID0gc2VsZWN0ZWRDb25zb2xlID8gJ1N0YXJ0IHdpdGggJyArIENPTlNPTEVTW3NlbGVjdGVkQ29uc29sZV0ubGFiZWwgOiAnU2VsZWN0IGEgY29uc29sZSc7CiAgICAvLyBNSVggYnV0dG9uIG9ubHkgbmVlZHMgYSBuYW1lCiAgICBtaXhCdG4uc3R5bGUub3BhY2l0eSA9IGhhc05hbWUgPyAnMScgOiAnMC41JzsKICAgIG1peEJ0bi5zdHlsZS5wb2ludGVyRXZlbnRzID0gaGFzTmFtZSA/ICdhdXRvJyA6ICdub25lJzsKICB9CgogIGdvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICB2YXIgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCk7CiAgICBpZiAoIXNlbGVjdGVkQ29uc29sZSB8fCAhbmFtZSkgcmV0dXJuOwogICAgc2F2ZUN1c3RvbWVyTmFtZShuYW1lKTsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgJz9jb25zb2xlPScgKyBlbmNvZGVVUklDb21wb25lbnQoc2VsZWN0ZWRDb25zb2xlKSArICcmbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpOwogIH0pOwoKICBtaXhCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgIHZhciBuYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTsKICAgIGlmICghbmFtZSkgcmV0dXJuOwogICAgc2F2ZUN1c3RvbWVyTmFtZShuYW1lKTsKICAgIC8vIE5hdmlnYXRlIHdpdGgganVzdCBuYW1lIOKAlCBubyA/Y29uc29sZT0gbWVhbnMgY29uc29sZSBiYXIgaXMgdmlzaWJsZSwgdXNlciBwaWNrcyBNSVggZnJvbSB0aGVyZQogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyAnP25hbWU9JyArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKTsKICB9KTsKCiAgbmFtZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWdvQnRuLmRpc2FibGVkKSBnb0J0bi5jbGljaygpOwogIH0pOwoKICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBuYW1lSW5wdXQuZm9jdXMoKTsgfSwgMTAwKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gSU5JVCA9PT09PT09PT09PT09PT09PT09PQooZnVuY3Rpb24gaW5pdCgpIHsKICAvLyBTaG93IGxhbmRpbmcgbW9kYWwgZm9yIG5vbi1sb2NhbCB1c2VycyB3aXRob3V0ID9jb25zb2xlPSBvciA/bmFtZT0gcGFyYW0KICAvLyBTa2lwIGlmIHRoZXkgaGF2ZSBhIHNhdmVkIHNlc3Npb24gKG5hbWUgKyBzZWxlY3Rpb25zIGluIGxvY2FsU3RvcmFnZSkKICB2YXIgX2hhc1NhdmVkU2Vzc2lvbiA9ICFpc0xvY2FsICYmIGxvYWRDdXN0b21lck5hbWUoKSAmJiBsb2FkU2VsZWN0ZWRMaXN0KCk7CiAgaWYgKCFpc0xvY2FsICYmICFfcGFyYW1Db25zb2xlICYmICFfcGFyYW1OYW1lICYmICFfaGFzU2F2ZWRTZXNzaW9uKSB7CiAgICBzaG93TGFuZGluZ01vZGFsKCk7CiAgICByZXR1cm47IC8vIGRvbid0IGluaXQgdGhlIGFwcCB5ZXQg4oCUIGxhbmRpbmcgbW9kYWwgd2lsbCByZWxvYWQgd2l0aCBwYXJhbXMKICB9CgogIGJ1aWxkQ29uc29sZUNoaXBzKCk7CiAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CgogIC8vID9jb25zb2xlPSBwYXJhbTogaGlkZSBjb25zb2xlIGJhciAobG9ja2VkIHRvIG9uZSBjb25zb2xlKQogIGlmIChfcGFyYW1Db25zb2xlKSB7CiAgICAkKCdjb25zb2xlQmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICB9CgogIC8vIFNob3cgIkNoYW5nZSIgYnV0dG9uIGluIGhlYWRlciBmb3Igbm9uLWxvY2FsIHVzZXJzIChob2xkIHRvIGFjdGl2YXRlKQogIGlmICghaXNMb2NhbCkgewogICAgdmFyIGNoYW5nZUJ0biA9ICQoJ2NoYW5nZUJ0bicpOwogICAgaWYgKGNoYW5nZUJ0bikgewogICAgICBjaGFuZ2VCdG4uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgIHZhciBfY2hhbmdlVGltZXIgPSBudWxsOwogICAgICB2YXIgX2NoYW5nZVN0YXJ0ID0gMDsKICAgICAgdmFyIF9jaGFuZ2VGaWxsID0gJCgnY2hhbmdlRmlsbCcpOwogICAgICB2YXIgSE9MRF9NUyA9IDMwMDA7CgogICAgICBmdW5jdGlvbiBkb0NoYW5nZSgpIHsKICAgICAgICB2YXIgaGFzU2VsZWN0aW9uID0gZmFsc2U7CiAgICAgICAgT2JqZWN0LmtleXMoc3RhdGUuY29uc29sZVN0YXRlcykuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgICAgICAgaWYgKHN0YXRlLmNvbnNvbGVTdGF0ZXNbaWRdLnNlbGVjdGVkLmxlbmd0aCA+IDApIGhhc1NlbGVjdGlvbiA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGhhc1NlbGVjdGlvbiAmJiBzdGF0ZS5sYXN0VXBsb2FkID09PSAwKSB7CiAgICAgICAgICBpZiAoIWNvbmZpcm0oJ1lvdSBoYXZlIHNlbGVjdGVkIGdhbWVzIHRoYXQgaGF2ZW5cJ3QgYmVlbiB1cGxvYWRlZCB5ZXQuIExlYXZlIGFueXdheT8nKSkgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjbGVhclNlbGVjdGVkTGlzdCgpOwogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOwogICAgICB9CgogICAgICBmdW5jdGlvbiBzdGFydEhvbGQoZSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBfY2hhbmdlU3RhcnQgPSBEYXRlLm5vdygpOwogICAgICAgIGlmIChfY2hhbmdlRmlsbCkgX2NoYW5nZUZpbGwuc3R5bGUudHJhbnNpdGlvbiA9ICdoZWlnaHQgJyArIEhPTERfTVMgKyAnbXMgbGluZWFyJzsKICAgICAgICBpZiAoX2NoYW5nZUZpbGwpIF9jaGFuZ2VGaWxsLnN0eWxlLmhlaWdodCA9ICcxMDAlJzsKICAgICAgICBfY2hhbmdlVGltZXIgPSBzZXRUaW1lb3V0KGRvQ2hhbmdlLCBIT0xEX01TKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjYW5jZWxIb2xkKCkgewogICAgICAgIGNsZWFyVGltZW91dChfY2hhbmdlVGltZXIpOwogICAgICAgIF9jaGFuZ2VUaW1lciA9IG51bGw7CiAgICAgICAgaWYgKF9jaGFuZ2VGaWxsKSB7IF9jaGFuZ2VGaWxsLnN0eWxlLnRyYW5zaXRpb24gPSAnaGVpZ2h0IDAuMTVzIGVhc2UnOyBfY2hhbmdlRmlsbC5zdHlsZS5oZWlnaHQgPSAnMCUnOyB9CiAgICAgIH0KCiAgICAgIGNoYW5nZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydEhvbGQpOwogICAgICBjaGFuZ2VCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHN0YXJ0SG9sZCwgeyBwYXNzaXZlOiBmYWxzZSB9KTsKICAgICAgY2hhbmdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBjYW5jZWxIb2xkKTsKICAgICAgY2hhbmdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxIb2xkKTsKICAgICAgY2hhbmdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgY2FuY2VsSG9sZCk7CiAgICAgIGNoYW5nZUJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGNhbmNlbEhvbGQpOwogICAgICBjaGFuZ2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7IGUucHJldmVudERlZmF1bHQoKTsgfSk7CiAgICB9CiAgfQoKICAvLyA/bmFtZT0gcGFyYW06IHByZS1maWxsIGN1c3RvbWVyIG5hbWUKICBpZiAoX3BhcmFtTmFtZSkgewogICAgJCgnY3VzdG9tZXInKS52YWx1ZSA9IF9wYXJhbU5hbWU7CiAgICBzYXZlQ3VzdG9tZXJOYW1lKF9wYXJhbU5hbWUpOwogICAgZG9jdW1lbnQudGl0bGUgPSAnUHJlbWF6aW5nUEggR2FtZXMgLSAnICsgX3BhcmFtTmFtZTsKICB9CgogIC8vIExvYWQgdGhlIHNlbGVjdGVkIGNvbnNvbGUgKGZyb20gVVJMIHBhcmFtIG9yIGRlZmF1bHQgdG8gZmlyc3QpCiAgdmFyIGZpcnN0Q29uc29sZSA9IF9wYXJhbUNvbnNvbGUgfHwgT2JqZWN0LmtleXMoQ09OU09MRVMpWzBdOwogIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPSBmaXJzdENvbnNvbGU7CiAgbG9hZENvbnNvbGUoZmlyc3RDb25zb2xlKTsKCiAgLy8gUmVzdG9yZSBjdXN0b21lciBuYW1lIGZyb20gbG9jYWxTdG9yYWdlIChvbmx5IGlmIG5vdCBzZXQgYnkgVVJMIHBhcmFtKQogIGlmICghX3BhcmFtTmFtZSkgewogICAgcmVzdG9yZUN1c3RvbWVyTmFtZSgpOwogIH0KCiAgLy8gUmVzdG9yZSBzZWxlY3RlZCBsaXN0IGZyb20gbG9jYWxTdG9yYWdlIChub24tbG9jYWwgdXNlcnMgb25seSkKICB2YXIgc2F2ZWROYW1lID0gX3BhcmFtTmFtZSB8fCBsb2FkQ3VzdG9tZXJOYW1lKCk7CiAgdmFyIHNhdmVkTGlzdCA9IGxvYWRTZWxlY3RlZExpc3QoKTsKICBpZiAoc2F2ZWRMaXN0KSB7CiAgICBpZiAoc2F2ZWROYW1lKSB7CiAgICAgIC8vIE5hbWUgKyBsaXN0IGJvdGggc2F2ZWQg4oaSIGF1dG8tcmVzdG9yZSBzaWxlbnRseQogICAgICByZXN0b3JlU2F2ZWRMaXN0KHNhdmVkTGlzdCk7CiAgICB9IGVsc2UgewogICAgICAvLyBMaXN0IGV4aXN0cyBidXQgbm8gbmFtZSDihpIgYXNrIHdoZXRoZXIgdG8gcmVzdG9yZQogICAgICBzaG93TGlzdFJlc3RvcmVQcm9tcHQoc2F2ZWRMaXN0KTsKICAgIH0KICB9CgogIC8vIEhpZGUgYWRtaW4tb25seSBjb250cm9scyBmb3Igbm9uLWxvY2FsIHVzZXJzCiAgaWYgKCFpc0xvY2FsKSB7CiAgICBbJ2FkbWluRXhwb3J0JywgJ2Jpbkxpc3QnLCAnbWF0Y2hMaXN0J10uZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgICB2YXIgZWwgPSAkKGlkKTsKICAgICAgaWYgKGVsKSBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgfSk7CiAgfQoKICAvLyBBdXRvLWZvY3VzIHNlYXJjaCBpbnB1dCBvbiBkZXNrdG9wIHNvIHVzZXIgY2FuIGp1c3Qgc3RhcnQgdHlwaW5nCiAgaWYgKCFpc01vYmlsZSkgewogICAgdmFyIHNlYXJjaElucHV0ID0gJCgnc2VhcmNoJyk7CiAgICBmdW5jdGlvbiByZWZvY3VzU2VhcmNoKCkgewogICAgICB2YXIgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKICAgICAgaWYgKGFjdGl2ZSAmJiAoYWN0aXZlLmlkID09PSAnY3VzdG9tZXInIHx8IGFjdGl2ZS50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBhY3RpdmUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykpIHJldHVybjsKICAgICAgc2VhcmNoSW5wdXQuZm9jdXMoKTsKICAgICAgc2VhcmNoSW5wdXQuc2VsZWN0KCk7CiAgICB9CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlZm9jdXNTZWFyY2gpOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgIHZhciBmaWxlc01vZGFsID0gJCgnZmlsZXNNb2RhbCcpOwogICAgICB2YXIgb3ZlcmxheSA9ICQoJ292ZXJsYXknKTsKICAgICAgdmFyIG1vZGFsT3BlbiA9IGZpbGVzTW9kYWwgJiYgZmlsZXNNb2RhbC5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snOwogICAgICB2YXIgb3ZlcmxheU9wZW4gPSBvdmVybGF5ICYmIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9PT0gJ2ZsZXgnOwogICAgICBpZiAoIW1vZGFsT3BlbiAmJiAhb3ZlcmxheU9wZW4gJiYgZS50YXJnZXQuaWQgIT09ICdzZWFyY2gnICYmIGUudGFyZ2V0LmlkICE9PSAnY3VzdG9tZXInICYmICFlLnRhcmdldC5jbG9zZXN0KCdzZWxlY3QnKSkgewogICAgICAgIHJlZm9jdXNTZWFyY2goKTsKICAgICAgfQogICAgfSk7CiAgfQp9KSgpOwo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==`;
    var decoded = decodeURIComponent(escape(atob(base64html)));
    // Inject outer page's URL params into iframe so ?local=1, ?console=, ?name= work
    var qs = window.location.search;
    if (qs) decoded = decoded.replace('<head>', '<head><script>var _outerSearch="'+qs+'";</'+'script>');
    const iframe = document.getElementById('viewer');
    const doc = iframe.contentWindow.document;
    doc.open();
    doc.write(decoded);
    doc.close();
  </script>
</body>
</html>