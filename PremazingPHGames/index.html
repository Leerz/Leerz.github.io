<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PremazingPH Games</title>
  <style>
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
    iframe { width: 100vw; height: 100vh; border: none; display: block; }
  </style>
</head>
<body>
  <iframe id="viewer"></iframe>
  <script>
    const base64html = `PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPgo8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSx2aWV3cG9ydC1maXQ9Y292ZXIiIC8+Cjx0aXRsZSBpZD0icGFnZVRpdGxlIj5QcmVtYXppbmdQSCBHYW1lczwvdGl0bGU+CjxzdHlsZT4KOnJvb3R7CiAgLS1iZzojMGEwZTFhOy0tYmctc2Vjb25kYXJ5OiMxMTE4Mjc7LS1wYW5lbDojMWUyOTNiOy0tcGFuZWwtaG92ZXI6IzI3MzQ0OTsKICAtLWNhcmQ6IzFlMjkzYjstLWNhcmQtc2VsZWN0ZWQ6IzFlM2E1ZjstLWJvcmRlcjojMzM0MTU1Oy0tdGV4dDojZjFmNWY5OwogIC0tdGV4dC1zZWNvbmRhcnk6Izk0YTNiODstLW11dGVkOiM2NDc0OGI7LS1wcmltYXJ5OiMzYjgyZjY7LS1wcmltYXJ5LWhvdmVyOiMyNTYzZWI7CiAgLS1hY2NlbnQ6I2Y1OWUwYjstLXN1Y2Nlc3M6IzIyYzU1ZTstLWRhbmdlcjojZWY0NDQ0Oy0tcmFkaXVzOjEycHg7LS1yYWRpdXMtbGc6MTZweDsKICAtLWhlYWRlci1iZzpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCMzYjgyZjYgMCUsIzI1NjNlYiAxMDAlKTsKfQo6cm9vdFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdewogIC0tYmc6IzJkMmQyZCFpbXBvcnRhbnQ7LS1iZy1zZWNvbmRhcnk6IzM2MzYzNiFpbXBvcnRhbnQ7LS1wYW5lbDojNDI0MjQyIWltcG9ydGFudDsKICAtLXBhbmVsLWhvdmVyOiM0ZjRmNGYhaW1wb3J0YW50Oy0tY2FyZDojNDI0MjQyIWltcG9ydGFudDstLWNhcmQtc2VsZWN0ZWQ6IzVhMjAyMCFpbXBvcnRhbnQ7CiAgLS1ib3JkZXI6IzU1NTU1NSFpbXBvcnRhbnQ7LS10ZXh0OiNmZmZmZmYhaW1wb3J0YW50Oy0tdGV4dC1zZWNvbmRhcnk6I2NjY2NjYyFpbXBvcnRhbnQ7CiAgLS1tdXRlZDojOTk5OTk5IWltcG9ydGFudDstLXByaW1hcnk6I2U2MDAxMiFpbXBvcnRhbnQ7LS1wcmltYXJ5LWhvdmVyOiNmZjFhMWEhaW1wb3J0YW50OwogIC0tYWNjZW50OiNlNjAwMTIhaW1wb3J0YW50Oy0tc3VjY2VzczojMjJjNTVlIWltcG9ydGFudDstLWRhbmdlcjojZTYwMDEyIWltcG9ydGFudDsKICAtLWhlYWRlci1iZzpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCNlNjAwMTIgMCUsI2I4MDAwZiAxMDAlKSFpbXBvcnRhbnQ7Cn0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIGJvZHl7YmFja2dyb3VuZDojZmZmIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jb250YWluZXJ7YmFja2dyb3VuZDojZjVmNWY1IWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5sZWZ0UGFuZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnJpZ2h0UGFuZXtiYWNrZ3JvdW5kOiNlOGU4ZTghaW1wb3J0YW50O2JvcmRlci1jb2xvcjojY2NjIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5sZWZ0UGFuZS1pbm5lcntiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVte2JhY2tncm91bmQ6I2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNkZGQhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW06aG92ZXJ7YmFja2dyb3VuZDojZjBmMGYwIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLnNlbGVjdGVke2JhY2tncm91bmQ6I2ZmZTVlNSFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNlNjAwMTIhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW0tdGl0bGUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdGF0LXZhbHVlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS10aXRsZXtjb2xvcjojMTExIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLXNpemUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLW1ldGEsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdGF0LWxhYmVsLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbS1zaXple2NvbG9yOiM0NDQhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmxlZ2VuZC1pdGVtLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RhdC1ub3RlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29udHJvbHMgbGFiZWx7Y29sb3I6IzU1NSFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtaXRlbXtiYWNrZ3JvdW5kOiNmNWY1ZjUhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nZW5yZS1maWx0ZXIsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5maWx0ZXItdGFic3tiYWNrZ3JvdW5kOiNlOGU4ZTghaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmZpbHRlci10YWIsLmdlbnJlLWNoaXB7Ym9yZGVyLWNvbG9yOiNiYmIhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmZpbHRlci10YWIuYWN0aXZlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2VucmUtY2hpcC5hY3RpdmV7YmFja2dyb3VuZDojZTYwMDEyIWltcG9ydGFudDtib3JkZXItY29sb3I6I2U2MDAxMiFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RvcmFnZS1jYXJkLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RhdC1jYXJkLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc2VsZWN0ZWQtcGFuZWx7YmFja2dyb3VuZDojZmZmIWltcG9ydGFudDtib3JkZXItY29sb3I6I2RkZCFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29udHJvbHMgaW5wdXQsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jb250cm9scyBzZWxlY3R7YmFja2dyb3VuZDojZmZmIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyFpbXBvcnRhbnQ7Y29sb3I6IzMzMyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RvcmFnZS10aXRsZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0b3JhZ2UtY2FwYWNpdHl7Y29sb3I6IzMzMyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY3RhLWJ1dHRvbntiYWNrZ3JvdW5kOiNlNjAwMTIhaW1wb3J0YW50O2JveC1zaGFkb3c6MCA0cHggMjBweCByZ2JhKDIzMCwwLDE4LDAuNCkhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmJ0bntiYWNrZ3JvdW5kOiNlOGU4ZTghaW1wb3J0YW50O2NvbG9yOiMzMzMhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojY2NjIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5idG4tcHJpbWFyeXtiYWNrZ3JvdW5kOiNlNjAwMTIhaW1wb3J0YW50O2NvbG9yOiNmZmYhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZTYwMDEyIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5vdmVybGF5e2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjk1KSFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAjZ2FtZUluZm9Nb2RhbHtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC45OCkhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmdhbWUtaW5mby10aXRsZXtjb2xvcjojMTExIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nYW1lLWluZm8tc2VjdGlvbntiYWNrZ3JvdW5kOiNmZmYhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojZGRkIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5wcm9ncmVzcy1zZWxlY3RlZHtiYWNrZ3JvdW5kOiNlNjAwMTIhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0b3JhZ2UtcHJvZ3Jlc3N7YmFja2dyb3VuZDojZGRkIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jb25zb2xlLWJhcntiYWNrZ3JvdW5kOiNlOGU4ZTghaW1wb3J0YW50O2JvcmRlci1jb2xvcjojY2NjIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jb25zb2xlLWNoaXB7YmFja2dyb3VuZDojZmZmIWltcG9ydGFudDtjb2xvcjojMzMzIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29uc29sZS1jaGlwLmFjdGl2ZXtjb2xvcjojZmZmIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5tb2RlLXRvZ2dsZXtiYWNrZ3JvdW5kOiNkZGQhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLm1vZGUtYnRuLmFjdGl2ZXtiYWNrZ3JvdW5kOiNlNjAwMTIhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLm1peC10YWJze2JhY2tncm91bmQ6I2U4ZThlOCFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAubWl4LXRhYntjb2xvcjojMzMzIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAubWl4LXRhYi5hY3RpdmV7Ym9yZGVyLWNvbG9yOiNlNjAwMTIhaW1wb3J0YW50O2NvbG9yOiNlNjAwMTIhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmdyYW5kLXRvdGFse2JhY2tncm91bmQ6I2ZmZiFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNkZGQhaW1wb3J0YW50fQoKKntib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50fQpodG1sLGJvZHl7aGVpZ2h0OjEwMCU7bWFyZ2luOjA7Zm9udC1mYW1pbHk6J0ludGVyJywtYXBwbGUtc3lzdGVtLEJsaW5rTWFjU3lzdGVtRm9udCwnU2Vnb2UgVUknLFJvYm90byxzYW5zLXNlcmlmO2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLXRleHQpfQoKLyogQ29uc29sZSBCYXIgKi8KLmNvbnNvbGUtYmFye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7cGFkZGluZzo4cHggMTZweDtiYWNrZ3JvdW5kOnZhcigtLWJnLXNlY29uZGFyeSk7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDt6LWluZGV4OjY1O2hlaWdodDo0OHB4fQoubW9kZS10b2dnbGV7ZGlzcGxheTpmbGV4O2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2JvcmRlci1yYWRpdXM6MjBweDtwYWRkaW5nOjJweDtmbGV4LXNocmluazowfQoubW9kZS1idG57cGFkZGluZzo2cHggMTRweDtib3JkZXItcmFkaXVzOjE4cHg7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7Zm9udC1zaXplOjEycHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnN9Ci5tb2RlLWJ0bi5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmfQouY29uc29sZS1jaGlwc3tkaXNwbGF5OmZsZXg7Z2FwOjZweDtvdmVyZmxvdy14OmF1dG87ZmxleDoxOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNofQouY29uc29sZS1jaGlwczo6LXdlYmtpdC1zY3JvbGxiYXJ7ZGlzcGxheTpub25lfQouY29uc29sZS1jaGlwe3BhZGRpbmc6NnB4IDE0cHg7Ym9yZGVyLXJhZGl1czoxOHB4O2JvcmRlcjoycHggc29saWQgdmFyKC0tYm9yZGVyKTtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtmb250LXNpemU6MTJweDtmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgMC4yczt3aGl0ZS1zcGFjZTpub3dyYXA7ZmxleC1zaHJpbms6MDtwb3NpdGlvbjpyZWxhdGl2ZX0KLmNvbnNvbGUtY2hpcDpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLmNvbnNvbGUtY2hpcC5hY3RpdmV7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6Y3VycmVudENvbG9yfQouY29uc29sZS1jaGlwIC5jaGlwLWJhZGdle3Bvc2l0aW9uOmFic29sdXRlO3RvcDotNHB4O3JpZ2h0Oi00cHg7bWluLXdpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDp2YXIoLS1hY2NlbnQpO2NvbG9yOiMwMDA7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDo3MDA7ZGlzcGxheTpub25lO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmc6MCA0cHh9Ci5jb25zb2xlLWNoaXAuaGFzLXNlbGVjdGlvbiAuY2hpcC1iYWRnZXtkaXNwbGF5OmZsZXh9CgovKiBIZWFkZXIgKi8KLmhlYWRlcntwb3NpdGlvbjpmaXhlZDt0b3A6NDhweDtyaWdodDowO2xlZnQ6MDtoZWlnaHQ6NTZweDtiYWNrZ3JvdW5kOnZhcigtLWhlYWRlci1iZyk7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDtwYWRkaW5nOjhweCAxNnB4O3otaW5kZXg6NjA7Ym94LXNoYWRvdzowIDRweCAyMHB4IHJnYmEoMCwwLDAsMC4zKX0KLmhlYWRlciAuc2VhcmNoe2ZsZXg6MTttaW4td2lkdGg6MTQwcHh9Ci5oZWFkZXIgaW5wdXQuc2VhcmNoe2hlaWdodDozOHB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtib3JkZXI6bm9uZTtwYWRkaW5nOjAgMTZweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4xNSk7Y29sb3I6I2ZmZjtmb250LXNpemU6MTRweDtiYWNrZHJvcC1maWx0ZXI6Ymx1cigxMHB4KX0KLmhlYWRlciBpbnB1dC5zZWFyY2g6OnBsYWNlaG9sZGVye2NvbG9yOnJnYmEoMjU1LDI1NSwyNTUsMC43KX0KLmhlYWRlciBpbnB1dC5zZWFyY2g6Zm9jdXN7b3V0bGluZTpub25lO2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjI1KTtib3gtc2hhZG93OjAgMCAwIDNweCByZ2JhKDI1NSwyNTUsMjU1LDAuMil9Ci5oZWFkZXIgLmFjdGlvbnN7ZGlzcGxheTpmbGV4O2dhcDo2cHg7YWxpZ24taXRlbXM6Y2VudGVyfQouaGVhZGVyIGJ1dHRvbntoZWlnaHQ6MzhweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Ym9yZGVyOm5vbmU7cGFkZGluZzowIDEycHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMTUpO2NvbG9yOiNmZmY7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NTAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnN9Ci5oZWFkZXIgYnV0dG9uOmhvdmVye2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjI1KX0KCi8qIE1peCBNb2RlIFRhYnMgKi8KLm1peC10YWJze2Rpc3BsYXk6bm9uZTtnYXA6MDtwYWRkaW5nOjAgMTZweDtiYWNrZ3JvdW5kOnZhcigtLWJnLXNlY29uZGFyeSk7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwb3NpdGlvbjpmaXhlZDt0b3A6MTA0cHg7bGVmdDowO3JpZ2h0OjA7ei1pbmRleDo1OTtoZWlnaHQ6NDBweDthbGlnbi1pdGVtczpzdHJldGNoO292ZXJmbG93LXg6YXV0b30KLm1peC10YWJzOjotd2Via2l0LXNjcm9sbGJhcntkaXNwbGF5Om5vbmV9Ci5taXgtdGFicy52aXNpYmxle2Rpc3BsYXk6ZmxleH0KLm1peC10YWJ7cGFkZGluZzo4cHggMThweDtib3JkZXI6bm9uZTtib3JkZXItYm90dG9tOjNweCBzb2xpZCB0cmFuc3BhcmVudDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtmb250LXNpemU6MTNweDtmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgMC4yczt3aGl0ZS1zcGFjZTpub3dyYXA7ZmxleC1zaHJpbms6MDtwb3NpdGlvbjpyZWxhdGl2ZX0KLm1peC10YWI6aG92ZXJ7Y29sb3I6dmFyKC0tdGV4dCk7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCl9Ci5taXgtdGFiLmFjdGl2ZXtib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLXByaW1hcnkpO2NvbG9yOnZhcigtLXByaW1hcnkpfQoubWl4LXRhYiAudGFiLWNvdW50e2ZvbnQtc2l6ZToxMHB4O21hcmdpbi1sZWZ0OjRweDtvcGFjaXR5OjAuN30KLm1peC10YWIgLnRhYi1yZW1vdmV7bWFyZ2luLWxlZnQ6NnB4O29wYWNpdHk6MC41O2ZvbnQtc2l6ZToxNHB4fQoubWl4LXRhYiAudGFiLXJlbW92ZTpob3ZlcntvcGFjaXR5OjE7Y29sb3I6dmFyKC0tZGFuZ2VyKX0KCi8qIENvbnRhaW5lciAqLwouY29udGFpbmVye2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDQwMHB4O2dhcDoxNnB4O3BhZGRpbmc6Y2FsYyg0OHB4ICsgNTZweCArIDE2cHgpIDE2cHggMTAwcHg7bWluLWhlaWdodDoxMDB2aDt0cmFuc2l0aW9uOnBhZGRpbmctdG9wIDAuMnN9Ci5jb250YWluZXIubWl4LWFjdGl2ZXtwYWRkaW5nLXRvcDpjYWxjKDQ4cHggKyA1NnB4ICsgMTZweCl9CgovKiBMZWZ0IFBhbmUgKi8KLmxlZnRQYW5le2JhY2tncm91bmQ6dmFyKC0tYmctc2Vjb25kYXJ5KTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7cGFkZGluZzowO292ZXJmbG93OmhpZGRlbjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5sZWZ0UGFuZS1pbm5lcntwYWRkaW5nOjEycHg7b3ZlcmZsb3cteTphdXRvO21heC1oZWlnaHQ6Y2FsYygxMDB2aCAtIDIwMHB4KX0KCi8qIExvYWRpbmcgb3ZlcmxheSAqLwoubG9hZGluZy1vdmVybGF5e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nOjYwcHg7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToxNXB4O2dhcDoxMHB4fQoubG9hZGluZy1zcGlubmVye3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7Ym9yZGVyOjJweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci10b3AtY29sb3I6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyLXJhZGl1czo1MCU7YW5pbWF0aW9uOnNwaW4gMC44cyBsaW5lYXIgaW5maW5pdGV9CkBrZXlmcmFtZXMgc3Bpbnt0b3t0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fQoKLyogR2FtZSBJdGVtIENhcmQgKi8KLml0ZW17ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDtwYWRkaW5nOjEycHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2N1cnNvcjpwb2ludGVyO21hcmdpbi1ib3R0b206MTBweDt0cmFuc2l0aW9uOmFsbCAwLjJzO3VzZXItc2VsZWN0Om5vbmU7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lfQouaXRlbTpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsLWhvdmVyKTtib3JkZXItY29sb3I6IzQ3NTU2OTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KLml0ZW0uc2VsZWN0ZWR7YmFja2dyb3VuZDp2YXIoLS1jYXJkLXNlbGVjdGVkKTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5pdGVtLnNlbGVjdGVkIC5pdGVtLWNoZWNrYm94e2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpfQouaXRlbS5zZWxlY3RlZCAuaXRlbS1jaGVja2JveDo6YWZ0ZXJ7Y29udGVudDon4pyTJztjb2xvcjojZmZmO2ZvbnQtc2l6ZToxMnB4O2ZvbnQtd2VpZ2h0OmJvbGR9Ci5pdGVtLXRodW1ie3dpZHRoOjU2cHg7aGVpZ2h0OjU2cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCMzNzQxNTEsIzFmMjkzNyk7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ZsZXgtc2hyaW5rOjA7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlfQouaXRlbS10aHVtYiBpbWd7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvdmVyfQouaXRlbS10aHVtYi1wbGFjZWhvbGRlcntmb250LXNpemU6MjBweDtjb2xvcjp2YXIoLS1tdXRlZCl9Ci5pdGVtLWNvbnRlbnR7ZmxleDoxO21pbi13aWR0aDowfQouaXRlbS10aXRsZXtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y29sb3I6dmFyKC0tdGV4dCk7bWFyZ2luLWJvdHRvbTo0cHg7d2hpdGUtc3BhY2U6bm93cmFwO292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzfQouaXRlbS1zaXple2ZvbnQtc2l6ZToxM3B4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KX0KLml0ZW0tbWV0YXtmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1tdXRlZCk7bWFyZ2luLXRvcDoycHh9Ci5pdGVtLWNoZWNrYm94e3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHg7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyOjJweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmbGV4LXNocmluazowO3RyYW5zaXRpb246YWxsIDAuMnN9CgovKiBSaWdodCBQYW5lICovCi5yaWdodFBhbmV7YmFja2dyb3VuZDp2YXIoLS1iZy1zZWNvbmRhcnkpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzLWxnKTtwYWRkaW5nOjE2cHg7b3ZlcmZsb3cteTphdXRvO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoxNnB4fQoKLyogU3RvcmFnZSBDYXJkICovCi5zdG9yYWdlLWNhcmR7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzoxNnB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLnN0b3JhZ2UtaGVhZGVye2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luLWJvdHRvbToxMnB4fQouc3RvcmFnZS10aXRsZXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHg7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpfQouc3RvcmFnZS10aXRsZSBzdmd7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDtjb2xvcjp2YXIoLS1wcmltYXJ5KX0KLnN0b3JhZ2UtY2FwYWNpdHl7Zm9udC1zaXplOjEzcHg7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpfQouc3RvcmFnZS1wcm9ncmVzc3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXItcmFkaXVzOjVweDtvdmVyZmxvdzpoaWRkZW47ZGlzcGxheTpmbGV4fQoucHJvZ3Jlc3MtdXNlZHtiYWNrZ3JvdW5kOiM0NzU1Njk7dHJhbnNpdGlvbjp3aWR0aCAwLjNzfQoucHJvZ3Jlc3Mtc2VsZWN0ZWR7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTt0cmFuc2l0aW9uOndpZHRoIDAuM3N9Ci5zdG9yYWdlLWxlZ2VuZHtkaXNwbGF5OmZsZXg7Z2FwOjE2cHg7bWFyZ2luLXRvcDoxMHB4O2ZvbnQtc2l6ZToxMnB4fQoubGVnZW5kLWl0ZW17ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NnB4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KX0KLmxlZ2VuZC1kb3R7d2lkdGg6OHB4O2hlaWdodDo4cHg7Ym9yZGVyLXJhZGl1czo1MCV9Ci5sZWdlbmQtZG90LnVzZWR7YmFja2dyb3VuZDojNDc1NTY5fQoubGVnZW5kLWRvdC5zZWxlY3RlZHtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpfQoubGVnZW5kLWRvdC5mcmVle2JhY2tncm91bmQ6dmFyKC0tYmcpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KCi8qIFN0YXRzIEdyaWQgKi8KLnN0YXRzLWdyaWR7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoMywxZnIpO2dhcDo4cHh9Ci5zdGF0LWNhcmR7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzoxNHB4O3RleHQtYWxpZ246Y2VudGVyO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLnN0YXQtY2FyZC5oaWdobGlnaHR7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZyxyZ2JhKDU5LDEzMCwyNDYsMC4xKSx2YXIoLS1jYXJkKSl9Ci5zdGF0LXZhbHVle2ZvbnQtc2l6ZToyMnB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KX0KLnN0YXQtY2FyZC5oaWdobGlnaHQgLnN0YXQtdmFsdWV7Y29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5zdGF0LWxhYmVse2ZvbnQtc2l6ZToxMHB4O2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi10b3A6NHB4fQouc3RhdC1ub3Rle2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLW11dGVkKTt0ZXh0LWFsaWduOmNlbnRlcjtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Z2FwOjRweH0KCi8qIEdyYW5kIFRvdGFsIChNSVggbW9kZSkgKi8KLmdyYW5kLXRvdGFse2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO3BhZGRpbmc6MTZweDtib3JkZXI6MnB4IHNvbGlkIHZhcigtLXByaW1hcnkpO2Rpc3BsYXk6bm9uZX0KLmdyYW5kLXRvdGFsLnZpc2libGV7ZGlzcGxheTpibG9ja30KLmdyYW5kLXRvdGFsLWhlYWRlcntmb250LXNpemU6MTRweDtmb250LXdlaWdodDo3MDA7Y29sb3I6dmFyKC0tcHJpbWFyeSk7bWFyZ2luLWJvdHRvbToxMnB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweH0KLmdyYW5kLXRvdGFsLWJyZWFrZG93bntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo2cHg7bWFyZ2luLWJvdHRvbToxMnB4fQouZ3JhbmQtdG90YWwtcm93e2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbjtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7cGFkZGluZzo0cHggOHB4O2JhY2tncm91bmQ6dmFyKC0tYmcpO2JvcmRlci1yYWRpdXM6NnB4fQouZ3JhbmQtdG90YWwtcm93IC5jb25zb2xlLWxhYmVse2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjp2YXIoLS10ZXh0KX0KLmdyYW5kLXRvdGFsLXJvdy5leGNlZWRlZHtjb2xvcjp2YXIoLS1kYW5nZXIpO2ZvbnQtd2VpZ2h0OjYwMH0KLmdyYW5kLXRvdGFsLXN1bW1hcnl7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmctdG9wOjhweDtib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6MTRweH0KCi8qIENvbnRyb2xzICovCi5jb250cm9sc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjhweH0KLmNvbnRyb2xzIC5mdWxse2dyaWQtY29sdW1uOjEvLTF9Ci5jb250cm9scyBpbnB1dCwuY29udHJvbHMgc2VsZWN0e2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7cGFkZGluZzowIDEycHg7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtjb2xvcjp2YXIoLS10ZXh0KTtmb250LXNpemU6MTRweDt3aWR0aDoxMDAlfQouY29udHJvbHMgaW5wdXQ6Zm9jdXMsLmNvbnRyb2xzIHNlbGVjdDpmb2N1c3tvdXRsaW5lOm5vbmU7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpO2JveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoNTksMTMwLDI0NiwwLjIpfQouY29udHJvbHMgc2VsZWN0e2N1cnNvcjpwb2ludGVyO2FwcGVhcmFuY2U6bm9uZTtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMicgaGVpZ2h0PScxMicgdmlld0JveD0nMCAwIDEyIDEyJyUzRSUzQ3BhdGggZmlsbD0nJTIzOTRhM2I4JyBkPSdNNiA4TDEgM2gxMHonLyUzRSUzQy9zdmclM0UiKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjpyaWdodCAxMnB4IGNlbnRlcjtwYWRkaW5nLXJpZ2h0OjM2cHh9Ci5jb250cm9scyBsYWJlbHtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1tdXRlZCk7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9ja30KI2R5bmFtaWNDb250cm9sc3tkaXNwbGF5OmNvbnRlbnRzfQojZHluYW1pY0NvbnRyb2xzID4gZGl2e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Ci5maWxlbmFtZS1wcmV2aWV3e2dyaWQtY29sdW1uOjEvLTE7cGFkZGluZzoxMHB4IDEycHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtmb250LWZhbWlseTonU0YgTW9ubycsTW9uYWNvLG1vbm9zcGFjZTtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7b3ZlcmZsb3cteDphdXRvO3doaXRlLXNwYWNlOm5vd3JhcH0KCi8qIEJ1dHRvbnMgKi8KLmJ0bntwYWRkaW5nOjEwcHggMTZweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Ym9yZGVyOm5vbmU7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnM7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtnYXA6NnB4fQouYnRuLXByaW1hcnl7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmfQouYnRuLXByaW1hcnk6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5LWhvdmVyKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KLmJ0bi5naG9zdHtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5idG4uZ2hvc3Q6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Y29sb3I6dmFyKC0tdGV4dCk7Ym9yZGVyLWNvbG9yOiM0NzU1Njl9Ci5idG4uZGFuZ2Vye2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKTtjb2xvcjojZmZmfQouYWN0aW9uLXJvd3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcH0KLmFjdGlvbi1yb3cgLmJ0bntmbGV4OjE7bWluLXdpZHRoOmZpdC1jb250ZW50fQouc2hhcmUtcm93e2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlcn0KLnNoYXJlLXJvdyBpbnB1dHtmbGV4OjE7aGVpZ2h0OjQ0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwYWRkaW5nOjAgMTJweDtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtc2l6ZToxM3B4fQoKLyogU2VsZWN0ZWQgUGFuZWwgKi8KLnNlbGVjdGVkLXBhbmVse2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtmbGV4OjE7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtvdmVyZmxvdzpoaWRkZW47bWluLWhlaWdodDoyMDBweH0KLnNlbGVjdGVkLXBhbmVsIC5oZWFke3BhZGRpbmc6MTJweCAxNnB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLXRleHQpO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXJ9Ci5zZWxlY3RlZC1wYW5lbCAuYm9keXtmbGV4OjE7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6OHB4fQouc2VsZWN0ZWQtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7bWFyZ2luLWJvdHRvbTo4cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouc2VsZWN0ZWQtaXRlbS10aHVtYnt3aWR0aDo0NHB4O2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmbGV4LXNocmluazowfQouc2VsZWN0ZWQtaXRlbS1jb250ZW50e2ZsZXg6MTttaW4td2lkdGg6MH0KLnNlbGVjdGVkLWl0ZW0tdGl0bGV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLnNlbGVjdGVkLWl0ZW0tc2l6ZXtmb250LXNpemU6MTNweDtmb250LXdlaWdodDo2MDA7Y29sb3I6dmFyKC0tdGV4dCk7d2hpdGUtc3BhY2U6bm93cmFwfQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25ze2Rpc3BsYXk6ZmxleDtnYXA6NHB4fQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIGJ1dHRvbnt3aWR0aDoyOHB4O2hlaWdodDoyOHB4O2JvcmRlci1yYWRpdXM6NnB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxMnB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAudXAsLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAuZG93bntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAucmVtb3Zle2JhY2tncm91bmQ6cmdiYSgyMzksNjgsNjgsMC4yKTtjb2xvcjp2YXIoLS1kYW5nZXIpfQoKLyogQm90dG9tIENUQSAqLwouYm90dG9tLWN0YXtwb3NpdGlvbjpmaXhlZDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtwYWRkaW5nOjEycHggMTZweDtwYWRkaW5nLWJvdHRvbTpjYWxjKDEycHggKyBlbnYoc2FmZS1hcmVhLWluc2V0LWJvdHRvbSwwcHgpKTtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxODBkZWcsdHJhbnNwYXJlbnQgMCUsdmFyKC0tYmcpIDMwJSk7ei1pbmRleDo1MDtwb2ludGVyLWV2ZW50czpub25lfQouYm90dG9tLWN0YS1pbm5lcntkaXNwbGF5OmZsZXg7Z2FwOjEwcHg7bWF4LXdpZHRoOjUwMHB4O21hcmdpbjowIGF1dG87cG9pbnRlci1ldmVudHM6YXV0b30KLmN0YS1idXR0b257ZmxleDoxO2Rpc3BsYXk6ZmxleDtoZWlnaHQ6NTBweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtnYXA6NnB4O3RyYW5zaXRpb246YWxsIDAuMnM7Ym94LXNoYWRvdzowIDRweCAyMHB4IHJnYmEoNTksMTMwLDI0NiwwLjQpfQouY3RhLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnktaG92ZXIpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0ycHgpfQouY3RhLWJ1dHRvbiBzdmd7d2lkdGg6MThweDtoZWlnaHQ6MThweH0KLmN0YS1idXR0b24udXBsb2FkaW5ne3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowLjg1O2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSl9Ci5jdGEtYnV0dG9uLnVwbG9hZGluZyAudXBsb2FkLWljb24sLmN0YS1idXR0b24udXBsb2FkaW5nIC53YXJuaW5nLWljb257ZGlzcGxheTpub25lfQouY3RhLWJ1dHRvbi51cGxvYWRpbmcgLnVwbG9hZC1zcGlubmVye2Rpc3BsYXk6YmxvY2t9Ci51cGxvYWQtc3Bpbm5lcntkaXNwbGF5Om5vbmU7d2lkdGg6MThweDtoZWlnaHQ6MThweDthbmltYXRpb246c3BpbiAwLjhzIGxpbmVhciBpbmZpbml0ZX0KQGtleWZyYW1lcyBzcGlue3Rve3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19Ci5jdGEtYnV0dG9uLnVwbG9hZC1kb25le2JhY2tncm91bmQ6dmFyKC0tYWNjZW50KSFpbXBvcnRhbnQ7Y29sb3I6IzAwMCFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDRweCAyMHB4IHJnYmEoMjUwLDIwNCwyMSwwLjQpIWltcG9ydGFudH0KLmN0YS1idXR0b24ud2FybmluZ3tiYWNrZ3JvdW5kOnZhcigtLWRhbmdlcik7Ym94LXNoYWRvdzowIDRweCAyMHB4IHJnYmEoMjM5LDY4LDY4LDAuNCl9Ci5jdGEtYnV0dG9uIC53YXJuaW5nLWljb257ZGlzcGxheTpub25lfQouY3RhLWJ1dHRvbi53YXJuaW5nIC53YXJuaW5nLWljb257ZGlzcGxheTppbmxpbmV9Ci5jdGEtYnV0dG9uLndhcm5pbmcgLnVwbG9hZC1pY29ue2Rpc3BsYXk6bm9uZX0KLmN0YS1zaG93e3dpZHRoOjUwcHg7ZmxleC1zaHJpbms6MDtkaXNwbGF5OmZsZXg7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dHJhbnNpdGlvbjphbGwgMC4ycztwb3NpdGlvbjpyZWxhdGl2ZX0KLmN0YS1zaG93IC5iYWRnZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTZweDtyaWdodDotNnB4O21pbi13aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7Y29sb3I6IzAwMDtmb250LXNpemU6MTFweDtmb250LXdlaWdodDo3MDA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmc6MCA1cHh9CgovKiBPdmVybGF5ICovCi5vdmVybGF5e3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDEwLDE0LDI2LDAuOTUpO2Rpc3BsYXk6bm9uZTtmbGV4LWRpcmVjdGlvbjpjb2x1bW47ei1pbmRleDoxNTA7YmFja2Ryb3AtZmlsdGVyOmJsdXIoMTBweCl9Ci5vdmVybGF5IC5oZWFke2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjE2cHg7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5vdmVybGF5IC5oZWFkIHN0cm9uZ3tjb2xvcjp2YXIoLS10ZXh0KX0KLm92ZXJsYXkgLmJvZHl7cGFkZGluZzoxNnB4O292ZXJmbG93OmF1dG87ZmxleDoxO3BhZGRpbmctYm90dG9tOjgwcHh9Ci5vdmVybGF5IC5yb3d7ZGlzcGxheTpmbGV4O2dhcDoxMnB4O2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjEycHg7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7bWFyZ2luLWJvdHRvbTo4cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQoub3ZlcmxheSAucm93LmhpZ2hsaWdodHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQtc2VsZWN0ZWQpO2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KX0KLm92ZXJsYXkgLnJvdy1pbmZve2ZsZXg6MTttaW4td2lkdGg6MH0KLm92ZXJsYXkgLnJvdy1pbmZvIHN0cm9uZ3tkaXNwbGF5OmJsb2NrO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLm92ZXJsYXkgLnJvdy1hY3Rpb25ze2Rpc3BsYXk6ZmxleDtnYXA6NnB4O2ZsZXgtc2hyaW5rOjB9Ci5vdmVybGF5IGJ1dHRvbi5pY29ue3dpZHRoOjM2cHg7aGVpZ2h0OjM2cHg7Ym9yZGVyLXJhZGl1czo4cHg7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxNHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KLm92ZXJsYXkgYnV0dG9uLnVwLC5vdmVybGF5IGJ1dHRvbi5kb3due2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpfQoub3ZlcmxheSBidXR0b24ucmVtb3Zle2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKTtjb2xvcjojZmZmfQoKLyogR2VucmUgRmlsdGVyICovCi5nZW5yZS1maWx0ZXJ7ZGlzcGxheTpmbGV4O2dhcDo4cHg7cGFkZGluZzoxMnB4O2JhY2tncm91bmQ6dmFyKC0tYmctc2Vjb25kYXJ5KTtvdmVyZmxvdy14OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9Ci5nZW5yZS1maWx0ZXI6Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX0KLmdlbnJlLWNoaXB7cGFkZGluZzo2cHggMTRweDtib3JkZXItcmFkaXVzOjIwcHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjUwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO3doaXRlLXNwYWNlOm5vd3JhcDtmbGV4LXNocmluazowfQouZ2VucmUtY2hpcDpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLmdlbnJlLWNoaXAuYWN0aXZle2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmZ9Ci5nZW5yZS1maWx0ZXIgLmRpdmlkZXJ7d2lkdGg6MXB4O2JhY2tncm91bmQ6dmFyKC0tYm9yZGVyKTttYXJnaW46MCA0cHg7ZmxleC1zaHJpbms6MH0KLnNvcnQtY2hpcHtwYWRkaW5nOjZweCAxNHB4O2JvcmRlci1yYWRpdXM6MjBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWFjY2VudCk7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS1hY2NlbnQpO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjUwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO3doaXRlLXNwYWNlOm5vd3JhcDtmbGV4LXNocmluazowfQouc29ydC1jaGlwOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tYWNjZW50KTtjb2xvcjojMDAwfQouc29ydC1jaGlwLmFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7Y29sb3I6IzAwMH0KCi8qIEdhbWUgSW5mbyBNb2RhbCAqLwojZ2FtZUluZm9Nb2RhbHtkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDtiYWNrZ3JvdW5kOnJnYmEoMTAsMTQsMjYsMC45NSk7ei1pbmRleDoyMDA7b3ZlcmZsb3cteTphdXRvO2JhY2tkcm9wLWZpbHRlcjpibHVyKDEwcHgpfQouZ2FtZS1pbmZve21heC13aWR0aDo2MDBweDttYXJnaW46MCBhdXRvO3BhZGRpbmc6MTZweDtwYWRkaW5nLWJvdHRvbToxMDBweH0KLmdhbWUtaW5mby1oZWFkZXJ7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luLWJvdHRvbToxNnB4fQouZ2FtZS1pbmZvLWJhbm5lcnt3aWR0aDoxMDAlO2hlaWdodDoyMDBweDtvYmplY3QtZml0OmNvdmVyO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzLWxnKTtiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKX0KLmdhbWUtaW5mby1pY29ue3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTotMzBweDtsZWZ0OjE2cHg7d2lkdGg6ODBweDtoZWlnaHQ6ODBweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Ym9yZGVyOjNweCBzb2xpZCB2YXIoLS1iZyk7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4zKX0KLmdhbWUtaW5mby1jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTJweDtyaWdodDoxMnB4O3dpZHRoOjM2cHg7aGVpZ2h0OjM2cHg7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNik7Ym9yZGVyOm5vbmU7Y29sb3I6I2ZmZjtmb250LXNpemU6MjBweDtjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9Ci5nYW1lLWluZm8tdGl0bGV7Zm9udC1zaXplOjIwcHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOnZhcigtLXRleHQpO21hcmdpbi10b3A6NDBweDttYXJnaW4tYm90dG9tOjRweH0KLmdhbWUtaW5mby1wdWJsaXNoZXJ7Zm9udC1zaXplOjE0cHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi1ib3R0b206MTJweH0KLmdhbWUtaW5mby1tZXRhe2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6OHB4O21hcmdpbi1ib3R0b206MTZweH0KLmdhbWUtaW5mby10YWd7cGFkZGluZzo0cHggMTBweDtiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXItcmFkaXVzOjIwcHg7Zm9udC1zaXplOjEycHg7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLmdhbWUtaW5mby10YWcuZ2VucmV7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtjb2xvcjojZmZmO2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KX0KLmdhbWUtaW5mby1zZWN0aW9ue2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtwYWRkaW5nOjE2cHg7bWFyZ2luLWJvdHRvbToxMnB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLmdhbWUtaW5mby1zZWN0aW9uLXRpdGxle2ZvbnQtc2l6ZToxMnB4O2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi1ib3R0b206OHB4fQouZ2FtZS1pbmZvLWRlc2NyaXB0aW9ue2ZvbnQtc2l6ZToxNHB4O2xpbmUtaGVpZ2h0OjEuNjtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7d2hpdGUtc3BhY2U6cHJlLWxpbmV9Ci5nYW1lLWluZm8taW50cm97Zm9udC1zaXplOjE1cHg7Zm9udC13ZWlnaHQ6NTAwO2NvbG9yOnZhcigtLXRleHQpO21hcmdpbi1ib3R0b206OHB4O2ZvbnQtc3R5bGU6aXRhbGljfQouZ2FtZS1pbmZvLXNjcmVlbnNob3Rze2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDIsMWZyKTtnYXA6OHB4fQouZ2FtZS1pbmZvLXNjcmVlbnNob3RzIGltZ3t3aWR0aDoxMDAlO2JvcmRlci1yYWRpdXM6OHB4O2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuMnN9Ci5nYW1lLWluZm8tc2NyZWVuc2hvdHMgaW1nOmhvdmVye3RyYW5zZm9ybTpzY2FsZSgxLjAyKX0KLmdhbWUtaW5mby1maWxlcy1zZWN0aW9ue3BhZGRpbmc6MDtvdmVyZmxvdzpoaWRkZW59Ci5nYW1lLWluZm8tZmlsZXMtYnRue3dpZHRoOjEwMCU7cGFkZGluZzoxNHB4IDE2cHg7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6bm9uZTtjb2xvcjp2YXIoLS10ZXh0KTtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo1MDA7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0KLmdhbWUtaW5mby1maWxlc3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo0cHg7bWF4LWhlaWdodDoyMDBweDtvdmVyZmxvdy15OmF1dG87cGFkZGluZzowIDE2cHggMTZweH0KLmdhbWUtaW5mby1maWxle3BhZGRpbmc6OHB4IDEycHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Ym9yZGVyLXJhZGl1czo2cHg7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6J1NGIE1vbm8nLE1vbmFjbyxDb25zb2xhcyxtb25vc3BhY2U7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO3dvcmQtYnJlYWs6YnJlYWstYWxsfQouZ2FtZS1pbmZvLWFjdGlvbnN7cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7cGFkZGluZzoxNnB4O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LHZhcigtLWJnKSk7ZGlzcGxheTpmbGV4O2dhcDo4cHg7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KLmdhbWUtaW5mby1hY3Rpb25zIC5idG57bWluLXdpZHRoOjE0MHB4fQoKLyogU2NyZWVuc2hvdCBmdWxsc2NyZWVuICovCi5zY3JlZW5zaG90LWZ1bGxzY3JlZW57ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuOTUpO3otaW5kZXg6MjUwO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2N1cnNvcjpwb2ludGVyO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6MTZweH0KLnNjcmVlbnNob3QtZnVsbHNjcmVlbi5hY3RpdmV7ZGlzcGxheTpmbGV4fQouc2NyZWVuc2hvdC1mdWxsc2NyZWVuIGltZ3ttYXgtd2lkdGg6OTUlO21heC1oZWlnaHQ6ODUlO29iamVjdC1maXQ6Y29udGFpbjtib3JkZXItcmFkaXVzOjhweH0KLnNjcmVlbnNob3QtZnVsbHNjcmVlbiAuY2xvc2UtaGludHtjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LDAuNik7Zm9udC1zaXplOjE0cHg7cGFkZGluZzo4cHggMTZweDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC41KTtib3JkZXItcmFkaXVzOjIwcHh9CgovKiBUb2FzdCAqLwoudG9hc3R7cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSkgc2NhbGUoMC44KTtiYWNrZ3JvdW5kOnZhcigtLXN1Y2Nlc3MpO2NvbG9yOiNmZmY7cGFkZGluZzoyNHB4IDQ4cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtbGcpO2ZvbnQtc2l6ZToyMHB4O2ZvbnQtd2VpZ2h0OjYwMDt6LWluZGV4OjMwMDtvcGFjaXR5OjA7dHJhbnNpdGlvbjphbGwgMC4zcztwb2ludGVyLWV2ZW50czpub25lO2JveC1zaGFkb3c6MCAxMHB4IDQwcHggcmdiYSgwLDAsMCwwLjQpfQoudG9hc3Quc2hvd3tvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpIHNjYWxlKDEpfQoKI2ZpbGVzTW9kYWx7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2NvbG9yOnZhcigtLXRleHQpfQojZmlsZUxpc3RDb250YWluZXJ7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2NvbG9yOnZhcigtLXRleHQpfQojZmlsZUxpc3RDb250YWluZXIgYXtjb2xvcjp2YXIoLS1wcmltYXJ5KX0KLm1ldGF7Zm9udC1zaXplOjEycHg7Y29sb3I6dmFyKC0tbXV0ZWQpfQoKLyogQW5pbWF0aW9ucyAqLwpAa2V5ZnJhbWVzIGZhZGVJbntmcm9te29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMHB4KX10b3tvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9fQouaXRlbXthbmltYXRpb246ZmFkZUluIDAuMnMgZWFzZS1vdXR9CkBrZXlmcmFtZXMgcHVsc2VSZXF1aXJlZHswJSwxMDAle2JveC1zaGFkb3c6MCAwIDAgMCByZ2JhKDIzOSw2OCw2OCwwKX0zMCV7Ym94LXNoYWRvdzowIDAgMCA2cHggcmdiYSgyMzksNjgsNjgsMC40KX02MCV7Ym94LXNoYWRvdzowIDAgMCAzcHggcmdiYSgyMzksNjgsNjgsMC4yKX19Ci5jdXN0b21lci1yZXF1aXJlZHthbmltYXRpb246cHVsc2VSZXF1aXJlZCAwLjZzIGVhc2UgMztib3JkZXItY29sb3I6dmFyKC0tZGFuZ2VyKSFpbXBvcnRhbnQ7YmFja2dyb3VuZDpyZ2JhKDIzOSw2OCw2OCwwLjA4KSFpbXBvcnRhbnR9CgovKiBOYW1lIG5hZyBtb2RhbCAqLwoubmFtZS1uYWctYmFja2Ryb3B7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC43NSk7ZGlzcGxheTpub25lO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3otaW5kZXg6OTk5OTtiYWNrZHJvcC1maWx0ZXI6Ymx1cig2cHgpO2FuaW1hdGlvbjpuYWdGYWRlSW4gMC4zcyBlYXNlfQoubmFtZS1uYWctYmFja2Ryb3Auc2hvd3tkaXNwbGF5OmZsZXh9CkBrZXlmcmFtZXMgbmFnRmFkZUlue2Zyb217b3BhY2l0eTowfXRve29wYWNpdHk6MX19CkBrZXlmcmFtZXMgbmFnQm91bmNlezAle3RyYW5zZm9ybTpzY2FsZSgwLjgpO29wYWNpdHk6MH01MCV7dHJhbnNmb3JtOnNjYWxlKDEuMDUpfTEwMCV7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX19Ci5uYW1lLW5hZy1ib3h7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MnB4IHNvbGlkIHZhcigtLWRhbmdlcik7Ym9yZGVyLXJhZGl1czoyMHB4O3BhZGRpbmc6MzZweCAzMnB4IDI4cHg7dGV4dC1hbGlnbjpjZW50ZXI7bWF4LXdpZHRoOjM4MHB4O3dpZHRoOjkwJTthbmltYXRpb246bmFnQm91bmNlIDAuNHMgZWFzZTtib3gtc2hhZG93OjAgMjBweCA2MHB4IHJnYmEoMCwwLDAsMC41KX0KLm5hbWUtbmFnLWljb257d2lkdGg6NjRweDtoZWlnaHQ6NjRweDttYXJnaW46MCBhdXRvIDE2cHg7YmFja2dyb3VuZDp2YXIoLS1kYW5nZXIpO2JvcmRlci1yYWRpdXM6NTAlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmb250LXNpemU6MzJweDtmb250LXdlaWdodDo5MDA7Y29sb3I6I2ZmZjthbmltYXRpb246cHVsc2VSZXF1aXJlZCAxcyBlYXNlIGluZmluaXRlfQoubmFtZS1uYWctdGl0bGV7Zm9udC1zaXplOjIycHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOnZhcigtLXRleHQpO21hcmdpbi1ib3R0b206OHB4fQoubmFtZS1uYWctc3VidGl0bGV7Zm9udC1zaXplOjE0cHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi1ib3R0b206MjBweH0KLm5hbWUtbmFnLWlucHV0e3dpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MTRweCAxNnB4O2JvcmRlcjoycHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7YmFja2dyb3VuZDp2YXIoLS1iZyk7Y29sb3I6dmFyKC0tdGV4dCk7Zm9udC1zaXplOjE2cHg7dGV4dC1hbGlnbjpjZW50ZXI7b3V0bGluZTpub25lO3RyYW5zaXRpb246Ym9yZGVyLWNvbG9yIDAuMnN9Ci5uYW1lLW5hZy1pbnB1dDpmb2N1c3tib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5uYW1lLW5hZy1zdWJtaXR7d2lkdGg6MTAwJTttYXJnaW4tdG9wOjE0cHg7cGFkZGluZzoxNHB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmY7Zm9udC1zaXplOjE2cHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YmFja2dyb3VuZCAwLjJzfQoubmFtZS1uYWctc3VibWl0OmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeS1ob3Zlcil9Ci5uYW1lLW5hZy1zdWJtaXQ6ZGlzYWJsZWR7b3BhY2l0eTowLjQ7Y3Vyc29yOm5vdC1hbGxvd2VkfQoKLyogQ29weSBzdW1tYXJ5IG1vZGFsICovCi5jb3B5LW1vZGFsLWJhY2tkcm9we2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjcpO3otaW5kZXg6MjAwO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2JhY2tkcm9wLWZpbHRlcjpibHVyKDRweCl9Ci5jb3B5LW1vZGFse2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzLWxnKTttYXgtd2lkdGg6NDgwcHg7d2lkdGg6OTIlO21heC1oZWlnaHQ6ODB2aDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2JveC1zaGFkb3c6MCAyMHB4IDYwcHggcmdiYSgwLDAsMCwwLjUpO2FuaW1hdGlvbjpuYWdCb3VuY2UgMC4zcyBlYXNlfQouY29weS1tb2RhbC1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjE2cHggMjBweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouY29weS1tb2RhbC10aXRsZXtmb250LXNpemU6MTZweDtmb250LXdlaWdodDo3MDA7Y29sb3I6dmFyKC0tdGV4dCl9Ci5jb3B5LW1vZGFsLWNsb3Nle2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtjb2xvcjp2YXIoLS1tdXRlZCk7Zm9udC1zaXplOjIycHg7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzowIDRweDtsaW5lLWhlaWdodDoxfQouY29weS1tb2RhbC1jbG9zZTpob3Zlcntjb2xvcjp2YXIoLS10ZXh0KX0KLmNvcHktbW9kYWwtYm9keXtmbGV4OjE7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6MTZweCAyMHB4fQouY29weS1tb2RhbC1mb290ZXJ7cGFkZGluZzoxMnB4IDIwcHg7Ym9yZGVyLXRvcDoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLmNvcHktbW9kYWwtYnRue3dpZHRoOjEwMCU7cGFkZGluZzoxMnB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmY7Zm9udC1zaXplOjE1cHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnN9Ci5jb3B5LW1vZGFsLWJ0bjpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnktaG92ZXIpfQouY29weS1zdW1tYXJ5e21hcmdpbi1ib3R0b206MTZweH0KLmNvcHktc3VtbWFyeS1yb3d7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6NXB4IDA7Zm9udC1zaXplOjEzcHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjA0KX0KLmNvcHktbGFiZWx7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZsZXgtc2hyaW5rOjA7bWFyZ2luLXJpZ2h0OjEycHh9Ci5jb3B5LXZhbHVle2NvbG9yOnZhcigtLXRleHQpO3RleHQtYWxpZ246cmlnaHQ7d29yZC1icmVhazpicmVhay1hbGx9Ci5jb3B5LWZpbGVuYW1le2ZvbnQtZmFtaWx5Om1vbm9zcGFjZTtmb250LXNpemU6MTJweDtjb2xvcjp2YXIoLS1hY2NlbnQpfQouY29weS1saW5re2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLXByaW1hcnkpO21heC13aWR0aDoyNjBweDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXB9Ci5jb3B5LWdyb3Vwe21hcmdpbi1ib3R0b206MTJweH0KLmNvcHktZ3JvdXAtaGVhZGVye2ZvbnQtc2l6ZToxNHB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KTtwYWRkaW5nOjZweCAxMHB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCB2YXIoLS1wcmltYXJ5KTtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4wMyk7Ym9yZGVyLXJhZGl1czowIHZhcigtLXJhZGl1cykgdmFyKC0tcmFkaXVzKSAwO21hcmdpbi1ib3R0b206NHB4fQouY29weS1ncm91cC1jb3VudHtmb250LXdlaWdodDo0MDA7Y29sb3I6dmFyKC0tbXV0ZWQpO2ZvbnQtc2l6ZToxMnB4fQouY29weS1ncm91cC1pdGVtc3twYWRkaW5nLWxlZnQ6NHB4fQouY29weS1pdGVte2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpiYXNlbGluZTtnYXA6OHB4O3BhZGRpbmc6M3B4IDZweDtmb250LXNpemU6MTJweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDMpfQouY29weS1pdGVtOmxhc3QtY2hpbGR7Ym9yZGVyLWJvdHRvbTpub25lfQouY29weS1pdGVtLW51bXtjb2xvcjp2YXIoLS1tdXRlZCk7Zm9udC1zaXplOjEwcHg7bWluLXdpZHRoOjE4cHg7dGV4dC1hbGlnbjpyaWdodDtmbGV4LXNocmluazowfQouY29weS1pdGVtLW5hbWV7ZmxleDoxO2NvbG9yOnZhcigtLXRleHQpO3dvcmQtYnJlYWs6YnJlYWstd29yZH0KLmNvcHktaXRlbS1zaXple2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTFweDtmbGV4LXNocmluazowO3doaXRlLXNwYWNlOm5vd3JhcH0KCi8qIFRoZW1lIGhpbnQgKi8KI2NsZWFyU2VhcmNoe3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OnZpc2libGV9CiNjbGVhclNlYXJjaDo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTtpbnNldDotM3B4O2JvcmRlci1yYWRpdXM6NTAlO2JvcmRlcjoycHggZGFzaGVkIHJnYmEoMjMwLDAsMTgsMC40KTtvcGFjaXR5OjA7YW5pbWF0aW9uOnRoZW1lSGludCAzcyBlYXNlLWluLW91dCBpbmZpbml0ZTtwb2ludGVyLWV2ZW50czpub25lfQpAa2V5ZnJhbWVzIHRoZW1lSGludHswJSwxMDAle29wYWNpdHk6MDt0cmFuc2Zvcm06c2NhbGUoMC44KX01MCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZSgxLjEpfX0KI2NsZWFyU2VhcmNoLmhvbGRpbmc6OmFmdGVye29wYWNpdHk6MTthbmltYXRpb246bm9uZTtib3JkZXItY29sb3I6I2U2MDAxMjtib3JkZXItc3R5bGU6c29saWR9CiNjbGVhclNlYXJjaCBzdmd7ZGlzcGxheTpub25lfQojY2xlYXJTZWFyY2ggLmljb24teHtkaXNwbGF5OmJsb2NrfQoudGhlbWUtY291bnRkb3due3Bvc2l0aW9uOmZpeGVkO3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjkpO2NvbG9yOiNmZmY7cGFkZGluZzoyMHB4IDMycHg7Ym9yZGVyLXJhZGl1czoxNnB4O2ZvbnQtc2l6ZToxOHB4O2ZvbnQtd2VpZ2h0OjYwMDt6LWluZGV4Ojk5OTk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDtvcGFjaXR5OjA7cG9pbnRlci1ldmVudHM6bm9uZTt0cmFuc2l0aW9uOm9wYWNpdHkgMC4yc30KLnRoZW1lLWNvdW50ZG93bi5zaG93e29wYWNpdHk6MX0KLnRoZW1lLWNvdW50ZG93biAuY291bnRkb3duLW51bXtmb250LXNpemU6NDhweDtmb250LXdlaWdodDo3MDA7Y29sb3I6I2U2MDAxMn0KLnRoZW1lLWNvdW50ZG93biAuY291bnRkb3duLWxhYmVse2ZvbnQtc2l6ZToxM3B4O2NvbG9yOiM5OTl9CgovKiBNb2JpbGUgKi8KQG1lZGlhKG1heC13aWR0aDo5MDBweCl7CiAgLmNvbnRhaW5lcntncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyO2dhcDoxMnB4fQogIC5yaWdodFBhbmV7b3JkZXI6LTE7cGFkZGluZzoxMnB4O2dhcDoxMnB4fQogIC5zZWxlY3RlZC1wYW5lbHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fQogIC5oZWFkZXIgYnV0dG9uIHNwYW57ZGlzcGxheTpub25lfQogIC5jb25zb2xlLWJhcntmbGV4LXdyYXA6d3JhcDtoZWlnaHQ6YXV0bztwYWRkaW5nOjZweCAxMnB4O2dhcDo2cHh9CiAgLmNvbnNvbGUtY2hpcHN7Z2FwOjRweH0KICAuY29uc29sZS1jaGlwe3BhZGRpbmc6NHB4IDEwcHg7Zm9udC1zaXplOjExcHh9Cn0KQG1lZGlhKG1heC13aWR0aDo2MDBweCl7CiAgLmhlYWRlcntoZWlnaHQ6NDhweDtnYXA6OHB4fQogIC5pdGVtLXRodW1ie3dpZHRoOjQ4cHg7aGVpZ2h0OjQ4cHh9CiAgLml0ZW0tdGl0bGV7Zm9udC1zaXplOjEzcHh9CiAgLnN0YXQtdmFsdWV7Zm9udC1zaXplOjE2cHh9CiAgLmNvbnRyb2xzIGlucHV0LC5jb250cm9scyBzZWxlY3R7aGVpZ2h0OjQwcHg7Zm9udC1zaXplOjEzcHh9Cn0KCi8qIExlZ2FjeSBtb2RlICovCi5sZWdhY3ktbW9kZSAub3ZlcmxheSwubGVnYWN5LW1vZGUgI2dhbWVJbmZvTW9kYWwsLmxlZ2FjeS1tb2RlIC5zY3JlZW5zaG90LWZ1bGxzY3JlZW57dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7LXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6bm9uZTtiYWNrZHJvcC1maWx0ZXI6bm9uZX0KLmxlZ2FjeS1tb2RlIC5oZWFkZXIgaW5wdXQuc2VhcmNoey13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOm5vbmU7YmFja2Ryb3AtZmlsdGVyOm5vbmU7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMil9Ci5sZWdhY3ktbW9kZSAuY29udGFpbmVye2dhcDowfS5sZWdhY3ktbW9kZSAubGVmdFBhbmV7bWFyZ2luLXJpZ2h0OjE2cHh9Ci5sZWdhY3ktbW9kZSAucmlnaHRQYW5le2dhcDowfS5sZWdhY3ktbW9kZSAucmlnaHRQYW5lPip7bWFyZ2luLWJvdHRvbToxNnB4fQoubGVnYWN5LW1vZGUgLml0ZW17Z2FwOjB9LmxlZ2FjeS1tb2RlIC5pdGVtPip7bWFyZ2luLXJpZ2h0OjEycHh9Ci5sZWdhY3ktbW9kZSAuY29udHJvbHN7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5jb250cm9scz4qe21hcmdpbi1ib3R0b206OHB4fQoubGVnYWN5LW1vZGUgLnN0YXRzLWdyaWR7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5zdGF0cy1ncmlkPip7bWFyZ2luLXJpZ2h0OjhweDttYXJnaW4tYm90dG9tOjhweH0KLmxlZ2FjeS1tb2RlIC5nZW5yZS1maWx0ZXJ7Z2FwOjB9LmxlZ2FjeS1tb2RlIC5nZW5yZS1maWx0ZXI+KnttYXJnaW4tcmlnaHQ6OHB4fQoubGVnYWN5LW1vZGUgLmNvbnNvbGUtYmFye2dhcDowfS5sZWdhY3ktbW9kZSAuY29uc29sZS1iYXI+KnttYXJnaW4tcmlnaHQ6MTBweH0KLmxlZ2FjeS1tb2RlIC5jb25zb2xlLWNoaXBze2dhcDowfS5sZWdhY3ktbW9kZSAuY29uc29sZS1jaGlwcz4qe21hcmdpbi1yaWdodDo2cHh9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+Cgo8IS0tIENvbnNvbGUgU2VsZWN0b3IgQmFyIC0tPgo8ZGl2IGNsYXNzPSJjb25zb2xlLWJhciIgaWQ9ImNvbnNvbGVCYXIiPgogIDxkaXYgY2xhc3M9Im1vZGUtdG9nZ2xlIiBpZD0ibW9kZVRvZ2dsZSI+CiAgICA8YnV0dG9uIGNsYXNzPSJtb2RlLWJ0biBhY3RpdmUiIGRhdGEtbW9kZT0icmVndWxhciI+UkVHVUxBUjwvYnV0dG9uPgogICAgPGJ1dHRvbiBjbGFzcz0ibW9kZS1idG4iIGRhdGEtbW9kZT0ibWl4Ij5NSVg8L2J1dHRvbj4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJjb25zb2xlLWNoaXBzIiBpZD0iY29uc29sZUNoaXBzIj48L2Rpdj4KPC9kaXY+Cgo8IS0tIEhlYWRlciAvIFNlYXJjaCAtLT4KPGRpdiBjbGFzcz0iaGVhZGVyIj4KICA8aW5wdXQgaWQ9InNlYXJjaCIgY2xhc3M9InNlYXJjaCIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IlNlYXJjaCBnYW1lcy4uLiI+CiAgPGRpdiBjbGFzcz0iYWN0aW9ucyI+CiAgICA8YnV0dG9uIGlkPSJjbGVhclNlYXJjaCI+CiAgICAgIDxzdmcgY2xhc3M9Imljb24teCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+CiAgICA8L2J1dHRvbj4KICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIE1peCBNb2RlIFRhYnMgLS0+CjxkaXYgY2xhc3M9Im1peC10YWJzIiBpZD0ibWl4VGFicyI+PC9kaXY+Cgo8IS0tIE1haW4gQ29udGVudCAtLT4KPGRpdiBjbGFzcz0iY29udGFpbmVyIiBpZD0ibWFpbkNvbnRhaW5lciI+CiAgPHNlY3Rpb24gY2xhc3M9ImxlZnRQYW5lIiBpZD0ibGVmdFBhbmUiIGFyaWEtbGFiZWw9IkdhbWUgbGlzdCI+CiAgICA8ZGl2IGNsYXNzPSJnZW5yZS1maWx0ZXIiIGlkPSJnZW5yZUZpbHRlciI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJsZWZ0UGFuZS1pbm5lciIgaWQ9ImxlZnRQYW5lSW5uZXIiPgogICAgICA8ZGl2IGNsYXNzPSJsb2FkaW5nLW92ZXJsYXkiPlNlbGVjdCBhIGNvbnNvbGUgdG8gYmVnaW48L2Rpdj4KICAgIDwvZGl2PgogIDwvc2VjdGlvbj4KCiAgPGFzaWRlIGNsYXNzPSJyaWdodFBhbmUiPgogICAgPCEtLSBTdG9yYWdlIENhcmQgLS0+CiAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWNhcmQiPgogICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWhlYWRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0ic3RvcmFnZS10aXRsZSI+CiAgICAgICAgICA8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xOSAxMUg1bTE0IDBhMiAyIDAgMDEyIDJ2NmEyIDIgMCAwMS0yIDJINWEyIDIgMCAwMS0yLTJ2LTZhMiAyIDAgMDEyLTJtMTQgMFY5YTIgMiAwIDAwLTItMk01IDExVjlhMiAyIDAgMDEyLTJtMCAwVjVhMiAyIDAgMDEyLTJoNmEyIDIgMCAwMTIgMnYyTTcgN2gxMCIvPjwvc3ZnPgogICAgICAgICAgPHNwYW4gaWQ9InN0b3JhZ2VMYWJlbCI+U3RvcmFnZTwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWNhcGFjaXR5Ij48c3BhbiBpZD0ic3BhY2UiPjA8L3NwYW4+R0IgQ2FwYWNpdHk8L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtcHJvZ3Jlc3MiPgogICAgICAgIDxkaXYgY2xhc3M9InByb2dyZXNzLXVzZWQiIGlkPSJwcm9ncmVzc1VzZWQiIHN0eWxlPSJ3aWR0aDowJSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0icHJvZ3Jlc3Mtc2VsZWN0ZWQiIGlkPSJwcm9ncmVzc1NlbGVjdGVkIiBzdHlsZT0id2lkdGg6MCUiPjwvZGl2PgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ic3RvcmFnZS1sZWdlbmQiPgogICAgICAgIDxkaXYgY2xhc3M9ImxlZ2VuZC1pdGVtIj48ZGl2IGNsYXNzPSJsZWdlbmQtZG90IHVzZWQiPjwvZGl2PlVzZWQ6IDxzcGFuIGlkPSJ1c2VkU3BhY2UiPjA8L3NwYW4+IEdCPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGVnZW5kLWl0ZW0iPjxkaXYgY2xhc3M9ImxlZ2VuZC1kb3Qgc2VsZWN0ZWQiPjwvZGl2PlNlbGVjdGVkOiA8c3BhbiBpZD0ic2VsZWN0ZWRTaXplIj4wLjAwPC9zcGFuPiBHQjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImxlZ2VuZC1pdGVtIj48ZGl2IGNsYXNzPSJsZWdlbmQtZG90IGZyZWUiPjwvZGl2PkZyZWU6IDxzcGFuIGlkPSJmcmVlU3BhY2UiPjA8L3NwYW4+IEdCPC9kaXY+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSBTdGF0cyAtLT4KICAgIDxkaXYgY2xhc3M9InN0YXRzLWdyaWQiPgogICAgICA8ZGl2IGNsYXNzPSJzdGF0LWNhcmQiPjxkaXYgY2xhc3M9InN0YXQtdmFsdWUiIGlkPSJjb3VudCI+MDwvZGl2PjxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPlRpdGxlczwvZGl2PjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzdGF0LWNhcmQgaGlnaGxpZ2h0Ij48ZGl2IGNsYXNzPSJzdGF0LXZhbHVlIj48c3BhbiBpZD0ic2VsZWN0ZWRTaXplRGlzcGxheSI+MC4wPC9zcGFuPjxzbWFsbCBzdHlsZT0iZm9udC1zaXplOjE0cHgiPkdCPC9zbWFsbD48L2Rpdj48ZGl2IGNsYXNzPSJzdGF0LWxhYmVsIj5Ub3RhbCBTaXplPC9kaXY+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InN0YXQtY2FyZCI+PGRpdiBjbGFzcz0ic3RhdC12YWx1ZSIgaWQ9Imluc3RhbGxFc3RpbWF0ZSI+fjBtPC9kaXY+PGRpdiBjbGFzcz0ic3RhdC1sYWJlbCI+RXN0LiBUaW1lPC9kaXY+PC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InN0YXQtbm90ZSI+CiAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMiAxNnYtNG0wLTRoLjAxIi8+PC9zdmc+CiAgICAgIEVzdC4gYmFzZWQgb24gMTRNQi9zIHRyYW5zZmVyIHJhdGUKICAgIDwvZGl2PgoKICAgIDwhLS0gQ29udHJvbHMgLS0+CiAgICA8ZGl2IGNsYXNzPSJjb250cm9scyI+CiAgICAgIDxkaXYgY2xhc3M9ImZ1bGwiPjxsYWJlbD5DdXN0b21lciBOYW1lIDxhIGhyZWY9IiMiIGlkPSJub3RZb3VMaW5rIiBzdHlsZT0iZGlzcGxheTpub25lO2ZvbnQtc2l6ZToxMXB4O2ZvbnQtd2VpZ2h0OjQwMDtjb2xvcjojOTk5O21hcmdpbi1sZWZ0OjZweCIgb25jbGljaz0iY2xlYXJDdXN0b21lck5hbWUoKTtyZXR1cm4gZmFsc2U7Ij5Ob3QgeW91PyBDbGljayBoZXJlPC9hPjwvbGFiZWw+PGlucHV0IGlkPSJjdXN0b21lciIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkVudGVyIG5hbWUgKHVzZSB1bmRlcnNjb3JlcykiPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJmaWxlbmFtZS1wcmV2aWV3IiBpZD0iZmlsZW5hbWVQcmV2aWV3Ij5TZWxlY3QgYSBjb25zb2xlIHRvIGJlZ2luLi4uPC9kaXY+CiAgICAgIDxkaXYgaWQ9ImR5bmFtaWNDb250cm9scyI+PC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIEdyYW5kIFRvdGFsIChNSVggbW9kZSBvbmx5KSAtLT4KICAgIDxkaXYgY2xhc3M9ImdyYW5kLXRvdGFsIiBpZD0iZ3JhbmRUb3RhbCI+CiAgICAgIDxkaXYgY2xhc3M9ImdyYW5kLXRvdGFsLWhlYWRlciI+R1JBTkQgVE9UQUwgKEFsbCBDb25zb2xlcyk8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iZ3JhbmQtdG90YWwtYnJlYWtkb3duIiBpZD0iZ3JhbmRUb3RhbEJyZWFrZG93biI+PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImdyYW5kLXRvdGFsLXN1bW1hcnkiPgogICAgICAgIDxzcGFuPkNvbWJpbmVkPC9zcGFuPgogICAgICAgIDxzcGFuIGlkPSJncmFuZFRvdGFsU2l6ZSI+MCB0aXRsZXMgLyAwLjAgR0I8L3NwYW4+CiAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSBTaGFyZSAtLT4KICAgIDxkaXYgY2xhc3M9InNoYXJlLXJvdyI+CiAgICAgIDxpbnB1dCBpZD0ic2hhcmVhYmxlIiB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iVXBsb2FkIGxpbmsgd2lsbCBhcHBlYXIgaGVyZS4uLiIgcmVhZG9ubHk+CiAgICAgIDxidXR0b24gaWQ9ImNvcHlMaW5rIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5Ij5Db3B5PC9idXR0b24+CiAgICA8L2Rpdj4KCiAgICA8IS0tIEFjdGlvbnMgLS0+CiAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgPGJ1dHRvbiBpZD0ic2F2ZUJ0biIgY2xhc3M9ImJ0biBnaG9zdCI+U2F2ZTwvYnV0dG9uPgogICAgICA8bGFiZWwgZm9yPSJmaWxlSW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciI+T3BlbjwvbGFiZWw+CiAgICAgIDxpbnB1dCBpZD0iZmlsZUluIiB0eXBlPSJmaWxlIiBzdHlsZT0iZGlzcGxheTpub25lOyI+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICA8YnV0dG9uIGlkPSJhZG1pbkV4cG9ydCIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IEFkbWluPC9idXR0b24+CiAgICAgIDxidXR0b24gaWQ9Im1hdGNoTGlzdCIgY2xhc3M9ImJ0biBnaG9zdCI+TWF0Y2ggTGlzdDwvYnV0dG9uPgogICAgICA8YnV0dG9uIGlkPSJiaW5MaXN0IiBjbGFzcz0iYnRuIGdob3N0Ij5VcGxvYWRzPC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9ImZpbGVMaXN0Q29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGRpdiBpZD0iYmluRmlsZUxpc3QiPjwvZGl2PjwvZGl2PgogICAgPGRpdiBpZD0ic3RhdHVzIiBzdHlsZT0iZGlzcGxheTpub25lOyI+UmVhZHk8L2Rpdj4KCiAgICA8IS0tIFNlbGVjdGVkIFBhbmVsIC0tPgogICAgPGRpdiBpZD0ic2VsZWN0ZWRQYW5lbCIgY2xhc3M9InNlbGVjdGVkLXBhbmVsIj4KICAgICAgPGRpdiBjbGFzcz0iaGVhZCI+PHNwYW4+U2VsZWN0ZWQgU29mdHdhcmU8L3NwYW4+PHNwYW4gaWQ9InNlbGVjdGVkUGFuZWxDb3VudCI+MCBpdGVtczwvc3Bhbj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iYm9keSIgaWQ9InNlbGVjdGVkUGFuZWxCb2R5Ij48L2Rpdj4KICAgIDwvZGl2PgogIDwvYXNpZGU+CjwvZGl2PgoKPCEtLSBCb3R0b20gQ1RBIC0tPgo8ZGl2IGNsYXNzPSJib3R0b20tY3RhIiBpZD0iYm90dG9tQ3RhIj4KICA8ZGl2IGNsYXNzPSJib3R0b20tY3RhLWlubmVyIj4KICAgIDxidXR0b24gY2xhc3M9ImN0YS1zaG93IiBpZD0iY3RhU2hvdyI+CiAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBkPSJNNCA2aDE2TTQgMTBoMTZNNCAxNGgxNk00IDE4aDE2Ii8+PC9zdmc+CiAgICAgIDxzcGFuIGNsYXNzPSJiYWRnZSIgaWQ9ImN0YUJhZGdlIj4wPC9zcGFuPgogICAgPC9idXR0b24+CiAgICA8YnV0dG9uIGNsYXNzPSJjdGEtYnV0dG9uIiBpZD0iY3RhVXBsb2FkIj4KICAgICAgPHNwYW4gY2xhc3M9Indhcm5pbmctaWNvbiI+4pqg77iPPC9zcGFuPgogICAgICA8c3ZnIGNsYXNzPSJ1cGxvYWQtaWNvbiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTcgMTZhNCA0IDAgMDEtLjg4LTcuOTAzQTUgNSAwIDExMTUuOSA2TDE2IDZhNSA1IDAgMDExIDkuOU0xNSAxM2wtMy0zbTAgMGwtMyAzbTMtM3YxMiIvPjwvc3ZnPgogICAgICA8c3ZnIGNsYXNzPSJ1cGxvYWQtc3Bpbm5lciIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iMzIiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMiIvPjwvc3ZnPgogICAgICA8c3BhbiBpZD0iY3RhVGV4dCI+VXBsb2FkPC9zcGFuPgogICAgPC9idXR0b24+CiAgPC9kaXY+CjwvZGl2PgoKPCEtLSBPdmVybGF5IC0tPgo8ZGl2IGNsYXNzPSJvdmVybGF5IiBpZD0ib3ZlcmxheSI+CiAgPGRpdiBjbGFzcz0iaGVhZCI+PGRpdj48c3Ryb25nPlNlbGVjdGVkIFRpdGxlczwvc3Ryb25nPiAtIDxzcGFuIGlkPSJvdmVybGF5Q291bnQiPjA8L3NwYW4+PC9kaXY+PGRpdj48YnV0dG9uIGlkPSJjbG9zZU92ZXJsYXkiIGNsYXNzPSJidG4gZ2hvc3QiPkNsb3NlPC9idXR0b24+PC9kaXY+PC9kaXY+CiAgPGRpdiBjbGFzcz0iYm9keSIgaWQ9Im92ZXJsYXlCb2R5Ij48L2Rpdj4KPC9kaXY+Cgo8IS0tIEZpbGVzIE1vZGFsIC0tPgo8ZGl2IGlkPSJmaWxlc01vZGFsIiBzdHlsZT0iZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO3RvcDo1MCU7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpO2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO3BhZGRpbmc6MjBweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7Ym94LXNoYWRvdzowIDIwcHggNTBweCByZ2JhKDAsMCwwLDAuNSk7ei1pbmRleDoyMDA7bWF4LXdpZHRoOjUwMHB4O3dpZHRoOjkwJTttYXgtaGVpZ2h0Ojcwdmg7b3ZlcmZsb3c6YXV0bztmb250LXNpemU6MTNweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Y29sb3I6dmFyKC0tdGV4dCkiPjwvZGl2PgoKPCEtLSBHYW1lIEluZm8gTW9kYWwgLS0+CjxkaXYgaWQ9ImdhbWVJbmZvTW9kYWwiPjxkaXYgY2xhc3M9ImdhbWUtaW5mbyIgaWQ9ImdhbWVJbmZvQ29udGVudCI+PC9kaXY+PC9kaXY+Cgo8IS0tIFNjcmVlbnNob3QgVmlld2VyIC0tPgo8ZGl2IGNsYXNzPSJzY3JlZW5zaG90LWZ1bGxzY3JlZW4iIGlkPSJzY3JlZW5zaG90Vmlld2VyIj4KICA8aW1nIHNyYz0iIiBhbHQ9IlNjcmVlbnNob3QiIGlkPSJzY3JlZW5zaG90SW1hZ2UiPgogIDxzcGFuIGNsYXNzPSJjbG9zZS1oaW50Ij5UYXAgYW55d2hlcmUgdG8gY2xvc2U8L3NwYW4+CjwvZGl2PgoKPCEtLSBDb3B5IHN1bW1hcnkgbW9kYWwgLS0+CjxkaXYgaWQ9ImNvcHlNb2RhbCIgY2xhc3M9ImNvcHktbW9kYWwtYmFja2Ryb3AiPgogIDxkaXYgY2xhc3M9ImNvcHktbW9kYWwiPgogICAgPGRpdiBjbGFzcz0iY29weS1tb2RhbC1oZWFkZXIiPgogICAgICA8c3BhbiBjbGFzcz0iY29weS1tb2RhbC10aXRsZSI+U2VsZWN0aW9uIFN1bW1hcnk8L3NwYW4+CiAgICAgIDxidXR0b24gaWQ9ImNvcHlNb2RhbENsb3NlIiBjbGFzcz0iY29weS1tb2RhbC1jbG9zZSI+JnRpbWVzOzwvYnV0dG9uPgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJjb3B5LW1vZGFsLWJvZHkiIGlkPSJjb3B5TW9kYWxCb2R5Ij48L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImNvcHktbW9kYWwtZm9vdGVyIj4KICAgICAgPGJ1dHRvbiBpZD0iY29weU1vZGFsQnRuIiBjbGFzcz0iY29weS1tb2RhbC1idG4iPkNvcHkgdG8gQ2xpcGJvYXJkPC9idXR0b24+CiAgICA8L2Rpdj4KICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIE5hbWUgbmFnIG1vZGFsIC0tPgo8ZGl2IGlkPSJuYW1lTmFnIiBjbGFzcz0ibmFtZS1uYWctYmFja2Ryb3AiPgogIDxkaXYgY2xhc3M9Im5hbWUtbmFnLWJveCI+CiAgICA8ZGl2IGNsYXNzPSJuYW1lLW5hZy1pY29uIj4hPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJuYW1lLW5hZy10aXRsZSI+V2hhdCdzIHlvdXIgbmFtZT88L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im5hbWUtbmFnLXN1YnRpdGxlIj5XZSBuZWVkIHlvdXIgbmFtZSBiZWZvcmUgeW91IGNhbiBjb250aW51ZTwvZGl2PgogICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJuYW1lTmFnSW5wdXQiIGNsYXNzPSJuYW1lLW5hZy1pbnB1dCIgcGxhY2Vob2xkZXI9IkVudGVyIG5hbWUgKHVzZSB1bmRlcnNjb3JlcykiIGF1dG9jb21wbGV0ZT0ib2ZmIiBzcGVsbGNoZWNrPSJmYWxzZSI+CiAgICA8YnV0dG9uIGlkPSJuYW1lTmFnU3VibWl0IiBjbGFzcz0ibmFtZS1uYWctc3VibWl0Ij5MZXQncyBHbzwvYnV0dG9uPgogIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gVG9hc3QgJiBUaGVtZSBjb3VudGRvd24gLS0+CjxkaXYgY2xhc3M9InRvYXN0IiBpZD0idG9hc3QiPjwvZGl2Pgo8ZGl2IGlkPSJ0aGVtZUNvdW50ZG93biIgY2xhc3M9InRoZW1lLWNvdW50ZG93biI+PHNwYW4gY2xhc3M9ImNvdW50ZG93bi1udW0iPjM8L3NwYW4+PHNwYW4gY2xhc3M9ImNvdW50ZG93bi1sYWJlbCI+SG9sZCB0byBjaGFuZ2UgdGhlbWU8L3NwYW4+PC9kaXY+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly8gUHJlbWF6aW5nUEhHYW1lcyBDb25zb2xlIFJlZ2lzdHJ5Ci8vIEFkZCBuZXcgY29uc29sZXMgYnkgYWRkaW5nIGVudHJpZXMgdG8gdGhpcyBvYmplY3QuCi8vIEVhY2ggY29uc29sZSBtYXBzIHRvIGl0cyBmb2xkZXIgd2l0aCBhIHVuaWZpZWQgZ2FtZXMuanNvbiBkYXRhYmFzZS4KCi8vIExpYnJldHJvIHRodW1ibmFpbCBVUkwgYnVpbGRlcgovLyBSZXBsYWNlcyAmKi86YDw+P1x8IHdpdGggXyBwZXIgbGlicmV0cm8gc3BlYwp2YXIgTElCUkVUUk9fQ0ROID0gJ2h0dHBzOi8vdGh1bWJuYWlscy5saWJyZXRyby5jb20vJzsKZnVuY3Rpb24gbGlicmV0cm9TYWZlKG5hbWUpIHsKICByZXR1cm4gbmFtZS5yZXBsYWNlKC9bJiovOmA8Pj9cXHxdL2csICdfJyk7Cn0KCmNvbnN0IENPTlNPTEVTID0gewogIHN3aXRjaDogewogICAgaWQ6ICdzd2l0Y2gnLAogICAgbGFiZWw6ICdTd2l0Y2gnLAogICAgY29sb3I6ICcjZTYwMDEyJywKICAgIGZvbGRlcjogJ2RhdGEvc3dpdGNoJywKICAgIGRiRmlsZTogJ2dhbWVzLmpzb24nLAogICAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWicsCiAgICBhZG1pbkZpbGVFeHQ6ICcuUFJNWicsCiAgICBmaWxlYmluQnVja2V0OiAneGxnNGtnZ296YmRnc253NCcsCiAgICBhZG1pbkJhc2VQYXRoOiAnSzpcXE5TUCAyMDIxXFwnLAogICAgc3RvcmFnZUxhYmVsOiAnU0QgQ2FyZCBTdG9yYWdlJywKICAgIHN0b3JhZ2VDb250cm9sczogWwogICAgICB7CiAgICAgICAgaWQ6ICdjb25zb2xlJywKICAgICAgICBsYWJlbDogJ0NvbnNvbGUnLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICd2MScsIGxhYmVsOiAndjEnIH0sCiAgICAgICAgICB7IHZhbHVlOiAndjInLCBsYWJlbDogJ3YyJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ2xpdGUnLCBsYWJlbDogJ2xpdGUnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnb2xlZCcsIGxhYmVsOiAnb2xlZCcgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJ3YxJywKICAgICAgICBmaWxlbmFtZVRva2VuOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogJ3NkJywKICAgICAgICBsYWJlbDogJ1NEIENhcmQgKEdCKScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJzEyOCcsIGxhYmVsOiAnMTI4JyB9LAogICAgICAgICAgeyB2YWx1ZTogJzI1NicsIGxhYmVsOiAnMjU2JyB9LAogICAgICAgICAgeyB2YWx1ZTogJzUxMicsIGxhYmVsOiAnNTEyJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzEwMjQnLCBsYWJlbDogJzEwMjQnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICcxMjgnLAogICAgICAgIGZpbGVuYW1lVG9rZW46ICdzZCcsCiAgICAgICAgc3RvcmFnZUNhbGM6IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnYW5kcm9pZCcsCiAgICAgICAgbGFiZWw6ICdBbmRyb2lkIChHQiknLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICcwJywgbGFiZWw6ICcwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzE2JywgbGFiZWw6ICcxNicgfSwKICAgICAgICAgIHsgdmFsdWU6ICczMicsIGxhYmVsOiAnMzInIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNjQnLCBsYWJlbDogJzY0JyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnMCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ2Ryb2lkJywKICAgICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdsaW51eCcsCiAgICAgICAgbGFiZWw6ICdMaW51eCAoR0IpJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnMCcsIGxhYmVsOiAnMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcxNicsIGxhYmVsOiAnMTYnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMzInLCBsYWJlbDogJzMyJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzY0JywgbGFiZWw6ICc2NCcgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJzAnLAogICAgICAgIGZpbGVuYW1lVG9rZW46ICdsaW4nLAogICAgICAgIHN0b3JhZ2VDYWxjOiB0cnVlCiAgICAgIH0KICAgIF0sCiAgICBjYWxjdWxhdGVTdG9yYWdlOiBmdW5jdGlvbih2YWx1ZXMpIHsKICAgICAgY29uc3QgY29uc29sZVZhbCA9IHZhbHVlcy5jb25zb2xlIHx8ICd2MSc7CiAgICAgIGNvbnN0IHNkTWFya2V0ZWQgPSBOdW1iZXIodmFsdWVzLnNkIHx8IDEyOCk7CiAgICAgIGNvbnN0IGFuZHJvaWRNYXJrZXRlZCA9IE51bWJlcih2YWx1ZXMuYW5kcm9pZCB8fCAwKTsKICAgICAgY29uc3QgbGludXhNYXJrZXRlZCA9IE51bWJlcih2YWx1ZXMubGludXggfHwgMCk7CiAgICAgIGNvbnN0IHNkRm9ybWF0dGVkID0geyAxMjg6IDExOSwgMjU2OiAyMzgsIDUxMjogNDczLCAxMDI0OiA5NTMgfTsKICAgICAgY29uc3Qgc2QgPSBzZEZvcm1hdHRlZFtzZE1hcmtldGVkXSB8fCBNYXRoLmZsb29yKHNkTWFya2V0ZWQgKiAwLjkyMyk7CiAgICAgIGNvbnN0IGVtdVBhcnRpdGlvbiA9IGNvbnNvbGVWYWwgPT09ICdvbGVkJyA/IDU4IDogMjk7CiAgICAgIGNvbnN0IGFuZHJvaWQgPSBNYXRoLmZsb29yKGFuZHJvaWRNYXJrZXRlZCAqIDAuOTMpOwogICAgICBjb25zdCBsaW51eCA9IE1hdGguZmxvb3IobGludXhNYXJrZXRlZCAqIDAuOTMpOwogICAgICBjb25zdCBvc1NpemUgPSA4OwogICAgICBjb25zdCBzZEZpbGVzID0gMTsKICAgICAgY29uc3QgYW5kcm9pZEZpbGVzID0gYW5kcm9pZCA+IDAgPyAxIDogMDsKICAgICAgY29uc3QgbGludXhGaWxlcyA9IGxpbnV4ID4gMCA/IDEgOiAwOwogICAgICBjb25zdCBzZFJlbWFpbmRlciA9IHNkIC0gZW11UGFydGl0aW9uIC0gYW5kcm9pZCAtIGFuZHJvaWRGaWxlcyAtIGxpbnV4IC0gbGludXhGaWxlcyAtIHNkRmlsZXM7CiAgICAgIGNvbnN0IGVtdUZyZWUgPSBlbXVQYXJ0aXRpb24gLSBvc1NpemU7CiAgICAgIGNvbnN0IHJhd1NwYWNlID0gc2RSZW1haW5kZXIgKyBlbXVGcmVlOwogICAgICByZXR1cm4gTWF0aC5mbG9vcihyYXdTcGFjZSAqIDAuOTUpOwogICAgfQogIH0sCgogIHBzNDogewogICAgaWQ6ICdwczQnLAogICAgbGFiZWw6ICdQUzQnLAogICAgY29sb3I6ICcjMDAzNzkxJywKICAgIGZvbGRlcjogJ2RhdGEvcHM0JywKICAgIGRiRmlsZTogJ2dhbWVzLmpzb24nLAogICAgbGlicmV0cm9TeXN0ZW06ICdTb255IC0gUGxheVN0YXRpb24gNCcsCiAgICAvLyAiQSBIYXQgaW4gVGltZSBQUzQiIOKGkiAiQSBIYXQgaW4gVGltZSIKICAgIGNsZWFuR2FtZU5hbWU6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvXHMqUFM0XHMqJC9pLCAnJykucmVwbGFjZSgvXHMqXFsuKj9cXVxzKi9nLCAnJykudHJpbSgpOwogICAgfSwKICAgIGNsaWVudEZpbGVFeHQ6ICcuQ0xJX1BSTVo0JywKICAgIGFkbWluRmlsZUV4dDogJy5QUk1aNCcsCiAgICBmaWxlYmluQnVja2V0OiAneGxnNGtnZ296YmRnc253NCcsCiAgICBhZG1pbkJhc2VQYXRoOiAnUTpcXFBTNF9QS0dcXCcsCiAgICBzdG9yYWdlTGFiZWw6ICdIREQgU3RvcmFnZScsCiAgICBzdG9yYWdlQ29udHJvbHM6IFsKICAgICAgewogICAgICAgIGlkOiAnY29uc29sZScsCiAgICAgICAgbGFiZWw6ICdDb25zb2xlJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnZmF0JywgbGFiZWw6ICdmYXQnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnc2xpbScsIGxhYmVsOiAnc2xpbScgfSwKICAgICAgICAgIHsgdmFsdWU6ICdwcm8nLCBsYWJlbDogJ3BybycgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJ2ZhdCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdoZGQnLAogICAgICAgIGxhYmVsOiAnSEREIChHQiknLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICc1MDAnLCBsYWJlbDogJzUwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcxMDAwJywgbGFiZWw6ICcxMDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzIwMDAnLCBsYWJlbDogJzIwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMzAwMCcsIGxhYmVsOiAnMzAwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICc0MDAwJywgbGFiZWw6ICc0MDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzUwMDAnLCBsYWJlbDogJzUwMDAnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICc1MDAnLAogICAgICAgIGZpbGVuYW1lVG9rZW46ICdoZGQnLAogICAgICAgIHN0b3JhZ2VDYWxjOiB0cnVlCiAgICAgIH0KICAgIF0sCiAgICBjYWxjdWxhdGVTdG9yYWdlOiBmdW5jdGlvbih2YWx1ZXMpIHsKICAgICAgY29uc3QgaGRkVmFsID0gTnVtYmVyKHZhbHVlcy5oZGQgfHwgNTAwKTsKICAgICAgY29uc3QgYnVmZmEgPSBNYXRoLmZsb29yKGhkZFZhbCAtIChoZGRWYWwgKiAwLjE4KSk7CiAgICAgIGNvbnN0IHRvdGFsUmVzZXJ2ZWQgPSBoZGRWYWwgLSBidWZmYTsKICAgICAgcmV0dXJuIChoZGRWYWwgLSB0b3RhbFJlc2VydmVkKTsKICAgIH0KICB9LAoKICBwczM6IHsKICAgIGlkOiAncHMzJywKICAgIGxhYmVsOiAnUFMzJywKICAgIGNvbG9yOiAnIzAwMzc5MScsCiAgICBmb2xkZXI6ICdkYXRhL3BzMycsCiAgICBkYkZpbGU6ICdnYW1lcy5qc29uJywKICAgIGxpYnJldHJvU3lzdGVtOiAnU29ueSAtIFBsYXlTdGF0aW9uIDMnLAogICAgbGlicmV0cm9Gb2xkZXJzOiBbJ05hbWVkX1NuYXBzJywgJ05hbWVkX0JveGFydHMnXSwKICAgIC8vICIwMDcgTGVnZW5kcyBbQkxFUzAxNjE0XSIg4oaSICIwMDcgTGVnZW5kcyIKICAgIGNsZWFuR2FtZU5hbWU6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvXHMqXFsuKj9cXVxzKi9nLCAnJykucmVwbGFjZSgvXHMqXCguKj9cKVxzKi9nLCAnJykudHJpbSgpOwogICAgfSwKICAgIGNsaWVudEZpbGVFeHQ6ICcuQ0xJX1BSTVpQJywKICAgIGFkbWluRmlsZUV4dDogJy5QUk1aUCcsCiAgICBmaWxlYmluQnVja2V0OiAneGxnNGtnZ296YmRnc253NCcsCiAgICBhZG1pbkJhc2VQYXRoOiAnUDpcXFBTM0lTT1xcJywKICAgIHN0b3JhZ2VMYWJlbDogJ0hERCBTdG9yYWdlJywKICAgIHN0b3JhZ2VDb250cm9sczogWwogICAgICB7CiAgICAgICAgaWQ6ICdjb25zb2xlJywKICAgICAgICBsYWJlbDogJ0NvbnNvbGUnLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICdmYXQnLCBsYWJlbDogJ2ZhdCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICdzbGltJywgbGFiZWw6ICdzbGltJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ3N1cGVyc2xpbScsIGxhYmVsOiAnc3VwZXJzbGltJyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnc2xpbScsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdoZGQnLAogICAgICAgIGxhYmVsOiAnSEREIChHQiknLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICc1MDAnLCBsYWJlbDogJzUwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcxMDAwJywgbGFiZWw6ICcxMDAwJyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnNTAwJywKICAgICAgICBmaWxlbmFtZVRva2VuOiAnaGRkJywKICAgICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQogICAgICB9CiAgICBdLAogICAgY2FsY3VsYXRlU3RvcmFnZTogZnVuY3Rpb24odmFsdWVzKSB7CiAgICAgIGNvbnN0IGhkZFZhbCA9IE51bWJlcih2YWx1ZXMuaGRkIHx8IDUwMCk7CiAgICAgIGNvbnN0IGJ1ZmZhID0gTWF0aC5mbG9vcihoZGRWYWwgLSAoaGRkVmFsICogMC4xOCkpOwogICAgICBjb25zdCB0b3RhbFJlc2VydmVkID0gaGRkVmFsIC0gYnVmZmE7CiAgICAgIHJldHVybiAoaGRkVmFsIC0gdG90YWxSZXNlcnZlZCk7CiAgICB9CiAgfSwKCiAgcHMyOiB7CiAgICBpZDogJ3BzMicsCiAgICBsYWJlbDogJ1BTMicsCiAgICBjb2xvcjogJyMwMDM3OTEnLAogICAgZm9sZGVyOiAnZGF0YS9wczInLAogICAgZGJGaWxlOiAnZ2FtZXMuanNvbicsCiAgICBsaWJyZXRyb1N5c3RlbTogJ1NvbnkgLSBQbGF5U3RhdGlvbiAyJywKICAgIC8vICIwMDcgLSBRdWFudHVtIG9mIFNvbGFjZSAoVVNBKSIg4oaSICIwMDcgLSBRdWFudHVtIG9mIFNvbGFjZSIKICAgIGNsZWFuR2FtZU5hbWU6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvXHMqXCguKj9cKVxzKi9nLCAnJykudHJpbSgpOwogICAgfSwKICAgIGNsaWVudEZpbGVFeHQ6ICcuQ0xJX1BSTVoyJywKICAgIGFkbWluRmlsZUV4dDogJy5QUk1aMicsCiAgICBmaWxlYmluQnVja2V0OiAneGxnNGtnZ296YmRnc253NCcsCiAgICBhZG1pbkJhc2VQYXRoOiAnUzpcXFNPTllcXFBTMlxcSVNPXFxkdmRcXCcsCiAgICBzdG9yYWdlTGFiZWw6ICdIREQgU3RvcmFnZScsCiAgICBzdG9yYWdlQ29udHJvbHM6IFsKICAgICAgewogICAgICAgIGlkOiAnY29uc29sZScsCiAgICAgICAgbGFiZWw6ICdDb25zb2xlJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnZmF0JywgbGFiZWw6ICdmYXQnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnc2xpbScsIGxhYmVsOiAnc2xpbScgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJ3NsaW0nLAogICAgICAgIGZpbGVuYW1lVG9rZW46IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnaGRkJywKICAgICAgICBsYWJlbDogJ2hkZCAoR0IpJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnNTAwJywgbGFiZWw6ICc1MDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMTAwMCcsIGxhYmVsOiAnMTAwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcyMDAwJywgbGFiZWw6ICcyMDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzMwMDAnLCBsYWJlbDogJzMwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNDAwMCcsIGxhYmVsOiAnNDAwMCcgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJzUwMCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ2hkZCcsCiAgICAgICAgc3RvcmFnZUNhbGM6IHRydWUKICAgICAgfQogICAgXSwKICAgIGNhbGN1bGF0ZVN0b3JhZ2U6IGZ1bmN0aW9uKHZhbHVlcykgewogICAgICBjb25zdCBoZGRWYWwgPSBOdW1iZXIodmFsdWVzLmhkZCB8fCA2NCk7CiAgICAgIGNvbnN0IGJ1ZmZhID0gTWF0aC5mbG9vcihoZGRWYWwgLSAoaGRkVmFsICogMC4xMCkpOwogICAgICBjb25zdCB0b3RhbFJlc2VydmVkID0gaGRkVmFsIC0gYnVmZmE7CiAgICAgIHJldHVybiAoaGRkVmFsIC0gdG90YWxSZXNlcnZlZCk7CiAgICB9CiAgfSwKCiAgcHNwOiB7CiAgICBpZDogJ3BzcCcsCiAgICBsYWJlbDogJ1BTUCcsCiAgICBjb2xvcjogJyMwMDM3OTEnLAogICAgZm9sZGVyOiAnZGF0YS9wc3AnLAogICAgZGJGaWxlOiAnZ2FtZXMuanNvbicsCiAgICBsaWJyZXRyb1N5c3RlbTogJ1NvbnkgLSBQbGF5U3RhdGlvbiBQb3J0YWJsZScsCiAgICAvLyAiMTAwMCBUaW55IENsYXdzLlVTLk5QVVotMDAyNjIuUFNOLkdvb2QiIOKGkiAiMTAwMCBUaW55IENsYXdzIgogICAgY2xlYW5HYW1lTmFtZTogZnVuY3Rpb24obmFtZSkgewogICAgICAvLyBUYWtlIHRleHQgYmVmb3JlIGZpcnN0IGRvdCB0aGF0J3MgZm9sbG93ZWQgYnkgYSByZWdpb24gY29kZQogICAgICB2YXIgbSA9IG5hbWUubWF0Y2goL14oLis/KVwuKFVTfEVVfEpQfEFTfEtSKVwuL2kpOwogICAgICBpZiAobSkgcmV0dXJuIG1bMV0udHJpbSgpOwogICAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccypcKC4qP1wpXHMqL2csICcnKS50cmltKCk7CiAgICB9LAogICAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWlMnLAogICAgYWRtaW5GaWxlRXh0OiAnLlBSTVpTJywKICAgIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywKICAgIGFkbWluQmFzZVBhdGg6ICdaOlxcU09OWVxcUFNQXFxfUFNQX0lTT19HT09EXFwnLAogICAgc3RvcmFnZUxhYmVsOiAnU0QgU3RvcmFnZScsCiAgICBzdG9yYWdlQ29udHJvbHM6IFsKICAgICAgewogICAgICAgIGlkOiAnY29uc29sZScsCiAgICAgICAgbGFiZWw6ICdDb25zb2xlJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnZmF0JywgbGFiZWw6ICdmYXQnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnc2xpbScsIGxhYmVsOiAnc2xpbScgfSwKICAgICAgICAgIHsgdmFsdWU6ICdicml0ZScsIGxhYmVsOiAnYnJpdGUnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICdzbGltJywKICAgICAgICBmaWxlbmFtZVRva2VuOiB0cnVlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICBpZDogJ3NkJywKICAgICAgICBsYWJlbDogJ3NkIChHQiknLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICczMicsIGxhYmVsOiAnMzInIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNjQnLCBsYWJlbDogJzY0JyB9LAogICAgICAgICAgeyB2YWx1ZTogJzEyOCcsIGxhYmVsOiAnMTI4JyB9CiAgICAgICAgXSwKICAgICAgICBkZWZhdWx0OiAnNjQnLAogICAgICAgIGZpbGVuYW1lVG9rZW46ICdzZCcsCiAgICAgICAgc3RvcmFnZUNhbGM6IHRydWUKICAgICAgfQogICAgXSwKICAgIGNhbGN1bGF0ZVN0b3JhZ2U6IGZ1bmN0aW9uKHZhbHVlcykgewogICAgICBjb25zdCBzZFZhbCA9IE51bWJlcih2YWx1ZXMuc2QgfHwgNjQpOwogICAgICBjb25zdCBidWZmYSA9IE1hdGguZmxvb3Ioc2RWYWwgLSAoc2RWYWwgKiAwLjEwKSk7CiAgICAgIGNvbnN0IHRvdGFsUmVzZXJ2ZWQgPSBzZFZhbCAtIGJ1ZmZhOwogICAgICByZXR1cm4gKHNkVmFsIC0gdG90YWxSZXNlcnZlZCk7CiAgICB9CiAgfSwKCiAgJzNkcyc6IHsKICAgIGlkOiAnM2RzJywKICAgIGxhYmVsOiAnM0RTJywKICAgIGNvbG9yOiAnI2M4MjAyZicsCiAgICBmb2xkZXI6ICdkYXRhLzNkcycsCiAgICBkYkZpbGU6ICdnYW1lcy5qc29uJywKICAgIGxpYnJldHJvU3lzdGVtOiAnTmludGVuZG8gLSBOaW50ZW5kbyAzRFMnLAogICAgLy8gIjNEIENsYXNzaWMgM0QgU3RyZWV0cyBvZiBSYWdlIFVTQSIg4oaSICIzRCBDbGFzc2ljIDNEIFN0cmVldHMgb2YgUmFnZSIKICAgIGNsZWFuR2FtZU5hbWU6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvXHMqXCguKj9cKVxzKi9nLCAnJykucmVwbGFjZSgvXHMrKFVTQXxFVVJ8SlBOfEVVfEpQfFVTfEtPUnxXb3JsZClccyokL2ksICcnKS50cmltKCk7CiAgICB9LAogICAgY2xpZW50RmlsZUV4dDogJy5DTElfUFJNWjMnLAogICAgYWRtaW5GaWxlRXh0OiAnLlBSTVozJywKICAgIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywKICAgIGFkbWluQmFzZVBhdGg6ICd6OlxcTklOVEVORE9cXDNEU1xcQ0lBXFwnLAogICAgc3RvcmFnZUxhYmVsOiAnU0QgU3RvcmFnZScsCiAgICBzdG9yYWdlQ29udHJvbHM6IFsKICAgICAgewogICAgICAgIGlkOiAnY29uc29sZScsCiAgICAgICAgbGFiZWw6ICdDb25zb2xlJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnM0RTUkVHJywgbGFiZWw6ICczRFNSRUcnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnM0RTWEwnLCBsYWJlbDogJzNEU1hMJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzJEUycsIGxhYmVsOiAnMkRTJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ05FVzNEU1JFRycsIGxhYmVsOiAnTkVXM0RTUkVHJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ05FVzJEU1hMJywgbGFiZWw6ICdORVcyRFNYTCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICdORVczRFNYTCcsIGxhYmVsOiAnTkVXM0RTWEwnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICczRFNSRUcnLAogICAgICAgIGZpbGVuYW1lVG9rZW46IHRydWUKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnU0QnLAogICAgICAgIGxhYmVsOiAnU0QgKEdCKScsCiAgICAgICAgdHlwZTogJ3NlbGVjdCcsCiAgICAgICAgb3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJzMyJywgbGFiZWw6ICczMicgfSwKICAgICAgICAgIHsgdmFsdWU6ICc2NCcsIGxhYmVsOiAnNjQnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMTI4JywgbGFiZWw6ICcxMjgnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMjU2JywgbGFiZWw6ICcyNTYnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnNTEyJywgbGFiZWw6ICc1MTInIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICc2NCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogJ1NEJywKICAgICAgICBzdG9yYWdlQ2FsYzogdHJ1ZQogICAgICB9CiAgICBdLAogICAgY2FsY3VsYXRlU3RvcmFnZTogZnVuY3Rpb24odmFsdWVzKSB7CiAgICAgIGNvbnN0IHNkVmFsID0gTnVtYmVyKHZhbHVlcy5TRCB8fCA2NCk7CiAgICAgIGNvbnN0IGJ1ZmZhID0gTWF0aC5mbG9vcihzZFZhbCAtIChzZFZhbCAqIDAuMTUpKTsKICAgICAgY29uc3QgdG90YWxSZXNlcnZlZCA9IHNkVmFsIC0gYnVmZmE7CiAgICAgIHJldHVybiAoc2RWYWwgLSB0b3RhbFJlc2VydmVkKTsKICAgIH0KICB9LAoKICB4Ym94MzYwOiB7CiAgICBpZDogJ3hib3gzNjAnLAogICAgbGFiZWw6ICdYYm94IDM2MCcsCiAgICBjb2xvcjogJyMxMDdjMTAnLAogICAgZm9sZGVyOiAnZGF0YS94Ym94MzYwJywKICAgIGRiRmlsZTogJ2dhbWVzLmpzb24nLAogICAgbGlicmV0cm9TeXN0ZW06ICdNaWNyb3NvZnQgLSBYYm94IDM2MCcsCiAgICAvLyAiMDA3IEJsb29kc3RvbmUiIHN0YXlzLCAiMCBkYXkgQXR0YWNrIG9uIEVhcnRoIF9YQkxBIiDihpIgIjAgZGF5IEF0dGFjayBvbiBFYXJ0aCIKICAgIGNsZWFuR2FtZU5hbWU6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvXHMrXyhYQkxBfEdPRHxYQk9YfFhCTHxETEMpXHMqJC9pLCAnJykucmVwbGFjZSgvXHMqXCguKj9cKVxzKi9nLCAnJykudHJpbSgpOwogICAgfSwKICAgIGNsaWVudEZpbGVFeHQ6ICcuQ0xJX1BSTVpYJywKICAgIGFkbWluRmlsZUV4dDogJy5QUk1aWCcsCiAgICBmaWxlYmluQnVja2V0OiAneGxnNGtnZ296YmRnc253NCcsCiAgICBhZG1pbkJhc2VQYXRoOiAnWDpcXHhib3gzNjBnYW1lc1xcZ2FtZXNcXCcsCiAgICBzdG9yYWdlTGFiZWw6ICdIREQgU3RvcmFnZScsCiAgICBzdG9yYWdlQ29udHJvbHM6IFsKICAgICAgewogICAgICAgIGlkOiAnY29uc29sZScsCiAgICAgICAgbGFiZWw6ICdDb25zb2xlJywKICAgICAgICB0eXBlOiAnc2VsZWN0JywKICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICB7IHZhbHVlOiAnZmF0JywgbGFiZWw6ICdmYXQnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnc2xpbScsIGxhYmVsOiAnc2xpbScgfSwKICAgICAgICAgIHsgdmFsdWU6ICdzbGltLWUnLCBsYWJlbDogJ3NsaW0gRScgfQogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdDogJ2ZhdCcsCiAgICAgICAgZmlsZW5hbWVUb2tlbjogdHJ1ZQogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdoZGQnLAogICAgICAgIGxhYmVsOiAnSEREIChHQiknLAogICAgICAgIHR5cGU6ICdzZWxlY3QnLAogICAgICAgIG9wdGlvbnM6IFsKICAgICAgICAgIHsgdmFsdWU6ICc1MDAnLCBsYWJlbDogJzUwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICcxMDAwJywgbGFiZWw6ICcxMDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzIwMDAnLCBsYWJlbDogJzIwMDAnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnMzAwMCcsIGxhYmVsOiAnMzAwMCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICc0MDAwJywgbGFiZWw6ICc0MDAwJyB9LAogICAgICAgICAgeyB2YWx1ZTogJzUwMDAnLCBsYWJlbDogJzUwMDAnIH0KICAgICAgICBdLAogICAgICAgIGRlZmF1bHQ6ICc1MDAnLAogICAgICAgIGZpbGVuYW1lVG9rZW46ICdoZGQnLAogICAgICAgIHN0b3JhZ2VDYWxjOiB0cnVlCiAgICAgIH0KICAgIF0sCiAgICBjYWxjdWxhdGVTdG9yYWdlOiBmdW5jdGlvbih2YWx1ZXMpIHsKICAgICAgY29uc3QgaGRkVmFsID0gTnVtYmVyKHZhbHVlcy5oZGQgfHwgNTAwKTsKICAgICAgY29uc3QgYnVmZmEgPSBNYXRoLmZsb29yKGhkZFZhbCAtIChoZGRWYWwgKiAwLjE4KSk7CiAgICAgIGNvbnN0IHRvdGFsUmVzZXJ2ZWQgPSBoZGRWYWwgLSBidWZmYTsKICAgICAgcmV0dXJuIChoZGRWYWwgLSB0b3RhbFJlc2VydmVkKTsKICAgIH0KICB9Cn07Cjwvc2NyaXB0Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Ly8gUHJlbWF6aW5nUEhHYW1lcyBEYXRhIFBhcnNlcgovLyBGb3JtYXQtYWdub3N0aWMgcGFyc2VyIGxheWVyOiBzdXBwb3J0cyBYTUwgbm93LCBKU09OIGluIHRoZSBmdXR1cmUuCi8vIEJvdGggZm9ybWF0cyByZXR1cm4gdGhlIHNhbWUgbm9ybWFsaXplZCBzdHJ1Y3R1cmUuCgpjb25zdCBEYXRhUGFyc2VyID0gewogIC8qKgogICAqIEZldGNoIGFuZCBwYXJzZSBhIGdhbWUgZGF0YWJhc2UgZmlsZS4KICAgKiBBdXRvLWRldGVjdHMgZm9ybWF0IGZyb20gVVJMIGV4dGVuc2lvbi4KICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gRnVsbCBVUkwgdG8gdGhlIGRhdGEgZmlsZQogICAqIEByZXR1cm5zIHtQcm9taXNlPHtwbGF0Zm9ybTogc3RyaW5nLCBzdHJ1Y3R1cmVUeXBlOiBzdHJpbmcsIGl0ZW1zOiBBcnJheX0+fQogICAqLwogIGFzeW5jIGxvYWQodXJsKSB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7CiAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCAke3VybH06ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTsKICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7CgogICAgaWYgKHVybC5lbmRzV2l0aCgnLmpzb24nKSkgcmV0dXJuIHRoaXMucGFyc2VKU09OKHRleHQpOwogICAgaWYgKHVybC5lbmRzV2l0aCgnLnhtbCcpKSAgcmV0dXJuIHRoaXMucGFyc2VYTUwodGV4dCk7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGRhdGEgZm9ybWF0OiAnICsgdXJsKTsKICB9LAoKICAvKioKICAgKiBQYXJzZSBYTUwgZ2FtZSBkYXRhYmFzZSAoY3VycmVudCBmb3JtYXQpLgogICAqIEhhbmRsZXMgYm90aCAnZm9sZGVycycgYW5kICdmaWxlcycgc3RydWN0dXJlVHlwZS4KICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFJhdyBYTUwgc3RyaW5nCiAgICogQHJldHVybnMge3twbGF0Zm9ybTogc3RyaW5nLCBzdHJ1Y3R1cmVUeXBlOiBzdHJpbmcsIGl0ZW1zOiBBcnJheX19CiAgICovCiAgcGFyc2VYTUwodGV4dCkgewogICAgY29uc3QgeG1sID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh0ZXh0LCAnYXBwbGljYXRpb24veG1sJyk7CiAgICBjb25zdCByb290ID0geG1sLmRvY3VtZW50RWxlbWVudDsKICAgIGNvbnN0IHBsYXRmb3JtID0gcm9vdC5nZXRBdHRyaWJ1dGUoJ3BsYXRmb3JtJykgfHwgJ1Vua25vd24nOwogICAgY29uc3Qgc3RydWN0dXJlVHlwZSA9IHJvb3QuZ2V0QXR0cmlidXRlKCdzdHJ1Y3R1cmVUeXBlJykgfHwgJ2ZvbGRlcnMnOwoKICAgIGxldCBpdGVtcyA9IFtdOwoKICAgIGlmIChzdHJ1Y3R1cmVUeXBlID09PSAnZm9sZGVycycpIHsKICAgICAgaXRlbXMgPSBBcnJheS5mcm9tKHhtbC5xdWVyeVNlbGVjdG9yQWxsKCdmb2xkZXInKSkubWFwKGZ1bmN0aW9uKGYpIHsKICAgICAgICB2YXIgaXRlbSA9IHsKICAgICAgICAgIG5hbWU6IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksCiAgICAgICAgICBzY29yZTogZi5nZXRBdHRyaWJ1dGUoJ3Njb3JlJykgfHwgJzAnLAogICAgICAgICAgc2l6ZTogZi5nZXRBdHRyaWJ1dGUoJ3NpemUnKSB8fCAnMCBHaUInLAogICAgICAgICAgZGF0ZTogZi5nZXRBdHRyaWJ1dGUoJ2RhdGVDcmVhdGVkJykgfHwgJycsCiAgICAgICAgICBmaWxlQ291bnQ6IGYuZ2V0QXR0cmlidXRlKCdmaWxlQ291bnQnKSB8fCAnMCcsCiAgICAgICAgICBmaWxlczogQXJyYXkuZnJvbShmLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKSkubWFwKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguZ2V0QXR0cmlidXRlKCduYW1lJyk7IH0pCiAgICAgICAgfTsKICAgICAgICBpZiAoZi5nZXRBdHRyaWJ1dGUoJ3RpdGxlSWQnKSkgaXRlbS50aXRsZUlkID0gZi5nZXRBdHRyaWJ1dGUoJ3RpdGxlSWQnKTsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBpdGVtcyA9IEFycmF5LmZyb20oeG1sLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKSkubWFwKGYgPT4gKHsKICAgICAgICBuYW1lOiBmLmdldEF0dHJpYnV0ZSgnbmFtZScpLAogICAgICAgIGZpbGVuYW1lOiBmLmdldEF0dHJpYnV0ZSgnZmlsZW5hbWUnKSB8fCBmLmdldEF0dHJpYnV0ZSgnbmFtZScpLAogICAgICAgIHNpemU6IGYuZ2V0QXR0cmlidXRlKCdzaXplJykgfHwgJzAgR2lCJywKICAgICAgICBkYXRlOiBmLmdldEF0dHJpYnV0ZSgnZGF0ZUNyZWF0ZWQnKSB8fCAnJwogICAgICB9KSk7CiAgICB9CgogICAgcmV0dXJuIHsgcGxhdGZvcm0sIHN0cnVjdHVyZVR5cGUsIGl0ZW1zLCB4bWxEb2M6IHhtbCB9OwogIH0sCgogIC8qKgogICAqIFBhcnNlIHVuaWZpZWQgSlNPTiBnYW1lIGRhdGFiYXNlLgogICAqIEVhY2ggZ2FtZSBoYXMgbGlzdCBkYXRhICsgbWV0YWRhdGEgbWVyZ2VkIChmcm9tIFhNTCArIGljb25fY2FjaGUpLgogICAqIEV4dHJhY3RzIGFuIGljb25DYWNoZSBsb29rdXAgZnJvbSB0aGUgZW1iZWRkZWQgbWV0YWRhdGEuCiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBSYXcgSlNPTiBzdHJpbmcKICAgKiBAcmV0dXJucyB7e3BsYXRmb3JtOiBzdHJpbmcsIHN0cnVjdHVyZVR5cGU6IHN0cmluZywgaXRlbXM6IEFycmF5LCBpY29uQ2FjaGU6IE9iamVjdH19CiAgICovCiAgcGFyc2VKU09OKHRleHQpIHsKICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHRleHQpOwogICAgY29uc3QgZ2FtZXMgPSBkYXRhLmdhbWVzIHx8IGRhdGEuaXRlbXMgfHwgW107CiAgICBjb25zdCBpY29uQ2FjaGUgPSB7fTsKCiAgICBnYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGcpIHsKICAgICAgaWYgKGcuaWNvblVybCB8fCBnLmNhdGVnb3J5IHx8IGcuZGVzY3JpcHRpb24pIHsKICAgICAgICBpY29uQ2FjaGVbZy5uYW1lXSA9IHsKICAgICAgICAgIGljb25Vcmw6IGcuaWNvblVybCB8fCAnJywKICAgICAgICAgIGJhbm5lclVybDogZy5iYW5uZXJVcmwgfHwgJycsCiAgICAgICAgICBtYXRjaGVkTmFtZTogZy5tYXRjaGVkTmFtZSB8fCBnLm5hbWUsCiAgICAgICAgICBzY29yZTogZy5zY29yZSB8fCAwLAogICAgICAgICAgY2F0ZWdvcnk6IGcuY2F0ZWdvcnkgfHwgW10sCiAgICAgICAgICBkZXNjcmlwdGlvbjogZy5kZXNjcmlwdGlvbiB8fCAnJywKICAgICAgICAgIGludHJvOiBnLmludHJvIHx8IG51bGwsCiAgICAgICAgICBwdWJsaXNoZXI6IGcucHVibGlzaGVyIHx8IG51bGwsCiAgICAgICAgICBkZXZlbG9wZXI6IGcuZGV2ZWxvcGVyIHx8IG51bGwsCiAgICAgICAgICByZWxlYXNlRGF0ZTogZy5yZWxlYXNlRGF0ZSB8fCBudWxsLAogICAgICAgICAgbnVtYmVyT2ZQbGF5ZXJzOiBnLm51bWJlck9mUGxheWVycyB8fCBudWxsLAogICAgICAgICAgc2NyZWVuc2hvdHM6IGcuc2NyZWVuc2hvdHMgfHwgW10sCiAgICAgICAgICB0aXRsZUlkOiBnLnRpdGxlSWQgfHwgJycKICAgICAgICB9OwogICAgICB9CiAgICB9KTsKCiAgICByZXR1cm4gewogICAgICBwbGF0Zm9ybTogZGF0YS5wbGF0Zm9ybSB8fCAnVW5rbm93bicsCiAgICAgIHN0cnVjdHVyZVR5cGU6IGRhdGEuc3RydWN0dXJlVHlwZSB8fCAnZmlsZXMnLAogICAgICBpdGVtczogZ2FtZXMsCiAgICAgIGljb25DYWNoZTogaWNvbkNhY2hlLAogICAgICB4bWxEb2M6IG51bGwKICAgIH07CiAgfQp9Owo8L3NjcmlwdD4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPi8vIFByZW1hemluZ1BIR2FtZXMgLSBNYWluIEFwcGxpY2F0aW9uCi8vIENlbnRyYWxpemVkIGdhbWUgcGlja2VyIHdpdGggUkVHVUxBUiBhbmQgTUlYIG1vZGVzCgovLyA9PT09PT09PT09PT09PT09PT09PSBHTE9CQUxTID09PT09PT09PT09PT09PT09PT09CmNvbnN0ICQgPSBpZCA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CmNvbnN0IGVzYyA9IHMgPT4gKHN8fCcnKS5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7JykucmVwbGFjZSgvJy9nLCcmIzM5OycpLnJlcGxhY2UoLyIvZywnJnF1b3Q7Jyk7CmNvbnN0IGlzTW9iaWxlID0gL01vYml8QW5kcm9pZHxpUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKY29uc3QgaXNMb2NhbCA9IGZhbHNlOwpjb25zdCBMT05HX1BSRVNTX0RVUkFUSU9OID0gNTAwOwp2YXIgX2xpc3REaXJ0eSA9IGZhbHNlOyAvLyB0cnVlIG9uY2UgdXNlciBtb2RpZmllcyBzZWxlY3Rpb24g4oCUIHByZXZlbnRzIGJlZm9yZXVubG9hZCBmcm9tIHdpcGluZyBzYXZlZCBsaXN0IG9uIGZyZXNoIHBhZ2VzCgpmdW5jdGlvbiBkZXRlY3RMZWdhY3lNb2RlKCkgewogIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKHR5cGVvZiBfb3V0ZXJTZWFyY2ghPT0idW5kZWZpbmVkIj9fb3V0ZXJTZWFyY2g6d2luZG93LmxvY2F0aW9uLnNlYXJjaCkpOwogIGlmIChwYXJhbXMuZ2V0KCdtb2Rlcm4nKSA9PT0gJzEnKSByZXR1cm4gZmFsc2U7CiAgaWYgKHBhcmFtcy5nZXQoJ2xpdGUnKSA9PT0gJzEnIHx8IHBhcmFtcy5nZXQoJ2xlZ2FjeScpID09PSAnMScpIHJldHVybiB0cnVlOwogIGNvbnN0IHRlc3RzID0gewogICAgb3B0aW9uYWxDaGFpbmluZzogKCgpID0+IHsgdHJ5IHsgZXZhbCgnY29uc3Qgbz17fTsgbz8ueCcpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaChlKSB7IHJldHVybiBmYWxzZTsgfSB9KSgpLAogICAgZmxleEdhcDogQ1NTLnN1cHBvcnRzICYmIENTUy5zdXBwb3J0cygnZ2FwJywgJzFweCcpLAogICAgaW5zZXQ6IENTUy5zdXBwb3J0cyAmJiBDU1Muc3VwcG9ydHMoJ2luc2V0JywgJzAnKQogIH07CiAgcmV0dXJuICF0ZXN0cy5vcHRpb25hbENoYWluaW5nIHx8ICF0ZXN0cy5mbGV4R2FwIHx8ICF0ZXN0cy5pbnNldDsKfQpsZXQgaXNMZWdhY3lNb2RlID0gZGV0ZWN0TGVnYWN5TW9kZSgpOwppZiAoaXNMZWdhY3lNb2RlKSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbGVnYWN5LW1vZGUnKTsKCi8vID09PT09PT09PT09PT09PT09PT09IFNUQVRFID09PT09PT09PT09PT09PT09PT09CmNvbnN0IHN0YXRlID0gewogIG1vZGU6ICdyZWd1bGFyJywgICAgICAgICAgLy8gJ3JlZ3VsYXInIHwgJ21peCcKICBhY3RpdmVDb25zb2xlOiBudWxsLCAgICAgICAvLyBjdXJyZW50IGNvbnNvbGUgSUQgKHJlZ3VsYXIgbW9kZSkgb3IgYWN0aXZlIHRhYiAobWl4IG1vZGUpCiAgYWN0aXZlQ29uc29sZXM6IFtdLCAgICAgICAgLy8gbWl4IG1vZGU6IGFycmF5IG9mIGFjdGl2ZSBjb25zb2xlIElEcwogIGNvbnNvbGVTdGF0ZXM6IHt9LCAgICAgICAgIC8vIHBlci1jb25zb2xlIHN0YXRlOiB7IGl0ZW1zLCBzZWxlY3RlZCwgaWNvbkNhY2hlLCBnZW5yZXMsIC4uLiB9CiAgbGFzdFVwbG9hZDogMAp9OwoKZnVuY3Rpb24gZ2V0Q29uc29sZVN0YXRlKGNvbnNvbGVJZCkgewogIGlmICghc3RhdGUuY29uc29sZVN0YXRlc1tjb25zb2xlSWRdKSB7CiAgICBzdGF0ZS5jb25zb2xlU3RhdGVzW2NvbnNvbGVJZF0gPSB7CiAgICAgIGl0ZW1zOiBbXSwKICAgICAgc2VsZWN0ZWQ6IFtdLAogICAgICBpY29uQ2FjaGU6IHt9LAogICAgICBnZW5yZXM6IG5ldyBTZXQoKSwKICAgICAgY3VycmVudEdlbnJlOiAnYWxsJywKICAgICAgY3VycmVudFNvcnQ6ICduYW1lJywKICAgICAgbG9hZGVkOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHBsYXRmb3JtOiBudWxsLAogICAgICBzdHJ1Y3R1cmVUeXBlOiBudWxsLAogICAgICB4bWxEb2M6IG51bGwsCiAgICAgIHNlYXJjaFF1ZXJ5OiAnJwogICAgfTsKICB9CiAgcmV0dXJuIHN0YXRlLmNvbnNvbGVTdGF0ZXNbY29uc29sZUlkXTsKfQoKZnVuY3Rpb24gYWN0aXZlU3RhdGUoKSB7CiAgcmV0dXJuIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPyBnZXRDb25zb2xlU3RhdGUoc3RhdGUuYWN0aXZlQ29uc29sZSkgOiBudWxsOwp9CgpmdW5jdGlvbiBhY3RpdmVDb25maWcoKSB7CiAgcmV0dXJuIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPyBDT05TT0xFU1tzdGF0ZS5hY3RpdmVDb25zb2xlXSA6IG51bGw7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFNJWkUgVVRJTElUSUVTID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHBhcnNlU2l6ZVRleHQocykgewogIGlmICghcykgcmV0dXJuIDA7CiAgY29uc3QgbSA9ICgnJytzKS5tYXRjaCgvKFtcZFwuXSspXHMqKEdpQnxNaUJ8S2lCfEdCfE1CfEtCfEIpL2kpOwogIGlmICghbSkgcmV0dXJuIDA7CiAgY29uc3QgdiA9IHBhcnNlRmxvYXQobVsxXSksIHUgPSBtWzJdLnRvVXBwZXJDYXNlKCk7CiAgaWYgKHU9PT0nQicpIHJldHVybiB2OwogIGlmICh1PT09J0tCJ3x8dT09PSdLSUInKSByZXR1cm4gdioxMDI0OwogIGlmICh1PT09J01CJ3x8dT09PSdNSUInKSByZXR1cm4gdioxMDI0KjEwMjQ7CiAgcmV0dXJuIHYqMTAyNCoxMDI0KjEwMjQ7Cn0KZnVuY3Rpb24gYnl0ZXNUb0dCKGIpIHsgcmV0dXJuIGIgLyAoMTAyNCoxMDI0KjEwMjQpOyB9CmZ1bmN0aW9uIGZvcm1hdFNpemVUb0dCKHNpemVTdHIpIHsKICBjb25zdCBieXRlcyA9IHBhcnNlU2l6ZVRleHQoc2l6ZVN0cik7CiAgY29uc3QgZ2IgPSBieXRlc1RvR0IoYnl0ZXMpOwogIGlmIChnYiA8IDAuMSkgcmV0dXJuIChnYiAqIDEwMjQpLnRvRml4ZWQoMCkgKyAnIE1CJzsKICByZXR1cm4gZ2IudG9GaXhlZCgxKSArICcgR0InOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBVSSBIRUxQRVJTID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHRvYXN0KG1zZykgeyAkKCdzdGF0dXMnKS50ZXh0Q29udGVudCA9IG1zZzsgfQpmdW5jdGlvbiBzaG93VG9hc3QobWVzc2FnZSkgewogIGNvbnN0IHQgPSAkKCd0b2FzdCcpOwogIHQudGV4dENvbnRlbnQgPSBtZXNzYWdlOwogIHQuY2xhc3NMaXN0LmFkZCgnc2hvdycpOwogIHNldFRpbWVvdXQoKCkgPT4gdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JyksIDIwMDApOwp9CmZ1bmN0aW9uIHNob3dCYW5uZXIobWVzc2FnZSwgZHVyYXRpb24pIHsKICBkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IDQwMDA7CiAgY29uc3QgYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGIuaW5uZXJUZXh0ID0gbWVzc2FnZTsKICBiLnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246Zml4ZWQ7dG9wOjMwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC44KTtjb2xvcjojZmZmO3BhZGRpbmc6MThweDtib3JkZXItcmFkaXVzOjE2cHg7Zm9udC1zaXplOjIycHg7ei1pbmRleDo5OTk5O2JveC1zaGFkb3c6MCAycHggNnB4IHJnYmEoMCwwLDAsMC4zKTt0cmFuc2l0aW9uOm9wYWNpdHkgMC41cyBlYXNlO3doaXRlLXNwYWNlOnByZS1saW5lO21heC13aWR0aDo4MCUiOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7CiAgc2V0VGltZW91dCgoKSA9PiBiLnN0eWxlLm9wYWNpdHkgPSAnMCcsIGR1cmF0aW9uKTsKICBzZXRUaW1lb3V0KCgpID0+IGIucmVtb3ZlKCksIGR1cmF0aW9uICsgNTAwKTsKfQpmdW5jdGlvbiBkZWJvdW5jZShmbiwgbXMpIHsgbXMgPSBtcyB8fCAyMDA7IGxldCBoOyByZXR1cm4gZnVuY3Rpb24oKSB7IGNvbnN0IGEgPSBhcmd1bWVudHM7IGNsZWFyVGltZW91dChoKTsgaCA9IHNldFRpbWVvdXQoKCkgPT4gZm4uYXBwbHkobnVsbCwgYSksIG1zKTsgfTsgfQoKLy8gQ29weSBwbGFpbiB0ZXh0IHRvIGNsaXBib2FyZCB3aXRoIGZhbGxiYWNrCmZ1bmN0aW9uIGNvcHlQbGFpblRleHQodGV4dCwgY2FsbGJhY2spIHsKICAvLyBUcnkgY2xpcGJvYXJkIEFQSSBmaXJzdAogIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KSB7CiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KS50aGVuKGZ1bmN0aW9uKCkgewogICAgICBjYWxsYmFjayh0cnVlKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkgewogICAgICAvLyBGYWxsYmFjayB0byBleGVjQ29tbWFuZAogICAgICBjYWxsYmFjayhleGVjQ29tbWFuZENvcHkodGV4dCkpOwogICAgfSk7CiAgICByZXR1cm47CiAgfQogIC8vIE5vIGNsaXBib2FyZCBBUEkg4oCUIHVzZSBleGVjQ29tbWFuZAogIGNhbGxiYWNrKGV4ZWNDb21tYW5kQ29weSh0ZXh0KSk7Cn0KCmZ1bmN0aW9uIGV4ZWNDb21tYW5kQ29weSh0ZXh0KSB7CiAgdmFyIHRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsKICB0YS52YWx1ZSA9IHRleHQ7CiAgdGEuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICcnKTsKICB0YS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtvcGFjaXR5OjAuMDE7ei1pbmRleDo5OTk5OSc7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0YSk7CiAgdGEuZm9jdXMoKTsKICB0YS5zZWxlY3QoKTsKICB2YXIgb2sgPSBmYWxzZTsKICB0cnkgeyBvayA9IGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7IH0gY2F0Y2goZSkgeyBvayA9IGZhbHNlOyB9CiAgdGEucmVtb3ZlKCk7CiAgcmV0dXJuIG9rOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBMT0NBTFNUT1JBR0UgPT09PT09PT09PT09PT09PT09PT0KdmFyIExTX05BTUVfS0VZID0gJ3BybXpfY3VzdG9tZXJOYW1lJzsKdmFyIExTX0xJU1RfS0VZID0gJ3BybXpfc2VsZWN0ZWRMaXN0JzsKCmZ1bmN0aW9uIHNhdmVDdXN0b21lck5hbWUobmFtZSkgewogIGlmIChpc0xvY2FsKSByZXR1cm47IC8vIGFkbWluIHR5cGVzIGRpZmZlcmVudCBuYW1lcyBlYWNoIHNlc3Npb24KICBpZiAobmFtZSkgewogICAgdHJ5IHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTFNfTkFNRV9LRVksIG5hbWUpOyB9IGNhdGNoKGUpIHt9CiAgfQp9CgpmdW5jdGlvbiBsb2FkQ3VzdG9tZXJOYW1lKCkgewogIHRyeSB7IHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMU19OQU1FX0tFWSkgfHwgJyc7IH0gY2F0Y2goZSkgeyByZXR1cm4gJyc7IH0KfQoKZnVuY3Rpb24gcmVzdG9yZUN1c3RvbWVyTmFtZSgpIHsKICBpZiAoaXNMb2NhbCkgcmV0dXJuOyAvLyBhZG1pbiBzdGFydHMgZnJlc2ggZWFjaCBzZXNzaW9uCiAgdmFyIHNhdmVkID0gbG9hZEN1c3RvbWVyTmFtZSgpOwogIGlmICghc2F2ZWQpIHJldHVybjsKICAkKCdjdXN0b21lcicpLnZhbHVlID0gc2F2ZWQ7CiAgZG9jdW1lbnQudGl0bGUgPSAnUHJlbWF6aW5nUEggR2FtZXMgLSAnICsgc2F2ZWQ7CiAgLy8gU2hvdyAiTm90IHlvdT8iIGxpbmsKICB2YXIgbGluayA9ICQoJ25vdFlvdUxpbmsnKTsKICBpZiAobGluaykgbGluay5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7Cn0KCmZ1bmN0aW9uIGNsZWFyQ3VzdG9tZXJOYW1lKCkgewogIHRyeSB7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExTX05BTUVfS0VZKTsgfSBjYXRjaChlKSB7fQogICQoJ2N1c3RvbWVyJykudmFsdWUgPSAnJzsKICB2YXIgbGluayA9ICQoJ25vdFlvdUxpbmsnKTsKICBpZiAobGluaykgbGluay5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIHVwZGF0ZUZpbGVuYW1lUHJldmlldygpOwogIGRvY3VtZW50LnRpdGxlID0gJ1ByZW1hemluZ1BIIEdhbWVzJzsKCiAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhIHNhdmVkIHNlbGVjdGlvbiBsaXN0CiAgdmFyIGhhc1NhdmVkTGlzdCA9IGZhbHNlOwogIHRyeSB7IGhhc1NhdmVkTGlzdCA9ICEhbG9jYWxTdG9yYWdlLmdldEl0ZW0oTFNfTElTVF9LRVkpOyB9IGNhdGNoKGUpIHt9CgogIHZhciBoYXNDdXJyZW50U2VsZWN0aW9uID0gZmFsc2U7CiAgT2JqZWN0LmtleXMoc3RhdGUuY29uc29sZVN0YXRlcykuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgaWYgKHN0YXRlLmNvbnNvbGVTdGF0ZXNbaWRdLnNlbGVjdGVkICYmIHN0YXRlLmNvbnNvbGVTdGF0ZXNbaWRdLnNlbGVjdGVkLmxlbmd0aCA+IDApIGhhc0N1cnJlbnRTZWxlY3Rpb24gPSB0cnVlOwogIH0pOwoKICBpZiAoaGFzU2F2ZWRMaXN0IHx8IGhhc0N1cnJlbnRTZWxlY3Rpb24pIHsKICAgIC8vIFNob3cgcmVzdG9yZS1vci1jbGVhciBwcm9tcHQKICAgIHNob3dMaXN0UHJvbXB0KCk7CiAgfSBlbHNlIHsKICAgICQoJ2N1c3RvbWVyJykuZm9jdXMoKTsKICB9Cn0KCi8vIC0tLS0gTW9kYWwgaGVscGVyIChsZWdhY3ktc2FmZSkgLS0tLQpmdW5jdGlvbiBjcmVhdGVNb2RhbChpZCwgbWVzc2FnZUh0bWwsIGJ1dHRvbnMpIHsKICAvLyBSZW1vdmUgZXhpc3RpbmcgbW9kYWwgd2l0aCBzYW1lIGlkCiAgdmFyIGV4aXN0aW5nID0gJChpZCk7CiAgaWYgKGV4aXN0aW5nKSBleGlzdGluZy5yZW1vdmUoKTsKCiAgLy8gTGVnYWN5LXNhZmU6IHVzZSBjb25maXJtKCkgZmFsbGJhY2sgZm9yIGJyb3dzZXJzIHRoYXQgY2FuJ3QgaGFuZGxlIG1vZGVybiBDU1MKICBpZiAoaXNMZWdhY3lNb2RlKSB7CiAgICB2YXIgcGxhaW5UZXh0ID0gbWVzc2FnZUh0bWwucmVwbGFjZSgvPGJyXHMqXC8/Pi9naSwgJ1xuJykucmVwbGFjZSgvPFtePl0rPi9nLCAnJyk7CiAgICB2YXIgZmlyc3RCdG4gPSBidXR0b25zWzBdOwogICAgdmFyIHNlY29uZEJ0biA9IGJ1dHRvbnNbMV07CiAgICBpZiAoY29uZmlybShwbGFpblRleHQgKyAnXG5cbk9LID0gJyArIGZpcnN0QnRuLmxhYmVsICsgJ1xuQ2FuY2VsID0gJyArIHNlY29uZEJ0bi5sYWJlbCkpIHsKICAgICAgZmlyc3RCdG4uYWN0aW9uKCk7CiAgICB9IGVsc2UgewogICAgICBzZWNvbmRCdG4uYWN0aW9uKCk7CiAgICB9CiAgICByZXR1cm47CiAgfQoKICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIG92ZXJsYXkuaWQgPSBpZDsKICBvdmVybGF5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNik7ei1pbmRleDo5OTk5O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcic7CgogIHZhciBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBib3guc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kOiMxZTFlMmU7Ym9yZGVyLXJhZGl1czoxNnB4O3BhZGRpbmc6MjRweCAyOHB4O21heC13aWR0aDozODBweDt3aWR0aDo5MCU7dGV4dC1hbGlnbjpjZW50ZXI7Ym94LXNoYWRvdzowIDhweCAzMnB4IHJnYmEoMCwwLDAsMC41KSc7CgogIHZhciBtc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBtc2cuc3R5bGUuY3NzVGV4dCA9ICdmb250LXNpemU6MTVweDtjb2xvcjojY2RkNmY0O21hcmdpbi1ib3R0b206MTZweCc7CiAgbXNnLmlubmVySFRNTCA9IG1lc3NhZ2VIdG1sOwogIGJveC5hcHBlbmRDaGlsZChtc2cpOwoKICB2YXIgYnRuUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgYnRuUm93LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXInOwoKICBidXR0b25zLmZvckVhY2goZnVuY3Rpb24oYnRuLCBpKSB7CiAgICB2YXIgYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgYi50ZXh0Q29udGVudCA9IGJ0bi5sYWJlbDsKICAgIHZhciBiZyA9IGJ0bi5wcmltYXJ5ID8gJyM4OWI0ZmEnIDogJyM0NTQ3NWEnOwogICAgdmFyIGZnID0gYnRuLnByaW1hcnkgPyAnIzFlMWUyZScgOiAnI2NkZDZmNCc7CiAgICBiLnN0eWxlLmNzc1RleHQgPSAncGFkZGluZzoxMHB4IDIwcHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjpub25lO2JhY2tncm91bmQ6JyArIGJnICsgJztjb2xvcjonICsgZmcgKyAnO2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MTRweDttYXJnaW46MCA1cHgnOwogICAgYi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IG92ZXJsYXkucmVtb3ZlKCk7IGJ0bi5hY3Rpb24oKTsgfTsKICAgIGJ0blJvdy5hcHBlbmRDaGlsZChiKTsKICB9KTsKCiAgYm94LmFwcGVuZENoaWxkKGJ0blJvdyk7CiAgb3ZlcmxheS5hcHBlbmRDaGlsZChib3gpOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7CgogIC8vIENsaWNrIG91dHNpZGUgdG8gZGlzbWlzcyAocnVucyBmaXJzdCBidXR0b24gYWN0aW9uKQogIG92ZXJsYXkub25jbGljayA9IGZ1bmN0aW9uKGUpIHsKICAgIGlmIChlLnRhcmdldCA9PT0gb3ZlcmxheSkgeyBvdmVybGF5LnJlbW92ZSgpOyBidXR0b25zWzBdLmFjdGlvbigpOyB9CiAgfTsKfQoKZnVuY3Rpb24gc2hvd0xpc3RQcm9tcHQoKSB7CiAgY3JlYXRlTW9kYWwoJ2xpc3RQcm9tcHQnLAogICAgJ0Egc2F2ZWQgc2VsZWN0aW9uIHdhcyBmb3VuZC48YnI+RG8geW91IHdhbnQgdG8ga2VlcCBpdCBvciBzdGFydCBmcmVzaD8nLAogICAgWwogICAgICB7IGxhYmVsOiAnS2VlcCBTZWxlY3Rpb24nLCBwcmltYXJ5OiB0cnVlLCBhY3Rpb246IGZ1bmN0aW9uKCkgeyAkKCdjdXN0b21lcicpLmZvY3VzKCk7IH0gfSwKICAgICAgeyBsYWJlbDogJ1N0YXJ0IEZyZXNoJywgcHJpbWFyeTogZmFsc2UsIGFjdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgY2xlYXJTZWxlY3RlZExpc3QoKTsKICAgICAgICBPYmplY3Qua2V5cyhzdGF0ZS5jb25zb2xlU3RhdGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgICBzdGF0ZS5jb25zb2xlU3RhdGVzW2lkXS5zZWxlY3RlZCA9IFtdOwogICAgICAgIH0pOwogICAgICAgIF9wZW5kaW5nUmVzdG9yZSA9IG51bGw7CiAgICAgICAgcmVuZGVyT3ZlcmxheSgpOwogICAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICAgIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgICAgICAgaWYgKGNzKSByZW5kZXJMaXN0KGNzLml0ZW1zKTsKICAgICAgICAkKCdjdXN0b21lcicpLmZvY3VzKCk7CiAgICAgICAgc2hvd1RvYXN0KCdTZWxlY3Rpb24gY2xlYXJlZCcpOwogICAgICB9fQogICAgXQogICk7Cn0KCmZ1bmN0aW9uIHNob3dMaXN0UmVzdG9yZVByb21wdChzYXZlZExpc3QpIHsKICB2YXIgdG90YWxQaWNrcyA9IDA7CiAgT2JqZWN0LmtleXMoc2F2ZWRMaXN0KS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7IHRvdGFsUGlja3MgKz0gc2F2ZWRMaXN0W2lkXS5sZW5ndGg7IH0pOwogIHZhciBjb25zb2xlTmFtZXMgPSBPYmplY3Qua2V5cyhzYXZlZExpc3QpLm1hcChmdW5jdGlvbihpZCkgewogICAgdmFyIGNmZyA9IENPTlNPTEVTW2lkXTsKICAgIHJldHVybiBjZmcgPyBjZmcubGFiZWwgKyAnICgnICsgc2F2ZWRMaXN0W2lkXS5sZW5ndGggKyAnKScgOiBpZDsKICB9KS5qb2luKCcsICcpOwoKICBjcmVhdGVNb2RhbCgnbGlzdFJlc3RvcmVQcm9tcHQnLAogICAgJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxNnB4O2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjZweCI+UHJldmlvdXMgc2VsZWN0aW9uIGZvdW5kPC9kaXY+JyArCiAgICAnPGRpdiBzdHlsZT0iZm9udC1zaXplOjEzcHg7Y29sb3I6I2E2YWRjOCI+JyArIHRvdGFsUGlja3MgKyAnIGdhbWVzOiAnICsgZXNjKGNvbnNvbGVOYW1lcykgKyAnPC9kaXY+JywKICAgIFsKICAgICAgeyBsYWJlbDogJ1Jlc3RvcmUgU2VsZWN0aW9uJywgcHJpbWFyeTogdHJ1ZSwgYWN0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICByZXN0b3JlU2F2ZWRMaXN0KHNhdmVkTGlzdCk7CiAgICAgICAgJCgnY3VzdG9tZXInKS5mb2N1cygpOwogICAgICB9fSwKICAgICAgeyBsYWJlbDogJ1N0YXJ0IEZyZXNoJywgcHJpbWFyeTogZmFsc2UsIGFjdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgY2xlYXJTZWxlY3RlZExpc3QoKTsKICAgICAgICAkKCdjdXN0b21lcicpLmZvY3VzKCk7CiAgICAgICAgc2hvd1RvYXN0KCdTdGFydGluZyBmcmVzaCcpOwogICAgICB9fQogICAgXQogICk7Cn0KCi8vIC0tLS0gU2VsZWN0ZWQgbGlzdCBwZXJzaXN0ZW5jZSAobm9uLWxvY2FsIG9ubHkpIC0tLS0KZnVuY3Rpb24gc2F2ZVNlbGVjdGVkTGlzdCgpIHsKICBpZiAoaXNMb2NhbCkgcmV0dXJuOyAvLyBhZG1pbiBtYWtlcyBsaXN0cyBmb3Igb3RoZXJzLCBkb24ndCBwZXJzaXN0CiAgaWYgKCFfbGlzdERpcnR5KSByZXR1cm47IC8vIGRvbid0IG92ZXJ3cml0ZSBzYXZlZCBsaXN0IGlmIHVzZXIgaGFzbid0IHRvdWNoZWQgYW55dGhpbmcKICB0cnkgewogICAgdmFyIGRhdGEgPSB7fTsKICAgIE9iamVjdC5rZXlzKHN0YXRlLmNvbnNvbGVTdGF0ZXMpLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgdmFyIGNzID0gc3RhdGUuY29uc29sZVN0YXRlc1tpZF07CiAgICAgIGlmIChjcy5zZWxlY3RlZCAmJiBjcy5zZWxlY3RlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgZGF0YVtpZF0gPSBjcy5zZWxlY3RlZC5tYXAoZnVuY3Rpb24ocykgewogICAgICAgICAgcmV0dXJuIHsgbmFtZTogcy5uYW1lLCBmaWxlbmFtZTogcy5maWxlbmFtZSB8fCBzLm5hbWUsIHNpemU6IHMuc2l6ZSB9OwogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGlmIChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPiAwKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKExTX0xJU1RfS0VZLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICB9IGVsc2UgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMU19MSVNUX0tFWSk7CiAgICB9CiAgfSBjYXRjaChlKSB7fQp9CgpmdW5jdGlvbiBsb2FkU2VsZWN0ZWRMaXN0KCkgewogIGlmIChpc0xvY2FsKSByZXR1cm4gbnVsbDsKICB0cnkgewogICAgdmFyIHJhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExTX0xJU1RfS0VZKTsKICAgIHJldHVybiByYXcgPyBKU09OLnBhcnNlKHJhdykgOiBudWxsOwogIH0gY2F0Y2goZSkgeyByZXR1cm4gbnVsbDsgfQp9CgpmdW5jdGlvbiBjbGVhclNlbGVjdGVkTGlzdCgpIHsKICBfbGlzdERpcnR5ID0gdHJ1ZTsKICB0cnkgeyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShMU19MSVNUX0tFWSk7IH0gY2F0Y2goZSkge30KfQoKLy8gUmVxdWlyZSBjdXN0b21lciBuYW1lIC0gcHVsc2UgYW5kIGZvY3VzIGlmIGVtcHR5LCBuYWcgbW9kYWwgYWZ0ZXIgMiBhdHRlbXB0cwp2YXIgX25hbWVBdHRlbXB0cyA9IDA7CmZ1bmN0aW9uIHJlcXVpcmVDdXN0b21lck5hbWUoKSB7CiAgdmFyIGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnJykudHJpbSgpOwogIGlmIChjdXN0KSB7IF9uYW1lQXR0ZW1wdHMgPSAwOyByZXR1cm4gdHJ1ZTsgfQogIGlmIChpc0xvY2FsKSByZXR1cm4gdHJ1ZTsgIC8vIGFkbWluIGRvZXNuJ3QgbmVlZCBhIG5hbWUKCiAgX25hbWVBdHRlbXB0cysrOwoKICBpZiAoX25hbWVBdHRlbXB0cyA+IDIpIHsKICAgIC8vIFNob3cgYmlnIGludGVycnVwdGluZyBuYWcgbW9kYWwKICAgIHNob3dOYW1lTmFnKCk7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICAvLyBHZW50bGU6IHNjcm9sbCwgZm9jdXMsIHB1bHNlCiAgdmFyIGVsID0gJCgnY3VzdG9tZXInKTsKICBlbC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdjZW50ZXInIH0pOwogIGVsLmZvY3VzKCk7CiAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnY3VzdG9tZXItcmVxdWlyZWQnKTsKICB2b2lkIGVsLm9mZnNldFdpZHRoOwogIGVsLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbWVyLXJlcXVpcmVkJyk7CiAgZWwucGxhY2Vob2xkZXIgPSAnUGxlYXNlIGVudGVyIHlvdXIgbmFtZSEnOwogIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2N1c3RvbWVyLXJlcXVpcmVkJyk7IGVsLnBsYWNlaG9sZGVyID0gJ0VudGVyIG5hbWUgKHVzZSB1bmRlcnNjb3JlcyknOyB9LCAyNTAwKTsKICByZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIHNob3dOYW1lTmFnKCkgewogIHZhciBuYWcgPSAkKCduYW1lTmFnJyk7CiAgdmFyIGlucHV0ID0gJCgnbmFtZU5hZ0lucHV0Jyk7CiAgdmFyIGJ0biA9ICQoJ25hbWVOYWdTdWJtaXQnKTsKICBuYWcuY2xhc3NMaXN0LmFkZCgnc2hvdycpOwogIGlucHV0LnZhbHVlID0gJyc7CiAgYnRuLmRpc2FibGVkID0gdHJ1ZTsKICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBpbnB1dC5mb2N1cygpOyB9LCA0MDApOwoKICAvLyBFbmFibGUgYnV0dG9uIG9ubHkgd2hlbiBpbnB1dCBoYXMgdGV4dAogIGlucHV0Lm9uaW5wdXQgPSBmdW5jdGlvbigpIHsKICAgIGJ0bi5kaXNhYmxlZCA9ICFpbnB1dC52YWx1ZS50cmltKCk7CiAgfTsKCiAgLy8gU3VibWl0IG9uIGJ1dHRvbiBjbGljawogIGJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgbmFtZSA9IGlucHV0LnZhbHVlLnRyaW0oKTsKICAgIGlmICghbmFtZSkgcmV0dXJuOwogICAgJCgnY3VzdG9tZXInKS52YWx1ZSA9IG5hbWU7CiAgICBzYXZlQ3VzdG9tZXJOYW1lKG5hbWUpOwogICAgbmFnLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgIF9uYW1lQXR0ZW1wdHMgPSAwOwogICAgc2hvd1RvYXN0KCdXZWxjb21lLCAnICsgbmFtZSArICchJyk7CiAgfTsKCiAgLy8gU3VibWl0IG9uIEVudGVyIGtleQogIGlucHV0Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGV2KSB7CiAgICBpZiAoZXYua2V5ID09PSAnRW50ZXInKSB7IGJ0bi5jbGljaygpOyB9CiAgfTsKCiAgLy8gQ2xpY2sgYmFja2Ryb3AgdG8gZGlzbWlzcyAoYnV0IGRvbid0IHN1Ym1pdCkKICBuYWcub25jbGljayA9IGZ1bmN0aW9uKGV2KSB7CiAgICBpZiAoZXYudGFyZ2V0ID09PSBuYWcpIHsKICAgICAgbmFnLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgIH0KICB9Owp9CgpmdW5jdGlvbiBwYXJzZURhdGVGbGV4aWJsZShzKSB7CiAgaWYgKCFzKSByZXR1cm4gbnVsbDsKICBsZXQgZCA9IG5ldyBEYXRlKHMpOwogIGlmICghaXNOYU4oZC5nZXRUaW1lKCkpKSByZXR1cm4gZDsKICBjb25zdCB5bWQgPSAoJycrcykubWF0Y2goLyhcZHs0fSlcRD8oXGR7MSwyfSlcRD8oXGR7MSwyfSkvKTsKICBpZiAoeW1kKSB7IGQgPSBuZXcgRGF0ZShOdW1iZXIoeW1kWzFdKSwgTnVtYmVyKHltZFsyXSktMSwgTnVtYmVyKHltZFszXSkpOyBpZiAoIWlzTmFOKGQuZ2V0VGltZSgpKSkgcmV0dXJuIGQ7IH0KICByZXR1cm4gbnVsbDsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gQ09OU09MRSBDSElQUyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiBidWlsZENvbnNvbGVDaGlwcygpIHsKICBjb25zdCBjb250YWluZXIgPSAkKCdjb25zb2xlQ2hpcHMnKTsKICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgT2JqZWN0LmtleXMoQ09OU09MRVMpLmZvckVhY2goaWQgPT4gewogICAgY29uc3QgYyA9IENPTlNPTEVTW2lkXTsKICAgIGNvbnN0IGNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgIGNoaXAuY2xhc3NOYW1lID0gJ2NvbnNvbGUtY2hpcCc7CiAgICBjaGlwLmRhdGFzZXQuY29uc29sZSA9IGlkOwogICAgY2hpcC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jaGlwLWNvbG9yJywgYy5jb2xvcik7CiAgICBjaGlwLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz0iY2hpcC1jaGVjayIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+JiMxMDAwMzsgPC9zcGFuPicgKyBjLmxhYmVsICsgJzxzcGFuIGNsYXNzPSJjaGlwLWJhZGdlIj4wPC9zcGFuPic7CiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpcCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUNvbnNvbGVDaGlwcygpIHsKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29uc29sZS1jaGlwJykuZm9yRWFjaChjaGlwID0+IHsKICAgIGNvbnN0IGlkID0gY2hpcC5kYXRhc2V0LmNvbnNvbGU7CiAgICBjb25zdCBjZmcgPSBDT05TT0xFU1tpZF07CiAgICBjb25zdCBjcyA9IHN0YXRlLmNvbnNvbGVTdGF0ZXNbaWRdOwogICAgY29uc3QgY291bnQgPSBjcyA/IGNzLnNlbGVjdGVkLmxlbmd0aCA6IDA7CgogICAgLy8gQmFkZ2UKICAgIGNvbnN0IGJhZGdlID0gY2hpcC5xdWVyeVNlbGVjdG9yKCcuY2hpcC1iYWRnZScpOwogICAgYmFkZ2UudGV4dENvbnRlbnQgPSBjb3VudDsKICAgIGNoaXAuY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLXNlbGVjdGlvbicsIGNvdW50ID4gMCk7CgogICAgLy8gQ2hlY2ttYXJrIChNSVggbW9kZSBvbmx5KQogICAgY29uc3QgY2hlY2sgPSBjaGlwLnF1ZXJ5U2VsZWN0b3IoJy5jaGlwLWNoZWNrJyk7CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgICAgY29uc3QgaW5NaXggPSBzdGF0ZS5hY3RpdmVDb25zb2xlcy5pbmNsdWRlcyhpZCk7CiAgICAgIGlmIChjaGVjaykgY2hlY2suc3R5bGUuZGlzcGxheSA9IGluTWl4ID8gJ2lubGluZScgOiAnbm9uZSc7CiAgICB9IGVsc2UgewogICAgICBpZiAoY2hlY2spIGNoZWNrLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9CgogICAgY2hpcC5zdHlsZS5ib3hTaGFkb3cgPSAnJzsKICAgIGNoaXAuc3R5bGUudHJhbnNmb3JtID0gJyc7CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ3JlZ3VsYXInKSB7CiAgICAgIGNoaXAuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaWQgPT09IHN0YXRlLmFjdGl2ZUNvbnNvbGUpOwogICAgICBpZiAoaWQgPT09IHN0YXRlLmFjdGl2ZUNvbnNvbGUpIHsKICAgICAgICBjaGlwLnN0eWxlLmJhY2tncm91bmQgPSBjZmcuY29sb3I7CiAgICAgICAgY2hpcC5zdHlsZS5ib3JkZXJDb2xvciA9IGNmZy5jb2xvcjsKICAgICAgICBjaGlwLnN0eWxlLmNvbG9yID0gJyNmZmYnOwogICAgICB9IGVsc2UgewogICAgICAgIGNoaXAuc3R5bGUuYmFja2dyb3VuZCA9ICcnOwogICAgICAgIGNoaXAuc3R5bGUuYm9yZGVyQ29sb3IgPSAnJzsKICAgICAgICBjaGlwLnN0eWxlLmNvbG9yID0gJyc7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGluTWl4ID0gc3RhdGUuYWN0aXZlQ29uc29sZXMuaW5jbHVkZXMoaWQpOwogICAgICBjb25zdCBpc1ZpZXdpbmcgPSBpZCA9PT0gc3RhdGUuYWN0aXZlQ29uc29sZTsKICAgICAgY2hpcC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBpbk1peCk7CiAgICAgIGlmIChpbk1peCAmJiBpc1ZpZXdpbmcpIHsKICAgICAgICBjaGlwLnN0eWxlLmJhY2tncm91bmQgPSBjZmcuY29sb3I7CiAgICAgICAgY2hpcC5zdHlsZS5ib3JkZXJDb2xvciA9IGNmZy5jb2xvcjsKICAgICAgICBjaGlwLnN0eWxlLmNvbG9yID0gJyNmZmYnOwogICAgICAgIGNoaXAuc3R5bGUuYm94U2hhZG93ID0gJzAgMCAxMHB4IDNweCAnICsgY2ZnLmNvbG9yICsgJywwIDAgMjBweCA2cHggJyArIGNmZy5jb2xvciArICc4MCc7CiAgICAgICAgY2hpcC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMS4wOCknOwogICAgICB9IGVsc2UgaWYgKGluTWl4KSB7CiAgICAgICAgY2hpcC5zdHlsZS5iYWNrZ3JvdW5kID0gY2ZnLmNvbG9yOwogICAgICAgIGNoaXAuc3R5bGUuYm9yZGVyQ29sb3IgPSBjZmcuY29sb3I7CiAgICAgICAgY2hpcC5zdHlsZS5jb2xvciA9ICcjZmZmJzsKICAgICAgICBjaGlwLnN0eWxlLmJveFNoYWRvdyA9ICcwIDAgNnB4IDFweCAnICsgY2ZnLmNvbG9yICsgJzUwJzsKICAgICAgICBjaGlwLnN0eWxlLnRyYW5zZm9ybSA9ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIGNoaXAuc3R5bGUuYmFja2dyb3VuZCA9ICcnOwogICAgICAgIGNoaXAuc3R5bGUuYm9yZGVyQ29sb3IgPSAnJzsKICAgICAgICBjaGlwLnN0eWxlLmNvbG9yID0gJyc7CiAgICAgIH0KICAgIH0KICB9KTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gTU9ERSBUT0dHTEUgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gc2V0TW9kZShtb2RlKSB7CiAgc3RhdGUubW9kZSA9IG1vZGU7CiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGUtYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgYi5kYXRhc2V0Lm1vZGUgPT09IG1vZGUpKTsKICAkKCdtYWluQ29udGFpbmVyJykuY2xhc3NMaXN0LnRvZ2dsZSgnbWl4LWFjdGl2ZScsIG1vZGUgPT09ICdtaXgnKTsKICAkKCdncmFuZFRvdGFsJykuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScsIG1vZGUgPT09ICdtaXgnKTsKCiAgaWYgKG1vZGUgPT09ICdtaXgnKSB7CiAgICAvLyBJZiBub3RoaW5nIGFjdGl2ZSwga2VlcCBjdXJyZW50IGNvbnNvbGUgYXMgZmlyc3QgdGFiCiAgICBpZiAoc3RhdGUuYWN0aXZlQ29uc29sZXMubGVuZ3RoID09PSAwICYmIHN0YXRlLmFjdGl2ZUNvbnNvbGUpIHsKICAgICAgc3RhdGUuYWN0aXZlQ29uc29sZXMucHVzaChzdGF0ZS5hY3RpdmVDb25zb2xlKTsKICAgIH0KICAgIGJ1aWxkTWl4VGFicygpOwogIH0gZWxzZSB7CiAgICAvLyBSZWd1bGFyIG1vZGU6IHVzZSB0aGUgYWN0aXZlIHRhYiBhcyB0aGUgY29uc29sZQogICAgaWYgKCFzdGF0ZS5hY3RpdmVDb25zb2xlICYmIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmxlbmd0aCA+IDApIHsKICAgICAgc3RhdGUuYWN0aXZlQ29uc29sZSA9IHN0YXRlLmFjdGl2ZUNvbnNvbGVzWzBdOwogICAgfQogIH0KICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICBpZiAoc3RhdGUuYWN0aXZlQ29uc29sZSkgcmVmcmVzaEN1cnJlbnRWaWV3KCk7Cn0KCiQoJ21vZGVUb2dnbGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlLWJ0bicpKSB7CiAgICBpZiAoIXJlcXVpcmVDdXN0b21lck5hbWUoKSkgcmV0dXJuOwogICAgc2V0TW9kZShlLnRhcmdldC5kYXRhc2V0Lm1vZGUpOwogIH0KfSk7CgovLyA9PT09PT09PT09PT09PT09PT09PSBDT05TT0xFIENISVAgQ0xJQ0sgPT09PT09PT09PT09PT09PT09PT0KJCgnY29uc29sZUNoaXBzJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgY29uc3QgY2hpcCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5jb25zb2xlLWNoaXAnKTsKICBpZiAoIWNoaXApIHJldHVybjsKICBpZiAoIXJlcXVpcmVDdXN0b21lck5hbWUoKSkgcmV0dXJuOwogIGNvbnN0IGlkID0gY2hpcC5kYXRhc2V0LmNvbnNvbGU7CgogIGlmIChzdGF0ZS5tb2RlID09PSAncmVndWxhcicpIHsKICAgIGlmIChzdGF0ZS5hY3RpdmVDb25zb2xlID09PSBpZCkgcmV0dXJuOwogICAgc3RhdGUuYWN0aXZlQ29uc29sZSA9IGlkOwogICAgbG9hZENvbnNvbGUoaWQpOwogIH0gZWxzZSB7CiAgICAvLyBNaXggbW9kZTogY2xpY2sgbG9naWMKICAgIGNvbnN0IGlkeCA9IHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmluZGV4T2YoaWQpOwogICAgaWYgKGlkeCA+PSAwKSB7CiAgICAgIGlmIChzdGF0ZS5hY3RpdmVDb25zb2xlID09PSBpZCkgewogICAgICAgIC8vIENsaWNraW5nIHRoZSBjdXJyZW50bHktdmlld2VkIGNvbnNvbGUg4oaSIHJlbW92ZSBmcm9tIG1peAogICAgICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLnNwbGljZShpZHgsIDEpOwogICAgICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPSBzdGF0ZS5hY3RpdmVDb25zb2xlc1swXSB8fCBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIEFscmVhZHkgaW4gbWl4IGJ1dCBub3Qgdmlld2luZyDihpIgc3dpdGNoIHZpZXcgdG8gaXQKICAgICAgICBzdGF0ZS5hY3RpdmVDb25zb2xlID0gaWQ7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIE5vdCBpbiBtaXgg4oaSIGFkZCBhbmQgc3dpdGNoIHZpZXcKICAgICAgc3RhdGUuYWN0aXZlQ29uc29sZXMucHVzaChpZCk7CiAgICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPSBpZDsKICAgICAgbG9hZENvbnNvbGUoaWQpOwogICAgfQogICAgYnVpbGRNaXhUYWJzKCk7CiAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICAgIGlmIChzdGF0ZS5hY3RpdmVDb25zb2xlKSByZWZyZXNoQ3VycmVudFZpZXcoKTsKICAgIHVwZGF0ZUdyYW5kVG90YWwoKTsKICB9Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gTUlYIFRBQlMgKHJlcGxhY2VkIGJ5IGNoaXAgZ2xvdykgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gYnVpbGRNaXhUYWJzKCkgeyB1cGRhdGVDb25zb2xlQ2hpcHMoKTsgfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gTE9BRCBDT05TT0xFIERBVEEgPT09PT09PT09PT09PT09PT09PT0KYXN5bmMgZnVuY3Rpb24gbG9hZENvbnNvbGUoY29uc29sZUlkKSB7CiAgY29uc3QgY3MgPSBnZXRDb25zb2xlU3RhdGUoY29uc29sZUlkKTsKICBjb25zdCBjZmcgPSBDT05TT0xFU1tjb25zb2xlSWRdOwoKICBpZiAoY3MubG9hZGVkKSB7CiAgICBzdGF0ZS5hY3RpdmVDb25zb2xlID0gY29uc29sZUlkOwogICAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgICByZWZyZXNoQ3VycmVudFZpZXcoKTsKICAgIHJldHVybjsKICB9CgogIGlmIChjcy5sb2FkaW5nKSByZXR1cm47CiAgY3MubG9hZGluZyA9IHRydWU7CgogICQoJ2xlZnRQYW5lSW5uZXInKS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibG9hZGluZy1vdmVybGF5Ij48ZGl2IGNsYXNzPSJsb2FkaW5nLXNwaW5uZXIiPjwvZGl2PkxvYWRpbmcgJyArIGNmZy5sYWJlbCArICcgZ2FtZXMuLi48L2Rpdj4nOwoKICB0cnkgewogICAgLy8gTG9hZCB1bmlmaWVkIGdhbWUgZGF0YWJhc2UgKEpTT04gaGFzIGljb25DYWNoZSBlbWJlZGRlZCkKICAgIGNvbnN0IGRiVXJsID0gY2ZnLmZvbGRlciArICcvJyArIGNmZy5kYkZpbGU7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgRGF0YVBhcnNlci5sb2FkKGRiVXJsKTsKCiAgICBjcy5pdGVtcyA9IGRhdGEuaXRlbXM7CiAgICBjcy5wbGF0Zm9ybSA9IGRhdGEucGxhdGZvcm07CiAgICBjcy5zdHJ1Y3R1cmVUeXBlID0gZGF0YS5zdHJ1Y3R1cmVUeXBlOwogICAgY3MueG1sRG9jID0gZGF0YS54bWxEb2M7CiAgICBpZiAoZGF0YS5pY29uQ2FjaGUgJiYgIWlzTGVnYWN5TW9kZSkgY3MuaWNvbkNhY2hlID0gZGF0YS5pY29uQ2FjaGU7CiAgICBjcy5sb2FkZWQgPSB0cnVlOwogICAgY3MubG9hZGluZyA9IGZhbHNlOwoKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGUgPSBjb25zb2xlSWQ7CiAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKCiAgICAvLyBCdWlsZCBnZW5yZSBzZXQKICAgIGNzLmdlbnJlcy5jbGVhcigpOwogICAgY3MuZ2VucmVzLmFkZCgnYWxsJyk7CiAgICBPYmplY3QudmFsdWVzKGNzLmljb25DYWNoZSkuZm9yRWFjaChpbmZvID0+IHsKICAgICAgaWYgKGluZm8uY2F0ZWdvcnkgJiYgQXJyYXkuaXNBcnJheShpbmZvLmNhdGVnb3J5KSkgewogICAgICAgIGluZm8uY2F0ZWdvcnkuZm9yRWFjaChjYXQgPT4gY3MuZ2VucmVzLmFkZChjYXQpKTsKICAgICAgfQogICAgfSk7CgogICAgcmVmcmVzaEN1cnJlbnRWaWV3KCk7CiAgICBhcHBseVBlbmRpbmdSZXN0b3JlKGNvbnNvbGVJZCk7CiAgICB0b2FzdCgnTG9hZGVkICcgKyBjcy5pdGVtcy5sZW5ndGggKyAnICcgKyBjZmcubGFiZWwgKyAnIGdhbWVzJyk7CiAgfSBjYXRjaChlKSB7CiAgICBjcy5sb2FkaW5nID0gZmFsc2U7CiAgICBjb25zb2xlLmVycm9yKGUpOwogICAgJCgnbGVmdFBhbmVJbm5lcicpLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJjb2xvcjojYjkxYzFjO3BhZGRpbmc6MTJweCI+RmFpbGVkIHRvIGxvYWQgJyArIGNmZy5sYWJlbCArICc6ICcgKyBlLm1lc3NhZ2UgKyAnPC9kaXY+JzsKICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFJFRlJFU0ggVklFVyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiByZWZyZXNoQ3VycmVudFZpZXcoKSB7CiAgY29uc3QgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGNvbnN0IGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIGlmICghY3MgfHwgIWNmZykgcmV0dXJuOwoKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZVRpdGxlJykudGV4dENvbnRlbnQgPSBzdGF0ZS5tb2RlID09PSAnbWl4JwogICAgPyAnUHJlbWF6aW5nUEggR2FtZXMgLSBNSVgnCiAgICA6IGNmZy5sYWJlbCArICcgR2FtZXMnOwoKICAkKCdzdG9yYWdlTGFiZWwnKS50ZXh0Q29udGVudCA9IGNmZy5zdG9yYWdlTGFiZWwgfHwgJ1N0b3JhZ2UnOwogIGJ1aWxkRHluYW1pY0NvbnRyb2xzKGNmZyk7CiAgYnVpbGRHZW5yZUZpbHRlcihjcyk7CiAgYXBwbHlTb3J0QW5kUmVuZGVyKCk7CiAgdXBkYXRlVG90YWxzKCk7CiAgcmVuZGVyU2VsZWN0ZWRQYW5lbCgpOwogIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgdXBkYXRlR3JhbmRUb3RhbCgpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBEWU5BTUlDIENPTlRST0xTID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIGJ1aWxkRHluYW1pY0NvbnRyb2xzKGNmZykgewogIGNvbnN0IGNvbnRhaW5lciA9ICQoJ2R5bmFtaWNDb250cm9scycpOwogIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdncmlkJzsKICBjb250YWluZXIuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9ICcxZnIgMWZyJzsKICBjb250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7CgogIGNmZy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChmdW5jdGlvbihjdHJsKSB7CiAgICAvLyBQcmVmaXggY29udHJvbCBJRHMgd2l0aCBjb25zb2xlIElEIHRvIGF2b2lkIGNvbmZsaWN0cwogICAgY29uc3QgY3RybElkID0gJ2N0cmxfJyArIHN0YXRlLmFjdGl2ZUNvbnNvbGUgKyAnXycgKyBjdHJsLmlkOwogICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICBsYWJlbC5jbGFzc05hbWUgPSAnc21hbGwnOwogICAgbGFiZWwudGV4dENvbnRlbnQgPSBjdHJsLmxhYmVsOwogICAgZGl2LmFwcGVuZENoaWxkKGxhYmVsKTsKCiAgICBpZiAoY3RybC50eXBlID09PSAnc2VsZWN0JykgewogICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKICAgICAgc2VsZWN0LmlkID0gY3RybElkOwogICAgICBzZWxlY3QuZGF0YXNldC5jdHJsSWQgPSBjdHJsLmlkOwogICAgICBzZWxlY3Quc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgY3RybC5sYWJlbCk7CgogICAgICAvLyBSZXN0b3JlIHByZXZpb3VzIHZhbHVlIGlmIGV4aXN0cwogICAgICBjb25zdCBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgICAgIGNvbnN0IHNhdmVkVmFsID0gY3NbJ19jdHJsXycgKyBjdHJsLmlkXTsKCiAgICAgIGN0cmwub3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG9wdCkgewogICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgIG9wdGlvbi52YWx1ZSA9IG9wdC52YWx1ZTsKICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBvcHQubGFiZWw7CiAgICAgICAgaWYgKHNhdmVkVmFsID8gb3B0LnZhbHVlID09PSBzYXZlZFZhbCA6IG9wdC52YWx1ZSA9PT0gY3RybC5kZWZhdWx0KSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICB9KTsKICAgICAgZGl2LmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHsKICAgICAgICAvLyBTYXZlIHZhbHVlIHRvIGNvbnNvbGUgc3RhdGUKICAgICAgICBhY3RpdmVTdGF0ZSgpWydfY3RybF8nICsgY3RybC5pZF0gPSBzZWxlY3QudmFsdWU7CiAgICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICAgICAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7CiAgICAgIH0pOwogICAgfQogICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7CiAgfSk7Cn0KCmZ1bmN0aW9uIGdldENvbnRyb2xWYWx1ZXMoKSB7CiAgY29uc3QgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgaWYgKCFjZmcpIHJldHVybiB7fTsKICBjb25zdCB2YWx1ZXMgPSB7fTsKICBjZmcuc3RvcmFnZUNvbnRyb2xzLmZvckVhY2goZnVuY3Rpb24oY3RybCkgewogICAgY29uc3QgZWwgPSAkKCdjdHJsXycgKyBzdGF0ZS5hY3RpdmVDb25zb2xlICsgJ18nICsgY3RybC5pZCk7CiAgICBpZiAoZWwpIHZhbHVlc1tjdHJsLmlkXSA9IGVsLnZhbHVlOwogICAgZWxzZSB7CiAgICAgIC8vIEZhbGxiYWNrIHRvIHNhdmVkIHZhbHVlCiAgICAgIGNvbnN0IGNzID0gYWN0aXZlU3RhdGUoKTsKICAgICAgdmFsdWVzW2N0cmwuaWRdID0gY3MgPyBjc1snX2N0cmxfJyArIGN0cmwuaWRdIHx8IGN0cmwuZGVmYXVsdCA6IGN0cmwuZGVmYXVsdDsKICAgIH0KICB9KTsKICByZXR1cm4gdmFsdWVzOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBHRU5SRSBGSUxURVIgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gYnVpbGRHZW5yZUZpbHRlcihjcykgewogIGNvbnN0IGNvbnRhaW5lciA9ICQoJ2dlbnJlRmlsdGVyJyk7CiAgaWYgKCFjb250YWluZXIpIHJldHVybjsKCiAgY29uc3Qgc29ydGVkR2VucmVzID0gWydhbGwnXS5jb25jYXQoQXJyYXkuZnJvbShjcy5nZW5yZXMpLmZpbHRlcihmdW5jdGlvbihnKSB7IHJldHVybiBnICE9PSAnYWxsJzsgfSkuc29ydCgpKTsKCiAgdmFyIGh0bWwgPSAnPGJ1dHRvbiBjbGFzcz0ic29ydC1jaGlwICcgKyAoY3MuY3VycmVudFNvcnQgPT09ICduYW1lJyA/ICdhY3RpdmUnIDogJycpICsgJyIgZGF0YS1zb3J0PSJuYW1lIj5BLVo8L2J1dHRvbj4nICsKICAgICc8YnV0dG9uIGNsYXNzPSJzb3J0LWNoaXAgJyArIChjcy5jdXJyZW50U29ydCA9PT0gJ2xhdGVzdCcgPyAnYWN0aXZlJyA6ICcnKSArICciIGRhdGEtc29ydD0ibGF0ZXN0Ij5MYXRlc3Q8L2J1dHRvbj4nICsKICAgICc8YnV0dG9uIGNsYXNzPSJzb3J0LWNoaXAgJyArIChjcy5jdXJyZW50U29ydCA9PT0gJ3RvcCcgPyAnYWN0aXZlJyA6ICcnKSArICciIGRhdGEtc29ydD0idG9wIj5Ub3A8L2J1dHRvbj4nICsKICAgICc8ZGl2IGNsYXNzPSJkaXZpZGVyIj48L2Rpdj4nOwoKICBzb3J0ZWRHZW5yZXMuZm9yRWFjaChmdW5jdGlvbihnZW5yZSkgewogICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz0iZ2VucmUtY2hpcCAnICsgKGdlbnJlID09PSBjcy5jdXJyZW50R2VucmUgPyAnYWN0aXZlJyA6ICcnKSArICciIGRhdGEtZ2VucmU9IicgKyBnZW5yZSArICciPicgKwogICAgICAoZ2VucmUgPT09ICdhbGwnID8gJ0FsbCBHYW1lcycgOiBnZW5yZSkgKyAnPC9idXR0b24+JzsKICB9KTsKCiAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7Cn0KCiQoJ2dlbnJlRmlsdGVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgY29uc3QgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MpIHJldHVybjsKICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnZW5yZS1jaGlwJykpIHsKICAgIGNzLmN1cnJlbnRHZW5yZSA9IGUudGFyZ2V0LmRhdGFzZXQuZ2VucmU7CiAgICAkKCdnZW5yZUZpbHRlcicpLnF1ZXJ5U2VsZWN0b3JBbGwoJy5nZW5yZS1jaGlwJykuZm9yRWFjaChmdW5jdGlvbihjKSB7IGMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7IH0pOwogICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICByZW5kZXJMaXN0KGNzLml0ZW1zKTsKICB9CiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc29ydC1jaGlwJykpIHsKICAgIGNzLmN1cnJlbnRTb3J0ID0gZS50YXJnZXQuZGF0YXNldC5zb3J0OwogICAgJCgnZ2VucmVGaWx0ZXInKS5xdWVyeVNlbGVjdG9yQWxsKCcuc29ydC1jaGlwJykuZm9yRWFjaChmdW5jdGlvbihjKSB7IGMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7IH0pOwogICAgZS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICBhcHBseVNvcnRBbmRSZW5kZXIoKTsKICB9Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gU09SVCAmIFJFTkRFUiA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiBhcHBseVNvcnRBbmRSZW5kZXIoKSB7CiAgY29uc3QgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MgfHwgIWNzLml0ZW1zLmxlbmd0aCkgcmV0dXJuOwoKICBpZiAoY3MuY3VycmVudFNvcnQgPT09ICdsYXRlc3QnKSB7CiAgICBjcy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0KSB7CiAgICAgIHZhciByYXcgPSBpdC5kYXRlIHx8IGl0LmRhdGVNb2RpZmllZCB8fCAnJzsKICAgICAgdmFyIGQgPSBwYXJzZURhdGVGbGV4aWJsZShyYXcpOwogICAgICBpdC5fcGFyc2VkRGF0ZSA9IGQgPyBkLmdldFRpbWUoKSA6IDA7CiAgICB9KTsKICAgIGNzLml0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYi5fcGFyc2VkRGF0ZSAtIGEuX3BhcnNlZERhdGU7IH0pOwogIH0gZWxzZSBpZiAoY3MuY3VycmVudFNvcnQgPT09ICd0b3AnKSB7CiAgICBjcy5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIChwYXJzZUludChiLnNjb3JlIHx8IDApIC0gcGFyc2VJbnQoYS5zY29yZSB8fCAwKSk7IH0pOwogIH0gZWxzZSB7CiAgICBjcy5pdGVtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIChhLm5hbWUgfHwgJycpLmxvY2FsZUNvbXBhcmUoYi5uYW1lIHx8ICcnKTsgfSk7CiAgfQoKICByZW5kZXJMaXN0KGNzLml0ZW1zKTsKfQoKZnVuY3Rpb24gZmlsdGVyQnlHZW5yZShsaXN0KSB7CiAgY29uc3QgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MgfHwgY3MuY3VycmVudEdlbnJlID09PSAnYWxsJykgcmV0dXJuIGxpc3Q7CiAgcmV0dXJuIGxpc3QuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciBpbmZvID0gY3MuaWNvbkNhY2hlW2l0ZW0ubmFtZV07CiAgICBpZiAoIWluZm8gfHwgIWluZm8uY2F0ZWdvcnkpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiBpbmZvLmNhdGVnb3J5LmluY2x1ZGVzKGNzLmN1cnJlbnRHZW5yZSk7CiAgfSk7Cn0KCi8vIFJlc29sdmUgYSBjYWNoZWQgVVJMOiBpZiByZWxhdGl2ZSAobm8gOi8vKSwgcHJlcGVuZCBjb25zb2xlIGZvbGRlcgpmdW5jdGlvbiByZXNvbHZlQXNzZXRVcmwodXJsLCBjZmcpIHsKICBpZiAoIXVybCkgcmV0dXJuICcnOwogIGlmICh1cmwuaW5kZXhPZignOi8vJykgPT09IC0xICYmIHVybC5jaGFyQXQoMCkgIT09ICcvJykgewogICAgcmV0dXJuIChjZmcgPyBjZmcuZm9sZGVyICsgJy8nIDogJycpICsgdXJsOwogIH0KICByZXR1cm4gdXJsOwp9CgpmdW5jdGlvbiBnZXRJY29uVXJsKGdhbWVOYW1lKSB7CiAgaWYgKGlzTGVnYWN5TW9kZSkgcmV0dXJuIG51bGw7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgaWYgKCFjcyB8fCAhY2ZnKSByZXR1cm4gbnVsbDsKCiAgLy8gMS4gQ2hlY2sgcHJlLWJ1aWx0IGljb25fY2FjaGUKICB2YXIgY2FjaGVkID0gY3MuaWNvbkNhY2hlW2dhbWVOYW1lXTsKICBpZiAoY2FjaGVkICYmIGNhY2hlZC5pY29uVXJsKSByZXR1cm4gcmVzb2x2ZUFzc2V0VXJsKGNhY2hlZC5pY29uVXJsLCBjZmcpOwoKICAvLyAyLiBDb25zdHJ1Y3QgbGlicmV0cm8gdGh1bWJuYWlsIFVSTCBvbiB0aGUgZmx5CiAgaWYgKGNmZy5saWJyZXRyb1N5c3RlbSAmJiBjZmcuY2xlYW5HYW1lTmFtZSkgewogICAgcmV0dXJuIGJ1aWxkTGlicmV0cm9VcmwoY2ZnLCBnYW1lTmFtZSwgMCk7CiAgfQoKICByZXR1cm4gbnVsbDsKfQoKLy8gQnVpbGQgYSBsaWJyZXRybyBDRE4gVVJMIGZvciBhIGdhbWUsIHRyeWluZyByZWdpb24gdmFyaWFudHMKLy8gdmFyaWFudEluZGV4IHBpY2tzIHdoaWNoIHJlZ2lvbi9mb2xkZXIgY29tYm8gdG8gdHJ5CmZ1bmN0aW9uIGJ1aWxkTGlicmV0cm9VcmwoY2ZnLCBnYW1lTmFtZSwgdmFyaWFudEluZGV4KSB7CiAgdmFyIGNsZWFuID0gY2ZnLmNsZWFuR2FtZU5hbWUoZ2FtZU5hbWUpOwogIHZhciBzYWZlID0gbGlicmV0cm9TYWZlKGNsZWFuKTsKICB2YXIgZm9sZGVycyA9IGNmZy5saWJyZXRyb0ZvbGRlcnMgfHwgWydOYW1lZF9Cb3hhcnRzJ107CiAgdmFyIHJlZ2lvbnMgPSBbJyhVU0EpJywgJyhFdXJvcGUpJywgJyhKYXBhbiknLCAnKFdvcmxkKScsICcoVVNBKSAoRW4sRnIsRXMpJ107CiAgLy8gQnVpbGQgZmxhdCBsaXN0IG9mIGNhbmRpZGF0ZXM6IGVhY2ggZm9sZGVyIMOXIGVhY2ggcmVnaW9uLCB0aGVuIGJhcmUgbmFtZQogIHZhciBjYW5kaWRhdGVzID0gW107CiAgZm9yICh2YXIgZiA9IDA7IGYgPCBmb2xkZXJzLmxlbmd0aDsgZisrKSB7CiAgICBmb3IgKHZhciByID0gMDsgciA8IHJlZ2lvbnMubGVuZ3RoOyByKyspIHsKICAgICAgY2FuZGlkYXRlcy5wdXNoKGZvbGRlcnNbZl0gKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoc2FmZSArICcgJyArIHJlZ2lvbnNbcl0pICsgJy5wbmcnKTsKICAgIH0KICAgIC8vIEFsc28gdHJ5IGJhcmUgbmFtZSAobm8gcmVnaW9uKQogICAgY2FuZGlkYXRlcy5wdXNoKGZvbGRlcnNbZl0gKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoc2FmZSkgKyAnLnBuZycpOwogIH0KICB2YXIgaWR4ID0gdmFyaWFudEluZGV4IHx8IDA7CiAgaWYgKGlkeCA+PSBjYW5kaWRhdGVzLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgdmFyIGJhc2UgPSBMSUJSRVRST19DRE4gKyBlbmNvZGVVUklDb21wb25lbnQoY2ZnLmxpYnJldHJvU3lzdGVtKSArICcvJzsKICByZXR1cm4gYmFzZSArIGNhbmRpZGF0ZXNbaWR4XTsKfQoKLy8gR2V0IHRvdGFsIG51bWJlciBvZiBsaWJyZXRybyBVUkwgdmFyaWFudHMgdG8gdHJ5CmZ1bmN0aW9uIGdldExpYnJldHJvVmFyaWFudENvdW50KGNmZykgewogIHZhciBmb2xkZXJzID0gY2ZnLmxpYnJldHJvRm9sZGVycyB8fCBbJ05hbWVkX0JveGFydHMnXTsKICByZXR1cm4gZm9sZGVycy5sZW5ndGggKiA2OyAvLyA1IHJlZ2lvbnMgKyBiYXJlIG5hbWUgcGVyIGZvbGRlcgp9CgovLyBDYWxsZWQgb24gaW1nIG9uZXJyb3Ig4oCUIHRyeSBuZXh0IGxpYnJldHJvIHJlZ2lvbi9mb2xkZXIgdmFyaWFudApmdW5jdGlvbiBsaWJyZXRyb0ZhbGxiYWNrKGltZykgewogIHZhciBjZmcgPSBhY3RpdmVDb25maWcoKTsKICBpZiAoIWNmZyB8fCAhY2ZnLmxpYnJldHJvU3lzdGVtKSB7CiAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGlmIChpbWcubmV4dEVsZW1lbnRTaWJsaW5nKSBpbWcubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgcmV0dXJuOwogIH0KICB2YXIgdiA9IHBhcnNlSW50KGltZy5kYXRhc2V0LnZhcmlhbnQgfHwgJzAnKSArIDE7CiAgdmFyIG1heFZhcmlhbnRzID0gZ2V0TGlicmV0cm9WYXJpYW50Q291bnQoY2ZnKTsKICBpZiAodiA+PSBtYXhWYXJpYW50cykgewogICAgLy8gQWxsIHZhcmlhbnRzIGV4aGF1c3RlZCDigJQgc2hvdyBwbGFjZWhvbGRlcgogICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBpZiAoaW1nLm5leHRFbGVtZW50U2libGluZykgaW1nLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgIHJldHVybjsKICB9CiAgaW1nLmRhdGFzZXQudmFyaWFudCA9IHY7CiAgdmFyIG5leHRVcmwgPSBidWlsZExpYnJldHJvVXJsKGNmZywgaW1nLmRhdGFzZXQuZ2FtZSwgdik7CiAgaWYgKG5leHRVcmwpIHsKICAgIGltZy5zcmMgPSBuZXh0VXJsOwogIH0gZWxzZSB7CiAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGlmIChpbWcubmV4dEVsZW1lbnRTaWJsaW5nKSBpbWcubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIH0KfQoKZnVuY3Rpb24gZ2V0R2FtZUluZm8oZ2FtZU5hbWUpIHsKICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIHJldHVybiBjcyA/IGNzLmljb25DYWNoZVtnYW1lTmFtZV0gfHwgbnVsbCA6IG51bGw7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFJFTkRFUiBMSVNUID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHJlbmRlckxpc3QobGlzdCkgewogIGNvbnN0IGxlZnRQYW5lID0gJCgnbGVmdFBhbmVJbm5lcicpOwogIGNvbnN0IGNzID0gYWN0aXZlU3RhdGUoKTsKICBjb25zdCBjZmcgPSBhY3RpdmVDb25maWcoKTsKICBpZiAoIWNzIHx8ICFjZmcpIHJldHVybjsKCiAgbGVmdFBhbmUuaW5uZXJIVE1MID0gJyc7CiAgdmFyIGZpbHRlcmVkID0gZmlsdGVyQnlHZW5yZShsaXN0KTsKCiAgLy8gQXBwbHkgc2VhcmNoCiAgaWYgKGNzLnNlYXJjaFF1ZXJ5KSB7CiAgICBmaWx0ZXJlZCA9IHNtYXJ0U2VhcmNoKGZpbHRlcmVkLCBjcy5zZWFyY2hRdWVyeSk7CiAgfQoKICBpZiAoIWZpbHRlcmVkIHx8ICFmaWx0ZXJlZC5sZW5ndGgpIHsKICAgIGxlZnRQYW5lLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjQwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6dmFyKC0tbXV0ZWQpIj5ObyBnYW1lcyBmb3VuZDwvZGl2Pic7CiAgICByZXR1cm47CiAgfQoKICBmaWx0ZXJlZC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHJvdy5jbGFzc05hbWUgPSAnaXRlbSc7CiAgICByb3cuZGF0YXNldC5uYW1lID0gaXRlbS5uYW1lOwogICAgcm93LmRhdGFzZXQuc2l6ZSA9IGl0ZW0uc2l6ZTsKICAgIGlmIChpdGVtLmZpbGVuYW1lKSByb3cuZGF0YXNldC5maWxlbmFtZSA9IGl0ZW0uZmlsZW5hbWU7CgogICAgdmFyIGlzU2VsZWN0ZWQgPSBjcy5zZWxlY3RlZC5zb21lKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMubmFtZSA9PT0gaXRlbS5uYW1lOyB9KTsKICAgIHZhciBzaXplRGlzcGxheSA9IGZvcm1hdFNpemVUb0dCKGl0ZW0uc2l6ZSk7CiAgICB2YXIgc2NvcmVWYWwgPSBpdGVtLnNjb3JlID8gcGFyc2VJbnQoaXRlbS5zY29yZSkgOiAwOwogICAgdmFyIGljb25VcmwgPSBnZXRJY29uVXJsKGl0ZW0ubmFtZSk7CiAgICB2YXIgaXNGcm9tQ2FjaGUgPSBpY29uVXJsICYmIGNzLmljb25DYWNoZVtpdGVtLm5hbWVdICYmIGNzLmljb25DYWNoZVtpdGVtLm5hbWVdLmljb25Vcmw7CiAgICB2YXIgdGh1bWJDb250ZW50ID0gJyc7CiAgICBpZiAoaWNvblVybCAmJiBjZmcubGlicmV0cm9TeXN0ZW0pIHsKICAgICAgLy8gU3RhcnQgdmFyaWFudCBhdCAtMSBpZiBVUkwgaXMgZnJvbSBpY29uX2NhY2hlIChub3QgbGlicmV0cm8pLAogICAgICAvLyBzbyBmaXJzdCBmYWxsYmFjayB0cmllcyBsaWJyZXRybyB2YXJpYW50IDAKICAgICAgdmFyIHN0YXJ0VmFyaWFudCA9IGlzRnJvbUNhY2hlID8gLTEgOiAwOwogICAgICB0aHVtYkNvbnRlbnQgPSAnPGltZyBzcmM9IicgKyBpY29uVXJsICsgJyIgYWx0PSIiIGxvYWRpbmc9ImxhenkiIGRlY29kaW5nPSJhc3luYyIgZGF0YS1nYW1lPSInICsgZXNjKGl0ZW0ubmFtZSkgKyAnIiBkYXRhLXZhcmlhbnQ9IicgKyBzdGFydFZhcmlhbnQgKyAnIiBvbmVycm9yPSJsaWJyZXRyb0ZhbGxiYWNrKHRoaXMpIj4nOwogICAgfSBlbHNlIGlmIChpY29uVXJsKSB7CiAgICAgIHRodW1iQ29udGVudCA9ICc8aW1nIHNyYz0iJyArIGljb25VcmwgKyAnIiBhbHQ9IiIgbG9hZGluZz0ibGF6eSIgZGVjb2Rpbmc9ImFzeW5jIiBvbmVycm9yPSJ0aGlzLnN0eWxlLmRpc3BsYXk9XCdub25lXCc7dGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUuZGlzcGxheT1cJ2Jsb2NrXCciPic7CiAgICB9CiAgICB2YXIgcGxhY2Vob2xkZXJTdHlsZSA9IGljb25VcmwgPyAnZGlzcGxheTpub25lJyA6ICcnOwoKICAgIHJvdy5pbm5lckhUTUwgPQogICAgICAnPGRpdiBjbGFzcz0iaXRlbS10aHVtYiI+JyArIHRodW1iQ29udGVudCArCiAgICAgICAgJzxzcGFuIGNsYXNzPSJpdGVtLXRodW1iLXBsYWNlaG9sZGVyIiBzdHlsZT0iJyArIHBsYWNlaG9sZGVyU3R5bGUgKyAnIj7wn46uPC9zcGFuPjwvZGl2PicgKwogICAgICAnPGRpdiBjbGFzcz0iaXRlbS1jb250ZW50Ij4nICsKICAgICAgICAnPGRpdiBjbGFzcz0iaXRlbS10aXRsZSI+JyArIGVzYyhpdGVtLm5hbWUpICsgJzwvZGl2PicgKwogICAgICAgICc8ZGl2IGNsYXNzPSJpdGVtLXNpemUiPicgKyBzaXplRGlzcGxheSArICc8L2Rpdj4nICsKICAgICAgICAoc2NvcmVWYWwgPiAwID8gJzxkaXYgY2xhc3M9Iml0ZW0tbWV0YSI+U2NvcmU6ICcgKyBzY29yZVZhbCArICc8L2Rpdj4nIDogJycpICsKICAgICAgJzwvZGl2PicgKwogICAgICAnPGRpdiBjbGFzcz0iaXRlbS1jaGVja2JveCI+PC9kaXY+JzsKCiAgICBpZiAoaXNTZWxlY3RlZCkgcm93LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7CgogICAgLy8gTG9uZyBwcmVzcyBmb3IgZ2FtZSBpbmZvCiAgICB2YXIgcHJlc3NUaW1lciA9IG51bGwsIHByZXNzVHJpZ2dlcmVkID0gZmFsc2U7CiAgICB2YXIgc3RhcnRQcmVzcyA9IGZ1bmN0aW9uKCkgewogICAgICBwcmVzc1RyaWdnZXJlZCA9IGZhbHNlOwogICAgICBwcmVzc1RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICBwcmVzc1RyaWdnZXJlZCA9IHRydWU7CiAgICAgICAgcm93LmNsYXNzTGlzdC5hZGQoJ2xvbmctcHJlc3MtYWN0aXZlJyk7CiAgICAgICAgc2hvd0dhbWVJbmZvKGl0ZW0pOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdsb25nLXByZXNzLWFjdGl2ZScpOyB9LCAyMDApOwogICAgICB9LCBMT05HX1BSRVNTX0RVUkFUSU9OKTsKICAgIH07CiAgICB2YXIgZW5kUHJlc3MgPSBmdW5jdGlvbihldikgewogICAgICBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7CiAgICAgIGlmIChwcmVzc1RyaWdnZXJlZCkgeyBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTsgfQogICAgfTsKICAgIHZhciBjYW5jZWxQcmVzcyA9IGZ1bmN0aW9uKCkgeyBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7IH07CgogICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydFByZXNzLCB7IHBhc3NpdmU6IHRydWUgfSk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlbmRQcmVzcyk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBjYW5jZWxQcmVzcyk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2FuY2VsUHJlc3MpOwogICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGV2KSB7IGlmIChldi5idXR0b24gPT09IDApIHN0YXJ0UHJlc3MoKTsgfSk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZFByZXNzKTsKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgY2FuY2VsUHJlc3MpOwoKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7CiAgICAgIGlmIChldi50YXJnZXQuY2xvc2VzdCgnLml0ZW0nKSAmJiBldi50YXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5jbGFzc0xpc3QuY29udGFpbnMoJ2xvbmctcHJlc3MtYWN0aXZlJykpIHJldHVybjsKICAgICAgaWYgKGV2LmFsdEtleSkgeyBzaG93R2FtZUluZm8oaXRlbSk7IHJldHVybjsgfQogICAgICB0b2dnbGVTZWxlY3QoaXRlbSwgcm93KTsKICAgIH0pOwoKICAgIGxlZnRQYW5lLmFwcGVuZENoaWxkKHJvdyk7CiAgfSk7CgogIHVwZGF0ZUNUQUJ1dHRvbigpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBTRUxFQ1RJT04gPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gdG9nZ2xlU2VsZWN0KGl0ZW0sIHJvd0VsKSB7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICBpZiAoIWNzKSByZXR1cm47CiAgdmFyIGlkeCA9IGNzLnNlbGVjdGVkLmZpbmRJbmRleChmdW5jdGlvbihzKSB7IHJldHVybiBzLm5hbWUgPT09IGl0ZW0ubmFtZTsgfSk7CiAgaWYgKGlkeCA+PSAwKSB7CiAgICAvLyBBbHdheXMgYWxsb3cgZGVzZWxlY3RpbmcKICAgIGNzLnNlbGVjdGVkLnNwbGljZShpZHgsIDEpOwogICAgaWYgKHJvd0VsKSByb3dFbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpOwogIH0gZWxzZSB7CiAgICAvLyBSZXF1aXJlIG5hbWUgYmVmb3JlIHNlbGVjdGluZwogICAgaWYgKCFyZXF1aXJlQ3VzdG9tZXJOYW1lKCkpIHJldHVybjsKICAgIGNzLnNlbGVjdGVkLnB1c2goeyBuYW1lOiBpdGVtLm5hbWUsIGZpbGVuYW1lOiBpdGVtLmZpbGVuYW1lIHx8IGl0ZW0ubmFtZSwgc2l6ZTogaXRlbS5zaXplIH0pOwogICAgaWYgKHJvd0VsKSByb3dFbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogIH0KICBfbGlzdERpcnR5ID0gdHJ1ZTsKICB1cGRhdGVUb3RhbHMoKTsKICByZW5kZXJPdmVybGF5KCk7CiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICBidWlsZE1peFRhYnMoKTsKICAgIHVwZGF0ZUNvbnNvbGVDaGlwcygpOwogICAgdXBkYXRlR3JhbmRUb3RhbCgpOwogIH0gZWxzZSB7CiAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFRPVEFMUyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiB1cGRhdGVUb3RhbHMoKSB7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgaWYgKCFjcyB8fCAhY2ZnKSByZXR1cm47CgogIHZhciB0b3RhbEJ5dGVzID0gY3Muc2VsZWN0ZWQucmVkdWNlKGZ1bmN0aW9uKHN1bSwgcykgeyByZXR1cm4gc3VtICsgcGFyc2VTaXplVGV4dChzLnNpemUpOyB9LCAwKTsKICB2YXIgZ2IgPSBieXRlc1RvR0IodG90YWxCeXRlcyk7CgogIHZhciBzZWxlY3RlZFNpemVFbCA9ICQoJ3NlbGVjdGVkU2l6ZScpOwogIGlmIChzZWxlY3RlZFNpemVFbCkgc2VsZWN0ZWRTaXplRWwudGV4dENvbnRlbnQgPSBnYi50b0ZpeGVkKDIpOwogIHZhciBzZWxlY3RlZFNpemVEaXNwbGF5ID0gJCgnc2VsZWN0ZWRTaXplRGlzcGxheScpOwogIGlmIChzZWxlY3RlZFNpemVEaXNwbGF5KSBzZWxlY3RlZFNpemVEaXNwbGF5LnRleHRDb250ZW50ID0gZ2IudG9GaXhlZCgxKTsKCiAgLy8gVGltZSBlc3RpbWF0ZQogIHZhciBibG9hdGVkID0gdG90YWxCeXRlcyAqIDEuMjsKICB2YXIgc3BlZWQgPSAxNCAqIDEwMjQgKiAxMDI0OwogIHZhciBzZWNzID0gTWF0aC5jZWlsKGJsb2F0ZWQgLyBzcGVlZCk7CiAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcihzZWNzIC8gMzYwMCk7CiAgdmFyIG1pbnMgPSBNYXRoLmZsb29yKChzZWNzICUgMzYwMCkgLyA2MCk7CiAgdmFyIGluc3RhbGxFbCA9ICQoJ2luc3RhbGxFc3RpbWF0ZScpOwogIGlmIChpbnN0YWxsRWwpIGluc3RhbGxFbC50ZXh0Q29udGVudCA9IGhvdXJzID4gMCA/ICd+JyArIGhvdXJzICsgJ2ggJyArIG1pbnMgKyAnbScgOiAnficgKyBtaW5zICsgJ20nOwoKICB2YXIgY291bnRFbCA9ICQoJ2NvdW50Jyk7CiAgaWYgKGNvdW50RWwpIGNvdW50RWwudGV4dENvbnRlbnQgPSBjcy5zZWxlY3RlZC5sZW5ndGg7CiAgdmFyIHBhbmVsQ291bnQgPSAkKCdzZWxlY3RlZFBhbmVsQ291bnQnKTsKICBpZiAocGFuZWxDb3VudCkgcGFuZWxDb3VudC50ZXh0Q29udGVudCA9IGNzLnNlbGVjdGVkLmxlbmd0aCArICcgaXRlbScgKyAoY3Muc2VsZWN0ZWQubGVuZ3RoICE9PSAxID8gJ3MnIDogJycpOwoKICAvLyBTdG9yYWdlCiAgdmFyIHZhbHVlcyA9IGdldENvbnRyb2xWYWx1ZXMoKTsKICB2YXIgc3BhY2VGb3JHYW1lcyA9IGNmZy5jYWxjdWxhdGVTdG9yYWdlKHZhbHVlcyk7CiAgdmFyIHRvdGFsQ2FwYWNpdHkgPSBpc0Zpbml0ZShzcGFjZUZvckdhbWVzKSA/IHNwYWNlRm9yR2FtZXMgOiAwOwoKICB2YXIgc3BhY2VFbCA9ICQoJ3NwYWNlJyk7CiAgaWYgKHNwYWNlRWwpIHNwYWNlRWwudGV4dENvbnRlbnQgPSB0b3RhbENhcGFjaXR5OwoKICB2YXIgZnJlZVNwYWNlID0gTWF0aC5tYXgoMCwgdG90YWxDYXBhY2l0eSAtIGdiKTsKICB2YXIgZnJlZVNwYWNlRWwgPSAkKCdmcmVlU3BhY2UnKTsKICBpZiAoZnJlZVNwYWNlRWwpIGZyZWVTcGFjZUVsLnRleHRDb250ZW50ID0gZnJlZVNwYWNlLnRvRml4ZWQoMSk7CiAgdmFyIHVzZWRTcGFjZUVsID0gJCgndXNlZFNwYWNlJyk7CiAgaWYgKHVzZWRTcGFjZUVsKSB1c2VkU3BhY2VFbC50ZXh0Q29udGVudCA9ICcwJzsKCiAgLy8gUHJvZ3Jlc3MKICBpZiAodG90YWxDYXBhY2l0eSA+IDApIHsKICAgIHZhciBzZWxlY3RlZFBlcmNlbnQgPSBNYXRoLm1pbigoZ2IgLyB0b3RhbENhcGFjaXR5KSAqIDEwMCwgMTAwKTsKICAgICQoJ3Byb2dyZXNzVXNlZCcpLnN0eWxlLndpZHRoID0gJzAlJzsKICAgICQoJ3Byb2dyZXNzU2VsZWN0ZWQnKS5zdHlsZS53aWR0aCA9IHNlbGVjdGVkUGVyY2VudCArICclJzsKICB9IGVsc2UgewogICAgJCgncHJvZ3Jlc3NVc2VkJykuc3R5bGUud2lkdGggPSAnMCUnOwogICAgJCgncHJvZ3Jlc3NTZWxlY3RlZCcpLnN0eWxlLndpZHRoID0gJzAlJzsKICB9CgogIC8vIFdhcm5pbmcKICB2YXIgY3RhVXBsb2FkID0gJCgnY3RhVXBsb2FkJyk7CiAgaWYgKGN0YVVwbG9hZCkgewogICAgaWYgKHRvdGFsQ2FwYWNpdHkgPiAwICYmIGdiID4gdG90YWxDYXBhY2l0eSkgewogICAgICBjdGFVcGxvYWQuY2xhc3NMaXN0LmFkZCgnd2FybmluZycpOwogICAgICAkKCdjdGFUZXh0JykudGV4dENvbnRlbnQgPSAnRXhjZWVkcyBMaW1pdCEnOwogICAgfSBlbHNlIHsKICAgICAgY3RhVXBsb2FkLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKTsKICAgICAgJCgnY3RhVGV4dCcpLnRleHRDb250ZW50ID0gJ1VwbG9hZCc7CiAgICB9CiAgfQoKICAvLyBDb2xvciBkYW5nZXIKICBpZiAoZ2IgPiB0b3RhbENhcGFjaXR5ICYmIHRvdGFsQ2FwYWNpdHkgPiAwKSB7CiAgICBpZiAoc2VsZWN0ZWRTaXplRWwpIHsgc2VsZWN0ZWRTaXplRWwuc3R5bGUuY29sb3IgPSAndmFyKC0tZGFuZ2VyKSc7IHNlbGVjdGVkU2l6ZUVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7IH0KICAgIGlmIChzZWxlY3RlZFNpemVEaXNwbGF5KSBzZWxlY3RlZFNpemVEaXNwbGF5LnN0eWxlLmNvbG9yID0gJ3ZhcigtLWRhbmdlciknOwogIH0gZWxzZSB7CiAgICBpZiAoc2VsZWN0ZWRTaXplRWwpIHsgc2VsZWN0ZWRTaXplRWwuc3R5bGUuY29sb3IgPSAnJzsgc2VsZWN0ZWRTaXplRWwuc3R5bGUuZm9udFdlaWdodCA9ICcnOyB9CiAgICBpZiAoc2VsZWN0ZWRTaXplRGlzcGxheSkgc2VsZWN0ZWRTaXplRGlzcGxheS5zdHlsZS5jb2xvciA9ICcnOwogIH0KCiAgLy8gQ1RBIGJhZGdlIC0gdG90YWwgYWNyb3NzIGFsbCBjb25zb2xlcyBpbiBtaXggbW9kZQogIHZhciB0b3RhbENvdW50ID0gMDsKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgdG90YWxDb3VudCArPSBnZXRDb25zb2xlU3RhdGUoaWQpLnNlbGVjdGVkLmxlbmd0aDsKICAgIH0pOwogIH0gZWxzZSB7CiAgICB0b3RhbENvdW50ID0gY3Muc2VsZWN0ZWQubGVuZ3RoOwogIH0KICAkKCdjdGFCYWRnZScpLnRleHRDb250ZW50ID0gdG90YWxDb3VudDsKCiAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7CiAgdXBkYXRlQ1RBQnV0dG9uKCk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZUNUQUJ1dHRvbigpIHsKICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIGlmICghY3MpIHJldHVybjsKCiAgdmFyIHRvdGFsQ291bnQgPSAwLCB0b3RhbEJ5dGVzID0gMDsKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgdmFyIHMgPSBnZXRDb25zb2xlU3RhdGUoaWQpOwogICAgICB0b3RhbENvdW50ICs9IHMuc2VsZWN0ZWQubGVuZ3RoOwogICAgICB0b3RhbEJ5dGVzICs9IHMuc2VsZWN0ZWQucmVkdWNlKGZ1bmN0aW9uKHN1bSwgc2VsKSB7IHJldHVybiBzdW0gKyBwYXJzZVNpemVUZXh0KHNlbC5zaXplKTsgfSwgMCk7CiAgICB9KTsKICB9IGVsc2UgewogICAgdG90YWxDb3VudCA9IGNzLnNlbGVjdGVkLmxlbmd0aDsKICAgIHRvdGFsQnl0ZXMgPSBjcy5zZWxlY3RlZC5yZWR1Y2UoZnVuY3Rpb24oc3VtLCBzKSB7IHJldHVybiBzdW0gKyBwYXJzZVNpemVUZXh0KHMuc2l6ZSk7IH0sIDApOwogIH0KCiAgdmFyIGdiID0gYnl0ZXNUb0dCKHRvdGFsQnl0ZXMpLnRvRml4ZWQoMSk7CiAgdmFyIGN0YVRleHQgPSAkKCdjdGFUZXh0Jyk7CiAgaWYgKCEkKCdjdGFVcGxvYWQnKS5jbGFzc0xpc3QuY29udGFpbnMoJ3dhcm5pbmcnKSkgewogICAgY3RhVGV4dC50ZXh0Q29udGVudCA9IHRvdGFsQ291bnQgPiAwCiAgICAgID8gJ1VwbG9hZCAnICsgdG90YWxDb3VudCArICcgR2FtZScgKyAodG90YWxDb3VudCAhPT0gMSA/ICdzJyA6ICcnKSArICcgKCcgKyBnYiArICcgR0IpJwogICAgICA6ICdVcGxvYWQgU2VsZWN0aW9uJzsKICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IEdSQU5EIFRPVEFMIChNSVgpID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHVwZGF0ZUdyYW5kVG90YWwoKSB7CiAgaWYgKHN0YXRlLm1vZGUgIT09ICdtaXgnKSByZXR1cm47CgogIHZhciBicmVha2Rvd24gPSAkKCdncmFuZFRvdGFsQnJlYWtkb3duJyk7CiAgYnJlYWtkb3duLmlubmVySFRNTCA9ICcnOwogIHZhciBncmFuZFRpdGxlcyA9IDAsIGdyYW5kQnl0ZXMgPSAwOwoKICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICB2YXIgY2ZnID0gQ09OU09MRVNbaWRdOwogICAgdmFyIGNzID0gZ2V0Q29uc29sZVN0YXRlKGlkKTsKICAgIHZhciBjb3VudCA9IGNzLnNlbGVjdGVkLmxlbmd0aDsKICAgIHZhciBieXRlcyA9IGNzLnNlbGVjdGVkLnJlZHVjZShmdW5jdGlvbihzdW0sIHMpIHsgcmV0dXJuIHN1bSArIHBhcnNlU2l6ZVRleHQocy5zaXplKTsgfSwgMCk7CiAgICB2YXIgZ2IgPSBieXRlc1RvR0IoYnl0ZXMpOwogICAgZ3JhbmRUaXRsZXMgKz0gY291bnQ7CiAgICBncmFuZEJ5dGVzICs9IGJ5dGVzOwoKICAgIC8vIENoZWNrIHN0b3JhZ2UgbGltaXQgZm9yIHRoaXMgY29uc29sZQogICAgdmFyIHZhbHVlcyA9IHt9OwogICAgY2ZnLnN0b3JhZ2VDb250cm9scy5mb3JFYWNoKGZ1bmN0aW9uKGN0cmwpIHsKICAgICAgdmFyIGVsID0gJCgnY3RybF8nICsgaWQgKyAnXycgKyBjdHJsLmlkKTsKICAgICAgdmFsdWVzW2N0cmwuaWRdID0gZWwgPyBlbC52YWx1ZSA6IChjc1snX2N0cmxfJyArIGN0cmwuaWRdIHx8IGN0cmwuZGVmYXVsdCk7CiAgICB9KTsKICAgIHZhciBjYXBhY2l0eSA9IGNmZy5jYWxjdWxhdGVTdG9yYWdlKHZhbHVlcyk7CiAgICB2YXIgZXhjZWVkZWQgPSBjYXBhY2l0eSA+IDAgJiYgZ2IgPiBjYXBhY2l0eTsKCiAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICByb3cuY2xhc3NOYW1lID0gJ2dyYW5kLXRvdGFsLXJvdycgKyAoZXhjZWVkZWQgPyAnIGV4Y2VlZGVkJyA6ICcnKTsKICAgIHJvdy5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9ImNvbnNvbGUtbGFiZWwiPicgKyBjZmcubGFiZWwgKyAnPC9zcGFuPicgKwogICAgICAnPHNwYW4+JyArIGNvdW50ICsgJyB0aXRsZXMgLyAnICsgZ2IudG9GaXhlZCgxKSArICcgR0InICsKICAgICAgKGV4Y2VlZGVkID8gJyAoT1ZFUiEpJyA6ICcnKSArICc8L3NwYW4+JzsKICAgIGJyZWFrZG93bi5hcHBlbmRDaGlsZChyb3cpOwogIH0pOwoKICB2YXIgZ3JhbmRHQiA9IGJ5dGVzVG9HQihncmFuZEJ5dGVzKTsKICAkKCdncmFuZFRvdGFsU2l6ZScpLnRleHRDb250ZW50ID0gZ3JhbmRUaXRsZXMgKyAnIHRpdGxlcyAvICcgKyBncmFuZEdCLnRvRml4ZWQoMSkgKyAnIEdCJzsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gRklMRU5BTUUgUFJFVklFVyA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKSB7CiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIGlmICghY2ZnKSB7ICQoJ2ZpbGVuYW1lUHJldmlldycpLnRleHRDb250ZW50ID0gJ1NlbGVjdCBhIGNvbnNvbGUuLi4nOyByZXR1cm47IH0KCiAgdmFyIGN1c3RvbWVyID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJ2N1c3RvbWVyJykudHJpbSgpLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpLnRvTG93ZXJDYXNlKCk7CiAgdmFyIHZhbHVlcyA9IGdldENvbnRyb2xWYWx1ZXMoKTsKICB2YXIgdG9rZW5zID0gW2N1c3RvbWVyXTsKCiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICB0b2tlbnMucHVzaCgnTUlYJyk7CiAgfQoKICBjZmcuc3RvcmFnZUNvbnRyb2xzLmZvckVhY2goZnVuY3Rpb24oY3RybCkgewogICAgaWYgKGN0cmwuZmlsZW5hbWVUb2tlbikgewogICAgICB2YXIgdmFsID0gdmFsdWVzW2N0cmwuaWRdIHx8IGN0cmwuZGVmYXVsdDsKICAgICAgdmFyIHRva2VuID0gY3RybC5maWxlbmFtZVRva2VuID09PSB0cnVlID8gdmFsIDogKGN0cmwuZmlsZW5hbWVUb2tlbiArIHZhbCk7CiAgICAgIHRva2Vucy5wdXNoKHRva2VuKTsKICAgIH0KICB9KTsKCiAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgdmFyIHN0YW1wID0gbm93LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArCiAgICBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgJzAnKTsKICB0b2tlbnMucHVzaChzdGFtcCk7CgogIHZhciBleHQgPSBzdGF0ZS5tb2RlID09PSAnbWl4JyA/ICcuQ0xJX1BSTVpNSVgnIDogY2ZnLmNsaWVudEZpbGVFeHQ7CiAgJCgnZmlsZW5hbWVQcmV2aWV3JykudGV4dENvbnRlbnQgPSB0b2tlbnMuam9pbignXycpICsgZXh0Owp9CgokKCdjdXN0b21lcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZGVib3VuY2UoZnVuY3Rpb24oKSB7CiAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7CiAgdmFyIGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnJykudHJpbSgpOwogIGRvY3VtZW50LnRpdGxlID0gY3VzdCA/ICdQcmVtYXppbmdQSCBHYW1lcyAtICcgKyBjdXN0IDogJ1ByZW1hemluZ1BIIEdhbWVzJzsKICBpZiAoY3VzdCkgc2F2ZUN1c3RvbWVyTmFtZShjdXN0KTsKfSwgNTAwKSk7CgovLyA9PT09PT09PT09PT09PT09PT09PSBTRUFSQ0ggPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gc21hcnRTZWFyY2goaXRlbXMsIHF1ZXJ5KSB7CiAgaWYgKCFxdWVyeSB8fCAhcXVlcnkudHJpbSgpKSByZXR1cm4gaXRlbXM7CiAgdmFyIHEgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICB2YXIgdGVybXMgPSBbXTsKICB2YXIgcXVvdGVSZWdleCA9IC8iKFteIl0rKSJ8JyhbXiddKyknfChcUyspL2c7CiAgdmFyIG1hdGNoOwogIHdoaWxlICgobWF0Y2ggPSBxdW90ZVJlZ2V4LmV4ZWMocSkpICE9PSBudWxsKSB7CiAgICB0ZXJtcy5wdXNoKChtYXRjaFsxXSB8fCBtYXRjaFsyXSB8fCBtYXRjaFszXSkudG9Mb3dlckNhc2UoKSk7CiAgfQogIGlmICh0ZXJtcy5sZW5ndGggPT09IDApIHJldHVybiBpdGVtczsKICByZXR1cm4gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHsKICAgIHZhciBzZWFyY2hUZXh0ID0gKGl0ZW0ubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXlx3XHNdL2csICcgJyk7CiAgICByZXR1cm4gdGVybXMuZXZlcnkoZnVuY3Rpb24odGVybSkgeyByZXR1cm4gc2VhcmNoVGV4dC5pbmNsdWRlcyh0ZXJtKTsgfSk7CiAgfSk7Cn0KCiQoJ3NlYXJjaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZGVib3VuY2UoZnVuY3Rpb24oZSkgewogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgaWYgKCFjcykgcmV0dXJuOwogIGNzLnNlYXJjaFF1ZXJ5ID0gZS50YXJnZXQudmFsdWUgfHwgJyc7CiAgcmVuZGVyTGlzdChjcy5pdGVtcyk7Cn0sIDE4MCkpOwoKJCgnY2xlYXJTZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICQoJ3NlYXJjaCcpLnZhbHVlID0gJyc7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICBpZiAoY3MpIHsgY3Muc2VhcmNoUXVlcnkgPSAnJzsgcmVuZGVyTGlzdChjcy5pdGVtcyk7IH0KfSk7CgovLyBEb3VibGUtY2xpY2sgWCBidXR0b24gPSBoYXJkIHJlZnJlc2gKJCgnY2xlYXJTZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uKCkgewogIGxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKfSk7CgovLyBFbnRlciBrZXkgPSBhZGQgYWxsIHZpc2libGUgdG8gc2VsZWN0aW9uCiQoJ3NlYXJjaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldikgewogIGlmIChldi5rZXkgIT09ICdFbnRlcicpIHJldHVybjsKICBldi5wcmV2ZW50RGVmYXVsdCgpOwogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgaWYgKCFjcykgcmV0dXJuOwoKICB2YXIgdmlzaWJsZUl0ZW1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maWx0ZXIoZnVuY3Rpb24oZWwpIHsgcmV0dXJuIGVsLm9mZnNldFBhcmVudCAhPT0gbnVsbDsgfSk7CiAgdmFyIHRvQWRkID0gdmlzaWJsZUl0ZW1zLmZpbHRlcihmdW5jdGlvbihlbCkgeyByZXR1cm4gIWNzLnNlbGVjdGVkLnNvbWUoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5uYW1lID09PSBlbC5kYXRhc2V0Lm5hbWU7IH0pOyB9KTsKCiAgaWYgKHRvQWRkLmxlbmd0aCA9PT0gMCkgeyBzaG93VG9hc3QoJ0FsbCB2aXNpYmxlIGl0ZW1zIGFscmVhZHkgc2VsZWN0ZWQnKTsgcmV0dXJuOyB9CgogIHZhciB0b3RhbEJ5dGVzID0gMDsKICB0b0FkZC5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7IHRvdGFsQnl0ZXMgKz0gcGFyc2VTaXplVGV4dChlbC5kYXRhc2V0LnNpemUpOyB9KTsKICB2YXIgdG90YWxHQiA9IGJ5dGVzVG9HQih0b3RhbEJ5dGVzKS50b0ZpeGVkKDIpOwoKICBpZiAoIWNvbmZpcm0oJ0FkZCAnICsgdG9BZGQubGVuZ3RoICsgJyBnYW1lKHMpIGZyb20gc2VhcmNoIHJlc3VsdHM/XG5cblRvdGFsIHNpemU6ICcgKyB0b3RhbEdCICsgJyBHQicpKSByZXR1cm47CgogIHRvQWRkLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgIGNzLnNlbGVjdGVkLnB1c2goeyBuYW1lOiBlbC5kYXRhc2V0Lm5hbWUsIGZpbGVuYW1lOiBlbC5kYXRhc2V0LmZpbGVuYW1lIHx8IGVsLmRhdGFzZXQubmFtZSwgc2l6ZTogZWwuZGF0YXNldC5zaXplIH0pOwogICAgZWwuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICB9KTsKCiAgdXBkYXRlVG90YWxzKCk7CiAgcmVuZGVyT3ZlcmxheSgpOwogIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgeyBidWlsZE1peFRhYnMoKTsgdXBkYXRlR3JhbmRUb3RhbCgpOyB9CiAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgc2hvd1RvYXN0KCdBZGRlZCAnICsgdG9BZGQubGVuZ3RoICsgJyBpdGVtcycpOwp9KTsKCi8vID09PT09PT09PT09PT09PT09PT09IE9WRVJMQVkgPT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gcmVuZGVyT3ZlcmxheSgpIHsKICB2YXIgb3ZlcmxheUJvZHkgPSAkKCdvdmVybGF5Qm9keScpOwogIG92ZXJsYXlCb2R5LmlubmVySFRNTCA9ICcnOwoKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIC8vIFNob3cgYWxsIGNvbnNvbGVzJyBzZWxlY3Rpb25zIGdyb3VwZWQKICAgIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oY29uc29sZUlkKSB7CiAgICAgIHZhciBjZmcgPSBDT05TT0xFU1tjb25zb2xlSWRdOwogICAgICB2YXIgY3MgPSBnZXRDb25zb2xlU3RhdGUoY29uc29sZUlkKTsKICAgICAgaWYgKGNzLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKICAgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBoZWFkZXIuc3R5bGUuY3NzVGV4dCA9ICdwYWRkaW5nOjhweCAxMnB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjonICsgY2ZnLmNvbG9yICsgJztmb250LXNpemU6MTRweDttYXJnaW4tdG9wOjhweDsnOwogICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBjZmcubGFiZWwgKyAnICgnICsgY3Muc2VsZWN0ZWQubGVuZ3RoICsgJyknOwogICAgICBvdmVybGF5Qm9keS5hcHBlbmRDaGlsZChoZWFkZXIpOwoKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzLCBpKSB7CiAgICAgICAgYXBwZW5kT3ZlcmxheVJvdyhvdmVybGF5Qm9keSwgcywgaSwgY3MsIGNvbnNvbGVJZCk7CiAgICAgIH0pOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgICBpZiAoIWNzKSByZXR1cm47CiAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHMsIGkpIHsKICAgICAgYXBwZW5kT3ZlcmxheVJvdyhvdmVybGF5Qm9keSwgcywgaSwgY3MsIHN0YXRlLmFjdGl2ZUNvbnNvbGUpOwogICAgfSk7CiAgfQoKICB2YXIgdG90YWxDb3VudCA9IDA7CiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7IHRvdGFsQ291bnQgKz0gZ2V0Q29uc29sZVN0YXRlKGlkKS5zZWxlY3RlZC5sZW5ndGg7IH0pOwogIH0gZWxzZSB7CiAgICB2YXIgY3MyID0gYWN0aXZlU3RhdGUoKTsKICAgIHRvdGFsQ291bnQgPSBjczIgPyBjczIuc2VsZWN0ZWQubGVuZ3RoIDogMDsKICB9CiAgJCgnb3ZlcmxheUNvdW50JykudGV4dENvbnRlbnQgPSB0b3RhbENvdW50OwogIHJlbmRlclNlbGVjdGVkUGFuZWwoKTsKICBzYXZlU2VsZWN0ZWRMaXN0KCk7Cn0KCmZ1bmN0aW9uIGFwcGVuZE92ZXJsYXlSb3coY29udGFpbmVyLCBzLCBpLCBjcywgY29uc29sZUlkKSB7CiAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIHJvdy5jbGFzc05hbWUgPSAncm93JzsKICB2YXIgcmF3SWNvbiA9IGNzLmljb25DYWNoZVtzLm5hbWVdID8gY3MuaWNvbkNhY2hlW3MubmFtZV0uaWNvblVybCA6IG51bGw7CiAgdmFyIGljb25VcmwgPSBpc0xlZ2FjeU1vZGUgPyBudWxsIDogcmVzb2x2ZUFzc2V0VXJsKHJhd0ljb24sIENPTlNPTEVTW2NvbnNvbGVJZF0pOwogIHZhciBzaXplRGlzcGxheSA9IGZvcm1hdFNpemVUb0dCKHMuc2l6ZSk7CiAgcm93LmlubmVySFRNTCA9CiAgICAnPGRpdiBjbGFzcz0iaXRlbS10aHVtYiIgc3R5bGU9IndpZHRoOjQ0cHg7aGVpZ2h0OjQ0cHg7ZmxleC1zaHJpbms6MCI+JyArCiAgICAgIChpY29uVXJsID8gJzxpbWcgc3JjPSInICsgaWNvblVybCArICciIGFsdD0iIiBzdHlsZT0id2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvYmplY3QtZml0OmNvdmVyO2JvcmRlci1yYWRpdXM6NnB4Ij4nIDogJzxzcGFuIHN0eWxlPSJmb250LXNpemU6MThweCI+8J+Orjwvc3Bhbj4nKSArCiAgICAnPC9kaXY+JyArCiAgICAnPGRpdiBjbGFzcz0icm93LWluZm8iPjxzdHJvbmc+JyArIChpKzEpICsgJy4gJyArIGVzYyhzLm5hbWUpICsgJzwvc3Ryb25nPjxkaXYgY2xhc3M9Im1ldGEiPicgKyBzaXplRGlzcGxheSArICc8L2Rpdj48L2Rpdj4nICsKICAgICc8ZGl2IGNsYXNzPSJyb3ctYWN0aW9ucyI+JyArCiAgICAgICc8YnV0dG9uIGNsYXNzPSJpY29uIHVwIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSI+PHBhdGggZD0iTTE4IDE1bC02LTYtNiA2Ii8+PC9zdmc+PC9idXR0b24+JyArCiAgICAgICc8YnV0dG9uIGNsYXNzPSJpY29uIGRvd24iPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41Ij48cGF0aCBkPSJNNiA5bDYgNiA2LTYiLz48L3N2Zz48L2J1dHRvbj4nICsKICAgICAgJzxidXR0b24gY2xhc3M9Imljb24gcmVtb3ZlIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSI+PGxpbmUgeDE9IjE4IiB5MT0iNiIgeDI9IjYiIHkyPSIxOCIvPjxsaW5lIHgxPSI2IiB5MT0iNiIgeDI9IjE4IiB5Mj0iMTgiLz48L3N2Zz48L2J1dHRvbj4nICsKICAgICc8L2Rpdj4nOwoKICByb3cucXVlcnlTZWxlY3RvcignLnVwJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgIGlmIChpID4gMCkgeyB2YXIgdG1wID0gY3Muc2VsZWN0ZWRbaS0xXTsgY3Muc2VsZWN0ZWRbaS0xXSA9IGNzLnNlbGVjdGVkW2ldOyBjcy5zZWxlY3RlZFtpXSA9IHRtcDsgcmVuZGVyT3ZlcmxheSgpOyByZW5kZXJMaXN0KGdldENvbnNvbGVTdGF0ZShjb25zb2xlSWQpLml0ZW1zKTsgdXBkYXRlVG90YWxzKCk7IH0KICB9KTsKICByb3cucXVlcnlTZWxlY3RvcignLmRvd24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgaWYgKGkgPCBjcy5zZWxlY3RlZC5sZW5ndGggLSAxKSB7IHZhciB0bXAgPSBjcy5zZWxlY3RlZFtpKzFdOyBjcy5zZWxlY3RlZFtpKzFdID0gY3Muc2VsZWN0ZWRbaV07IGNzLnNlbGVjdGVkW2ldID0gdG1wOyByZW5kZXJPdmVybGF5KCk7IHJlbmRlckxpc3QoZ2V0Q29uc29sZVN0YXRlKGNvbnNvbGVJZCkuaXRlbXMpOyB1cGRhdGVUb3RhbHMoKTsgfQogIH0pOwogIHJvdy5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgIHZhciByZW1vdmVkID0gY3Muc2VsZWN0ZWQuc3BsaWNlKGksIDEpWzBdOwogICAgLy8gVXBkYXRlIGxlZnQgcGFuZSBpZiB0aGlzIGNvbnNvbGUgaXMgYWN0aXZlCiAgICBpZiAoY29uc29sZUlkID09PSBzdGF0ZS5hY3RpdmVDb25zb2xlKSB7CiAgICAgIHZhciBsZWZ0Um93ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maW5kKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHguZGF0YXNldC5uYW1lID09PSByZW1vdmVkLm5hbWU7IH0pOwogICAgICBpZiAobGVmdFJvdykgbGVmdFJvdy5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpOwogICAgfQogICAgcmVuZGVyT3ZlcmxheSgpOwogICAgdXBkYXRlVG90YWxzKCk7CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsgYnVpbGRNaXhUYWJzKCk7IHVwZGF0ZUdyYW5kVG90YWwoKTsgfQogICAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgfSk7CgogIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cpOwp9CgokKCdjdGFTaG93JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgJCgnb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IHJlbmRlck92ZXJsYXkoKTsgfSk7CiQoJ2Nsb3NlT3ZlcmxheScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7ICQoJ292ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9KTsKCi8vID09PT09PT09PT09PT09PT09PT09IFNFTEVDVEVEIFBBTkVMID09PT09PT09PT09PT09PT09PT09CmZ1bmN0aW9uIHJlbmRlclNlbGVjdGVkUGFuZWwoKSB7CiAgdmFyIGJvZHkgPSAkKCdzZWxlY3RlZFBhbmVsQm9keScpOwogIGlmICghYm9keSkgcmV0dXJuOwogIGJvZHkuaW5uZXJIVE1MID0gJyc7CiAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICBpZiAoIWNzIHx8IGNzLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgewogICAgYm9keS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTNweCI+Tm8gZ2FtZXMgc2VsZWN0ZWQgeWV0PC9kaXY+JzsKICAgIHJldHVybjsKICB9CiAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzLCBpKSB7CiAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICByb3cuY2xhc3NOYW1lID0gJ3NlbGVjdGVkLWl0ZW0nOwogICAgdmFyIHNpemVEaXNwbGF5ID0gZm9ybWF0U2l6ZVRvR0Iocy5zaXplKTsKICAgIHZhciBpY29uVXJsID0gZ2V0SWNvblVybChzLm5hbWUpOwogICAgcm93LmlubmVySFRNTCA9CiAgICAgICc8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLXRodW1iIj4nICsKICAgICAgICAoaWNvblVybCA/ICc8aW1nIHNyYz0iJyArIGljb25VcmwgKyAnIiBhbHQ9IiIgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOjZweCI+JyA6ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjE4cHgiPvCfjq48L3NwYW4+JykgKwogICAgICAnPC9kaXY+JyArCiAgICAgICc8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLWNvbnRlbnQiPjxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tdGl0bGUiPicgKyBlc2Mocy5uYW1lKSArICc8L2Rpdj48L2Rpdj4nICsKICAgICAgJzxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tc2l6ZSI+JyArIHNpemVEaXNwbGF5ICsgJzwvZGl2PicgKwogICAgICAnPGRpdiBjbGFzcz0ic2VsZWN0ZWQtaXRlbS1hY3Rpb25zIj4nICsKICAgICAgICAnPGJ1dHRvbiBjbGFzcz0idXAiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41Ij48cGF0aCBkPSJNMTggMTVsLTYtNi02IDYiLz48L3N2Zz48L2J1dHRvbj4nICsKICAgICAgICAnPGJ1dHRvbiBjbGFzcz0iZG93biI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiPjxwYXRoIGQ9Ik02IDlsNiA2IDYtNiIvPjwvc3ZnPjwvYnV0dG9uPicgKwogICAgICAgICc8YnV0dG9uIGNsYXNzPSJyZW1vdmUiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41Ij48bGluZSB4MT0iMTgiIHkxPSI2IiB4Mj0iNiIgeTI9IjE4Ii8+PGxpbmUgeDE9IjYiIHkxPSI2IiB4Mj0iMTgiIHkyPSIxOCIvPjwvc3ZnPjwvYnV0dG9uPicgKwogICAgICAnPC9kaXY+JzsKCiAgICByb3cucXVlcnlTZWxlY3RvcignLnVwJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgaWYgKGkgPiAwKSB7IHZhciB0bXAgPSBjcy5zZWxlY3RlZFtpLTFdOyBjcy5zZWxlY3RlZFtpLTFdID0gY3Muc2VsZWN0ZWRbaV07IGNzLnNlbGVjdGVkW2ldID0gdG1wOyByZW5kZXJPdmVybGF5KCk7IHJlbmRlckxpc3QoY3MuaXRlbXMpOyB1cGRhdGVUb3RhbHMoKTsgfQogICAgfSk7CiAgICByb3cucXVlcnlTZWxlY3RvcignLmRvd24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICBpZiAoaSA8IGNzLnNlbGVjdGVkLmxlbmd0aCAtIDEpIHsgdmFyIHRtcCA9IGNzLnNlbGVjdGVkW2krMV07IGNzLnNlbGVjdGVkW2krMV0gPSBjcy5zZWxlY3RlZFtpXTsgY3Muc2VsZWN0ZWRbaV0gPSB0bXA7IHJlbmRlck92ZXJsYXkoKTsgcmVuZGVyTGlzdChjcy5pdGVtcyk7IHVwZGF0ZVRvdGFscygpOyB9CiAgICB9KTsKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgY3Muc2VsZWN0ZWQuc3BsaWNlKGksIDEpOwogICAgICByZW5kZXJPdmVybGF5KCk7IHJlbmRlckxpc3QoY3MuaXRlbXMpOyB1cGRhdGVUb3RhbHMoKTsKICAgICAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7IGJ1aWxkTWl4VGFicygpOyB1cGRhdGVHcmFuZFRvdGFsKCk7IH0KICAgICAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CiAgICB9KTsKCiAgICBib2R5LmFwcGVuZENoaWxkKHJvdyk7CiAgfSk7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IEdBTUUgSU5GTyBNT0RBTCA9PT09PT09PT09PT09PT09PT09PQpmdW5jdGlvbiBmb3JtYXRSZWxlYXNlRGF0ZShkYXRlTnVtKSB7CiAgaWYgKCFkYXRlTnVtKSByZXR1cm4gbnVsbDsKICB2YXIgc3RyID0gU3RyaW5nKGRhdGVOdW0pOwogIGlmIChzdHIubGVuZ3RoICE9PSA4KSByZXR1cm4gbnVsbDsKICByZXR1cm4gc3RyLnNsaWNlKDAsNCkgKyAnLScgKyBzdHIuc2xpY2UoNCw2KSArICctJyArIHN0ci5zbGljZSg2LDgpOwp9CgpmdW5jdGlvbiBzaG93R2FtZUluZm8oaXRlbSkgewogIHZhciBpbmZvID0gZ2V0R2FtZUluZm8oaXRlbS5uYW1lKTsKICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIHZhciBtb2RhbCA9ICQoJ2dhbWVJbmZvTW9kYWwnKTsKICB2YXIgY29udGVudCA9ICQoJ2dhbWVJbmZvQ29udGVudCcpOwoKICB2YXIgY2ZnID0gYWN0aXZlQ29uZmlnKCk7CiAgdmFyIGJhbm5lclJhdyA9IGluZm8gJiYgaW5mby5iYW5uZXJVcmwgPyBpbmZvLmJhbm5lclVybCA6IChpbmZvICYmIGluZm8uaWNvblVybCA/IGluZm8uaWNvblVybCA6ICcnKTsKICB2YXIgYmFubmVyVXJsID0gcmVzb2x2ZUFzc2V0VXJsKGJhbm5lclJhdywgY2ZnKTsKICB2YXIgaWNvblVybCA9IHJlc29sdmVBc3NldFVybChpbmZvID8gaW5mby5pY29uVXJsIHx8ICcnIDogJycsIGNmZyk7CiAgdmFyIHRpdGxlID0gaW5mbyA/IGluZm8ubWF0Y2hlZE5hbWUgfHwgaXRlbS5uYW1lIDogaXRlbS5uYW1lOwogIHZhciBwdWJsaXNoZXIgPSBpbmZvID8gaW5mby5wdWJsaXNoZXIgfHwgJ1Vua25vd24gUHVibGlzaGVyJyA6ICdVbmtub3duIFB1Ymxpc2hlcic7CiAgdmFyIGNhdGVnb3JpZXMgPSBpbmZvID8gaW5mby5jYXRlZ29yeSB8fCBbXSA6IFtdOwogIHZhciBkZXNjcmlwdGlvbiA9IGluZm8gPyBpbmZvLmRlc2NyaXB0aW9uIHx8ICcnIDogJyc7CiAgdmFyIGludHJvID0gaW5mbyA/IGluZm8uaW50cm8gfHwgJycgOiAnJzsKICB2YXIgc2NyZWVuc2hvdHMgPSAoaW5mbyA/IGluZm8uc2NyZWVuc2hvdHMgfHwgW10gOiBbXSkubWFwKGZ1bmN0aW9uKHUpIHsgcmV0dXJuIHJlc29sdmVBc3NldFVybCh1LCBjZmcpOyB9KTsKICB2YXIgcmVsZWFzZURhdGUgPSBmb3JtYXRSZWxlYXNlRGF0ZShpbmZvID8gaW5mby5yZWxlYXNlRGF0ZSA6IG51bGwpOwogIHZhciBwbGF5ZXJzID0gaW5mbyA/IGluZm8ubnVtYmVyT2ZQbGF5ZXJzIDogbnVsbDsKICB2YXIgaGFzRmlsZXMgPSBpdGVtLmZpbGVzICYmIGl0ZW0uZmlsZXMubGVuZ3RoID4gMDsKICB2YXIgaXNTZWxlY3RlZCA9IGNzICYmIGNzLnNlbGVjdGVkLnNvbWUoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5uYW1lID09PSBpdGVtLm5hbWU7IH0pOwoKICBjb250ZW50LmlubmVySFRNTCA9CiAgICAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWhlYWRlciI+JyArCiAgICAgIChiYW5uZXJVcmwgPyAnPGltZyBjbGFzcz0iZ2FtZS1pbmZvLWJhbm5lciIgc3JjPSInICsgYmFubmVyVXJsICsgJyIgYWx0PSIiIG9uZXJyb3I9InRoaXMuc3R5bGUuZGlzcGxheT1cJ25vbmVcJyI+JyA6ICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tYmFubmVyIj48L2Rpdj4nKSArCiAgICAgIChpY29uVXJsID8gJzxpbWcgY2xhc3M9ImdhbWUtaW5mby1pY29uIiBzcmM9IicgKyBpY29uVXJsICsgJyIgYWx0PSIiPicgOiAnJykgKwogICAgICAnPGJ1dHRvbiBjbGFzcz0iZ2FtZS1pbmZvLWNsb3NlIiBvbmNsaWNrPSJjbG9zZUdhbWVJbmZvKCkiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+PC9idXR0b24+JyArCiAgICAnPC9kaXY+JyArCiAgICAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXRpdGxlIj4nICsgZXNjKHRpdGxlKSArICc8L2Rpdj4nICsKICAgICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tcHVibGlzaGVyIj4nICsgZXNjKHB1Ymxpc2hlcikgKyAnPC9kaXY+JyArCiAgICAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLW1ldGEiPicgKwogICAgICBjYXRlZ29yaWVzLm1hcChmdW5jdGlvbihjKSB7IHJldHVybiAnPHNwYW4gY2xhc3M9ImdhbWUtaW5mby10YWcgZ2VucmUiPicgKyBlc2MoYykgKyAnPC9zcGFuPic7IH0pLmpvaW4oJycpICsKICAgICAgKHJlbGVhc2VEYXRlID8gJzxzcGFuIGNsYXNzPSJnYW1lLWluZm8tdGFnIj4nICsgcmVsZWFzZURhdGUgKyAnPC9zcGFuPicgOiAnJykgKwogICAgICAocGxheWVycyA/ICc8c3BhbiBjbGFzcz0iZ2FtZS1pbmZvLXRhZyI+JyArIHBsYXllcnMgKyAnIFBsYXllcicgKyAocGxheWVycyA+IDEgPyAncycgOiAnJykgKyAnPC9zcGFuPicgOiAnJykgKwogICAgICAnPHNwYW4gY2xhc3M9ImdhbWUtaW5mby10YWciPicgKyBmb3JtYXRTaXplVG9HQihpdGVtLnNpemUpICsgJzwvc3Bhbj4nICsKICAgICAgKGhhc0ZpbGVzID8gJzxzcGFuIGNsYXNzPSJnYW1lLWluZm8tdGFnIj4nICsgaXRlbS5maWxlcy5sZW5ndGggKyAnIGZpbGVzPC9zcGFuPicgOiAnJykgKwogICAgJzwvZGl2PicgKwogICAgKGhhc0ZpbGVzID8gJzxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uIGdhbWUtaW5mby1maWxlcy1zZWN0aW9uIj48YnV0dG9uIGNsYXNzPSJnYW1lLWluZm8tZmlsZXMtYnRuIiBvbmNsaWNrPSJ0b2dnbGVGaWxlc1NlY3Rpb24odGhpcykiPjxzcGFuPlNob3cgJyArIGl0ZW0uZmlsZXMubGVuZ3RoICsgJyBGaWxlczwvc3Bhbj48c3ZnIGNsYXNzPSJjaGV2cm9uIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJNNiA5bDYgNiA2LTYiLz48L3N2Zz48L2J1dHRvbj48ZGl2IGNsYXNzPSJnYW1lLWluZm8tZmlsZXMiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPicgKyBpdGVtLmZpbGVzLm1hcChmdW5jdGlvbihmKSB7IHJldHVybiAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWZpbGUiPicgKyBlc2MoZikgKyAnPC9kaXY+JzsgfSkuam9pbignJykgKyAnPC9kaXY+PC9kaXY+JyA6ICcnKSArCiAgICAoaW50cm8gfHwgZGVzY3JpcHRpb24gPyAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXNlY3Rpb24iPjxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uLXRpdGxlIj5BYm91dDwvZGl2PicgKyAoaW50cm8gPyAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWludHJvIj4iJyArIGVzYyhpbnRybykgKyAnIjwvZGl2PicgOiAnJykgKyAoZGVzY3JpcHRpb24gPyAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWRlc2NyaXB0aW9uIj4nICsgZXNjKGRlc2NyaXB0aW9uLnNsaWNlKDAsNTAwKSkgKyAoZGVzY3JpcHRpb24ubGVuZ3RoID4gNTAwID8gJy4uLicgOiAnJykgKyAnPC9kaXY+JyA6ICcnKSArICc8L2Rpdj4nIDogJycpICsKICAgIChzY3JlZW5zaG90cy5sZW5ndGggPiAwID8gJzxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uIj48ZGl2IGNsYXNzPSJnYW1lLWluZm8tc2VjdGlvbi10aXRsZSI+U2NyZWVuc2hvdHM8L2Rpdj48ZGl2IGNsYXNzPSJnYW1lLWluZm8tc2NyZWVuc2hvdHMiPicgKyBzY3JlZW5zaG90cy5tYXAoZnVuY3Rpb24odXJsKSB7IHJldHVybiAnPGltZyBzcmM9IicgKyB1cmwgKyAnIiBhbHQ9IlNjcmVlbnNob3QiIG9uY2xpY2s9InNob3dTY3JlZW5zaG90KFwnJyArIHVybCArICdcJykiIGxvYWRpbmc9ImxhenkiIGRlY29kaW5nPSJhc3luYyI+JzsgfSkuam9pbignJykgKyAnPC9kaXY+PC9kaXY+JyA6ICcnKSArCiAgICAnPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWFjdGlvbnMiPjxidXR0b24gY2xhc3M9ImJ0biAnICsgKGlzU2VsZWN0ZWQgPyAnZGFuZ2VyJyA6ICdidG4tcHJpbWFyeScpICsgJyIgb25jbGljaz0idG9nZ2xlRnJvbUluZm8oXCcnICsgZXNjKGl0ZW0ubmFtZSkucmVwbGFjZSgvJy9nLCAiXFwnIikgKyAnXCcpIj4nICsgKGlzU2VsZWN0ZWQgPyAnUmVtb3ZlIGZyb20gTGlzdCcgOiAnQWRkIHRvIExpc3QnKSArICc8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJidG4gZ2hvc3QiIG9uY2xpY2s9ImNsb3NlR2FtZUluZm8oKSI+Q2xvc2U8L2J1dHRvbj48L2Rpdj4nOwoKICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7Cn0KCmZ1bmN0aW9uIGNsb3NlR2FtZUluZm8oKSB7ICQoJ2dhbWVJbmZvTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7IH0KCmZ1bmN0aW9uIHRvZ2dsZUZpbGVzU2VjdGlvbihidG4pIHsKICB2YXIgZmlsZXNEaXYgPSBidG4ubmV4dEVsZW1lbnRTaWJsaW5nOwogIHZhciBpc09wZW4gPSBmaWxlc0Rpdi5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7CiAgZmlsZXNEaXYuc3R5bGUuZGlzcGxheSA9IGlzT3BlbiA/ICdub25lJyA6ICdmbGV4JzsKICBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicsICFpc09wZW4pOwogIGJ0bi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBidG4ucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50LnJlcGxhY2UoaXNPcGVuID8gJ0hpZGUnIDogJ1Nob3cnLCBpc09wZW4gPyAnU2hvdycgOiAnSGlkZScpOwp9CgpmdW5jdGlvbiB0b2dnbGVGcm9tSW5mbyhnYW1lTmFtZSkgewogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgaWYgKCFjcykgcmV0dXJuOwogIHZhciBpdGVtID0gY3MuaXRlbXMuZmluZChmdW5jdGlvbihpKSB7IHJldHVybiBpLm5hbWUgPT09IGdhbWVOYW1lOyB9KTsKICBpZiAoaXRlbSkgewogICAgdmFyIGlkeCA9IGNzLnNlbGVjdGVkLmZpbmRJbmRleChmdW5jdGlvbihzKSB7IHJldHVybiBzLm5hbWUgPT09IGdhbWVOYW1lOyB9KTsKICAgIGlmIChpZHggPj0gMCkgeyBjcy5zZWxlY3RlZC5zcGxpY2UoaWR4LCAxKTsgc2hvd1RvYXN0KCdSZW1vdmVkIGZyb20gbGlzdCcpOyB9CiAgICBlbHNlIHsgY3Muc2VsZWN0ZWQucHVzaChpdGVtKTsgc2hvd1RvYXN0KCdBZGRlZCB0byBsaXN0Jyk7IH0KICAgIHJlbmRlckxpc3QoY3MuaXRlbXMpOyByZW5kZXJPdmVybGF5KCk7IHVwZGF0ZVRvdGFscygpOwogICAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7IGJ1aWxkTWl4VGFicygpOyB1cGRhdGVHcmFuZFRvdGFsKCk7IH0KICAgIHVwZGF0ZUNvbnNvbGVDaGlwcygpOwogICAgc2V0VGltZW91dChjbG9zZUdhbWVJbmZvLCA4MDApOwogIH0KfQoKZnVuY3Rpb24gc2hvd1NjcmVlbnNob3QodXJsKSB7ICQoJ3NjcmVlbnNob3RJbWFnZScpLnNyYyA9IHVybDsgJCgnc2NyZWVuc2hvdFZpZXdlcicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyB9CiQoJ3NjcmVlbnNob3RWaWV3ZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAkKCdzY3JlZW5zaG90Vmlld2VyJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7IH0pOwokKCdnYW1lSW5mb01vZGFsJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7IGlmIChlLnRhcmdldC5pZCA9PT0gJ2dhbWVJbmZvTW9kYWwnKSBjbG9zZUdhbWVJbmZvKCk7IH0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gU0FWRSAvIEVYUE9SVCA9PT09PT09PT09PT09PT09PT09PQp2YXIgbGFzdEV4cG9ydFRpbWUgPSAwOwp2YXIgTUlOX0RFTEFZID0gMTAwMDsKCiQoJ3NhdmVCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogIHZhciBub3cgPSBEYXRlLm5vdygpOwogIGlmIChub3cgLSBsYXN0RXhwb3J0VGltZSA8IE1JTl9ERUxBWSkgeyBhbGVydCgnUGxlYXNlIHdhaXQnKTsgcmV0dXJuOyB9CiAgbGFzdEV4cG9ydFRpbWUgPSBub3c7CgogIGlmICghcmVxdWlyZUN1c3RvbWVyTmFtZSgpKSByZXR1cm47CiAgdmFyIGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnJykudHJpbSgpOwoKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIHNhdmVNaXhGaWxlcyhjdXN0KTsKICB9IGVsc2UgewogICAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICAgIHZhciBjZmcgPSBhY3RpdmVDb25maWcoKTsKICAgIGlmICghY3MgfHwgY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCdObyBpdGVtcyBzZWxlY3RlZCcpOyByZXR1cm47IH0KICAgIHZhciBmaWxlbmFtZSA9ICQoJ2ZpbGVuYW1lUHJldmlldycpLnRleHRDb250ZW50IHx8ICgnbGlzdCcgKyBjZmcuY2xpZW50RmlsZUV4dCk7CiAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjcy5zZWxlY3RlZC5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5uYW1lOyB9KS5qb2luKCdcbicpXSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7CiAgICBkb3dubG9hZEJsb2IoYmxvYiwgZmlsZW5hbWUpOwogICAgdG9hc3QoJ1NhdmVkIGNsaWVudCBmaWxlJyk7CiAgfQp9KTsKCmZ1bmN0aW9uIHNhdmVNaXhGaWxlcyhjdXN0KSB7CiAgdmFyIGhhc0FueSA9IGZhbHNlOwogIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsgaWYgKGdldENvbnNvbGVTdGF0ZShpZCkuc2VsZWN0ZWQubGVuZ3RoID4gMCkgaGFzQW55ID0gdHJ1ZTsgfSk7CiAgaWYgKCFoYXNBbnkpIHsgYWxlcnQoJ05vIGl0ZW1zIHNlbGVjdGVkJyk7IHJldHVybjsgfQoKICB2YXIgc3RhbXAgPSBnZW5lcmF0ZVRpbWVzdGFtcCgpOwogIHZhciBjdXN0b21lciA9IGN1c3QucmVwbGFjZSgvW15hLXpBLVowLTldL2csICdfJykudG9Mb3dlckNhc2UoKTsKCiAgLy8gMS4gQ29tYmluZWQgTUlYIGZpbGUKICB2YXIgbWl4Q29udGVudCA9ICcnOwogIHN0YXRlLmFjdGl2ZUNvbnNvbGVzLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgIHZhciBjZmcgPSBDT05TT0xFU1tpZF07CiAgICB2YXIgY3MgPSBnZXRDb25zb2xlU3RhdGUoaWQpOwogICAgaWYgKGNzLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgbWl4Q29udGVudCArPSAnWycgKyBjZmcubGFiZWwgKyAnXVxuJzsKICAgIGNzLnNlbGVjdGVkLmZvckVhY2goZnVuY3Rpb24ocykgeyBtaXhDb250ZW50ICs9IHMubmFtZSArICdcbic7IH0pOwogICAgbWl4Q29udGVudCArPSAnXG4nOwogIH0pOwogIHZhciBtaXhGaWxlbmFtZSA9IGN1c3RvbWVyICsgJ19NSVhfJyArIHN0YW1wICsgJy5DTElfUFJNWk1JWCc7CiAgZG93bmxvYWRCbG9iKG5ldyBCbG9iKFttaXhDb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSksIG1peEZpbGVuYW1lKTsKCiAgc2hvd1RvYXN0KCdTYXZlZCBNSVggZmlsZScpOwp9CgpmdW5jdGlvbiBnZW5lcmF0ZVRpbWVzdGFtcCgpIHsKICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICByZXR1cm4gbm93LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSArCiAgICBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKSArCiAgICBTdHJpbmcobm93LmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwgJzAnKTsKfQoKZnVuY3Rpb24gZG93bmxvYWRCbG9iKGJsb2IsIGZpbGVuYW1lKSB7CiAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICBhLmRvd25sb2FkID0gZmlsZW5hbWU7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICBhLmNsaWNrKCk7CiAgYS5yZW1vdmUoKTsKICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IEFETUlOIEVYUE9SVCA9PT09PT09PT09PT09PT09PT09PQokKCdhZG1pbkV4cG9ydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24oKSB7CiAgdmFyIG5vdyA9IERhdGUubm93KCk7CiAgaWYgKG5vdyAtIGxhc3RFeHBvcnRUaW1lIDwgTUlOX0RFTEFZKSB7IHNob3dCYW5uZXIoJ1BsZWFzZSB3YWl0JywgMjAwMCk7IHJldHVybjsgfQogIGxhc3RFeHBvcnRUaW1lID0gbm93OwoKICBpZiAoIXJlcXVpcmVDdXN0b21lck5hbWUoKSkgcmV0dXJuOwogIHZhciBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJycpLnRyaW0oKTsKCiAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7CiAgICBhZG1pbkV4cG9ydE1peChjdXN0KTsKICB9IGVsc2UgewogICAgYWRtaW5FeHBvcnRTaW5nbGUoY3VzdCk7CiAgfQp9KTsKCmFzeW5jIGZ1bmN0aW9uIGFkbWluRXhwb3J0U2luZ2xlKGN1c3QpIHsKICB2YXIgY3MgPSBhY3RpdmVTdGF0ZSgpOwogIHZhciBjZmcgPSBhY3RpdmVDb25maWcoKTsKICBpZiAoIWNzIHx8IGNzLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgeyBzaG93QmFubmVyKCdObyBpdGVtcyBzZWxlY3RlZCcsIDIwMDApOyByZXR1cm47IH0KCiAgdHJ5IHsKICAgIHZhciBjb250ZW50ID0gJyc7CiAgICB2YXIgcGF0aHMgPSBbXTsKCiAgICBpZiAoY3Muc3RydWN0dXJlVHlwZSA9PT0gJ2ZvbGRlcnMnKSB7CiAgICAgIGNzLnNlbGVjdGVkLmZvckVhY2goZnVuY3Rpb24oc2VsKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBjcy5pdGVtcy5maW5kKGZ1bmN0aW9uKGl0KSB7IHJldHVybiBpdC5uYW1lID09PSBzZWwubmFtZTsgfSk7CiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5maWxlcykgewogICAgICAgICAgaXRlbS5maWxlcy5mb3JFYWNoKGZ1bmN0aW9uKGZuYW1lKSB7CiAgICAgICAgICAgIHZhciBwYXRoID0gY2ZnLmFkbWluQmFzZVBhdGggKyBpdGVtLm5hbWUgKyAnXFwnICsgZm5hbWU7CiAgICAgICAgICAgIGNvbnRlbnQgKz0gcGF0aCArICdcbic7CiAgICAgICAgICAgIHBhdGhzLnB1c2gocGF0aCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzZWwpIHsKICAgICAgICB2YXIgcGF0aCA9IGNmZy5hZG1pbkJhc2VQYXRoICsgKHNlbC5maWxlbmFtZSB8fCBzZWwubmFtZSk7CiAgICAgICAgY29udGVudCArPSBwYXRoICsgJ1xuJzsKICAgICAgICBwYXRocy5wdXNoKHBhdGgpOwogICAgICB9KTsKICAgIH0KCiAgICB2YXIgc3RhbXAgPSBnZW5lcmF0ZVRpbWVzdGFtcCgpOwogICAgdmFyIGZuYW1lID0gY3VzdC5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKSArICdfJyArIHN0YW1wICsgY2ZnLmFkbWluRmlsZUV4dDsKICAgIGRvd25sb2FkQmxvYihuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pLCBmbmFtZSk7CiAgICBzaG93VG9hc3QoJ0FkbWluIGV4cG9ydCBzYXZlZCcpOwoKICAgIC8vIFRyeSBsaXN0ZW5lcgogICAgdHJ5IHsKICAgICAgdmFyIHN0YXR1c1JlcyA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjUwMDAvc3RhdHVzJyk7CiAgICAgIGlmIChzdGF0dXNSZXMub2sgJiYgY29uZmlybSgnTGlzdGVuZXIgZGV0ZWN0ZWQhIFJ1biBoYXJkbGluayBmb3IgJyArIGNzLnNlbGVjdGVkLmxlbmd0aCArICcgaXRlbXM/JykpIHsKICAgICAgICB2YXIgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9ydW4nLCB7CiAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBwYXRoczogcGF0aHMsIGN1c3RvbWVyOiBjdXN0IH0pCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHJlc3VsdCA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdvaycpIHNob3dCYW5uZXIoJ0RvbmUhICcgKyByZXN1bHQuc3VjY2VzcyArICcgZmlsZXMgbGlua2VkJywgMjAwMCk7CiAgICAgIH0KICAgIH0gY2F0Y2goZSkgeyAvKiBsaXN0ZW5lciBub3QgcnVubmluZyAqLyB9CiAgfSBjYXRjaChlKSB7CiAgICBjb25zb2xlLmVycm9yKGUpOwogICAgc2hvd0Jhbm5lcignQWRtaW4gZXhwb3J0IGZhaWxlZCcsIDIwMDApOwogIH0KfQoKYXN5bmMgZnVuY3Rpb24gYWRtaW5FeHBvcnRNaXgoY3VzdCkgewogIHZhciBzdGFtcCA9IGdlbmVyYXRlVGltZXN0YW1wKCk7CiAgdmFyIGN1c3RvbWVyID0gY3VzdC5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKTsKCiAgLy8gQ29tYmluZWQgYWRtaW4gZmlsZQogIHZhciBtaXhDb250ZW50ID0gJyc7CiAgc3RhdGUuYWN0aXZlQ29uc29sZXMuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgdmFyIGNmZyA9IENPTlNPTEVTW2lkXTsKICAgIHZhciBjcyA9IGdldENvbnNvbGVTdGF0ZShpZCk7CiAgICBpZiAoY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSByZXR1cm47CgogICAgbWl4Q29udGVudCArPSAnWycgKyBjZmcubGFiZWwgKyAnXVxuJzsKICAgIGlmIChjcy5zdHJ1Y3R1cmVUeXBlID09PSAnZm9sZGVycycpIHsKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzZWwpIHsKICAgICAgICB2YXIgaXRlbSA9IGNzLml0ZW1zLmZpbmQoZnVuY3Rpb24oaXQpIHsgcmV0dXJuIGl0Lm5hbWUgPT09IHNlbC5uYW1lOyB9KTsKICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmZpbGVzKSB7CiAgICAgICAgICBpdGVtLmZpbGVzLmZvckVhY2goZnVuY3Rpb24oZm5hbWUpIHsKICAgICAgICAgICAgbWl4Q29udGVudCArPSBjZmcuYWRtaW5CYXNlUGF0aCArIGl0ZW0ubmFtZSArICdcXCcgKyBmbmFtZSArICdcbic7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzZWwpIHsKICAgICAgICBtaXhDb250ZW50ICs9IGNmZy5hZG1pbkJhc2VQYXRoICsgKHNlbC5maWxlbmFtZSB8fCBzZWwubmFtZSkgKyAnXG4nOwogICAgICB9KTsKICAgIH0KICAgIG1peENvbnRlbnQgKz0gJ1xuJzsKICB9KTsKCiAgZG93bmxvYWRCbG9iKG5ldyBCbG9iKFttaXhDb250ZW50XSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSksIGN1c3RvbWVyICsgJ19NSVhfJyArIHN0YW1wICsgJy5QUk1aTUlYJyk7CgogIC8vIFBlci1jb25zb2xlIGFkbWluIGZpbGVzCiAgc3RhdGUuYWN0aXZlQ29uc29sZXMuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgdmFyIGNmZyA9IENPTlNPTEVTW2lkXTsKICAgIHZhciBjcyA9IGdldENvbnNvbGVTdGF0ZShpZCk7CiAgICBpZiAoY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSByZXR1cm47CgogICAgdmFyIGNvbnRlbnQgPSAnJzsKICAgIGlmIChjcy5zdHJ1Y3R1cmVUeXBlID09PSAnZm9sZGVycycpIHsKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzZWwpIHsKICAgICAgICB2YXIgaXRlbSA9IGNzLml0ZW1zLmZpbmQoZnVuY3Rpb24oaXQpIHsgcmV0dXJuIGl0Lm5hbWUgPT09IHNlbC5uYW1lOyB9KTsKICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmZpbGVzKSB7CiAgICAgICAgICBpdGVtLmZpbGVzLmZvckVhY2goZnVuY3Rpb24oZm5hbWUpIHsKICAgICAgICAgICAgY29udGVudCArPSBjZmcuYWRtaW5CYXNlUGF0aCArIGl0ZW0ubmFtZSArICdcXCcgKyBmbmFtZSArICdcbic7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzZWwpIHsKICAgICAgICBjb250ZW50ICs9IGNmZy5hZG1pbkJhc2VQYXRoICsgKHNlbC5maWxlbmFtZSB8fCBzZWwubmFtZSkgKyAnXG4nOwogICAgICB9KTsKICAgIH0KCiAgICB2YXIgZm5hbWUgPSBjdXN0b21lciArICdfJyArIHN0YW1wICsgY2ZnLmFkbWluRmlsZUV4dDsKICAgIGRvd25sb2FkQmxvYihuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pLCBmbmFtZSk7CiAgfSk7CgogIHNob3dUb2FzdCgnQWRtaW4gTUlYIGV4cG9ydCBzYXZlZCcpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBVUExPQUQgPT09PT09PT09PT09PT09PT09PT0KJCgnY3RhVXBsb2FkJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBkb1VwbG9hZCk7Cgphc3luYyBmdW5jdGlvbiBkb1VwbG9hZCgpIHsKICBpZiAoIXJlcXVpcmVDdXN0b21lck5hbWUoKSkgcmV0dXJuOwogIHZhciBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJycpLnRyaW0oKTsKCiAgdmFyIGhhc1NlbGVjdGlvbiA9IGZhbHNlOwogIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgewogICAgc3RhdGUuYWN0aXZlQ29uc29sZXMuZm9yRWFjaChmdW5jdGlvbihpZCkgeyBpZiAoZ2V0Q29uc29sZVN0YXRlKGlkKS5zZWxlY3RlZC5sZW5ndGggPiAwKSBoYXNTZWxlY3Rpb24gPSB0cnVlOyB9KTsKICB9IGVsc2UgewogICAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICAgIGhhc1NlbGVjdGlvbiA9IGNzICYmIGNzLnNlbGVjdGVkLmxlbmd0aCA+IDA7CiAgfQogIGlmICghaGFzU2VsZWN0aW9uKSB7IGFsZXJ0KCdObyBpdGVtcyBzZWxlY3RlZCcpOyByZXR1cm47IH0KICBpZiAoIWNvbmZpcm0oJ1VwbG9hZCBsaXN0IGZvciAnICsgY3VzdCArICc/JykpIHJldHVybjsKCiAgdmFyIG5vdyA9IERhdGUubm93KCk7CiAgaWYgKG5vdyAtIHN0YXRlLmxhc3RVcGxvYWQgPCAxNTAwMCkgeyBhbGVydCgnUGxlYXNlIHdhaXQgMTUgc2Vjb25kcyBiZXR3ZWVuIHVwbG9hZHMnKTsgcmV0dXJuOyB9CgogIHZhciBidG4gPSAkKCdjdGFVcGxvYWQnKTsKICB2YXIgY3RhVGV4dCA9ICQoJ2N0YVRleHQnKTsKICB2YXIgb3JpZ2luYWxUZXh0ID0gY3RhVGV4dC50ZXh0Q29udGVudDsKCiAgLy8gRW50ZXIgbG9hZGluZyBzdGF0ZQogIGJ0bi5jbGFzc0xpc3QuYWRkKCd1cGxvYWRpbmcnKTsKICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZycsICd1cGxvYWQtZG9uZScpOwogIGN0YVRleHQudGV4dENvbnRlbnQgPSAnVXBsb2FkaW5nLi4uJzsKCiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIHZhciBidWNrZXQgPSBjZmcgPyBjZmcuZmlsZWJpbkJ1Y2tldCA6ICd4bGc0a2dnb3piZGdzbnc0JzsKCiAgdHJ5IHsKICAgIGlmIChzdGF0ZS5tb2RlID09PSAnbWl4JykgewogICAgICB2YXIgbWl4Q29udGVudCA9ICcnOwogICAgICBzdGF0ZS5hY3RpdmVDb25zb2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgICAgdmFyIGMgPSBDT05TT0xFU1tpZF07CiAgICAgICAgdmFyIGNzID0gZ2V0Q29uc29sZVN0YXRlKGlkKTsKICAgICAgICBpZiAoY3Muc2VsZWN0ZWQubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgbWl4Q29udGVudCArPSAnWycgKyBjLmxhYmVsICsgJ11cbic7CiAgICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzKSB7IG1peENvbnRlbnQgKz0gcy5uYW1lICsgJ1xuJzsgfSk7CiAgICAgICAgbWl4Q29udGVudCArPSAnXG4nOwogICAgICB9KTsKICAgICAgdmFyIGZpbGVuYW1lID0gJCgnZmlsZW5hbWVQcmV2aWV3JykudGV4dENvbnRlbnQgfHwgKCdsaXN0LkNMSV9QUk1aTUlYJyk7CiAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW21peENvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsKICAgICAgYXdhaXQgdXBsb2FkVG9GaWxlYmluKGJsb2IsIGZpbGVuYW1lLCBidWNrZXQpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICAgICAgdmFyIGZpbGVuYW1lID0gJCgnZmlsZW5hbWVQcmV2aWV3JykudGV4dENvbnRlbnQgfHwgKCdsaXN0JyArIGNmZy5jbGllbnRGaWxlRXh0KTsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY3Muc2VsZWN0ZWQubWFwKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMubmFtZTsgfSkuam9pbignXG4nKV0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOwogICAgICBhd2FpdCB1cGxvYWRUb0ZpbGViaW4oYmxvYiwgZmlsZW5hbWUsIGJ1Y2tldCk7CiAgICB9CgogICAgLy8gU3VjY2VzcyBzdGF0ZQogICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3VwbG9hZGluZycpOwogICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3VwbG9hZC1kb25lJyk7CiAgICBjdGFUZXh0LnRleHRDb250ZW50ID0gJ1VwbG9hZGVkISc7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndXBsb2FkLWRvbmUnKTsKICAgICAgY3RhVGV4dC50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDsKICAgIH0sIDMwMDApOwogIH0gY2F0Y2goZSkgewogICAgLy8gRXJyb3Igc3RhdGUKICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCd1cGxvYWRpbmcnKTsKICAgIGN0YVRleHQudGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7CiAgfQp9Cgphc3luYyBmdW5jdGlvbiB1cGxvYWRUb0ZpbGViaW4oYmxvYiwgZmlsZW5hbWUsIGJ1Y2tldCkgewogIC8vIFRyeSBmaWxlYmluIGZpcnN0CiAgdHJ5IHsKICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9maWxlYmluLm5ldC8nICsgYnVja2V0ICsgJy8nICsgZmlsZW5hbWU7CiAgICB2YXIgciA9IGF3YWl0IGZldGNoKHVybCwgeyBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nIH0sIGJvZHk6IGJsb2IgfSk7CiAgICBpZiAoci5vayB8fCByLnN0YXR1cyA9PT0gMjAxKSB7CiAgICAgIHN0YXRlLmxhc3RVcGxvYWQgPSBEYXRlLm5vdygpOwogICAgICBjbGVhclNlbGVjdGVkTGlzdCgpOyAvLyBDbGVhciBzYXZlZCBsaXN0IGFmdGVyIHN1Y2Nlc3NmdWwgdXBsb2FkCiAgICAgICQoJ3NoYXJlYWJsZScpLnZhbHVlID0gJ2h0dHBzOi8vZmlsZWJpbi5uZXQvJyArIGJ1Y2tldCArICcvJyArIGZpbGVuYW1lOwogICAgICBzaG93QmFubmVyKCdVcGxvYWQgQ29tcGxldGUgLSBQcmVzcyBDb3B5IExpbmsgYW5kIHNlbmQgaXQgdG8gb3VyIGNoYXQnKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSBjYXRjaChlKSB7IGNvbnNvbGUud2FybignZmlsZWJpbiBlcnJvcicsIGUpOyB9CgogIC8vIEZhbGxiYWNrIHRvIGdvZmlsZQogIHRyeSB7CiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBibG9iLCBmaWxlbmFtZSk7CiAgICB2YXIgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vdXBsb2FkLmdvZmlsZS5pby91cGxvYWRGaWxlJywgeyBtZXRob2Q6ICdQT1NUJywgYm9keTogZm9ybSB9KTsKICAgIHZhciBqID0gYXdhaXQgcmVzLmpzb24oKTsKICAgIGlmIChqLnN0YXR1cyA9PT0gJ29rJykgewogICAgICBzdGF0ZS5sYXN0VXBsb2FkID0gRGF0ZS5ub3coKTsKICAgICAgJCgnc2hhcmVhYmxlJykudmFsdWUgPSBqLmRhdGEuZG93bmxvYWRQYWdlOwogICAgICBzaG93QmFubmVyKCdVcGxvYWQgQ29tcGxldGUgKEdvRmlsZSkgLSBQcmVzcyBDb3B5IExpbmsgYW5kIHNlbmQgaXQgdG8gb3VyIGNoYXQnKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0KCiAgc2hvd1RvYXN0KCdVcGxvYWQgZmFpbGVkJyk7CiAgdGhyb3cgbmV3IEVycm9yKCdVcGxvYWQgZmFpbGVkJyk7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IENPUFkgTElOSyA9PT09PT09PT09PT09PT09PT09PQokKCdjb3B5TGluaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgaWYgKCFyZXF1aXJlQ3VzdG9tZXJOYW1lKCkpIHJldHVybjsKICB2YXIgY3VzdCA9ICgkKCdjdXN0b21lcicpLnZhbHVlIHx8ICcnKS50cmltKCk7CgogIHZhciByYXdMaW5rID0gJCgnc2hhcmVhYmxlJykudmFsdWUudHJpbSgpOwogIHZhciBsaW5rID0gcmF3TGluay5yZXBsYWNlKC9eaHR0cHM/OlwvXC8vLCAnaHh4cGNmZicpLnJlcGxhY2UoL1wuL2csICdfZG90XycpOwoKICAvLyBCdWlsZCBwZXItY29uc29sZSBncm91cGVkIHNlbGVjdGlvbgogIHZhciB0b3RhbENvdW50ID0gMCwgdG90YWxCeXRlcyA9IDA7CiAgdmFyIGdyb3VwcyA9IFtdOyAvLyB7IGxhYmVsLCBpdGVtczogW3tuYW1lLCBzaXplfV0gfQoKICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgIC8vIEdhdGhlciBmcm9tIEFMTCBjb25zb2xlcyB0aGF0IGhhdmUgc2VsZWN0aW9ucyAobm90IGp1c3QgYWN0aXZlQ29uc29sZXMpCiAgICB2YXIgY29uc29sZUlkcyA9IHN0YXRlLmFjdGl2ZUNvbnNvbGVzLnNsaWNlKCk7CiAgICAvLyBBbHNvIGNoZWNrIGFueSBjb25zb2xlU3RhdGVzIG5vdCBpbiBhY3RpdmVDb25zb2xlcyAoc2FmZXR5KQogICAgT2JqZWN0LmtleXMoc3RhdGUuY29uc29sZVN0YXRlcykuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgICBpZiAoY29uc29sZUlkcy5pbmRleE9mKGlkKSA9PT0gLTEgJiYgc3RhdGUuY29uc29sZVN0YXRlc1tpZF0uc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnNvbGVJZHMucHVzaChpZCk7CiAgICAgIH0KICAgIH0pOwogICAgY29uc29sZUlkcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7CiAgICAgIHZhciBjcyA9IHN0YXRlLmNvbnNvbGVTdGF0ZXNbaWRdOwogICAgICBpZiAoIWNzIHx8IGNzLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICB2YXIgYyA9IENPTlNPTEVTW2lkXTsKICAgICAgaWYgKCFjKSByZXR1cm47CiAgICAgIHZhciBnID0geyBsYWJlbDogYy5sYWJlbCwgY29sb3I6IGMuY29sb3IsIGl0ZW1zOiBbXSB9OwogICAgICBjcy5zZWxlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uKHMpIHsKICAgICAgICBnLml0ZW1zLnB1c2goeyBuYW1lOiBzLm5hbWUsIHNpemU6IGZvcm1hdFNpemVUb0dCKHMuc2l6ZSkgfSk7CiAgICAgICAgdG90YWxCeXRlcyArPSBwYXJzZVNpemVUZXh0KHMuc2l6ZSk7CiAgICAgICAgdG90YWxDb3VudCsrOwogICAgICB9KTsKICAgICAgZ3JvdXBzLnB1c2goZyk7CiAgICB9KTsKICB9IGVsc2UgewogICAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICAgIHZhciBjZmcgPSBhY3RpdmVDb25maWcoKTsKICAgIGlmIChjcyAmJiBjcy5zZWxlY3RlZC5sZW5ndGggPiAwKSB7CiAgICAgIHZhciBnID0geyBsYWJlbDogY2ZnLmxhYmVsLCBjb2xvcjogY2ZnLmNvbG9yLCBpdGVtczogW10gfTsKICAgICAgY3Muc2VsZWN0ZWQuZm9yRWFjaChmdW5jdGlvbihzKSB7CiAgICAgICAgZy5pdGVtcy5wdXNoKHsgbmFtZTogcy5uYW1lLCBzaXplOiBmb3JtYXRTaXplVG9HQihzLnNpemUpIH0pOwogICAgICAgIHRvdGFsQnl0ZXMgKz0gcGFyc2VTaXplVGV4dChzLnNpemUpOwogICAgICAgIHRvdGFsQ291bnQrKzsKICAgICAgfSk7CiAgICAgIGdyb3Vwcy5wdXNoKGcpOwogICAgfQogIH0KCiAgaWYgKHRvdGFsQ291bnQgPT09IDApIHsgc2hvd1RvYXN0KCdObyBpdGVtcyBzZWxlY3RlZCcpOyByZXR1cm47IH0KCiAgdmFyIHRvdGFsR0IgPSBieXRlc1RvR0IodG90YWxCeXRlcykudG9GaXhlZCgyKTsKICB2YXIgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCAnbGlzdCc7CiAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgdmFyIHN0YW1wID0gbm93LnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHsgeWVhcjonbnVtZXJpYycsIG1vbnRoOicyLWRpZ2l0JywgZGF5OicyLWRpZ2l0JywgaG91cjonMi1kaWdpdCcsIG1pbnV0ZTonMi1kaWdpdCcsIHNlY29uZDonMi1kaWdpdCcgfSk7CiAgdmFyIGxpbmtUb1VzZSA9IGxpbmsgfHwgJyhObyBsaW5rIHVwbG9hZGVkKSc7CgogIC8vIEJ1aWxkIHBsYWluIHRleHQgZm9yIGNsaXBib2FyZAogIHZhciB0aXRsZXNBcnIgPSBbXTsKICBncm91cHMuZm9yRWFjaChmdW5jdGlvbihnKSB7CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsKICAgICAgZy5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGkpIHsgdGl0bGVzQXJyLnB1c2goJ1snICsgZy5sYWJlbCArICddICcgKyBpLm5hbWUpOyB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGcuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpKSB7IHRpdGxlc0Fyci5wdXNoKGkubmFtZSk7IH0pOwogICAgfQogIH0pOwogIHZhciBzdW1tYXJ5VGV4dCA9ICdDdXN0b21lcjogJyArIGN1c3QgKyAnXG5GaWxlbmFtZTogJyArIGZpbGVuYW1lICsgJ1xuUXVhbnRpdHk6ICcgKyB0b3RhbENvdW50ICsgJyBpdGVtc1xuVG90YWwgU2l6ZTogJyArIHRvdGFsR0IgKyAnIEdCXG5HZW5lcmF0ZWQ6ICcgKyBzdGFtcCArICdcblxuJyArIGxpbmtUb1VzZSArICdcblxuJzsKICB2YXIgZmluYWxUZXh0ID0gc3VtbWFyeVRleHQgKyB0aXRsZXNBcnIuam9pbignXG4nKTsKCiAgLy8gU2hvdyB0aGUgY29weSBtb2RhbAogIHNob3dDb3B5TW9kYWwoewogICAgY3VzdG9tZXI6IGN1c3QsCiAgICBmaWxlbmFtZTogZmlsZW5hbWUsCiAgICB0b3RhbENvdW50OiB0b3RhbENvdW50LAogICAgdG90YWxHQjogdG90YWxHQiwKICAgIHN0YW1wOiBzdGFtcCwKICAgIGxpbms6IGxpbmtUb1VzZSwKICAgIGdyb3VwczogZ3JvdXBzLAogICAgY2xpcGJvYXJkVGV4dDogZmluYWxUZXh0CiAgfSk7Cn0pOwoKZnVuY3Rpb24gc2hvd0NvcHlNb2RhbChkYXRhKSB7CiAgdmFyIG1vZGFsID0gJCgnY29weU1vZGFsJyk7CiAgdmFyIGJvZHkgPSAkKCdjb3B5TW9kYWxCb2R5Jyk7CgogIC8vIEJ1aWxkIGhlYWRlciBzdW1tYXJ5CiAgdmFyIGh0bWwgPSAnPGRpdiBjbGFzcz0iY29weS1zdW1tYXJ5Ij4nOwogIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktc3VtbWFyeS1yb3ciPjxzcGFuIGNsYXNzPSJjb3B5LWxhYmVsIj5DdXN0b21lcjwvc3Bhbj48c3BhbiBjbGFzcz0iY29weS12YWx1ZSI+JyArIGVzYyhkYXRhLmN1c3RvbWVyKSArICc8L3NwYW4+PC9kaXY+JzsKICBodG1sICs9ICc8ZGl2IGNsYXNzPSJjb3B5LXN1bW1hcnktcm93Ij48c3BhbiBjbGFzcz0iY29weS1sYWJlbCI+RmlsZTwvc3Bhbj48c3BhbiBjbGFzcz0iY29weS12YWx1ZSBjb3B5LWZpbGVuYW1lIj4nICsgZXNjKGRhdGEuZmlsZW5hbWUpICsgJzwvc3Bhbj48L2Rpdj4nOwogIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktc3VtbWFyeS1yb3ciPjxzcGFuIGNsYXNzPSJjb3B5LWxhYmVsIj5Ub3RhbDwvc3Bhbj48c3BhbiBjbGFzcz0iY29weS12YWx1ZSI+JyArIGRhdGEudG90YWxDb3VudCArICcgaXRlbXMgJm1pZGRvdDsgJyArIGRhdGEudG90YWxHQiArICcgR0I8L3NwYW4+PC9kaXY+JzsKICBodG1sICs9ICc8ZGl2IGNsYXNzPSJjb3B5LXN1bW1hcnktcm93Ij48c3BhbiBjbGFzcz0iY29weS1sYWJlbCI+RGF0ZTwvc3Bhbj48c3BhbiBjbGFzcz0iY29weS12YWx1ZSI+JyArIGVzYyhkYXRhLnN0YW1wKSArICc8L3NwYW4+PC9kaXY+JzsKICBodG1sICs9ICc8ZGl2IGNsYXNzPSJjb3B5LXN1bW1hcnktcm93Ij48c3BhbiBjbGFzcz0iY29weS1sYWJlbCI+TGluazwvc3Bhbj48c3BhbiBjbGFzcz0iY29weS12YWx1ZSBjb3B5LWxpbmsiPicgKyBlc2MoZGF0YS5saW5rKSArICc8L3NwYW4+PC9kaXY+JzsKICBodG1sICs9ICc8L2Rpdj4nOwoKICAvLyBCdWlsZCBnYW1lIGxpc3QgcGVyIGdyb3VwCiAgZGF0YS5ncm91cHMuZm9yRWFjaChmdW5jdGlvbihnKSB7CiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJjb3B5LWdyb3VwIj4nOwogICAgaHRtbCArPSAnPGRpdiBjbGFzcz0iY29weS1ncm91cC1oZWFkZXIiIHN0eWxlPSJib3JkZXItbGVmdC1jb2xvcjonICsgZy5jb2xvciArICciPicgKyBlc2MoZy5sYWJlbCkgKyAnIDxzcGFuIGNsYXNzPSJjb3B5LWdyb3VwLWNvdW50Ij4oJyArIGcuaXRlbXMubGVuZ3RoICsgJyk8L3NwYW4+PC9kaXY+JzsKICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktZ3JvdXAtaXRlbXMiPic7CiAgICBnLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaWR4KSB7CiAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9ImNvcHktaXRlbSI+PHNwYW4gY2xhc3M9ImNvcHktaXRlbS1udW0iPicgKyAoaWR4ICsgMSkgKyAnPC9zcGFuPjxzcGFuIGNsYXNzPSJjb3B5LWl0ZW0tbmFtZSI+JyArIGVzYyhpdGVtLm5hbWUpICsgJzwvc3Bhbj48c3BhbiBjbGFzcz0iY29weS1pdGVtLXNpemUiPicgKyBlc2MoaXRlbS5zaXplKSArICc8L3NwYW4+PC9kaXY+JzsKICAgIH0pOwogICAgaHRtbCArPSAnPC9kaXY+PC9kaXY+JzsKICB9KTsKCiAgYm9keS5pbm5lckhUTUwgPSBodG1sOwogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CgogIC8vIENvcHkgYnV0dG9uCiAgJCgnY29weU1vZGFsQnRuJykub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgY29weVBsYWluVGV4dChkYXRhLmNsaXBib2FyZFRleHQsIGZ1bmN0aW9uKG9rKSB7CiAgICAgIGlmIChvaykgewogICAgICAgICQoJ2NvcHlNb2RhbEJ0bicpLnRleHRDb250ZW50ID0gJ0NvcGllZCEnOwogICAgICAgICQoJ2NvcHlNb2RhbEJ0bicpLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYWNjZW50KSc7CiAgICAgICAgJCgnY29weU1vZGFsQnRuJykuc3R5bGUuY29sb3IgPSAnIzAwMCc7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAkKCdjb3B5TW9kYWxCdG4nKS50ZXh0Q29udGVudCA9ICdDb3B5IHRvIENsaXBib2FyZCc7CiAgICAgICAgICAkKCdjb3B5TW9kYWxCdG4nKS5zdHlsZS5iYWNrZ3JvdW5kID0gJyc7CiAgICAgICAgICAkKCdjb3B5TW9kYWxCdG4nKS5zdHlsZS5jb2xvciA9ICcnOwogICAgICAgIH0sIDEyMDApOwogICAgICB9IGVsc2UgewogICAgICAgIHNob3dUb2FzdCgnQ29weSBmYWlsZWQg4oCUIHRyeSBtYW51YWxseScpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvLyBDbG9zZQogICQoJ2NvcHlNb2RhbENsb3NlJykub25jbGljayA9IGZ1bmN0aW9uKCkgeyBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9OwogIG1vZGFsLm9uY2xpY2sgPSBmdW5jdGlvbihldikgeyBpZiAoZXYudGFyZ2V0ID09PSBtb2RhbCkgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gRklMRSBPUEVOID09PT09PT09PT09PT09PT09PT09CiQoJ2ZpbGVJbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7CiAgdmFyIGYgPSBldi50YXJnZXQuZmlsZXNbMF07CiAgaWYgKCFmKSByZXR1cm47CgogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIGlmICghY3MgfHwgIWNmZykgeyBhbGVydCgnU2VsZWN0IGEgY29uc29sZSBmaXJzdCcpOyByZXR1cm47IH0KCiAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsKICAgIHZhciBsaW5lcyA9IGUudGFyZ2V0LnJlc3VsdC5zcGxpdCgnXG4nKS5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy50cmltKCk7IH0pLmZpbHRlcihCb29sZWFuKTsKICAgIGNzLnNlbGVjdGVkID0gW107CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpLmZvckVhY2goZnVuY3Rpb24oaSkgeyBpLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7IH0pOwoKICAgIGxpbmVzLmZvckVhY2goZnVuY3Rpb24odGl0bGUpIHsKICAgICAgdmFyIGxlZnQgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoZnVuY3Rpb24oaSkgeyByZXR1cm4gaS5kYXRhc2V0Lm5hbWUgPT09IHRpdGxlOyB9KTsKICAgICAgaWYgKGxlZnQpIHsKICAgICAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7CiAgICAgICAgY3Muc2VsZWN0ZWQucHVzaCh7IG5hbWU6IGxlZnQuZGF0YXNldC5uYW1lLCBmaWxlbmFtZTogbGVmdC5kYXRhc2V0LmZpbGVuYW1lIHx8IGxlZnQuZGF0YXNldC5uYW1lLCBzaXplOiBsZWZ0LmRhdGFzZXQuc2l6ZSB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbWF5YmUgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoZnVuY3Rpb24oaSkgeyByZXR1cm4gaS5kYXRhc2V0Lm5hbWUgJiYgaS5kYXRhc2V0Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGl0bGUudG9Mb3dlckNhc2UoKTsgfSk7CiAgICAgICAgaWYgKG1heWJlKSB7CiAgICAgICAgICBtYXliZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogICAgICAgICAgY3Muc2VsZWN0ZWQucHVzaCh7IG5hbWU6IG1heWJlLmRhdGFzZXQubmFtZSwgZmlsZW5hbWU6IG1heWJlLmRhdGFzZXQuZmlsZW5hbWUgfHwgbWF5YmUuZGF0YXNldC5uYW1lLCBzaXplOiBtYXliZS5kYXRhc2V0LnNpemUgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHVwZGF0ZVRvdGFscygpOwogICAgcmVuZGVyT3ZlcmxheSgpOwogICAgaWYgKHN0YXRlLm1vZGUgPT09ICdtaXgnKSB7IGJ1aWxkTWl4VGFicygpOyB1cGRhdGVHcmFuZFRvdGFsKCk7IH0KICAgIHVwZGF0ZUNvbnNvbGVDaGlwcygpOwogIH07CiAgcmVhZGVyLnJlYWRBc1RleHQoZik7Cn0pOwoKLy8gPT09PT09PT09PT09PT09PT09PT0gVVBMT0FEUyBMSVNUID09PT09PT09PT09PT09PT09PT09CnZhciBiaW5MaXN0UGFnZSA9IDA7CnZhciBiaW5MaXN0UGFnZVNpemUgPSAxMDsKdmFyIGNhY2hlZEJpbkZpbGVzID0gbnVsbDsKCiQoJ2Jpbkxpc3QnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGZ1bmN0aW9uKCkgewogIHZhciBjZmcgPSBhY3RpdmVDb25maWcoKTsKICBpZiAoIWNmZykgeyBzaG93VG9hc3QoJ1NlbGVjdCBhIGNvbnNvbGUgZmlyc3QnKTsgcmV0dXJuOyB9CgogIHRyeSB7CiAgICB2YXIgciA9IGF3YWl0IGZldGNoKCdodHRwczovL2ZpbGViaW4ubmV0LycgKyBjZmcuZmlsZWJpbkJ1Y2tldCArICc/anNvbicsIHsgaGVhZGVyczogeyAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfSk7CiAgICBpZiAoIXIub2spIHsgc2hvd1RvYXN0KCdGYWlsZWQ6ICcgKyByLnN0YXR1c1RleHQpOyByZXR1cm47IH0KICAgIHZhciBqID0gYXdhaXQgci5qc29uKCk7CiAgICBpZiAoIWouZmlsZXMgfHwgIWouZmlsZXMubGVuZ3RoKSB7IHNob3dUb2FzdCgnTm8gZmlsZXMgZm91bmQnKTsgcmV0dXJuOyB9CgogICAgdmFyIHBsYXRmb3JtRmlsZXMgPSBqLmZpbGVzLmZpbHRlcihmdW5jdGlvbihmaWxlKSB7IHJldHVybiBmaWxlLmZpbGVuYW1lLmVuZHNXaXRoKGNmZy5jbGllbnRGaWxlRXh0KTsgfSk7CiAgICBpZiAocGxhdGZvcm1GaWxlcy5sZW5ndGggPT09IDApIHsgc2hvd1RvYXN0KCdObyAnICsgY2ZnLmxhYmVsICsgJyBmaWxlcyBmb3VuZCcpOyByZXR1cm47IH0KCiAgICBjYWNoZWRCaW5GaWxlcyA9IHBsYXRmb3JtRmlsZXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBuZXcgRGF0ZShiLnVwZGF0ZWRfYXQpIC0gbmV3IERhdGUoYS51cGRhdGVkX2F0KTsgfSk7CiAgICBiaW5MaXN0UGFnZSA9IDA7CiAgICByZW5kZXJCaW5MaXN0KCk7CiAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IHNob3dUb2FzdCgnRXJyb3IgZmV0Y2hpbmcgdXBsb2FkcycpOyB9Cn0pOwoKZnVuY3Rpb24gcmVuZGVyQmluTGlzdCgpIHsKICBpZiAoIWNhY2hlZEJpbkZpbGVzKSByZXR1cm47CiAgdmFyIGNmZyA9IGFjdGl2ZUNvbmZpZygpOwogIHZhciBzdGFydCA9IGJpbkxpc3RQYWdlICogYmluTGlzdFBhZ2VTaXplOwogIHZhciBwYWdlRmlsZXMgPSBjYWNoZWRCaW5GaWxlcy5zbGljZShzdGFydCwgc3RhcnQgKyBiaW5MaXN0UGFnZVNpemUpOwogIHZhciBoYXNNb3JlID0gc3RhcnQgKyBiaW5MaXN0UGFnZVNpemUgPCBjYWNoZWRCaW5GaWxlcy5sZW5ndGg7CgogIHZhciBodG1sID0gJzxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpsZWZ0O21hcmdpbi1ib3R0b206OHB4OyI+JyArCiAgICAnPGJ1dHRvbiBpZD0iY2xvc2VCaW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7Ij5DbG9zZTwvYnV0dG9uPicgKwogICAgJzxzdHJvbmc+UmVjZW50IFVwbG9hZHM8L3N0cm9uZz48L2Rpdj4nICsKICAgICc8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjhweDttYXJnaW4tYm90dG9tOjhweDsiPicgKwogICAgJzxidXR0b24gaWQ9InByZXZQYWdlIiBjbGFzcz0iYnRuIGdob3N0IiBzdHlsZT0icGFkZGluZzo0cHggOHB4O2ZsZXg6MTsiICcgKyAoYmluTGlzdFBhZ2UgPT09IDAgPyAnZGlzYWJsZWQnIDogJycpICsgJz5QcmV2PC9idXR0b24+JyArCiAgICAnPHNwYW4gc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6IzZiNzI4MDsiPlBhZ2UgJyArIChiaW5MaXN0UGFnZSArIDEpICsgJzwvc3Bhbj4nICsKICAgICc8YnV0dG9uIGlkPSJuZXh0UGFnZSIgY2xhc3M9ImJ0biBnaG9zdCIgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtmbGV4OjE7IiAnICsgKCFoYXNNb3JlID8gJ2Rpc2FibGVkJyA6ICcnKSArICc+TmV4dDwvYnV0dG9uPjwvZGl2PicgKwogICAgJzx1bCBzdHlsZT0ibWFyZ2luOjA7cGFkZGluZy1sZWZ0OjIwcHg7bGlzdC1zdHlsZTpub25lOyI+JzsKCiAgcGFnZUZpbGVzLmZvckVhY2goZnVuY3Rpb24oZmlsZSkgewogICAgdmFyIGZpbGVVcmwgPSAnaHR0cHM6Ly9maWxlYmluLm5ldC8nICsgY2ZnLmZpbGViaW5CdWNrZXQgKyAnLycgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZS5maWxlbmFtZSk7CiAgICB2YXIgZCA9IG5ldyBEYXRlKGZpbGUudXBkYXRlZF9hdCk7CiAgICB2YXIgZGF0ZVN0ciA9IGQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkucmVwbGFjZSgvLS9nLCAnJyk7CiAgICB2YXIgaCA9IGQuZ2V0SG91cnMoKSwgbSA9IGQuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgIHZhciBhbXBtID0gaCA+PSAxMiA/ICdQTScgOiAnQU0nOwogICAgdmFyIHRpbWVTdHIgPSAoaCAlIDEyIHx8IDEyKSArICc6JyArIG0gKyAnICcgKyBhbXBtOwogICAgdmFyIHN0cmlwcGVkID0gZmlsZS5maWxlbmFtZS5zcGxpdCgnLicpLnNsaWNlKDAsIC0xKS5qb2luKCcuJyk7CiAgICBodG1sICs9ICc8bGkgc3R5bGU9Im1hcmdpbi1ib3R0b206NnB4O2ZvbnQtc2l6ZToxMnB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDsiPicgKwogICAgICAnPGJ1dHRvbiBjbGFzcz0iYnRuLWxvYWQtZmlsZSIgZGF0YS11cmw9IicgKyBmaWxlVXJsICsgJyIgZGF0YS1maWxlbmFtZT0iJyArIGZpbGUuZmlsZW5hbWUgKyAnIiBzdHlsZT0icGFkZGluZzoycHggNnB4O2ZvbnQtc2l6ZToxMHB4O2JhY2tncm91bmQ6IzNiODJmNjtjb2xvcjojZmZmO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O2N1cnNvcjpwb2ludGVyOyI+TG9hZDwvYnV0dG9uPicgKwogICAgICAnPGEgaHJlZj0iJyArIGZpbGVVcmwgKyAnIiB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9InRleHQtZGVjb3JhdGlvbjpub25lO2NvbG9yOiMwMzY2ZDY7ZmxleDoxOyI+JyArIGRhdGVTdHIgKyAnICcgKyB0aW1lU3RyICsgJyB8ICcgKyBzdHJpcHBlZCArICcgfCAnICsgKGZpbGUuYnl0ZXNfcmVhZGFibGUgfHwgJycpICsgJzwvYT48L2xpPic7CiAgfSk7CiAgaHRtbCArPSAnPC91bD4nOwoKICB2YXIgY29udGFpbmVyID0gJCgnZmlsZUxpc3RDb250YWluZXInKTsKICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDsKICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmQgPSAnI2Y5ZmFmYic7CiAgY29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTJweCc7CiAgY29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnOwogIGNvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSAnMzAwcHgnOwogIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7CgogICQoJ2Nsb3NlQmluJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGNhY2hlZEJpbkZpbGVzID0gbnVsbDsgfSk7CiAgdmFyIHByZXYgPSAkKCdwcmV2UGFnZScpOwogIGlmIChwcmV2ICYmIGJpbkxpc3RQYWdlID4gMCkgcHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgeyBiaW5MaXN0UGFnZS0tOyByZW5kZXJCaW5MaXN0KCk7IH0pOwogIHZhciBuZXh0ID0gJCgnbmV4dFBhZ2UnKTsKICBpZiAobmV4dCAmJiBoYXNNb3JlKSBuZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7IGJpbkxpc3RQYWdlKys7IHJlbmRlckJpbkxpc3QoKTsgfSk7CgogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG4tbG9hZC1maWxlJykuZm9yRWFjaChmdW5jdGlvbihidG4pIHsKICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICB2YXIgdXJsID0gYnRuLmRhdGFzZXQudXJsOwogICAgICBidG4udGV4dENvbnRlbnQgPSAnLi4uJzsKICAgICAgYnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9mZXRjaCcsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXJsOiB1cmwgfSkKICAgICAgICB9KTsKICAgICAgICB2YXIgcmVzdWx0ID0gYXdhaXQgcmVzLmpzb24oKTsKICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyAhPT0gJ29rJykgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5tZXNzYWdlIHx8ICdGZXRjaCBmYWlsZWQnKTsKCiAgICAgICAgdmFyIGNzID0gYWN0aXZlU3RhdGUoKTsKICAgICAgICB2YXIgbGluZXMgPSByZXN1bHQuY29udGVudC5zcGxpdCgnXG4nKS5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy50cmltKCk7IH0pLmZpbHRlcihCb29sZWFuKTsKICAgICAgICBjcy5zZWxlY3RlZCA9IFtdOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykuZm9yRWFjaChmdW5jdGlvbihpKSB7IGkuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsgfSk7CiAgICAgICAgbGluZXMuZm9yRWFjaChmdW5jdGlvbih0aXRsZSkgewogICAgICAgICAgdmFyIGxlZnQgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoZnVuY3Rpb24oaSkgeyByZXR1cm4gaS5kYXRhc2V0Lm5hbWUgPT09IHRpdGxlOyB9KTsKICAgICAgICAgIGlmIChsZWZ0KSB7CiAgICAgICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgY3Muc2VsZWN0ZWQucHVzaCh7IG5hbWU6IGxlZnQuZGF0YXNldC5uYW1lLCBmaWxlbmFtZTogbGVmdC5kYXRhc2V0LmZpbGVuYW1lIHx8IGxlZnQuZGF0YXNldC5uYW1lLCBzaXplOiBsZWZ0LmRhdGFzZXQuc2l6ZSB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB1cGRhdGVUb3RhbHMoKTsKICAgICAgICBzaG93QmFubmVyKCdMb2FkZWQgJyArIGxpbmVzLmxlbmd0aCArICcgaXRlbXMnLCAyMDAwKTsKICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICBjYWNoZWRCaW5GaWxlcyA9IG51bGw7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIHNob3dCYW5uZXIoJ0xpc3RlbmVyIG5vdCBydW5uaW5nIG9yIGxvYWQgZmFpbGVkJywgMzAwMCk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgYnRuLnRleHRDb250ZW50ID0gJ0xvYWQnOwogICAgICAgIGJ0bi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9KTsKICB9KTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gTUFUQ0ggTElTVCA9PT09PT09PT09PT09PT09PT09PQokKCdtYXRjaExpc3QnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogIHZhciBjcyA9IGFjdGl2ZVN0YXRlKCk7CiAgaWYgKCFjcyB8fCBjcy5pdGVtcy5sZW5ndGggPT09IDApIHsgc2hvd1RvYXN0KCdMb2FkIGEgY29uc29sZSBmaXJzdCcpOyByZXR1cm47IH0KCiAgdmFyIG1vZGFsID0gJCgnZmlsZXNNb2RhbCcpOwogIG1vZGFsLmlubmVySFRNTCA9ICcnOwogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIG1vZGFsLnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JzsKCiAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGhlYWRlci5pbm5lckhUTUwgPSAnPHN0cm9uZz5NYXRjaCBVc2VyIExpc3Q8L3N0cm9uZz48YnI+PHNwYW4gY2xhc3M9Im1ldGEiPlBhc3RlIHVzZXJcJ3MgZ2FtZSBsaXN0IChvbmUgcGVyIGxpbmUpPC9zcGFuPic7CiAgbW9kYWwuYXBwZW5kQ2hpbGQoaGVhZGVyKTsKCiAgdmFyIHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsKICB0ZXh0YXJlYS5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOjEwMCU7bWluLWhlaWdodDoyMDBweDttYXJnaW4tdG9wOjEycHg7cGFkZGluZzo4cHg7Ym9yZGVyOjFweCBzb2xpZCAjNDM0MzQ1O2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtZmFtaWx5Om1vbm9zcGFjZTtmb250LXNpemU6MTNweDsnOwogIHRleHRhcmVhLnBsYWNlaG9sZGVyID0gJ0dhbWUgVGl0bGUgMVxuR2FtZSBUaXRsZSAyXG4uLi4nOwogIG1vZGFsLmFwcGVuZENoaWxkKHRleHRhcmVhKTsKCiAgdmFyIGJ0blJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGJ0blJvdy5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6ZmxleDttYXJnaW4tdG9wOjEycHg7JzsKICB2YXIgbWF0Y2hCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICBtYXRjaEJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9ICc4cHgnOwogIG1hdGNoQnRuLnRleHRDb250ZW50ID0gJ0FuYWx5emUgJiBNYXRjaCc7CiAgbWF0Y2hCdG4uY2xhc3NOYW1lID0gJ2J0biBidG4tcHJpbWFyeSc7CiAgbWF0Y2hCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyBzaG93TWF0Y2hSZXN1bHRzKHRleHRhcmVhLnZhbHVlLnRyaW0oKSwgY3MpOyB9OwogIGJ0blJvdy5hcHBlbmRDaGlsZChtYXRjaEJ0bik7CiAgdmFyIGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgY2xvc2VCdG4udGV4dENvbnRlbnQgPSAnQ2FuY2VsJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH07CiAgYnRuUm93LmFwcGVuZENoaWxkKGNsb3NlQnRuKTsKICBtb2RhbC5hcHBlbmRDaGlsZChidG5Sb3cpOwp9KTsKCmZ1bmN0aW9uIHNob3dNYXRjaFJlc3VsdHModXNlckxpc3QsIGNzKSB7CiAgaWYgKCF1c2VyTGlzdCkgeyBhbGVydCgnUGxlYXNlIHBhc3RlIGEgZ2FtZSBsaXN0Jyk7IHJldHVybjsgfQogIHZhciBsaW5lcyA9IHVzZXJMaXN0LnNwbGl0KCdcbicpLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBzLnRyaW0oKTsgfSkuZmlsdGVyKEJvb2xlYW4pOwogIHZhciByZXN1bHRzID0geyBleGFjdDogW10sIGhpZ2g6IFtdLCBub3RGb3VuZDogW10gfTsKCiAgbGluZXMuZm9yRWFjaChmdW5jdGlvbih1c2VyVGl0bGUpIHsKICAgIHZhciBub3JtYWxpemVkID0gdXNlclRpdGxlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15cd1xzXS9nLCAnICcpLnJlcGxhY2UoL1xzKy9nLCAnICcpLnRyaW0oKTsKICAgIHZhciBleGFjdE1hdGNoID0gY3MuaXRlbXMuZmluZChmdW5jdGlvbihpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXlx3XHNdL2csICcgJykucmVwbGFjZSgvXHMrL2csICcgJykudHJpbSgpID09PSBub3JtYWxpemVkOwogICAgfSk7CiAgICBpZiAoZXhhY3RNYXRjaCkgewogICAgICByZXN1bHRzLmV4YWN0LnB1c2goeyBvcmlnaW5hbDogdXNlclRpdGxlLCBtYXRjaGVkOiBleGFjdE1hdGNoLm5hbWUsIHNpemU6IGV4YWN0TWF0Y2guc2l6ZSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIFN1YnN0cmluZyBtYXRjaAogICAgICB2YXIgcGFydGlhbE1hdGNoID0gY3MuaXRlbXMuZmluZChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgdmFyIGRiTm9ybSA9IGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teXHdcc10vZywgJyAnKS5yZXBsYWNlKC9ccysvZywgJyAnKS50cmltKCk7CiAgICAgICAgcmV0dXJuIGRiTm9ybS5pbmNsdWRlcyhub3JtYWxpemVkKSB8fCBub3JtYWxpemVkLmluY2x1ZGVzKGRiTm9ybSk7CiAgICAgIH0pOwogICAgICBpZiAocGFydGlhbE1hdGNoKSB7CiAgICAgICAgcmVzdWx0cy5oaWdoLnB1c2goeyBvcmlnaW5hbDogdXNlclRpdGxlLCBtYXRjaGVkOiBwYXJ0aWFsTWF0Y2gubmFtZSwgc2l6ZTogcGFydGlhbE1hdGNoLnNpemUgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0cy5ub3RGb3VuZC5wdXNoKHVzZXJUaXRsZSk7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgdmFyIHRvdGFsTWF0Y2hlZCA9IHJlc3VsdHMuZXhhY3QubGVuZ3RoICsgcmVzdWx0cy5oaWdoLmxlbmd0aDsKICB2YXIgbW9kYWwgPSAkKCdmaWxlc01vZGFsJyk7CiAgbW9kYWwuaW5uZXJIVE1MID0gJyc7CiAgbW9kYWwuc3R5bGUubWF4V2lkdGggPSAnNzAwcHgnOwogIG1vZGFsLnN0eWxlLm1heEhlaWdodCA9ICc4MHZoJzsKCiAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGhlYWRlci5pbm5lckhUTUwgPSAnPHN0cm9uZz5NYXRjaCBSZXN1bHRzPC9zdHJvbmc+PGJyPjxzcGFuIGNsYXNzPSJtZXRhIj5NYXRjaGVkOiAnICsgdG90YWxNYXRjaGVkICsgJyAvICcgKyBsaW5lcy5sZW5ndGggKyAnPC9zcGFuPic7CiAgbW9kYWwuYXBwZW5kQ2hpbGQoaGVhZGVyKTsKCiAgdmFyIHJjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgcmMuc3R5bGUuY3NzVGV4dCA9ICdtYXJnaW4tdG9wOjEycHg7bWF4LWhlaWdodDo0MDBweDtvdmVyZmxvdy15OmF1dG87JzsKCiAgaWYgKHJlc3VsdHMuZXhhY3QubGVuZ3RoID4gMCkgewogICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjhweDsiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOiMxMGI5ODE7Ij5FeGFjdCAoJyArIHJlc3VsdHMuZXhhY3QubGVuZ3RoICsgJyk8L3N0cm9uZz48L2Rpdj4nOwogICAgcmVzdWx0cy5leGFjdC5mb3JFYWNoKGZ1bmN0aW9uKHIpIHsKICAgICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZjBmZGY0O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMTBiOTgxO21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMxMTE7Ij4nICsgZXNjKHIubWF0Y2hlZCkgKyAnIDxzcGFuIHN0eWxlPSJjb2xvcjojNmI3MjgwOyI+JyArIGVzYyhyLnNpemUpICsgJzwvc3Bhbj48L2Rpdj4nOwogICAgfSk7CiAgfQogIGlmIChyZXN1bHRzLmhpZ2gubGVuZ3RoID4gMCkgewogICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJtYXJnaW46MTJweCAwIDhweDsiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOiMzYjgyZjY7Ij5QYXJ0aWFsICgnICsgcmVzdWx0cy5oaWdoLmxlbmd0aCArICcpPC9zdHJvbmc+PC9kaXY+JzsKICAgIHJlc3VsdHMuaGlnaC5mb3JFYWNoKGZ1bmN0aW9uKHIpIHsKICAgICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZWZmNmZmO2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjM2I4MmY2O21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMxMTE7Ij4nICsgZXNjKHIub3JpZ2luYWwpICsgJyAmcmFycjsgPHN0cm9uZz4nICsgZXNjKHIubWF0Y2hlZCkgKyAnPC9zdHJvbmc+PC9kaXY+JzsKICAgIH0pOwogIH0KICBpZiAocmVzdWx0cy5ub3RGb3VuZC5sZW5ndGggPiAwKSB7CiAgICByYy5pbm5lckhUTUwgKz0gJzxkaXYgc3R5bGU9Im1hcmdpbjoxMnB4IDAgOHB4OyI+PHN0cm9uZyBzdHlsZT0iY29sb3I6I2VmNDQ0NDsiPk5vdCBGb3VuZCAoJyArIHJlc3VsdHMubm90Rm91bmQubGVuZ3RoICsgJyk8L3N0cm9uZz48L2Rpdj4nOwogICAgcmVzdWx0cy5ub3RGb3VuZC5mb3JFYWNoKGZ1bmN0aW9uKHQpIHsKICAgICAgcmMuaW5uZXJIVE1MICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZmVmMmYyO2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZWY0NDQ0O21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOiMxMTE7Ij4nICsgZXNjKHQpICsgJzwvZGl2Pic7CiAgICB9KTsKICB9CiAgbW9kYWwuYXBwZW5kQ2hpbGQocmMpOwoKICB2YXIgYnRuUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgYnRuUm93LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpmbGV4O21hcmdpbi10b3A6MTJweDtmbGV4LXdyYXA6d3JhcDsnOwogIGlmICh0b3RhbE1hdGNoZWQgPiAwKSB7CiAgICB2YXIgYWRkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICBhZGRCdG4udGV4dENvbnRlbnQgPSAnQWRkICcgKyB0b3RhbE1hdGNoZWQgKyAnIE1hdGNoZXMnOwogICAgYWRkQnRuLmNsYXNzTmFtZSA9ICdidG4gYnRuLXByaW1hcnknOwogICAgYWRkQnRuLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzhweCc7CiAgICBhZGRCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgYWRkZWQgPSAwOwogICAgICBbXS5jb25jYXQocmVzdWx0cy5leGFjdCwgcmVzdWx0cy5oaWdoKS5mb3JFYWNoKGZ1bmN0aW9uKHIpIHsKICAgICAgICBpZiAoIWNzLnNlbGVjdGVkLnNvbWUoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5uYW1lID09PSByLm1hdGNoZWQ7IH0pKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IGNzLml0ZW1zLmZpbmQoZnVuY3Rpb24oaXQpIHsgcmV0dXJuIGl0Lm5hbWUgPT09IHIubWF0Y2hlZDsgfSk7CiAgICAgICAgICBpZiAoaXRlbSkgeyBjcy5zZWxlY3RlZC5wdXNoKHsgbmFtZTogaXRlbS5uYW1lLCBmaWxlbmFtZTogaXRlbS5maWxlbmFtZSB8fCBpdGVtLm5hbWUsIHNpemU6IGl0ZW0uc2l6ZSB9KTsgYWRkZWQrKzsgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHVwZGF0ZVRvdGFscygpOyByZW5kZXJPdmVybGF5KCk7IHJlbmRlckxpc3QoY3MuaXRlbXMpOwogICAgICBpZiAoc3RhdGUubW9kZSA9PT0gJ21peCcpIHsgYnVpbGRNaXhUYWJzKCk7IHVwZGF0ZUdyYW5kVG90YWwoKTsgfQogICAgICB1cGRhdGVDb25zb2xlQ2hpcHMoKTsKICAgICAgc2hvd1RvYXN0KCdBZGRlZCAnICsgYWRkZWQgKyAnIGdhbWVzJyk7CiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICB9OwogICAgYnRuUm93LmFwcGVuZENoaWxkKGFkZEJ0bik7CiAgfQogIHZhciBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGNsb3NlQnRuLnRleHRDb250ZW50ID0gJ0Nsb3NlJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH07CiAgYnRuUm93LmFwcGVuZENoaWxkKGNsb3NlQnRuKTsKICBtb2RhbC5hcHBlbmRDaGlsZChidG5Sb3cpOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PSBUSEVNRSBUT0dHTEUgPT09PT09PT09PT09PT09PT09PT0KdmFyIG5pbnRlbmRvVGltZXIgPSBudWxsLCBuaW50ZW5kb0NvdW50ZG93biA9IG51bGw7CnZhciBOSU5URU5ET19IT0xEX1RJTUUgPSAyNTAwOwp2YXIgY2xlYXJCdG4gPSAkKCdjbGVhclNlYXJjaCcpOwp2YXIgY291bnRkb3duRWwgPSAkKCd0aGVtZUNvdW50ZG93bicpOwp2YXIgY291bnRkb3duTnVtID0gY291bnRkb3duRWwucXVlcnlTZWxlY3RvcignLmNvdW50ZG93bi1udW0nKTsKCmZ1bmN0aW9uIGdldEN1cnJlbnRNb2RlKCkgewogIGlmIChpc0xlZ2FjeU1vZGUpIHJldHVybiAnbGVnYWN5JzsKICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScpID09PSAnbmludGVuZG8nKSByZXR1cm4gJ25pbnRlbmRvJzsKICByZXR1cm4gJ21haW4nOwp9CmZ1bmN0aW9uIGdldE5leHRNb2RlKCkgewogIHZhciBjID0gZ2V0Q3VycmVudE1vZGUoKTsKICBpZiAoYyA9PT0gJ21haW4nKSByZXR1cm4gJ25pbnRlbmRvJzsKICBpZiAoYyA9PT0gJ25pbnRlbmRvJykgcmV0dXJuICdsZWdhY3knOwogIHJldHVybiAnbWFpbic7Cn0KZnVuY3Rpb24gZ2V0TW9kZUxhYmVsKG0pIHsKICBpZiAobSA9PT0gJ21haW4nKSByZXR1cm4gJ01haW4gVGhlbWUnOwogIGlmIChtID09PSAnbmludGVuZG8nKSByZXR1cm4gJ05pbnRlbmRvIFRoZW1lJzsKICByZXR1cm4gJ0xlZ2FjeSBNb2RlJzsKfQoKZnVuY3Rpb24gc3RhcnROaW50ZW5kb1RpbWVyKGUpIHsKICBlLnByZXZlbnREZWZhdWx0KCk7CiAgY2xlYXJCdG4uY2xhc3NMaXN0LmFkZCgnaG9sZGluZycpOwogIHZhciByZW1haW5pbmcgPSAzOwogIGNvdW50ZG93bk51bS50ZXh0Q29udGVudCA9IHJlbWFpbmluZzsKICBjb3VudGRvd25FbC5xdWVyeVNlbGVjdG9yKCcuY291bnRkb3duLWxhYmVsJykudGV4dENvbnRlbnQgPSAnSG9sZCBmb3IgJyArIGdldE1vZGVMYWJlbChnZXROZXh0TW9kZSgpKTsKICBjb3VudGRvd25FbC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgbmludGVuZG9Db3VudGRvd24gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsgcmVtYWluaW5nLS07IGlmIChyZW1haW5pbmcgPiAwKSBjb3VudGRvd25OdW0udGV4dENvbnRlbnQgPSByZW1haW5pbmc7IH0sIDgwMCk7CiAgbmludGVuZG9UaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICBjbGVhckludGVydmFsKG5pbnRlbmRvQ291bnRkb3duKTsKICAgIGNvdW50ZG93bkVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgIGNsZWFyQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hvbGRpbmcnKTsKICAgIHZhciBuZXh0ID0gZ2V0TmV4dE1vZGUoKTsKICAgIHZhciB1cmwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgIGlmIChuZXh0ID09PSAnbGVnYWN5JykgewogICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZSgnbW9kZXJuJyk7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdsZWdhY3knLCAnMScpOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGhlbWUnKTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwudG9TdHJpbmcoKTsKICAgIH0gZWxzZSBpZiAobmV4dCA9PT0gJ21haW4nKSB7CiAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCdsZWdhY3knKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3RoZW1lJyk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsLnRvU3RyaW5nKCk7CiAgICB9IGVsc2UgewogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgJ25pbnRlbmRvJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsICduaW50ZW5kbycpOwogICAgICBzaG93VG9hc3QoJ05pbnRlbmRvIFRoZW1lIEFjdGl2YXRlZCEnKTsKICAgIH0KICB9LCBOSU5URU5ET19IT0xEX1RJTUUpOwp9CgpmdW5jdGlvbiBjYW5jZWxOaW50ZW5kb1RpbWVyKCkgewogIGNsZWFyVGltZW91dChuaW50ZW5kb1RpbWVyKTsKICBjbGVhckludGVydmFsKG5pbnRlbmRvQ291bnRkb3duKTsKICBjb3VudGRvd25FbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7CiAgY2xlYXJCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaG9sZGluZycpOwp9CgpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydE5pbnRlbmRvVGltZXIpOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc3RhcnROaW50ZW5kb1RpbWVyLCB7IHBhc3NpdmU6IGZhbHNlIH0pOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2FuY2VsTmludGVuZG9UaW1lcik7CmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKCmlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKSA9PT0gJ25pbnRlbmRvJykgewogIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCAnbmludGVuZG8nKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT0gUkVTVE9SRSBTQVZFRCBMSVNUID09PT09PT09PT09PT09PT09PT09CnZhciBfcGVuZGluZ1Jlc3RvcmUgPSBudWxsOyAvLyB7IGNvbnNvbGVJZDogW3tuYW1lLGZpbGVuYW1lLHNpemV9LC4uLl0sIC4uLiB9CgpmdW5jdGlvbiByZXN0b3JlU2F2ZWRMaXN0KHNhdmVkRGF0YSkgewogIC8vIHNhdmVkRGF0YSA9IHsgcHM0OiBbe25hbWUsZmlsZW5hbWUsc2l6ZX0sLi4uXSwgc3dpdGNoOiBbLi4uXSwgLi4uIH0KICBfbGlzdERpcnR5ID0gdHJ1ZTsKICBfcGVuZGluZ1Jlc3RvcmUgPSBzYXZlZERhdGE7CiAgLy8gRm9yIGFueSBjb25zb2xlIGFscmVhZHkgbG9hZGVkLCBhcHBseSBub3cKICBPYmplY3Qua2V5cyhzYXZlZERhdGEpLmZvckVhY2goZnVuY3Rpb24oY29uc29sZUlkKSB7CiAgICB2YXIgY3MgPSBzdGF0ZS5jb25zb2xlU3RhdGVzW2NvbnNvbGVJZF07CiAgICBpZiAoY3MgJiYgY3MubG9hZGVkKSB7CiAgICAgIGFwcGx5UGVuZGluZ1Jlc3RvcmUoY29uc29sZUlkKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gYXBwbHlQZW5kaW5nUmVzdG9yZShjb25zb2xlSWQpIHsKICBpZiAoIV9wZW5kaW5nUmVzdG9yZSB8fCAhX3BlbmRpbmdSZXN0b3JlW2NvbnNvbGVJZF0pIHJldHVybjsKICB2YXIgY3MgPSBnZXRDb25zb2xlU3RhdGUoY29uc29sZUlkKTsKICB2YXIgcGVuZGluZyA9IF9wZW5kaW5nUmVzdG9yZVtjb25zb2xlSWRdOwogIGRlbGV0ZSBfcGVuZGluZ1Jlc3RvcmVbY29uc29sZUlkXTsKCiAgLy8gT25seSByZXN0b3JlIGlmIGN1cnJlbnRseSBlbXB0eSAoZG9uJ3Qgb3ZlcndyaXRlIHVzZXIncyBuZXcgcGlja3MpCiAgaWYgKGNzLnNlbGVjdGVkLmxlbmd0aCA+IDApIHJldHVybjsKCiAgcGVuZGluZy5mb3JFYWNoKGZ1bmN0aW9uKHNhdmVkKSB7CiAgICAvLyBWZXJpZnkgZ2FtZSBleGlzdHMgaW4gbG9hZGVkIGl0ZW1zCiAgICB2YXIgZm91bmQgPSBjcy5pdGVtcy5maW5kKGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gc2F2ZWQubmFtZTsgfSk7CiAgICBpZiAoZm91bmQpIHsKICAgICAgY3Muc2VsZWN0ZWQucHVzaCh7IG5hbWU6IGZvdW5kLm5hbWUsIGZpbGVuYW1lOiBmb3VuZC5maWxlbmFtZSB8fCBmb3VuZC5uYW1lLCBzaXplOiBmb3VuZC5zaXplIH0pOwogICAgfQogIH0pOwoKICBpZiAoY3Muc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgcmVuZGVyT3ZlcmxheSgpOwogICAgdXBkYXRlVG90YWxzKCk7CiAgICByZW5kZXJMaXN0KGNzLml0ZW1zKTsKICAgIHNob3dUb2FzdCgnUmVzdG9yZWQgJyArIGNzLnNlbGVjdGVkLmxlbmd0aCArICcgc2F2ZWQgcGlja3MnKTsKICB9Cn0KCi8vID09PT09PT09PT09PT09PT09PT09IFBSRVZFTlQgQUNDSURFTlRBTCBDTE9TRSA9PT09PT09PT09PT09PT09PT09PQp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgZnVuY3Rpb24oZSkgewogIC8vIFNhdmUgbGlzdCBvbmUgZmluYWwgdGltZSBiZWZvcmUgY2xvc2UKICBzYXZlU2VsZWN0ZWRMaXN0KCk7CiAgLy8gT25seSB3YXJuIG9uIGxvY2FsIChhZG1pbikg4oCUIG5vbi1sb2NhbCB1c2VycyBoYXZlIGxpc3Qgc2F2ZWQgaW4gbG9jYWxTdG9yYWdlCiAgaWYgKCFpc0xvY2FsKSByZXR1cm47CiAgdmFyIGhhc1NlbGVjdGlvbiA9IGZhbHNlOwogIE9iamVjdC5rZXlzKHN0YXRlLmNvbnNvbGVTdGF0ZXMpLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgIGlmIChzdGF0ZS5jb25zb2xlU3RhdGVzW2lkXS5zZWxlY3RlZC5sZW5ndGggPiAwKSBoYXNTZWxlY3Rpb24gPSB0cnVlOwogIH0pOwogIGlmIChoYXNTZWxlY3Rpb24pIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBlLnJldHVyblZhbHVlID0gJyc7IHJldHVybiAnJzsgfQp9KTsKCi8vID09PT09PT09PT09PT09PT09PT09IFVSTCBQQVJBTVMgPT09PT09PT09PT09PT09PT09PT0KdmFyIF91cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCh0eXBlb2YgX291dGVyU2VhcmNoIT09InVuZGVmaW5lZCI/X291dGVyU2VhcmNoOndpbmRvdy5sb2NhdGlvbi5zZWFyY2gpKTsKdmFyIF9wYXJhbUNvbnNvbGUgPSAoX3VybFBhcmFtcy5nZXQoJ2NvbnNvbGUnKSB8fCAnJykudG9Mb3dlckNhc2UoKTsKdmFyIF9wYXJhbU5hbWUgPSBfdXJsUGFyYW1zLmdldCgnbmFtZScpIHx8ICcnOwoKLy8gVmFsaWRhdGUgP2NvbnNvbGU9IHBhcmFtIGFnYWluc3QgcmVnaXN0cnkKaWYgKF9wYXJhbUNvbnNvbGUgJiYgIUNPTlNPTEVTW19wYXJhbUNvbnNvbGVdKSBfcGFyYW1Db25zb2xlID0gJyc7CgovLyA9PT09PT09PT09PT09PT09PT09PSBJTklUID09PT09PT09PT09PT09PT09PT09CihmdW5jdGlvbiBpbml0KCkgewogIGJ1aWxkQ29uc29sZUNoaXBzKCk7CiAgdXBkYXRlQ29uc29sZUNoaXBzKCk7CgogIC8vID9jb25zb2xlPSBwYXJhbTogbG9jayB0byBzaW5nbGUgY29uc29sZSwgaGlkZSBtb2RlIHRvZ2dsZSArIGNvbnNvbGUgY2hpcHMKICBpZiAoX3BhcmFtQ29uc29sZSkgewogICAgJCgnY29uc29sZUJhcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgfQoKICAvLyA/bmFtZT0gcGFyYW06IHByZS1maWxsIGN1c3RvbWVyIG5hbWUKICBpZiAoX3BhcmFtTmFtZSkgewogICAgJCgnY3VzdG9tZXInKS52YWx1ZSA9IF9wYXJhbU5hbWU7CiAgICBzYXZlQ3VzdG9tZXJOYW1lKF9wYXJhbU5hbWUpOwogICAgZG9jdW1lbnQudGl0bGUgPSAnUHJlbWF6aW5nUEggR2FtZXMgLSAnICsgX3BhcmFtTmFtZTsKICB9CgogIC8vIERldGVybWluZSB3aGljaCBjb25zb2xlIHRvIGxvYWQgZmlyc3QKICB2YXIgZmlyc3RDb25zb2xlID0gX3BhcmFtQ29uc29sZSB8fCBPYmplY3Qua2V5cyhDT05TT0xFUylbMF07CiAgc3RhdGUuYWN0aXZlQ29uc29sZSA9IGZpcnN0Q29uc29sZTsKICBsb2FkQ29uc29sZShmaXJzdENvbnNvbGUpOwoKICAvLyBSZXN0b3JlIGN1c3RvbWVyIG5hbWUgZnJvbSBsb2NhbFN0b3JhZ2UgKG9ubHkgaWYgbm90IHNldCBieSBVUkwgcGFyYW0pCiAgaWYgKCFfcGFyYW1OYW1lKSB7CiAgICByZXN0b3JlQ3VzdG9tZXJOYW1lKCk7CiAgfQoKICAvLyBSZXN0b3JlIHNlbGVjdGVkIGxpc3QgZnJvbSBsb2NhbFN0b3JhZ2UgKG5vbi1sb2NhbCB1c2VycyBvbmx5KQogIHZhciBzYXZlZE5hbWUgPSBfcGFyYW1OYW1lIHx8IGxvYWRDdXN0b21lck5hbWUoKTsKICB2YXIgc2F2ZWRMaXN0ID0gbG9hZFNlbGVjdGVkTGlzdCgpOwogIGlmIChzYXZlZExpc3QpIHsKICAgIGlmIChzYXZlZE5hbWUpIHsKICAgICAgLy8gTmFtZSArIGxpc3QgYm90aCBzYXZlZCDihpIgYXV0by1yZXN0b3JlIHNpbGVudGx5CiAgICAgIHJlc3RvcmVTYXZlZExpc3Qoc2F2ZWRMaXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIExpc3QgZXhpc3RzIGJ1dCBubyBuYW1lIOKGkiBhc2sgd2hldGhlciB0byByZXN0b3JlCiAgICAgIHNob3dMaXN0UmVzdG9yZVByb21wdChzYXZlZExpc3QpOwogICAgfQogIH0KCiAgaWYgKCFzYXZlZE5hbWUgJiYgIXNhdmVkTGlzdCAmJiAhX3BhcmFtQ29uc29sZSkgewogICAgc2hvd0Jhbm5lcignUHJlbWF6aW5nUEggR2FtZXMgSHViXG5cblNlbGVjdCBhIGNvbnNvbGUsIHBpY2sgeW91ciBnYW1lcywgdGhlbiB1cGxvYWQhJywgNDAwMCk7CiAgfQoKICAvLyBIaWRlIGFkbWluLW9ubHkgY29udHJvbHMgZm9yIG5vbi1sb2NhbCB1c2VycwogIGlmICghaXNMb2NhbCkgewogICAgWydhZG1pbkV4cG9ydCcsICdiaW5MaXN0JywgJ21hdGNoTGlzdCddLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgdmFyIGVsID0gJChpZCk7CiAgICAgIGlmIChlbCkgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIH0pOwogIH0KCiAgLy8gQXV0by1mb2N1cyBzZWFyY2ggaW5wdXQgb24gZGVza3RvcCBzbyB1c2VyIGNhbiBqdXN0IHN0YXJ0IHR5cGluZwogIGlmICghaXNNb2JpbGUpIHsKICAgIHZhciBzZWFyY2hJbnB1dCA9ICQoJ3NlYXJjaCcpOwogICAgZnVuY3Rpb24gcmVmb2N1c1NlYXJjaCgpIHsKICAgICAgdmFyIGFjdGl2ZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgIGlmIChhY3RpdmUgJiYgKGFjdGl2ZS5pZCA9PT0gJ2N1c3RvbWVyJyB8fCBhY3RpdmUudGFnTmFtZSA9PT0gJ1NFTEVDVCcgfHwgYWN0aXZlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpKSByZXR1cm47CiAgICAgIHNlYXJjaElucHV0LmZvY3VzKCk7CiAgICAgIHNlYXJjaElucHV0LnNlbGVjdCgpOwogICAgfQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZWZvY3VzU2VhcmNoKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICB2YXIgZmlsZXNNb2RhbCA9ICQoJ2ZpbGVzTW9kYWwnKTsKICAgICAgdmFyIG92ZXJsYXkgPSAkKCdvdmVybGF5Jyk7CiAgICAgIHZhciBtb2RhbE9wZW4gPSBmaWxlc01vZGFsICYmIGZpbGVzTW9kYWwuc3R5bGUuZGlzcGxheSA9PT0gJ2Jsb2NrJzsKICAgICAgdmFyIG92ZXJsYXlPcGVuID0gb3ZlcmxheSAmJiBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPT09ICdmbGV4JzsKICAgICAgaWYgKCFtb2RhbE9wZW4gJiYgIW92ZXJsYXlPcGVuICYmIGUudGFyZ2V0LmlkICE9PSAnc2VhcmNoJyAmJiBlLnRhcmdldC5pZCAhPT0gJ2N1c3RvbWVyJyAmJiAhZS50YXJnZXQuY2xvc2VzdCgnc2VsZWN0JykpIHsKICAgICAgICByZWZvY3VzU2VhcmNoKCk7CiAgICAgIH0KICAgIH0pOwogIH0KfSkoKTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=`;
    var decoded = decodeURIComponent(escape(atob(base64html)));
    // Inject outer page's URL params into iframe so ?local=1, ?console=, ?name= work
    var qs = window.location.search;
    if (qs) decoded = decoded.replace('<head>', '<head><script>var _outerSearch="'+qs+'";</'+'script>');
    const iframe = document.getElementById('viewer');
    const doc = iframe.contentWindow.document;
    doc.open();
    doc.write(decoded);
    doc.close();
  </script>
</body>
</html>