<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>PremazingPH Switch Games</title>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; }
    iframe { border: none; width: 100%; height: 100%; }
  </style>
</head>
<body>
  <iframe id="viewer"></iframe>
  <script>
    const base64html = `PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCjxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPg0KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEiIC8+DQo8dGl0bGU+U3dpdGNoIEdhbWVzIOKAlCBSZXY2PC90aXRsZT4NCjxzdHlsZT4NCjpyb290ey0tYmc6I2Y0ZjZmODstLXBhbmVsOiNmZmY7LS1tdXRlZDojNmI3MjgwOy0tcHJpbWFyeTojMDM2NmQ2Oy0tYWNjZW50OiNmZjhhMDA7LS1kYW5nZXI6I2VmNDQ0NDstLXJhZGl1czoxMHB4fQ0KKntib3gtc2l6aW5nOmJvcmRlci1ib3h9DQpodG1sLGJvZHl7aGVpZ2h0OjEwMCU7bWFyZ2luOjA7Zm9udC1mYW1pbHk6SW50ZXIsU2Vnb2UgVUksQXJpYWwsc2Fucy1zZXJpZjtiYWNrZ3JvdW5kOnZhcigtLWJnKTtjb2xvcjojMTExfQ0KLmhlYWRlcntwb3NpdGlvbjpmaXhlZDt0b3A6MDtyaWdodDowO2xlZnQ6MDtoZWlnaHQ6NzZweDtiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O3BhZGRpbmc6MTBweCAxNHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlNmVlZjY7ei1pbmRleDo2MH0NCi5oZWFkZXIgLnNlYXJjaHtmbGV4OjE7bWluLXdpZHRoOjE2MHB4fQ0KLmhlYWRlciBpbnB1dC5zZWFyY2gsIC5oZWFkZXIgYnV0dG9ue2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6MXB4IHNvbGlkICNlNmVlZjY7cGFkZGluZzowIDEycHh9DQouaGVhZGVyIC5hY3Rpb25ze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlcn0NCi5oZWFkZXIgLnVwbG9hZHtiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtwYWRkaW5nOjEwcHggMTZweDtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC13ZWlnaHQ6NjAwfQ0KLmNvbnRhaW5lcntkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAzODBweDtnYXA6MTJweDtwYWRkaW5nOmNhbGMoNzZweCArIDEycHgpIDEycHggMTZweDtoZWlnaHQ6Y2FsYygxMDB2aCAtIDg4cHgpfQ0KLmxlZnRQYW5le2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2JvcmRlci1yYWRpdXM6MTJweDtwYWRkaW5nOjEycHg7b3ZlcmZsb3c6YXV0bztib3gtc2hhZG93OjAgNnB4IDE4cHggcmdiYSgxMiwxOCwzMCwwLjA0KX0NCi5yaWdodFBhbmV7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Ym9yZGVyLXJhZGl1czoxMnB4O3BhZGRpbmc6MTJweDtvdmVyZmxvdzpoaWRkZW47Ym94LXNoYWRvdzowIDZweCAxOHB4IHJnYmEoMTIsMTgsMzAsMC4wNCk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0NCi5pdGVte2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzoxMHB4O2JvcmRlci1yYWRpdXM6OHB4O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWJvdHRvbTo4cHh9DQouaXRlbTpob3ZlcntiYWNrZ3JvdW5kOiNmYmZkZmZ9DQouaXRlbS5zZWxlY3RlZHtiYWNrZ3JvdW5kOiMwYjNiNjY7Y29sb3I6I2ZmZn0NCg0KLm1ldGF7Zm9udC1zaXplOjEycHg7Y29sb3I6dmFyKC0tbXV0ZWQpfQ0KLmNvbnRyb2xze2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDFmcjtnYXA6OHB4O21hcmdpbi1ib3R0b206OHB4fQ0KLmNvbnRyb2xzIC5mdWxse2dyaWQtY29sdW1uOjEgLyAtMX0NCi5maWxlbmFtZS1wcmV2aWV3e2dyaWQtY29sdW1uOjEgLyAtMTtwYWRkaW5nOjhweDtiYWNrZ3JvdW5kOiNmOWZhZmI7Ym9yZGVyOjFweCBzb2xpZCAjZTVlN2ViO2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtZmFtaWx5Om1vbm9zcGFjZTtvdmVyZmxvdy14OmF1dG87d2hpdGUtc3BhY2U6bm93cmFwfQ0KLmluZm9Sb3d7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjEwcHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojZmZmO21hcmdpbi10b3A6OHB4O2JvcmRlcjoxcHggc29saWQgI2YxZjVmOX0NCi5idG57cGFkZGluZzo4cHggMTJweDtib3JkZXItcmFkaXVzOjhweDtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmY7Y3Vyc29yOnBvaW50ZXJ9DQouYnRuLmdob3N0e2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyOjFweCBzb2xpZCAjZTZlZWY2fQ0KLnNtYWxse2ZvbnQtc2l6ZToxM3B4O2NvbG9yOnZhcigtLW11dGVkKX0NCi5vdmVybGF5e3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDIxNSwyNDAsMjUwLC45NSk7ZGlzcGxheTpub25lO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt6LWluZGV4OjE1MH0NCi5vdmVybGF5IC5oZWFke2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjEycHg7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNTUpO2FsaWduLWl0ZW1zOmNlbnRlcn0NCi5vdmVybGF5IC5ib2R5e3BhZGRpbmc6MTJweDtvdmVyZmxvdzphdXRvO2ZsZXg6MX0NCi5vdmVybGF5IC5yb3d7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjtwYWRkaW5nOjhweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpfQ0KDQovKiBIaWdobGlnaHQgcmVjZW50bHkgbW92ZWQgaXRlbSAqLw0KLm92ZXJsYXkgLnJvdy5oaWdobGlnaHQgew0KICBiYWNrZ3JvdW5kOiAjZmZmM2NkOyAgIC8qIHNvZnQgeWVsbG93ICovDQogIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC42cyBlYXNlOw0KfQ0KI2ZpbGVzTW9kYWw6OmJhY2tkcm9wIHsNCiAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjMpOw0KfQ0KLyogUmVkIHdhcm5pbmcgZm9yIG92ZXJmbG93ICovDQojdG90YWxzLmV4Y2VlZGVkIHsNCiAgY29sb3I6ICNjMDA7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLmJ0bi5kYW5nZXIgew0KICBiYWNrZ3JvdW5kOiAjYzAwOw0KICBjb2xvcjogI2ZmZjsNCn0NCg0KDQoub3ZlcmxheSBidXR0b24uaWNvbntwYWRkaW5nOjZweCA4cHg7Ym9yZGVyLXJhZGl1czo2cHg7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWxlZnQ6NnB4fQ0KLm92ZXJsYXkgYnV0dG9uLnVwLCAub3ZlcmxheSBidXR0b24uZG93bntiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6IzExMX0NCi5vdmVybGF5IGJ1dHRvbi5yZW1vdmV7YmFja2dyb3VuZDp2YXIoLS1kYW5nZXIpO2NvbG9yOiNmZmZ9DQouZm9vdGVyQ29udHJvbHN7ZGlzcGxheTpmbGV4O2dhcDo4cHg7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyfQ0KQG1lZGlhIChtYXgtd2lkdGg6OTAwcHgpew0KICAuY29udGFpbmVye2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnI7IHBhZGRpbmctdG9wOmNhbGMoNzZweCArIDhweCl9DQogIC5yaWdodFBhbmV7b3JkZXI6LTF9DQogIC5oZWFkZXJ7cGFkZGluZzo4cHh9DQp9DQoNCi8qIERlc2t0b3Agc2lkZS1ieS1zaWRlIHNlbGVjdGVkIHBhbmVsICovDQouc2VsZWN0ZWQtcGFuZWwgew0KICBtYXJnaW4tdG9wOiAxMnB4Ow0KICBiYWNrZ3JvdW5kOiB2YXIoLS1wYW5lbCk7DQogIGJvcmRlcjogMXB4IHNvbGlkICNlNmVlZjY7DQogIGJvcmRlci1yYWRpdXM6IDEwcHg7DQogIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjA1KTsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgaGVpZ2h0OiAxMDAlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQouc2VsZWN0ZWQtcGFuZWwgLmhlYWQgew0KICBiYWNrZ3JvdW5kOiAjZjhmYWZjOw0KICBwYWRkaW5nOiA4cHggMTJweDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlNmVlZjY7DQogIGZvbnQtd2VpZ2h0OiA2MDA7DQogIGZvbnQtc2l6ZTogMTRweDsNCn0NCg0KLnNlbGVjdGVkLXBhbmVsIC5ib2R5IHsNCiAgZmxleDogMTsNCiAgb3ZlcmZsb3cteTogYXV0bzsNCiAgZm9udC1zaXplOiAxM3B4Ow0KICBwYWRkaW5nOiA4cHggMTJweDsNCn0NCg0KLyogSGlkZSBvbiBtb2JpbGUgKi8NCkBtZWRpYSAobWF4LXdpZHRoOiA5MDBweCkgew0KICAuc2VsZWN0ZWQtcGFuZWwgew0KICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsNCiAgfQ0KfQ0KLyogLS0tIENvbmZpZ3VyYXRpb24gc2VjdGlvbiB2aXNpYmlsaXR5IC0tLSAqLw0KLmNvbmZpZy1zZWN0aW9uIHsNCiAgdHJhbnNpdGlvbjogYWxsIDAuMjVzIGVhc2U7DQp9DQoNCi5tb2JpbGUtb25seSB7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoNCi8qIE1vYmlsZSBiZWhhdmlvciAqLw0KQG1lZGlhIChtYXgtd2lkdGg6IDkwMHB4KSB7DQogIC5tb2JpbGUtb25seSB7DQogICAgZGlzcGxheTogYmxvY2s7DQogIH0NCg0KICAuY29uZmlnLXNlY3Rpb24gew0KICAgIGRpc3BsYXk6IG5vbmU7DQogIH0NCg0KICAuY29uZmlnLXNlY3Rpb24uYWN0aXZlIHsNCiAgICBkaXNwbGF5OiBibG9jazsNCiAgfQ0KfQ0KDQo8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQogIDxkaXYgY2xhc3M9ImhlYWRlciI+DQogICAgPCEtLTxidXR0b24gaWQ9InJlbG9hZEJ0biIgY2xhc3M9ImJ0biBkYW5nZXIiPlJlbG9hZDwvYnV0dG9uPi0tPg0KPGlucHV0IGlkPSJzZWFyY2giIGNsYXNzPSJzZWFyY2giIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJTZWFyY2ggZ2FtZXMuLi4iPg0KICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPg0KICAgICAgPGJ1dHRvbiBpZD0iY2xlYXJTZWFyY2giIGNsYXNzPSJidG4gZ2hvc3QiPn48L2J1dHRvbj4NCiAgICAgIDxidXR0b24gaWQ9InNob3dTZWxlY3RlZCIgY2xhc3M9ImJ0biBnaG9zdCI+U2hvdyBTZWxlY3RlZDwvYnV0dG9uPg0KICAgICAgPGJ1dHRvbiBpZD0idXBsb2FkQnRuIiBjbGFzcz0iYnRuIGdob3N0Ij5VcGxvYWQ8L2J1dHRvbj4NCg0KICAgIDwvZGl2Pg0KICA8L2Rpdj4NCg0KICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPg0KICAgIDxzZWN0aW9uIGNsYXNzPSJsZWZ0UGFuZSIgaWQ9ImxlZnRQYW5lIiBhcmlhLWxhYmVsPSJHYW1lIGxpc3QiPg0KICAgICAgPCEtLSBsaXN0IGluamVjdGVkIC0tPg0KICAgIDwvc2VjdGlvbj4NCg0KICAgIDxhc2lkZSBjbGFzcz0icmlnaHRQYW5lIj4NCjwhLS0gQ29uZmlnIHNlY3Rpb24gLS0+DQo8YnV0dG9uIGlkPSJ0b2dnbGVDb25maWciIGNsYXNzPSJidG4gZ2hvc3QgbW9iaWxlLW9ubHkiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjhweDsiPkhpZGUgQ29uZmlndXJhdGlvbjwvYnV0dG9uPg0KDQo8ZGl2IGlkPSJjb25maWdTZWN0aW9uIiBjbGFzcz0iY29uZmlnLXNlY3Rpb24iPg0KICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMiPg0KICAgICAgICA8aW5wdXQgaWQ9ImN1c3RvbWVyIiBjbGFzcz0iZnVsbCIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkN1c3RvbWVyIG5hbWUgKHVzZSB1bmRlcnNjb3JlcykiPg0KICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlbmFtZS1wcmV2aWV3IiBpZD0iZmlsZW5hbWVQcmV2aWV3Ij5GaWxlbmFtZSBwcmV2aWV3IHdpbGwgYXBwZWFyIGhlcmXigKY8L2Rpdj4NCg0KICAgICAgICA8ZGl2Pg0KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGwiPkNvbnNvbGU8L2xhYmVsPg0KICAgICAgICAgIDxzZWxlY3QgaWQ9ImNvbnNvbGUiIGFyaWEtbGFiZWw9IkNvbnNvbGUgdHlwZSI+DQogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ2MSI+djE8L29wdGlvbj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InYyIj52Mjwvb3B0aW9uPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGl0ZSI+bGl0ZTwvb3B0aW9uPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ib2xlZCI+b2xlZDwvb3B0aW9uPg0KICAgICAgICAgIDwvc2VsZWN0Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdj4NCiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsIj5TRCBDYXJkIChHQik8L2xhYmVsPg0KICAgICAgICAgIDxzZWxlY3QgaWQ9InNkIiBhcmlhLWxhYmVsPSJTRCBjYXJkIj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEyOCI+MTI4PC9vcHRpb24+DQogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIyNTYiPjI1Njwvb3B0aW9uPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNTEyIj41MTI8L29wdGlvbj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjEwMjQiPjEwMjQ8L29wdGlvbj4NCiAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGRpdj4NCiAgICAgICAgICA8bGFiZWwgY2xhc3M9InNtYWxsIj5BbmRyb2lkIChHQik8L2xhYmVsPg0KICAgICAgICAgIDxzZWxlY3QgaWQ9ImFuZHJvaWQiIGFyaWEtbGFiZWw9ImFuZHJvaWQgc2l6ZSI+DQogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwIj4wPC9vcHRpb24+DQogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIxNiI+MTY8L29wdGlvbj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjMyIj4zMjwvb3B0aW9uPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iNjQiPjY0PC9vcHRpb24+DQogICAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2Pg0KICAgICAgICAgIDxsYWJlbCBjbGFzcz0ic21hbGwiPkxpbnV4IChHQik8L2xhYmVsPg0KICAgICAgICAgIDxzZWxlY3QgaWQ9ImxpbnV4IiBhcmlhLWxhYmVsPSJsaW51eCBzaXplIj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAiPjA8L29wdGlvbj4NCiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjE2Ij4xNjwvb3B0aW9uPg0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iMzIiPjMyPC9vcHRpb24+DQogICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSI2NCI+NjQ8L29wdGlvbj4NCiAgICAgICAgICA8L3NlbGVjdD4NCiAgICAgICAgPC9kaXY+DQogICAgICA8L2Rpdj4NCg0KICAgICAgPGRpdiBjbGFzcz0iaW5mb1JvdyIgc3R5bGU9Im1hcmdpbi10b3A6OHB4OyI+DQogICAgICAgIDxkaXY+DQogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGwiPlNwYWNlIGZvciBnYW1lczwvZGl2Pg0KICAgICAgICAgIDxkaXY+PHN0cm9uZyBpZD0ic3BhY2UiPjA8L3N0cm9uZz4gR0I8L2Rpdj4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXY+DQogICAgICAgICAgPGRpdiBjbGFzcz0ic21hbGwiPlNlbGVjdGVkIHNpemU8L2Rpdj4NCiAgICAgICAgICA8ZGl2PjxzdHJvbmcgaWQ9InNlbGVjdGVkU2l6ZSI+MC4wMDwvc3Ryb25nPiBHQjwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KDQogICAgICA8ZGl2IGNsYXNzPSJpbmZvUm93IiBzdHlsZT0ibWFyZ2luLXRvcDo4cHg7Ij4NCiAgICAgICAgPGRpdj4NCiAgICAgICAgICA8ZGl2IGNsYXNzPSJzbWFsbCI+SW5zdGFsbCBlc3RpbWF0ZTwvZGl2Pg0KICAgICAgICAgIDxkaXY+PHNwYW4gaWQ9Imluc3RhbGxFc3RpbWF0ZSI+MGggMG08L3NwYW4+PC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2Pg0KICAgICAgICAgIDxkaXYgY2xhc3M9InNtYWxsIj5TZWxlY3RlZDwvZGl2Pg0KICAgICAgICAgIDxkaXY+PHNwYW4gaWQ9ImNvdW50Ij4wPC9zcGFuPiBnYW1lczwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KDQogICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEycHg7ZGlzcGxheTpmbGV4O2dhcDo4cHg7YWxpZ24taXRlbXM6Y2VudGVyOyI+DQogICAgICAgIDxidXR0b24gaWQ9ImNvcHlMaW5rIiBjbGFzcz0iYnRuIj5Db3B5IExpbms8L2J1dHRvbj4NCgkJPGlucHV0IGlkPSJzaGFyZWFibGUiIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJVcGxvYWRlZCBmaWxlIGxpbmsiIHN0eWxlPSJmbGV4OjE7cGFkZGluZzo4cHg7Ym9yZGVyLXJhZGl1czo4cHg7Ym9yZGVyOjFweCBzb2xpZCAjZTZlZWY2IiByZWFkb25seT4NCiAgICAgICAgPGJ1dHRvbiBpZD0ic2F2ZUJ0biIgY2xhc3M9ImJ0biI+U2F2ZTwvYnV0dG9uPg0KICAgICAgPC9kaXY+DQoNCiAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTJweDtkaXNwbGF5OmZsZXg7Z2FwOjhweDthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC13cmFwOndyYXAiPg0KICAgICAgICA8aW5wdXQgaWQ9ImZpbGVJbiIgdHlwZT0iZmlsZSIgYWNjZXB0PSIuQ0xJX1BSTVoiPg0KDQogICAgICAgIDxidXR0b24gaWQ9ImFkbWluRXhwb3J0IiBjbGFzcz0iYnRuIGdob3N0Ij5FeHBvcnQgQWRtaW48L2J1dHRvbj4NCiAgICAgICAgPGJ1dHRvbiBpZD0iYmluTGlzdCIgY2xhc3M9ImJ0biBnaG9zdCI+VXBsb2FkczwvYnV0dG9uPg0KPGRpdiBpZD0iZmlsZUxpc3RDb250YWluZXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4NCiAgPGRpdiBpZD0iYmluRmlsZUxpc3QiPjwvZGl2Pg0KPC9kaXY+DQogICAgICA8L2Rpdj4NCiAgPC9kaXY+DQogICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEycHg7ZmxleDoxO292ZXJmbG93OmF1dG87Zm9udC1zaXplOjEzcHg7Y29sb3I6dmFyKC0tbXV0ZWQpIj4NCiAgICAgICAgPCEtLSBzbWFsbCBoZWxwIC8gc3RhdHVzIGFyZWEgLS0+DQogICAgICAgIDxkaXYgaWQ9InN0YXR1cyI+UmVhZHk8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KPCEtLSBBbHdheXMtdmlzaWJsZSBTZWxlY3RlZCBQYW5lbCAoZGVza3RvcCBvbmx5KSAtLT4NCjxkaXYgaWQ9InNlbGVjdGVkUGFuZWwiIGNsYXNzPSJzZWxlY3RlZC1wYW5lbCI+DQogIDwhLS08ZGl2IGNsYXNzPSJoZWFkIj4NCiAgICA8c3Ryb25nPlNlbGVjdGVkIFRpdGxlcyAoPHNwYW4gaWQ9InNlbGVjdGVkUGFuZWxDb3VudCI+MDwvc3Bhbj4pPC9zdHJvbmc+DQogIDwvZGl2Pi0tPg0KICA8ZGl2IGNsYXNzPSJib2R5IiBpZD0ic2VsZWN0ZWRQYW5lbEJvZHkiPjwvZGl2Pg0KPC9kaXY+DQogICAgPC9hc2lkZT4NCiAgPC9kaXY+DQoNCiAgPCEtLSBTZWxlY3RlZCBvdmVybGF5IC0tPg0KICA8ZGl2IGNsYXNzPSJvdmVybGF5IiBpZD0ib3ZlcmxheSI+DQogICAgPGRpdiBjbGFzcz0iaGVhZCI+PGRpdj48c3Ryb25nPlNlbGVjdGVkIFRpdGxlczwvc3Ryb25nPiDigJQgPHNwYW4gaWQ9Im92ZXJsYXlDb3VudCI+MDwvc3Bhbj48L2Rpdj48ZGl2PjxidXR0b24gaWQ9ImNsb3NlT3ZlcmxheSIgY2xhc3M9ImJ0biBnaG9zdCI+Q2xvc2U8L2J1dHRvbj48L2Rpdj48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJib2R5IiBpZD0ib3ZlcmxheUJvZHkiPjwvZGl2Pg0KICA8L2Rpdj4NCjxkaXYgaWQ9ImZpbGVzTW9kYWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7DQogIGJhY2tncm91bmQ6I2ZmZjtwYWRkaW5nOjE2cHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JveC1zaGFkb3c6MCA2cHggMThweCByZ2JhKDAsMCwwLDAuMjUpO3otaW5kZXg6MjAwOw0KICBtYXgtd2lkdGg6NDIwcHg7d2lkdGg6OTAlO21heC1oZWlnaHQ6NzB2aDtvdmVyZmxvdzphdXRvO2ZvbnQtc2l6ZToxM3B4Ij4NCjwvZGl2Pg0KPHNjcmlwdD4NCi8vIFJldjYg4oCUIG1lcmdlZCBVSSArIGZ1bGwgZmVhdHVyZXMNCmNvbnN0IHN0YXRlID0geyBpdGVtczogW10sIHNlbGVjdGVkOiBbXSwgeG1sOiBudWxsLCBsYXN0VXBsb2FkOjAgfTsNCmNvbnN0IGxlZnRQYW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlZnRQYW5lJyk7DQpjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXknKTsNCmNvbnN0IG92ZXJsYXlCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXlCb2R5Jyk7DQpjb25zdCBpc01vYmlsZSA9IC9Nb2JpfEFuZHJvaWR8aVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7DQpjb25zdCBpc0xvY2FsID0gZmFsc2U7DQoNCg0KY29uc3QgTUlOX0RFTEFZID0gMTAwMDsNCmxldCBub3cgPSBEYXRlLm5vdygpOw0KbGV0IGxhc3RFeHBvcnRUaW1lID0gRGF0ZS5ub3coKTsNCi8vIHV0aWxzDQpjb25zdCAkID0gaWQ9PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCmZ1bmN0aW9uIGVzYyhzKXsgcmV0dXJuIChzfHwnJykucmVwbGFjZSgvJi9nLCcmYW1wOycpLnJlcGxhY2UoLzwvZywnJmx0OycpLnJlcGxhY2UoLz4vZywnJmd0OycpOyB9DQpmdW5jdGlvbiB0b2FzdChtc2cpeyAkKCdzdGF0dXMnKS50ZXh0Q29udGVudCA9IG1zZzsgc2V0VGltZW91dCgoKT0+eyBpZigkKCdzdGF0dXMnKS50ZXh0Q29udGVudCA9PT0gbXNnKSAkKCdzdGF0dXMnKS50ZXh0Q29udGVudCA9ICdSZWFkeSc7IH0sIDI1MDApOyB9DQoNCi8vIHNpemUgaGVscGVycw0KZnVuY3Rpb24gcGFyc2VTaXplVGV4dChzKXsgaWYoIXMpIHJldHVybiAwOyBjb25zdCBtID0gKCcnK3MpLm1hdGNoKC8oW1xkXC5dKylccyooR2lCfE1pQnxLaUJ8R0J8TUJ8S0J8QikvaSk7IGlmKCFtKSByZXR1cm4gMDsgY29uc3Qgdj1wYXJzZUZsb2F0KG1bMV0pOyBjb25zdCB1PW1bMl0udG9VcHBlckNhc2UoKTsgaWYodT09PSdCJykgcmV0dXJuIHY7IGlmKHU9PT0nS0InfHx1PT09J0tJQicpIHJldHVybiB2KjEwMjQ7IGlmKHU9PT0nTUInfHx1PT09J01JQicpIHJldHVybiB2KjEwMjQqMTAyNDsgcmV0dXJuIHYqMTAyNCoxMDI0KjEwMjQ7IH0NCmZ1bmN0aW9uIGJ5dGVzVG9HQihiKXsgcmV0dXJuIGIvKDEwMjQqMTAyNCoxMDI0KTsgfQ0KDQovLyBsb2FkIFhNTCAoc3VwcG9ydCA8Zm9sZGVyPiBhbmQgPGdhbWU+KQ0KYXN5bmMgZnVuY3Rpb24gbG9hZFhNTCgpew0KICB0cnl7DQogICAgY29uc3QgdHh0ID0gYXdhaXQgZmV0Y2goJ3N3aXRjaGdhbWVzLnhtbCcpLnRoZW4ocj0+ci50ZXh0KCkpOw0KICAgIGNvbnN0IHhtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodHh0LCdhcHBsaWNhdGlvbi94bWwnKTsNCiAgICBzdGF0ZS54bWwgPSB4bWw7DQogICAgLy8gcHJlZmVyIGZvbGRlcg0KbGV0IGl0ZW1zID0gQXJyYXkuZnJvbSh4bWwucXVlcnlTZWxlY3RvckFsbCgnZm9sZGVyJykpDQogIC5maWx0ZXIoZiA9PiBmLmdldEF0dHJpYnV0ZSgnbmFtZScpICE9PSAnTlNQIDIwMjEnKSAgLy8g8J+RiCBza2lwDQogIC5tYXAoZiA9PiAoew0KICAgIG5hbWU6IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksDQogICAgc2l6ZTogZi5nZXRBdHRyaWJ1dGUoJ3NpemUnKSB8fCAnMCBHaUInLA0KICAgIGRhdGU6IGYuZ2V0QXR0cmlidXRlKCdkYXRlTW9kaWZpZWQnKSB8fCAnJywNCiAgICBmaWxlczogQXJyYXkuZnJvbShmLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKSkubWFwKHggPT4geC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSkNCiAgfSkpOw0KDQoNCg0KICAgIGlmKGl0ZW1zLmxlbmd0aD09PTApeyAvLyBmYWxsYmFjayB0byBnYW1lIG5vZGVzDQogICAgICBjb25zdCBnYW1lcyA9IEFycmF5LmZyb20oeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdnYW1lJykpOw0KICAgICAgaXRlbXMgPSBnYW1lcy5tYXAoZz0+KHsgbmFtZTogZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGl0bGUnKVswXT8udGV4dENvbnRlbnQgfHwgJ1VudGl0bGVkJywgc2l6ZTogZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2l6ZScpWzBdPy50ZXh0Q29udGVudCB8fCAnMCBNQicsIGZpbGVzOiBbXSB9KSk7DQogICAgfQ0KICAgIHN0YXRlLml0ZW1zID0gaXRlbXM7DQogICAgcmVuZGVyTGlzdChpdGVtcyk7DQogIH1jYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgbGVmdFBhbmUuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9ImNvbG9yOiNiOTFjMWM7cGFkZGluZzoxMnB4Ij5GYWlsZWQgdG8gbG9hZCBzd2l0Y2hnYW1lcy54bWwg4oCUIGNoZWNrIHBhdGgvQ09SUzwvZGl2Pic7IH0NCn0NCg0KLy8gcmVuZGVyIGxlZnQgbGlzdCBhbmQgcHJlc2VydmUgc2VsZWN0aW9uIGhpZ2hsaWdodHMNCmZ1bmN0aW9uIHJlbmRlckxpc3QobGlzdCl7IGxlZnRQYW5lLmlubmVySFRNTCA9ICcnOyBpZighbGlzdHx8IWxpc3QubGVuZ3RoKXsgbGVmdFBhbmUuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9Im1ldGEiPk5vIGl0ZW1zIGZvdW5kPC9kaXY+JzsgcmV0dXJuOyB9DQogIGxpc3QuZm9yRWFjaChpdGVtPT57DQogICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IHJvdy5jbGFzc05hbWU9J2l0ZW0nOyByb3cuZGF0YXNldC5uYW1lID0gaXRlbS5uYW1lOyByb3cuZGF0YXNldC5zaXplID0gaXRlbS5zaXplOw0KICAgIHJvdy5pbm5lckhUTUwgPSBgICA8ZGl2Pg0KICAgIDxidXR0b24gY2xhc3M9ImJ0biBnaG9zdCIgc3R5bGU9InBhZGRpbmc6MnB4IDZweDtmb250LXNpemU6MTFweCINCiAgICAgIG9uY2xpY2s9ImFsZXJ0KCdjbGlja2VkJyk7IGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyBzaG93RmlsZXMoJyR7ZXNjKGl0ZW0ubmFtZSl9JywgJHtKU09OLnN0cmluZ2lmeShpdGVtLmZpbGVzKX0sICcke2VzYyhpdGVtLnNpemUpfScpIj4/PC9idXR0b24+DQogICAgPHN0cm9uZz4ke2VzYyhpdGVtLm5hbWUpfTwvc3Ryb25nPg0KICAgIDxkaXYgY2xhc3M9J21ldGEnPiR7aXRlbS5kYXRlID8gJ01vZGlmaWVkOiAnK2VzYyhpdGVtLmRhdGUpIDogJyd9PC9kaXY+DQogIDwvZGl2Pg0KICA8ZGl2IGNsYXNzPSdtZXRhJz4ke2VzYyhpdGVtLnNpemUpfTwvZGl2PmA7DQoNCiAgICBpZihzdGF0ZS5zZWxlY3RlZC5zb21lKHM9PnMubmFtZT09PWl0ZW0ubmFtZSkpIHJvdy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOw0KICAgIC8vIGFsdC1jbGljayBzaG93cyBmaWxlcw0KICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldik9PnsgaWYoZXYuYWx0S2V5KXsgc2hvd0ZpbGVzKGl0ZW0ubmFtZSwgaXRlbS5maWxlcyB8fCBbXSwgaXRlbS5zaXplKTsgcmV0dXJuOyB9IHRvZ2dsZVNlbGVjdChpdGVtLCByb3cpOyB9KTsNCiAgICAvL3Jvdy5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpPT4gc2hvd0ZpbGVzKGl0ZW0ubmFtZSwgaXRlbS5maWxlc3x8W10sIGl0ZW0uc2l6ZSkpOw0KICAgIGxlZnRQYW5lLmFwcGVuZENoaWxkKHJvdyk7DQogIH0pOw0KfQ0KDQpmdW5jdGlvbiB0b2dnbGVTZWxlY3QoaXRlbSwgcm93RWwpeyBjb25zdCBpZHggPSBzdGF0ZS5zZWxlY3RlZC5maW5kSW5kZXgocz0+cy5uYW1lPT09aXRlbS5uYW1lKTsgaWYoaWR4Pj0wKXsgc3RhdGUuc2VsZWN0ZWQuc3BsaWNlKGlkeCwxKTsgaWYocm93RWwpIHJvd0VsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7IGVsc2UgeyBjb25zdCByID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maW5kKHg9PnguZGF0YXNldC5uYW1lPT09aXRlbS5uYW1lKTsgaWYocikgci5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpOyB9IH0gZWxzZSB7IHN0YXRlLnNlbGVjdGVkLnB1c2goeyBuYW1lOml0ZW0ubmFtZSwgc2l6ZTppdGVtLnNpemUgfSk7IGlmKHJvd0VsKSByb3dFbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyB9DQogIHVwZGF0ZVRvdGFscygpOyByZW5kZXJPdmVybGF5KCk7IH0NCg0KZnVuY3Rpb24gcmVuZGVyT3ZlcmxheSgpIHsNCiAgb3ZlcmxheUJvZHkuaW5uZXJIVE1MID0gJyc7DQogIHN0YXRlLnNlbGVjdGVkLmZvckVhY2goKHMsaSk9PnsNCiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICByb3cuY2xhc3NOYW1lPSdyb3cnOw0KICAgIHJvdy5pbm5lckhUTUwgPSBgDQogICAgICA8ZGl2Pg0KICAgICAgICA8c3Ryb25nPiR7aSsxfS4gJHtlc2Mocy5uYW1lKX08L3N0cm9uZz4NCiAgICAgICAgPGRpdiBjbGFzcz0nbWV0YSc+JHtlc2Mocy5zaXplKX08L2Rpdj4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdj4NCiAgICAgICAgPGJ1dHRvbiBjbGFzcz0naWNvbiB1cCc+4qyGPC9idXR0b24+DQogICAgICAgIDxidXR0b24gY2xhc3M9J2ljb24gZG93bic+4qyHPC9idXR0b24+DQogICAgICAgIDxidXR0b24gY2xhc3M9J2ljb24gcmVtb3ZlJz7inJY8L2J1dHRvbj4NCiAgICAgIDwvZGl2PmA7DQoNCiAgICAvLyBVcA0KICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcudXAnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57DQogICAgICBpZihpPjApew0KICAgICAgICBbc3RhdGUuc2VsZWN0ZWRbaS0xXSwgc3RhdGUuc2VsZWN0ZWRbaV1dID0gW3N0YXRlLnNlbGVjdGVkW2ldLCBzdGF0ZS5zZWxlY3RlZFtpLTFdXTsNCiAgICAgICAgcmVuZGVyT3ZlcmxheSgpOw0KICAgICAgICByZW5kZXJMaXN0KHN0YXRlLml0ZW1zKTsNCiAgICAgICAgdXBkYXRlVG90YWxzKCk7DQogICAgICAgIC8vIGhpZ2hsaWdodCBuZXcgcG9zaXRpb24NCiAgICAgICAgb3ZlcmxheUJvZHkuY2hpbGRyZW5baS0xXS5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHQnKTsNCiAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vIERvd24NCiAgICByb3cucXVlcnlTZWxlY3RvcignLmRvd24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57DQogICAgICBpZihpPHN0YXRlLnNlbGVjdGVkLmxlbmd0aC0xKXsNCiAgICAgICAgW3N0YXRlLnNlbGVjdGVkW2krMV0sIHN0YXRlLnNlbGVjdGVkW2ldXSA9IFtzdGF0ZS5zZWxlY3RlZFtpXSwgc3RhdGUuc2VsZWN0ZWRbaSsxXV07DQogICAgICAgIHJlbmRlck92ZXJsYXkoKTsNCiAgICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7DQogICAgICAgIHVwZGF0ZVRvdGFscygpOw0KICAgICAgICAvLyBoaWdobGlnaHQgbmV3IHBvc2l0aW9uDQogICAgICAgIG92ZXJsYXlCb2R5LmNoaWxkcmVuW2krMV0uY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7DQogICAgICB9DQogICAgfSk7DQoNCiAgICAvLyBSZW1vdmUNCiAgICByb3cucXVlcnlTZWxlY3RvcignLnJlbW92ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsNCiAgICAgIGNvbnN0IHJlbW92ZWQgPSBzdGF0ZS5zZWxlY3RlZC5zcGxpY2UoaSwxKVswXTsNCiAgICAgIGNvbnN0IGxlZnRSb3cgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpDQogICAgICAgIC5maW5kKHg9PnguZGF0YXNldC5uYW1lPT09cmVtb3ZlZC5uYW1lKTsNCiAgICAgIGlmKGxlZnRSb3cpIGxlZnRSb3cuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsNCiAgICAgIHJlbmRlck92ZXJsYXkoKTsNCiAgICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOw0KICAgICAgdXBkYXRlVG90YWxzKCk7DQogICAgfSk7DQoNCiAgICBvdmVybGF5Qm9keS5hcHBlbmRDaGlsZChyb3cpOw0KICB9KTsNCiAgJCgnb3ZlcmxheUNvdW50JykudGV4dENvbnRlbnQgPSBzdGF0ZS5zZWxlY3RlZC5sZW5ndGg7DQoNCnJlbmRlclNlbGVjdGVkUGFuZWwoKTsNCg0KfQ0KDQoNCi8vIHNob3cvaGlkZSBvdmVybGF5DQokKCdzaG93U2VsZWN0ZWQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgcmVuZGVyT3ZlcmxheSgpOyB9KTsNCiQoJ2Nsb3NlT3ZlcmxheScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpOw0KDQovLyBmaWxlcyBtb2RhbA0KbGV0IGN1cnJlbnRNb2RhbCA9IG51bGw7IC8vIHRyYWNrIG9wZW4gbW9kYWwNCmZ1bmN0aW9uIHNob3dGaWxlcyhuYW1lLCBmaWxlcywgc2l6ZSkgew0KICBpZiAoIWZpbGVzIHx8ICFmaWxlcy5sZW5ndGgpIHsNCiAgICBhbGVydChgTm8gZmlsZXMgZm9yICR7bmFtZX1gKTsNCiAgICByZXR1cm47DQogIH0NCg0KDQogIC8vIGNsb3NlIGV4aXN0aW5nIG1vZGFsIGlmIGFueQ0KICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlc01vZGFsJyk7DQogIG1vZGFsLmlubmVySFRNTCA9ICcnOyANCiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7DQogIA0KICAvLyBoZWFkZXINCiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogIGhlYWRlci5pbm5lckhUTUwgPSBgPHN0cm9uZz4ke2VzYyhuYW1lKX08L3N0cm9uZz48YnI+PHNwYW4gY2xhc3M9Im1ldGEiPlNpemU6ICR7ZXNjKHNpemUpfSDigJQgJHtmaWxlcy5sZW5ndGh9IGZpbGVzPC9zcGFuPmA7DQogIG1vZGFsLmFwcGVuZENoaWxkKGhlYWRlcik7DQoNCiAgLy8gZmlsZSBsaXN0IHdpdGggcGFnaW5nDQogIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgbGlzdC5zdHlsZS5tYXJnaW5Ub3AgPSAnOHB4JzsNCiAgbW9kYWwuYXBwZW5kQ2hpbGQobGlzdCk7DQoNCiAgbGV0IGluZGV4ID0gMDsNCiAgY29uc3QgYmF0Y2ggPSAyMDsgLy8gc2hvdyAyMCBhdCBhIHRpbWUNCiAgZnVuY3Rpb24gbG9hZE1vcmUoKSB7DQogICAgY29uc3QgbmV4dCA9IGZpbGVzLnNsaWNlKGluZGV4LCBpbmRleCtiYXRjaCk7DQogICAgbGlzdC5pbm5lckhUTUwgKz0gbmV4dC5tYXAoZj0+ZXNjKGYpKS5qb2luKCc8YnI+Jyk7DQogICAgaW5kZXggKz0gYmF0Y2g7DQogICAgaWYgKGluZGV4ID49IGZpbGVzLmxlbmd0aCkgew0KICAgICAgbW9yZUJ0bi5yZW1vdmUoKTsNCiAgICB9DQogIH0NCiAgDQoNCiAgLy8gTW9yZSBidXR0b24NCiAgY29uc3QgbW9yZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOw0KICBtb3JlQnRuLnRleHRDb250ZW50ID0gJ01vcmUnOw0KICBtb3JlQnRuLmNsYXNzTmFtZSA9ICdidG4gZ2hvc3QnOw0KICBtb3JlQnRuLnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JzsNCiAgbW9yZUJ0bi5vbmNsaWNrID0gbG9hZE1vcmU7DQogIG1vZGFsLmFwcGVuZENoaWxkKG1vcmVCdG4pOw0KDQogIC8vIENsb3NlIGJ1dHRvbg0KICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOw0KICBjbG9zZUJ0bi50ZXh0Q29udGVudCA9ICdDbG9zZSc7DQogIGNsb3NlQnRuLmNsYXNzTmFtZSA9ICdidG4nOw0KICBjbG9zZUJ0bi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7DQogIGNsb3NlQnRuLm9uY2xpY2sgPSAoKT0+eyBtb2RhbC5zdHlsZS5kaXNwbGF5PSdub25lJzsgbW9kYWwuaW5uZXJIVE1MPScnOyB9Ow0KICBtb2RhbC5hcHBlbmRDaGlsZChjbG9zZUJ0bik7DQpsb2FkTW9yZSgpOw0KfQ0KDQoNCi8vIHRvdGFscywgaW5zdGFsbCBlc3RpbWF0ZSwgZmlsZW5hbWUgcHJldmlldw0KZnVuY3Rpb24gdXBkYXRlVG90YWxzKCkgew0KICBjb25zdCB0b3RhbEJ5dGVzID0gc3RhdGUuc2VsZWN0ZWQucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHBhcnNlU2l6ZVRleHQocy5zaXplKSwgMCk7DQogIGNvbnN0IGdiID0gYnl0ZXNUb0dCKHRvdGFsQnl0ZXMpOw0KICAkKCdzZWxlY3RlZFNpemUnKS50ZXh0Q29udGVudCA9IGdiLnRvRml4ZWQoMik7DQoNCiAgY29uc3QgYmxvYXRlZCA9IHRvdGFsQnl0ZXMgKiAxLjI7DQogIGNvbnN0IHNwZWVkID0gMTQgKiAxMDI0ICogMTAyNDsNCiAgY29uc3Qgc2VjcyA9IE1hdGguY2VpbChibG9hdGVkIC8gc3BlZWQpOw0KICAkKCdpbnN0YWxsRXN0aW1hdGUnKS50ZXh0Q29udGVudCA9IGAke01hdGguZmxvb3Ioc2Vjcy8zNjAwKX1oICR7TWF0aC5mbG9vcigoc2VjcyUzNjAwKS82MCl9bWA7DQoNCiAgJCgnY291bnQnKS50ZXh0Q29udGVudCA9IHN0YXRlLnNlbGVjdGVkLmxlbmd0aDsNCg0KICAvLyBzcGFjZSBjYWxjdWxhdGlvbg0KICBjb25zdCBjb25zb2xlVmFsID0gJCgnY29uc29sZScpLnZhbHVlOw0KICBjb25zdCBzZFZhbCA9IE51bWJlcigkKCdzZCcpLnZhbHVlKTsNCiAgY29uc3QgYW5kcm9pZCA9IE51bWJlcigkKCdhbmRyb2lkJykudmFsdWUpOw0KICBjb25zdCBsaW51eCA9IE51bWJlcigkKCdsaW51eCcpLnZhbHVlKTsNCiAgY29uc3QganZmaWxlID0gMTsNCiAgY29uc3QgZW11ID0gY29uc29sZVZhbCA9PT0gJ29sZWQnID8gNjQgOiAzMjsNCiAgY29uc3QgYnVmZmEgPSBNYXRoLmZsb29yKGVtdSAvIDMpOw0KICBjb25zdCB0b3RhbFJlc2VydmVkID0gZW11ICsgYW5kcm9pZCArIGxpbnV4ICsganZmaWxlICsgYnVmZmE7DQogIGNvbnN0IGV4dHJhID0gTWF0aC5mbG9vcihlbXUgLyAyKTsNCiAgY29uc3Qgc3BhY2VGb3JHYW1lcyA9IChzZFZhbCAtIHRvdGFsUmVzZXJ2ZWQpICsgZXh0cmE7DQoNCiAgJCgnc3BhY2UnKS50ZXh0Q29udGVudCA9IGlzRmluaXRlKHNwYWNlRm9yR2FtZXMpID8gc3BhY2VGb3JHYW1lcyA6IDA7DQoNCiAgLy8gaGlnaGxpZ2h0IHdhcm5pbmcgaWYgZXhjZWVkZWQNCiAgaWYgKGdiID4gc3BhY2VGb3JHYW1lcykgew0KICAgICQoJ3NlbGVjdGVkU2l6ZScpLnN0eWxlLmNvbG9yID0gJyNjMDAnOw0KICAgICQoJ3NlbGVjdGVkU2l6ZScpLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7DQogIH0gZWxzZSB7DQogICAgJCgnc2VsZWN0ZWRTaXplJykuc3R5bGUuY29sb3IgPSAnJzsNCiAgICAkKCdzZWxlY3RlZFNpemUnKS5zdHlsZS5mb250V2VpZ2h0ID0gJyc7DQogIH0NCg0KICAvLyBmaWxlbmFtZSBwcmV2aWV3DQogIHVwZGF0ZUZpbGVuYW1lUHJldmlldygpOw0KfQ0KDQoNCg0KDQoNCmZ1bmN0aW9uIHVwZGF0ZUZpbGVuYW1lUHJldmlldygpeyBjb25zdCBjdXN0b21lciA9ICggJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnY3VzdG9tZXInKS50cmltKCkucmVwbGFjZSgvW15hLXpBLVowLTldL2csJ18nKS50b0xvd2VyQ2FzZSgpOyBjb25zdCBjb25zb2xlVG9rZW4gPSAkKCdjb25zb2xlJykudmFsdWUgfHwgJ3YxJzsgY29uc3Qgc2RUb2tlbiA9ICdzZCcgKyAoJCgnc2QnKS52YWx1ZSB8fCAnMCcpOyBjb25zdCBkcm9pZCA9ICdkcm9pZCcgKyAoJCgnYW5kcm9pZCcpLnZhbHVlIHx8ICcwJyk7IGNvbnN0IGxpbiA9ICdsaW4nICsgKCQoJ2xpbnV4JykudmFsdWUgfHwgJzAnKTsgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsgY29uc3Qgc3RhbXAgPSBub3cuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsgU3RyaW5nKG5vdy5nZXRNb250aCgpKzEpLnBhZFN0YXJ0KDIsJzAnKSArIFN0cmluZyhub3cuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCcwJykgKyBTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsJzAnKSArIFN0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCcwJykgKyBTdHJpbmcobm93LmdldFNlY29uZHMoKSkucGFkU3RhcnQoMiwnMCcpOyAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCA9IGAke2N1c3RvbWVyfV8ke2NvbnNvbGVUb2tlbn1fJHtzZFRva2VufV8ke2Ryb2lkfV8ke2xpbn1fJHtzdGFtcH0uQ0xJX1BSTVpgOyB9DQoNCi8vIHBhcnNlIHNpemUgc3RyaW5ncyB1c2VkIGJ5IG9yaWdpbmFsIHhtbCAoZS5nLiAiMS4yIEdpQiIgb3IgIjYyMCBNQiIpDQpmdW5jdGlvbiBwYXJzZVNpemVUZXh0KHR4dCl7IGlmKCF0eHQpIHJldHVybiAwOyBjb25zdCBtID0gKCcnK3R4dCkubWF0Y2goLyhbXGRcLl0rKVxzKihHaUJ8TWlCfEtpQnxHQnxNQnxLQnxCKS9pKTsgaWYoIW0pIHJldHVybiAwOyBjb25zdCB2ID0gcGFyc2VGbG9hdChtWzFdKTsgY29uc3QgdSA9IG1bMl0udG9VcHBlckNhc2UoKTsgaWYodT09PSdCJykgcmV0dXJuIHY7IGlmKHU9PT0nS0InfHx1PT09J0tJQicpIHJldHVybiB2KjEwMjQ7IGlmKHU9PT0nTUInfHx1PT09J01JQicpIHJldHVybiB2KjEwMjQqMTAyNDsgcmV0dXJuIHYqMTAyNCoxMDI0KjEwMjQ7IH0NCg0KLy8gd2lyZSBjb250cm9scw0KJCgnc2VhcmNoJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBkZWJvdW5jZSgoZSk9PnsgY29uc3QgcT0oZS50YXJnZXQudmFsdWV8fCcnKS50b0xvd2VyQ2FzZSgpOyByZW5kZXJMaXN0KHN0YXRlLml0ZW1zLmZpbHRlcihpdD0+IChpdC5uYW1lfHwnJykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkpOyB9LDE4MCkpOw0KJCgnY2xlYXJTZWFyY2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57ICQoJ3NlYXJjaCcpLnZhbHVlPScnOyByZW5kZXJMaXN0KHN0YXRlLml0ZW1zKTsgJCgnc2VhcmNoJykuZm9jdXMoKTsgfSk7DQpbJ2N1c3RvbWVyJywnY29uc29sZScsJ3NkJywnYW5kcm9pZCcsJ2xpbnV4J10uZm9yRWFjaChpZD0+eyBjb25zdCBlbD0kKGlkKTsgaWYoZWwpeyBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpPT4gdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCkpOyBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKT0+IHVwZGF0ZVRvdGFscygpKTsgfX0pOw0KDQovLyBpbXBvcnQgLkNMSV9QUk1aIChyZXN0b3JlIHNlbGVjdGlvbnMgKyBwYXJzZSBmaWxlbmFtZSkNCiQoJ2ZpbGVJbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldik9PnsNCiAgY29uc3QgZiA9IGV2LnRhcmdldC5maWxlc1swXTsgaWYoIWYpIHJldHVybjsgY29uc3QgY2ZnID0gcGFyc2VGaWxlbmFtZVRvQ29uZmlnKGYubmFtZSk7IGlmKGNmZyl7ICQoJ2N1c3RvbWVyJykudmFsdWUgPSBjZmcuY3VzdG9tZXI7IC8vIHNldCBjb25zb2xlIGlmIGF2YWlsYWJsZQ0KICAgIEFycmF5LmZyb20oJCgnY29uc29sZScpLm9wdGlvbnMpLmZvckVhY2gobz0+eyBpZihvLnZhbHVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoY2ZnLmNvbnNvbGVUb2tlbikpIG8uc2VsZWN0ZWQgPSB0cnVlOyB9KTsgaWYoL15zZFxkKyQvLnRlc3QoY2ZnLnNkVG9rZW4pKSAkKCdzZCcpLnZhbHVlID0gTnVtYmVyKGNmZy5zZFRva2VuLnJlcGxhY2UoL1xEL2csJycpKTsgaWYoL15kcm9pZFxkKyQvLnRlc3QoY2ZnLmRyb2lkVG9rZW4pKSAkKCdhbmRyb2lkJykudmFsdWUgPSBOdW1iZXIoY2ZnLmRyb2lkVG9rZW4ucmVwbGFjZSgvXEQvZywnJykpOyBpZigvXmxpblxkKyQvLnRlc3QoY2ZnLmxpblRva2VuKSkgJCgnbGludXgnKS52YWx1ZSA9IE51bWJlcihjZmcubGluVG9rZW4ucmVwbGFjZSgvXEQvZywnJykpOyB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKTsgdXBkYXRlVG90YWxzKCk7IH0NCiAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgcmVhZGVyLm9ubG9hZCA9IChlKT0+eyBjb25zdCBsaW5lcyA9IGUudGFyZ2V0LnJlc3VsdC5zcGxpdCgnXG4nKS5tYXAocz0+cy50cmltKCkpLmZpbHRlcihCb29sZWFuKTsgLy8gY2xlYXIgZXhpc3Rpbmcgc2VsZWN0aW9uDQogICAgc3RhdGUuc2VsZWN0ZWQ9W107IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykuZm9yRWFjaChpPT5pLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpOw0KICAgIGxpbmVzLmZvckVhY2godGl0bGU9PnsgY29uc3QgbGVmdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkuZmluZChpPT5pLmRhdGFzZXQubmFtZT09PXRpdGxlKTsgaWYobGVmdCl7IGxlZnQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsgc3RhdGUuc2VsZWN0ZWQucHVzaCh7IG5hbWU6bGVmdC5kYXRhc2V0Lm5hbWUsIHNpemU6bGVmdC5kYXRhc2V0LnNpemUgfSk7IH0gZWxzZSB7IGNvbnN0IG1heWJlID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpKS5maW5kKGk9PmkuZGF0YXNldC5uYW1lICYmIGkuZGF0YXNldC5uYW1lLnRvTG93ZXJDYXNlKCk9PT10aXRsZS50b0xvd2VyQ2FzZSgpKTsgaWYobWF5YmUpeyBtYXliZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyBzdGF0ZS5zZWxlY3RlZC5wdXNoKHsgbmFtZTptYXliZS5kYXRhc2V0Lm5hbWUsIHNpemU6bWF5YmUuZGF0YXNldC5zaXplIH0pOyB9IH0gfSk7IHVwZGF0ZVRvdGFscygpOyByZW5kZXJPdmVybGF5KCk7IH07DQogIHJlYWRlci5yZWFkQXNUZXh0KGYpOw0KfSk7DQoNCi8vIGV4cG9ydCBjbGllbnQgKGRvd25sb2FkIGxpc3QpDQokKCdzYXZlQnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsNCg0KICBub3cgPSBEYXRlLm5vdygpOw0KICBpZiAobm93IC0gbGFzdEV4cG9ydFRpbWUgPCBNSU5fREVMQVkpIHsNCiAgICB0b2FzdCgnUGxlYXNlIHdhaXQgYmVmb3JlIGV4cG9ydGluZyBhZ2FpbicpOw0KICAgIGFsZXJ0KCdQbGVhc2Ugd2FpdCBiZWZvcmUgZXhwb3J0aW5nIGFnYWluJyk7DQogICAgcmV0dXJuOw0KICB9DQogIGxhc3RFeHBvcnRUaW1lID0gbm93Ow0KDQogIGlmKHN0YXRlLnNlbGVjdGVkLmxlbmd0aD09PTApeyBhbGVydCgnTm8gaXRlbXMgc2VsZWN0ZWQnKTsgcmV0dXJuOyB9DQogIGNvbnN0IGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZXx8JycpLnRyaW0oKTsgaWYoIWN1c3QpeyBhbGVydCgnQ3VzdG9tZXIgbmFtZSByZXF1aXJlZCcpOyByZXR1cm47IH0NCiAgY29uc3QgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCAnbGlzdC5DTElfUFJNWic7DQogIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbc3RhdGUuc2VsZWN0ZWQubWFwKHM9PnMubmFtZSkuam9pbignXG4nKV0sIHsgdHlwZTondGV4dC9wbGFpbicgfSk7IGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGEuZG93bmxvYWQgPSBmaWxlbmFtZTsgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsgYS5jbGljaygpOyBhLnJlbW92ZSgpOyBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7IHRvYXN0KCdTYXZlZCBjbGllbnQgZmlsZScpOw0KfSk7DQoNCi8vIGFkbWluIGV4cG9ydCAoZnVsbCBwYXRocykNCiQoJ2FkbWluRXhwb3J0Jyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCk9PnsNCg0KICBub3cgPSBEYXRlLm5vdygpOw0KICBpZiAobm93IC0gbGFzdEV4cG9ydFRpbWUgPCBNSU5fREVMQVkpIHsNCiAgICB0b2FzdCgnUGxlYXNlIHdhaXQgYmVmb3JlIGV4cG9ydGluZyBhZ2FpbicpOw0KICAgIGFsZXJ0KCdQbGVhc2Ugd2FpdCBiZWZvcmUgZXhwb3J0aW5nIGFnYWluJyk7DQogICAgcmV0dXJuOw0KICB9DQogIGxhc3RFeHBvcnRUaW1lID0gbm93Ow0KDQogIGlmKHN0YXRlLnNlbGVjdGVkLmxlbmd0aD09PTApeyBhbGVydCgnTm8gaXRlbXMgc2VsZWN0ZWQnKTsgcmV0dXJuOyB9DQogIGNvbnN0IGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZXx8JycpLnRyaW0oKTsgaWYoIWN1c3QpeyBhbGVydCgnQ3VzdG9tZXIgcmVxdWlyZWQnKTsgcmV0dXJuOyB9DQogIHRyeXsgY29uc3QgeG1sdHh0ID0gYXdhaXQgZmV0Y2goJ3N3aXRjaGdhbWVzLnhtbCcpLnRoZW4ocj0+ci50ZXh0KCkpOyBjb25zdCB4bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHhtbHR4dCwnYXBwbGljYXRpb24veG1sJyk7IGxldCBjb250ZW50PScnOyBzdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKHNlbD0+eyBjb25zdCBmb2xkZXIgPSBBcnJheS5mcm9tKHhtbC5xdWVyeVNlbGVjdG9yQWxsKCdmb2xkZXInKSkuZmluZChmPT5mLmdldEF0dHJpYnV0ZSgnbmFtZScpPT09c2VsLm5hbWUpOyBpZihmb2xkZXIpeyBjb25zdCBiYXNlID0gJ0s6XFxOU1AgMjAyMVxcJzsgZm9sZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKS5mb3JFYWNoKGZpbGU9PiBjb250ZW50ICs9IGAke2Jhc2V9JHtmb2xkZXIuZ2V0QXR0cmlidXRlKCduYW1lJyl9XFwke2ZpbGUuZ2V0QXR0cmlidXRlKCduYW1lJyl9XG5gKTsgfSB9KTsgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsgY29uc3Qgc3RhbXAgPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSsxKS5wYWRTdGFydCgyLCcwJyl9JHtTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwnMCcpfV8ke1N0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwnMCcpfSR7U3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsJzAnKX1gOyBjb25zdCBmbmFtZSA9IGAkeyhjdXN0fHwnY3VzdG9tZXInKS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpfV8ke3N0YW1wfS5QUk1aYDsgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtjb250ZW50XSwgeyB0eXBlOid0ZXh0L3BsYWluJyB9KTsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgYS5kb3dubG9hZCA9IGZuYW1lOyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOyBhLmNsaWNrKCk7IGEucmVtb3ZlKCk7IFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTsgdG9hc3QoJ0FkbWluIGV4cG9ydCByZWFkeScpOyB9Y2F0Y2goZSl7IGNvbnNvbGUuZXJyb3IoZSk7IHRvYXN0KCdBZG1pbiBleHBvcnQgZmFpbGVkJyk7IH0NCn0pOw0KDQovLyB1cGxvYWQgbG9naWMgKGZpbGViaW4gdGhlbiBnb2ZpbGUpDQokKCd1cGxvYWRCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpPT57DQoNCiAgaWYoc3RhdGUuc2VsZWN0ZWQubGVuZ3RoPT09MCl7IGFsZXJ0KCdObyBpdGVtcyBzZWxlY3RlZCcpOyByZXR1cm47IH0NCiAgY29uc3QgY3VzdCA9ICgkKCdjdXN0b21lcicpLnZhbHVlfHwnJykudHJpbSgpOyBpZighY3VzdCl7IGFsZXJ0KCdDdXN0b21lciByZXF1aXJlZCcpOyByZXR1cm47IH0NCiAgaWYoIWNvbmZpcm0oYFVwbG9hZCBsaXN0IGZvciAke2N1c3R9P2ApKSByZXR1cm47IGNvbnN0IGZpbGVuYW1lID0gJCgnZmlsZW5hbWVQcmV2aWV3JykudGV4dENvbnRlbnQgfHwgJ2xpc3QuQ0xJX1BSTVonOyBjb25zdCBibG9iID0gbmV3IEJsb2IoW3N0YXRlLnNlbGVjdGVkLm1hcChzPT5zLm5hbWUpLmpvaW4oJ1xuJyldLCB7IHR5cGU6J3RleHQvcGxhaW4nIH0pOyBjb25zdCBub3cgPSBEYXRlLm5vdygpOyBpZihub3cgLSBzdGF0ZS5sYXN0VXBsb2FkIDwgMTUwMDApeyBhbGVydCgnUGxlYXNlIHdhaXQgMTUgc2Vjb25kcyBiZXR3ZWVuIHVwbG9hZHMnKTsgcmV0dXJuOyB9DQogIHRyeXsgY29uc3QgYmluID0gJ3hsZzRrZ2dvemJkZ3NudzQnOyBjb25zdCB1cmwgPSBgaHR0cHM6Ly9maWxlYmluLm5ldC8ke2Jpbn0vJHtmaWxlbmFtZX1gOyBjb25zdCByID0gYXdhaXQgZmV0Y2godXJsLHsgbWV0aG9kOidQT1NUJywgaGVhZGVyczp7ICdDb250ZW50LVR5cGUnOid0ZXh0L3BsYWluJyB9LCBib2R5OiBibG9iIH0pOyBpZihyLm9rIHx8IHIuc3RhdHVzPT09MjAxKXsgc3RhdGUubGFzdFVwbG9hZCA9IG5vdzsgJCgnc2hhcmVhYmxlJykudmFsdWUgPSBgaHR0cHM6Ly9maWxlYmluLm5ldC8ke2Jpbn0vJHtmaWxlbmFtZX1gOyB0b2FzdCgnVXBsb2FkZWQgdG8gZmlsZWJpbicpOyByZXR1cm47IH0gfWNhdGNoKGUpeyBjb25zb2xlLndhcm4oJ2ZpbGViaW4gZXJyb3InLCBlKTsgfQ0KICB0cnl7IGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTsgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBibG9iLCBmaWxlbmFtZSk7IGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL3VwbG9hZC5nb2ZpbGUuaW8vdXBsb2FkRmlsZScsIHsgbWV0aG9kOidQT1NUJywgYm9keTogZm9ybSB9KTsgY29uc3QgaiA9IGF3YWl0IHJlcy5qc29uKCk7IGlmKGouc3RhdHVzID09PSAnb2snKXsgc3RhdGUubGFzdFVwbG9hZCA9IG5vdzsgJCgnc2hhcmVhYmxlJykudmFsdWUgPSBqLmRhdGEuZG93bmxvYWRQYWdlOyB0b2FzdCgnVXBsb2FkZWQgdG8gR29GaWxlJyk7IHJldHVybjsgfSB0b2FzdCgnVXBsb2FkIGZhaWxlZCcpOyB9Y2F0Y2goZSl7IGNvbnNvbGUuZXJyb3IoZSk7IHRvYXN0KCdVcGxvYWQgZXJyb3InKTsgfQ0KfSk7DQoNCi8vIGJpbiBsaXN0DQokKCdiaW5MaXN0Jyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gew0KICB0cnkgew0KICAgIGNvbnN0IGJpbiA9ICd4bGc0a2dnb3piZGdzbnc0JzsNCiAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vZmlsZWJpbi5uZXQvJHtiaW59P2pzb25gLCB7DQogICAgICBoZWFkZXJzOiB7ICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiIgfQ0KICAgIH0pOw0KICAgIGlmICghci5vaykgeyB0b2FzdChgRmFpbGVkIHRvIGZldGNoIHVwbG9hZHM6ICR7ci5zdGF0dXNUZXh0fWApOyByZXR1cm47IH0NCg0KICAgIGxldCBqOw0KICAgIHRyeSB7DQogICAgICBqID0gYXdhaXQgci5qc29uKCk7DQogICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICB0b2FzdCgiRmFpbGVkIHRvIHBhcnNlIHNlcnZlciByZXNwb25zZSIpOw0KICAgICAgY29uc29sZS5lcnJvcihlcnIpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGlmICghai5maWxlcyB8fCAhai5maWxlcy5sZW5ndGgpIHsgdG9hc3QoJ05vIGZpbGVzIGZvdW5kJyk7IHJldHVybjsgfQ0KDQogICAgLy8gc29ydCBhbmQgdHJpbQ0KICAgIGNvbnN0IHNvcnRlZCA9IGouZmlsZXMuc29ydCgoYSxiKT0+IG5ldyBEYXRlKGIudXBkYXRlZF9hdCkgLSBuZXcgRGF0ZShhLnVwZGF0ZWRfYXQpKTsNCiAgICBjb25zdCByZWNlbnQgPSBzb3J0ZWQuc2xpY2UoMCwxMCk7DQoNCiAgICBsZXQgaHRtbCA9ICc8YnV0dG9uIGlkPSJjbG9zZUJpbiI+Q2xvc2U8L2J1dHRvbj48dWw+JzsNCiAgICByZWNlbnQuZm9yRWFjaChmaWxlID0+IHsNCiAgICAgIGNvbnN0IGZpbGVVcmwgPSBgaHR0cHM6Ly9maWxlYmluLm5ldC8ke2Jpbn0vJHtlbmNvZGVVUklDb21wb25lbnQoZmlsZS5maWxlbmFtZSl9YDsNCiAgICAgIGNvbnN0IGFkZGVkRGF0ZSA9IG5ldyBEYXRlKGZpbGUudXBkYXRlZF9hdCk7DQogICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYWRkZWREYXRlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCkucmVwbGFjZSgvLS9nLCcnKTsNCiAgICAgIGNvbnN0IGhvdXJzID0gYWRkZWREYXRlLmdldEhvdXJzKCk7DQogICAgICBjb25zdCBtaW51dGVzID0gYWRkZWREYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsJzAnKTsNCiAgICAgIGNvbnN0IGFtcG0gPSBob3VycyA+PSAxMiA/ICdQTSc6J0FNJzsNCiAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBgJHtob3VycyAlIDEyIHx8IDEyfToke21pbnV0ZXN9ICR7YW1wbX1gOw0KICAgICAgY29uc3Qgc3RyaXBwZWROYW1lID0gZmlsZS5maWxlbmFtZS5zcGxpdCgnLicpLnNsaWNlKDAsLTEpLmpvaW4oJy4nKTsNCiAgICAgIGNvbnN0IGZpbGVTaXplID0gZmlsZS5ieXRlc19yZWFkYWJsZSB8fCAnJzsNCiAgICAgIGh0bWwgKz0gYDxsaT48YSBocmVmPSIke2ZpbGVVcmx9IiB0YXJnZXQ9Il9ibGFuayI+JHtmb3JtYXR0ZWREYXRlfSAke2Zvcm1hdHRlZFRpbWV9IHwgJHtzdHJpcHBlZE5hbWV9IHwgJHtmaWxlU2l6ZX08L2E+PC9saT5gOw0KICAgIH0pOw0KICAgIGh0bWwgKz0gJzwvdWw+JzsNCg0KICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlTGlzdENvbnRhaW5lcicpOw0KICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sOw0KICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCg0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZUJpbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpOw0KICB9IGNhdGNoIChlKSB7DQogICAgY29uc29sZS5lcnJvcihlKTsNCiAgICB0b2FzdCgnRXJyb3IgZmV0Y2hpbmcgdXBsb2FkcycpOw0KICB9DQp9KTsNCg0KDQovLyBCdWxrIHNlbGVjdCBhbGwgdmlzaWJsZSBzZWFyY2ggcmVzdWx0cyB3aGVuIHByZXNzaW5nIEVudGVyIGluIHNlYXJjaA0KJCgnc2VhcmNoJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldikgPT4gew0KICBpZiAoZXYua2V5ID09PSAnRW50ZXInKSB7DQogICAgZXYucHJldmVudERlZmF1bHQoKTsNCiAgICBjb25zdCB2aXNpYmxlSXRlbXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpDQogICAgICAuZmlsdGVyKGVsID0+IGVsLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJyk7DQogICAgbGV0IGFkZGVkID0gMDsNCiAgICB2aXNpYmxlSXRlbXMuZm9yRWFjaChlbCA9PiB7DQogICAgICBjb25zdCBuYW1lID0gZWwuZGF0YXNldC5uYW1lOw0KICAgICAgY29uc3Qgc2l6ZSA9IGVsLmRhdGFzZXQuc2l6ZTsNCiAgICAgIGlmICghc3RhdGUuc2VsZWN0ZWQuc29tZShzID0+IHMubmFtZSA9PT0gbmFtZSkpIHsNCiAgICAgICAgc3RhdGUuc2VsZWN0ZWQucHVzaCh7IG5hbWUsIHNpemUgfSk7DQogICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7DQogICAgICAgIGFkZGVkKys7DQogICAgICB9DQogICAgfSk7DQogICAgaWYgKGFkZGVkID4gMCkgew0KICAgICAgdXBkYXRlVG90YWxzKCk7DQogICAgICByZW5kZXJPdmVybGF5KCk7DQogICAgICB0b2FzdChgQWRkZWQgJHthZGRlZH0gaXRlbXMgZnJvbSBzZWFyY2ggcmVzdWx0c2ApOw0KICAgIH0gZWxzZSB7DQogICAgICB0b2FzdCgnTm8gbmV3IGl0ZW1zIHRvIGFkZCcpOw0KICAgIH0NCiAgfQ0KfSk7DQoNCiQoJ2NvcHlMaW5rJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogIGNvbnN0IGxpbmsgPSAkKCdzaGFyZWFibGUnKS52YWx1ZTsNCiAgaWYgKCFsaW5rKSB7DQogICAgdG9hc3QoJ05vdGhpbmcgdG8gY29weScpOw0KICAgIHJldHVybjsNCiAgfQ0KICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChsaW5rKS50aGVuKCgpID0+IHsNCiAgICB0b2FzdCgnTGluayBjb3BpZWQgdG8gY2xpcGJvYXJkJyk7DQogIH0pLmNhdGNoKCgpID0+IHsNCiAgICBhbGVydCgnQ29weSBmYWlsZWQsIHBsZWFzZSBjb3B5IG1hbnVhbGx5Jyk7DQogIH0pOw0KfSk7DQoNCi8qJCgncmVsb2FkQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogIGlmIChjb25maXJtKCdSZWxvYWQgdGhlIHBhZ2U/IEFsbCB1bnNhdmVkIHNlbGVjdGlvbnMgd2lsbCBiZSBsb3N0LicpKSB7DQogICAgbG9jYXRpb24ucmVsb2FkKCk7DQogIH0NCn0pOyovDQoNCi8vIGZpbGVuYW1lIHBhcnNlIHVzZWQgaW4gaW1wb3J0DQpmdW5jdGlvbiBwYXJzZUZpbGVuYW1lVG9Db25maWcoZm4peyBjb25zdCBiYXNlID0gZm4ucmVwbGFjZSgvXC4oQ0xJX1BSTVp8UFJNWnx0eHQpJC9pLCcnKTsgY29uc3QgcGFydHMgPSBiYXNlLnNwbGl0KCdfJyk7IGlmKHBhcnRzLmxlbmd0aCA8IDUpIHJldHVybiBudWxsOyBjb25zdCB0b2tlbnMgPSBwYXJ0cy5zbGljZSgwLC0xKTsgbGV0IGNvbnNvbGVUb2tlbj0ndjEnLCBzZFRva2VuPSdzZDAnLCBkcm9pZFRva2VuPSdkcm9pZDAnLCBsaW5Ub2tlbj0nbGluMCc7IGZvcihsZXQgaT10b2tlbnMubGVuZ3RoLTE7aT49MDtpLS0peyBjb25zdCB0ID0gdG9rZW5zW2ldLnRvTG93ZXJDYXNlKCk7IGlmKC9ebGluXGQrJC8udGVzdCh0KSAmJiBsaW5Ub2tlbj09PSdsaW4wJyl7IGxpblRva2VuID0gdDsgdG9rZW5zLnNwbGljZShpLDEpOyB9IGVsc2UgaWYoL15kcm9pZFxkKyQvLnRlc3QodCkgJiYgZHJvaWRUb2tlbj09PSdkcm9pZDAnKXsgZHJvaWRUb2tlbiA9IHQ7IHRva2Vucy5zcGxpY2UoaSwxKTsgfSBlbHNlIGlmKC9ec2RcZCskLy50ZXN0KHQpICYmIHNkVG9rZW49PT0nc2QwJyl7IHNkVG9rZW4gPSB0OyB0b2tlbnMuc3BsaWNlKGksMSk7IH0gZWxzZSBpZigvXih2MXx2MnxsaXRlfG9sZWQpJC8udGVzdCh0KSAmJiBjb25zb2xlVG9rZW49PT0ndjEnKXsgY29uc29sZVRva2VuID0gdDsgdG9rZW5zLnNwbGljZShpLDEpOyB9IH0gY29uc3QgY3VzdG9tZXIgPSB0b2tlbnMuam9pbignXycpfHwnY3VzdG9tZXInOyByZXR1cm4geyBjdXN0b21lciwgY29uc29sZVRva2VuLCBzZFRva2VuLCBkcm9pZFRva2VuLCBsaW5Ub2tlbiB9IH0NCg0KLy8gd2lyZSBmaWxlIGlucHV0IGZvciBpbXBvcnQNCiQoJ2ZpbGVJbicpPy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXYpPT57IGNvbnN0IGYgPSBldi50YXJnZXQuZmlsZXNbMF07IGlmKCFmKSByZXR1cm47IGNvbnN0IGNmZyA9IHBhcnNlRmlsZW5hbWVUb0NvbmZpZyhmLm5hbWUpOyBpZihjZmcpeyAkKCdjdXN0b21lcicpLnZhbHVlID0gY2ZnLmN1c3RvbWVyOyBBcnJheS5mcm9tKCQoJ2NvbnNvbGUnKS5vcHRpb25zKS5mb3JFYWNoKG89PnsgaWYoby52YWx1ZT09PWNmZy5jb25zb2xlVG9rZW4pIG8uc2VsZWN0ZWQ9dHJ1ZTsgfSk7IGlmKC9ec2RcZCskLy50ZXN0KGNmZy5zZFRva2VuKSkgJCgnc2QnKS52YWx1ZSA9IE51bWJlcihjZmcuc2RUb2tlbi5yZXBsYWNlKC9cRC9nLCcnKSk7IGlmKC9eZHJvaWRcZCskLy50ZXN0KGNmZy5kcm9pZFRva2VuKSkgJCgnYW5kcm9pZCcpLnZhbHVlID0gTnVtYmVyKGNmZy5kcm9pZFRva2VuLnJlcGxhY2UoL1xEL2csJycpKTsgaWYoL15saW5cZCskLy50ZXN0KGNmZy5saW5Ub2tlbikpICQoJ2xpbnV4JykudmFsdWUgPSBOdW1iZXIoY2ZnLmxpblRva2VuLnJlcGxhY2UoL1xEL2csJycpKTsgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7IHVwZGF0ZVRvdGFscygpOyB9DQogIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7IHJlYWRlci5vbmxvYWQgPSAoZSk9PnsgY29uc3QgbGluZXMgPSBlLnRhcmdldC5yZXN1bHQuc3BsaXQoJ1xuJykubWFwKHM9PnMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7IHN0YXRlLnNlbGVjdGVkPVtdOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpLmZvckVhY2goaT0+aS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsgbGluZXMuZm9yRWFjaCh0aXRsZT0+eyBjb25zdCByb3cgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoaXQ9PiBpdC5kYXRhc2V0Lm5hbWU9PT10aXRsZSk7IGlmKHJvdyl7IHJvdy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyBzdGF0ZS5zZWxlY3RlZC5wdXNoKHsgbmFtZTogcm93LmRhdGFzZXQubmFtZSwgc2l6ZTogcm93LmRhdGFzZXQuc2l6ZSB9KTsgfSBlbHNlIHsgY29uc3QgbWF5YmUgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoaXQ9PiBpdC5kYXRhc2V0Lm5hbWUgJiYgaXQuZGF0YXNldC5uYW1lLnRvTG93ZXJDYXNlKCk9PT10aXRsZS50b0xvd2VyQ2FzZSgpKTsgaWYobWF5YmUpeyBtYXliZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyBzdGF0ZS5zZWxlY3RlZC5wdXNoKHsgbmFtZTptYXliZS5kYXRhc2V0Lm5hbWUsIHNpemU6bWF5YmUuZGF0YXNldC5zaXplIH0pOyB9IH0gfSk7IHVwZGF0ZVRvdGFscygpOyByZW5kZXJPdmVybGF5KCk7IH07IHJlYWRlci5yZWFkQXNUZXh0KGYpOyB9KTsNCg0KLy8gaGVscGVycw0KZnVuY3Rpb24gZGVib3VuY2UoZm4sbXM9MjAwKXsgbGV0IGg7IHJldHVybiAoLi4uYSk9PnsgY2xlYXJUaW1lb3V0KGgpOyBoPXNldFRpbWVvdXQoKCk9PmZuKC4uLmEpLG1zKTsgfTsgfQ0KDQovLyBpbml0aWFsIGxvYWQNCihhc3luYyBmdW5jdGlvbiBpbml0KCl7IGF3YWl0IGxvYWRYTUwoKTsgdXBkYXRlVG90YWxzKCk7IHVwZGF0ZUZpbGVuYW1lUHJldmlldygpOyB9KSgpOw0KDQoNCg0KDQpmdW5jdGlvbiByZW5kZXJTZWxlY3RlZFBhbmVsKCkgew0KICBjb25zdCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkUGFuZWxCb2R5Jyk7DQogIC8vY29uc3QgY291bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0ZWRQYW5lbENvdW50Jyk7DQogIGlmICghYm9keSB8fCAhY291bnQpIHJldHVybjsNCg0KICBib2R5LmlubmVySFRNTCA9ICcnOw0KICBzdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKChzLCBpKSA9PiB7DQogICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQogICAgcm93LmNsYXNzTmFtZSA9ICdyb3cnOw0KICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgIHJvdy5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJzsNCiAgICByb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOw0KICAgIHJvdy5zdHlsZS5wYWRkaW5nID0gJzZweCAwJzsNCiAgICByb3cuaW5uZXJIVE1MID0gYA0KICAgICAgPGRpdj4NCiAgICAgICAgPHN0cm9uZz4ke2kgKyAxfS4gJHtlc2Mocy5uYW1lKX08L3N0cm9uZz4NCiAgICAgICAgPGRpdiBjbGFzcz0ibWV0YSI+JHtlc2Mocy5zaXplKX08L2Rpdj4NCiAgICAgIDwvZGl2Pg0KICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDo0cHg7Ij4NCiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iaWNvbiB1cCI+4qyGPC9idXR0b24+DQogICAgICAgIDxidXR0b24gY2xhc3M9Imljb24gZG93biI+4qyHPC9idXR0b24+DQogICAgICAgIDxidXR0b24gY2xhc3M9Imljb24gcmVtb3ZlIj7inJY8L2J1dHRvbj4NCiAgICAgIDwvZGl2Pg0KICAgIGA7DQoNCiAgICAvLyBNb3ZlIHVwDQogICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy51cCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgaWYgKGkgPiAwKSB7DQogICAgICAgIFtzdGF0ZS5zZWxlY3RlZFtpIC0gMV0sIHN0YXRlLnNlbGVjdGVkW2ldXSA9IFtzdGF0ZS5zZWxlY3RlZFtpXSwgc3RhdGUuc2VsZWN0ZWRbaSAtIDFdXTsNCiAgICAgICAgcmVuZGVyT3ZlcmxheSgpOw0KICAgICAgICByZW5kZXJMaXN0KHN0YXRlLml0ZW1zKTsNCiAgICAgICAgdXBkYXRlVG90YWxzKCk7DQogICAgICB9DQogICAgfSk7DQoNCiAgICAvLyBNb3ZlIGRvd24NCiAgICByb3cucXVlcnlTZWxlY3RvcignLmRvd24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgIGlmIChpIDwgc3RhdGUuc2VsZWN0ZWQubGVuZ3RoIC0gMSkgew0KICAgICAgICBbc3RhdGUuc2VsZWN0ZWRbaSArIDFdLCBzdGF0ZS5zZWxlY3RlZFtpXV0gPSBbc3RhdGUuc2VsZWN0ZWRbaV0sIHN0YXRlLnNlbGVjdGVkW2kgKyAxXV07DQogICAgICAgIHJlbmRlck92ZXJsYXkoKTsNCiAgICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7DQogICAgICAgIHVwZGF0ZVRvdGFscygpOw0KICAgICAgfQ0KICAgIH0pOw0KDQogICAgLy8gUmVtb3ZlDQogICAgcm93LnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgIHN0YXRlLnNlbGVjdGVkLnNwbGljZShpLCAxKTsNCiAgICAgIHJlbmRlck92ZXJsYXkoKTsNCiAgICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOw0KICAgICAgdXBkYXRlVG90YWxzKCk7DQogICAgfSk7DQoNCiAgICBib2R5LmFwcGVuZENoaWxkKHJvdyk7DQogIH0pOw0KDQogIGNvdW50LnRleHRDb250ZW50ID0gc3RhdGUuc2VsZWN0ZWQubGVuZ3RoOw0KfQ0KDQpjb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9nZ2xlQ29uZmlnJyk7DQpjb25zdCBjb25maWdTZWN0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ1NlY3Rpb24nKTsNCg0KDQppZiAoaXNNb2JpbGUgJiYgdG9nZ2xlQnRuICYmIGNvbmZpZ1NlY3Rpb24pIHsNCiAgLy8gU2hvdyBjb25maWcgb25jZSBvbiBmaXJzdCBsb2FkDQogIGNvbmZpZ1NlY3Rpb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7DQogIHRvZ2dsZUJ0bi50ZXh0Q29udGVudCA9ICdIaWRlIENvbmZpZ3VyYXRpb24nOw0KDQogIHRvZ2dsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICBjb25zdCBpc1Zpc2libGUgPSBjb25maWdTZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpOw0KICAgIHRvZ2dsZUJ0bi50ZXh0Q29udGVudCA9IGlzVmlzaWJsZSA/ICdIaWRlIENvbmZpZ3VyYXRpb24nIDogJ1Nob3cgQ29uZmlndXJhdGlvbic7DQogIH0pOw0KfQ0KaWYgKCFpc0xvY2FsKSB7DQoJDQogIGNvbnN0IGFkbWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkbWluRXhwb3J0Jyk7DQogIGlmIChhZG1pbikgYWRtaW4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICBjb25zdCBiaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmluTGlzdCcpOw0KICBpZiAoYmluKSBiaW4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAvL2NvbnN0IHVwbG9hZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRCdG4nKTsNCiAgLy9pZiAodXBsb2FkKSB1cGxvYWQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KfQ0KDQoNCjwhLS0gS2VlcCBTZWFyY2ggQmFyIEZvY3VzZWQgKERlc2t0b3AgT25seSwgU2FmZSBmb3IgQ3VzdG9tZXIgSW5wdXQpIC0tPg0KDQpjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gnKTsNCg0KDQppZiAoIWlzTW9iaWxlKSB7DQogIGZ1bmN0aW9uIHJlZm9jdXNTZWFyY2goKSB7DQogICAgY29uc3QgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsNCiAgICBpZiAoDQogICAgICBhY3RpdmUgJiYNCiAgICAgIChhY3RpdmUuaWQgPT09ICdjdXN0b21lcicgfHwNCiAgICAgICBhY3RpdmUudGFnTmFtZSA9PT0gJ1NFTEVDVCcgfHwNCiAgICAgICBhY3RpdmUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykNCiAgICApIHJldHVybjsNCiAgICBzZWFyY2hJbnB1dC5mb2N1cygpOw0KICAgIHNlYXJjaElucHV0LnNlbGVjdCgpOw0KICB9DQoNCiAgLy8gRm9jdXMgYXQgbG9hZA0KICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlZm9jdXNTZWFyY2gpOw0KDQogIC8vIFJlZm9jdXMgYWZ0ZXIgbm9ybWFsIGNsaWNrcyAobm90IHdoZW4gbW9kYWwvb3ZlcmxheSBvciB0eXBpbmcgZWxzZXdoZXJlKQ0KICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgY29uc3QgbW9kYWxPcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVzTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snOw0KICAgIA0KICAgIGNvbnN0IG92ZXJsYXlPcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ292ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID09PSAnZmxleCc7DQogICAgaWYgKA0KICAgICAgIW1vZGFsT3BlbiAmJg0KICAgICAgIW92ZXJsYXlPcGVuICYmDQogICAgICBlLnRhcmdldC5pZCAhPT0gJ3NlYXJjaCcgJiYNCiAgICAgIGUudGFyZ2V0LmlkICE9PSAnY3VzdG9tZXInICYmDQogICAgICAhZS50YXJnZXQuY2xvc2VzdCgnc2VsZWN0JykNCiAgICApIHsNCiAgICAgIHJlZm9jdXNTZWFyY2goKTsNCiAgICB9DQogIH0pOw0KDQogIC8vIFJlZm9jdXMgYWZ0ZXIgVUkgYnV0dG9uIGFjdGlvbnMNCiAgWydjbGVhclNlYXJjaCcsICdzaG93U2VsZWN0ZWQnLCAnc2F2ZUJ0bicsICd1cGxvYWRCdG4nXS5mb3JFYWNoKGlkID0+IHsNCiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgaWYgKGJ0bikgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVmb2N1c1NlYXJjaCk7DQogIH0pOw0KDQogIC8vIFJlZm9jdXMgYWZ0ZXIgc2VsZWN0aW5nIGFuIGl0ZW0NCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2l0ZW0nKSkgew0KICAgICAgc2V0VGltZW91dChyZWZvY3VzU2VhcmNoLCAxMjApOw0KICAgIH0NCiAgfSk7DQoNCiAgLy8gUmVmb2N1cyBhZnRlciBjbG9zaW5nIG92ZXJsYXkgb3IgZmlsZSBtb2RhbA0KICBbJ2Nsb3NlT3ZlcmxheSddLmZvckVhY2goaWQgPT4gew0KICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICBpZiAoYnRuKSBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRUaW1lb3V0KHJlZm9jdXNTZWFyY2gsIDIwMCkpOw0KICB9KTsNCg0KICAvLyBSZWZvY3VzIGFmdGVyIHByZXNzaW5nIEVudGVyIGluIHNlYXJjaCAoYWRkLXRvLWxpc3QgZXZlbnQpDQogIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXYpID0+IHsNCiAgICBpZiAoZXYua2V5ID09PSAnRW50ZXInKSB7DQogICAgICAvLyBXYWl0IGZvciB5b3VyIGFkZC10by1saXN0IGxvZ2ljIHRvIGZpbmlzaA0KICAgICAgc2V0VGltZW91dChyZWZvY3VzU2VhcmNoLCAxNTApOw0KICAgIH0NCiAgfSk7DQogIC8vcm93LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKCkgPT4gc2hvd0ZpbGVzKGl0ZW0ubmFtZSwgaXRlbS5maWxlcyB8fCBbXSwgaXRlbS5zaXplKSk7DQoNCn0NCjwvc2NyaXB0Pg0KDQo8L2JvZHk+DQo8L2h0bWw+DQo=`;
    const decoded = atob(base64html);
    const iframe = document.getElementById('viewer');
    const doc = iframe.contentWindow.document;
    doc.open();
    doc.write(decoded);
    doc.close();
  </script>
</body>
</html>