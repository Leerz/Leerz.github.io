<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PremazingPH Games</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      overflow: hidden;
    }
    iframe {
      width: 100vw; height: 100vh;
      border: none;
      display: block;
    }
  </style>
</head>
<body>
  <iframe id="viewer"></iframe>
  <script>
    const base64html = `PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9InV0Zi04IiAvPgo8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSIgLz4KPHRpdGxlIGlkPSJwYWdlVGl0bGUiPkdhbWUgU2VsZWN0b3I8L3RpdGxlPgo8c3R5bGU+Cjpyb290ewogIC0tYmc6IzBhMGUxYTsKICAtLWJnLXNlY29uZGFyeTojMTExODI3OwogIC0tcGFuZWw6IzFlMjkzYjsKICAtLXBhbmVsLWhvdmVyOiMyNzM0NDk7CiAgLS1jYXJkOiMxZTI5M2I7CiAgLS1jYXJkLXNlbGVjdGVkOiMxZTNhNWY7CiAgLS1ib3JkZXI6IzMzNDE1NTsKICAtLXRleHQ6I2YxZjVmOTsKICAtLXRleHQtc2Vjb25kYXJ5OiM5NGEzYjg7CiAgLS1tdXRlZDojNjQ3NDhiOwogIC0tcHJpbWFyeTojM2I4MmY2OwogIC0tcHJpbWFyeS1ob3ZlcjojMjU2M2ViOwogIC0tYWNjZW50OiNmNTllMGI7CiAgLS1zdWNjZXNzOiMyMmM1NWU7CiAgLS1kYW5nZXI6I2VmNDQ0NDsKICAtLXJhZGl1czoxMnB4OwogIC0tcmFkaXVzLWxnOjE2cHg7CiAgLS1oZWFkZXItYmc6bGluZWFyLWdyYWRpZW50KDE4MGRlZywjM2I4MmY2IDAlLCMyNTYzZWIgMTAwJSk7Cn0KLyogTmludGVuZG8gVGhlbWUgLSBIb2xkIFggYnV0dG9uIDIuNSBzZWNvbmRzIHRvIGFjdGl2YXRlICovCjpyb290W2RhdGEtdGhlbWU9Im5pbnRlbmRvIl17CiAgLS1iZzojMmQyZDJkICFpbXBvcnRhbnQ7CiAgLS1iZy1zZWNvbmRhcnk6IzM2MzYzNiAhaW1wb3J0YW50OwogIC0tcGFuZWw6IzQyNDI0MiAhaW1wb3J0YW50OwogIC0tcGFuZWwtaG92ZXI6IzRmNGY0ZiAhaW1wb3J0YW50OwogIC0tY2FyZDojNDI0MjQyICFpbXBvcnRhbnQ7CiAgLS1jYXJkLXNlbGVjdGVkOiM1YTIwMjAgIWltcG9ydGFudDsKICAtLWJvcmRlcjojNTU1NTU1ICFpbXBvcnRhbnQ7CiAgLS10ZXh0OiNmZmZmZmYgIWltcG9ydGFudDsKICAtLXRleHQtc2Vjb25kYXJ5OiNjY2NjY2MgIWltcG9ydGFudDsKICAtLW11dGVkOiM5OTk5OTkgIWltcG9ydGFudDsKICAtLXByaW1hcnk6I2U2MDAxMiAhaW1wb3J0YW50OwogIC0tcHJpbWFyeS1ob3ZlcjojZmYxYTFhICFpbXBvcnRhbnQ7CiAgLS1hY2NlbnQ6I2U2MDAxMiAhaW1wb3J0YW50OwogIC0tc3VjY2VzczojMjJjNTVlICFpbXBvcnRhbnQ7CiAgLS1kYW5nZXI6I2U2MDAxMiAhaW1wb3J0YW50OwogIC0taGVhZGVyLWJnOmxpbmVhci1ncmFkaWVudCgxODBkZWcsI2U2MDAxMiAwJSwjYjgwMDBmIDEwMCUpICFpbXBvcnRhbnQ7Cn0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIGJvZHl7YmFja2dyb3VuZDojZmZmZmZmICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29udGFpbmVye2JhY2tncm91bmQ6I2Y1ZjVmNSAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmxlZnRQYW5lLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAucmlnaHRQYW5le2JhY2tncm91bmQ6I2U4ZThlOCAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojY2NjICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAubGVmdFBhbmUtaW5uZXJ7YmFja2dyb3VuZDp0cmFuc3BhcmVudCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW17YmFja2dyb3VuZDojZmZmICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNkZGQgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtOmhvdmVye2JhY2tncm91bmQ6I2YwZjBmMCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW0uc2VsZWN0ZWR7YmFja2dyb3VuZDojZmZlNWU1ICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNlNjAwMTIgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5pdGVtLXRpdGxlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RhdC12YWx1ZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnNlbGVjdGVkLWl0ZW0tdGl0bGV7Y29sb3I6IzExMSAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW0tc2l6ZSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLml0ZW0tbWV0YSxodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0YXQtbGFiZWwsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLXNpemUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLW1ldGEsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLXZlcnNpb257Y29sb3I6IzQ0NCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmxlZ2VuZC1pdGVtLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuc3RhdC1ub3RlLGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29udHJvbHMgbGFiZWx7Y29sb3I6IzU1NSAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnNlbGVjdGVkLWl0ZW17YmFja2dyb3VuZDojZjVmNWY1ICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNkZGQgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLXRodW1ie2JhY2tncm91bmQ6I2UwZTBlMCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAudXAsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1pdGVtLWFjdGlvbnMgLmRvd257YmFja2dyb3VuZDojZTBlMGUwICFpbXBvcnRhbnQ7Y29sb3I6IzMzMyAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnNlbGVjdGVkLWl0ZW0tYWN0aW9ucyAucmVtb3Zle2JhY2tncm91bmQ6I2ZmZTVlNSAhaW1wb3J0YW50O2NvbG9yOiNlNjAwMTIgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nZW5yZS1maWx0ZXIsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5maWx0ZXItdGFic3tiYWNrZ3JvdW5kOiNlOGU4ZTggIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5maWx0ZXItdGFie2JvcmRlci1jb2xvcjojYmJiICFpbXBvcnRhbnQ7Y29sb3I6IzAwMCAhaW1wb3J0YW50O2JhY2tncm91bmQ6I2ZmZiAhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OjYwMCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmZpbHRlci10YWI6aG92ZXJ7YmFja2dyb3VuZDojZjBmMGYwICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZmlsdGVyLXRhYi5hY3RpdmV7YmFja2dyb3VuZDojZTYwMDEyICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNlNjAwMTIgIWltcG9ydGFudDtjb2xvcjojZmZmICFpbXBvcnRhbnR9Cmh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuZ2VucmUtY2hpcHtib3JkZXItY29sb3I6I2JiYiAhaW1wb3J0YW50O2NvbG9yOiMwMDAgIWltcG9ydGFudDtiYWNrZ3JvdW5kOiNmZmYgIWltcG9ydGFudDtmb250LXdlaWdodDo2MDAgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nZW5yZS1jaGlwOmhvdmVye2JhY2tncm91bmQ6I2YwZjBmMCAhaW1wb3J0YW50O2NvbG9yOiMwMDAgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5nZW5yZS1jaGlwLmFjdGl2ZXtiYWNrZ3JvdW5kOiNlNjAwMTIgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2U2MDAxMiAhaW1wb3J0YW50O2NvbG9yOiNmZmYgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdG9yYWdlLWNhcmQsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdGF0LWNhcmQsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1wYW5lbHtiYWNrZ3JvdW5kOiNmZmYgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2RkZCAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLmNvbnRyb2xzIGlucHV0LGh0bWxbZGF0YS10aGVtZT0ibmludGVuZG8iXSAuY29udHJvbHMgc2VsZWN0e2JhY2tncm91bmQ6I2ZmZiAhaW1wb3J0YW50O2JvcmRlci1jb2xvcjojY2NjICFpbXBvcnRhbnQ7Y29sb3I6IzMzMyAhaW1wb3J0YW50fQpodG1sW2RhdGEtdGhlbWU9Im5pbnRlbmRvIl0gLnN0b3JhZ2UtdGl0bGUsaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zdG9yYWdlLWNhcGFjaXR5e2NvbG9yOiMzMzMgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5zZWxlY3RlZC1wYW5lbCAuaGVhZHtjb2xvcjojMzMzICFpbXBvcnRhbnQ7Ym9yZGVyLWNvbG9yOiNkZGQgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jdGEtYnV0dG9ue2JhY2tncm91bmQ6I2U2MDAxMiAhaW1wb3J0YW50O2JveC1zaGFkb3c6MCA0cHggMjBweCByZ2JhKDIzMCwwLDE4LDAuNCkgIWltcG9ydGFudH0KaHRtbFtkYXRhLXRoZW1lPSJuaW50ZW5kbyJdIC5jdGEtc2hvd3tiYWNrZ3JvdW5kOiNmZmYgIWltcG9ydGFudDtib3JkZXItY29sb3I6I2NjYyAhaW1wb3J0YW50O2NvbG9yOiMzMzMgIWltcG9ydGFudH0KLyogVGhlbWUgaGludCByaW5nIGFuaW1hdGlvbiBvbiBYIGJ1dHRvbiAqLwojY2xlYXJTZWFyY2h7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6dmlzaWJsZX0KI2NsZWFyU2VhcmNoOjphZnRlcntjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO2luc2V0Oi0zcHg7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyOjJweCBkYXNoZWQgcmdiYSgyMzAsMCwxOCwwLjQpO29wYWNpdHk6MDthbmltYXRpb246dGhlbWVIaW50IDNzIGVhc2UtaW4tb3V0IGluZmluaXRlO3BvaW50ZXItZXZlbnRzOm5vbmV9CkBrZXlmcmFtZXMgdGhlbWVIaW50ezAlLDEwMCV7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZSgwLjgpfTUwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlKDEuMSl9fQojY2xlYXJTZWFyY2guaG9sZGluZzo6YWZ0ZXJ7b3BhY2l0eToxO2FuaW1hdGlvbjpub25lO2JvcmRlci1jb2xvcjojZTYwMDEyO2JvcmRlci1zdHlsZTpzb2xpZH0KLyogVGhlbWUgY291bnRkb3duIHRvYXN0ICovCi50aGVtZS1jb3VudGRvd257cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSk7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuOSk7Y29sb3I6I2ZmZjtwYWRkaW5nOjIwcHggMzJweDtib3JkZXItcmFkaXVzOjE2cHg7Zm9udC1zaXplOjE4cHg7Zm9udC13ZWlnaHQ6NjAwO3otaW5kZXg6OTk5OTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O29wYWNpdHk6MDtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb246b3BhY2l0eSAwLjJzfQoudGhlbWUtY291bnRkb3duLnNob3d7b3BhY2l0eToxfQoudGhlbWUtY291bnRkb3duIC5jb3VudGRvd24tbnVte2ZvbnQtc2l6ZTo0OHB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojZTYwMDEyfQoudGhlbWUtY291bnRkb3duIC5jb3VudGRvd24tbGFiZWx7Zm9udC1zaXplOjEzcHg7Y29sb3I6Izk5OX0KKntib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOnRyYW5zcGFyZW50fQpodG1sLGJvZHl7aGVpZ2h0OjEwMCU7bWFyZ2luOjA7Zm9udC1mYW1pbHk6J0ludGVyJywtYXBwbGUtc3lzdGVtLEJsaW5rTWFjU3lzdGVtRm9udCwnU2Vnb2UgVUknLFJvYm90byxzYW5zLXNlcmlmO2JhY2tncm91bmQ6dmFyKC0tYmcpO2NvbG9yOnZhcigtLXRleHQpfQoKLyogSGVhZGVyICovCi5oZWFkZXJ7cG9zaXRpb246Zml4ZWQ7dG9wOjA7cmlnaHQ6MDtsZWZ0OjA7aGVpZ2h0OjcwcHg7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXItYmcpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEycHg7cGFkZGluZzoxMnB4IDE2cHg7ei1pbmRleDo2MDtib3gtc2hhZG93OjAgNHB4IDIwcHggcmdiYSgwLDAsMCwwLjMpfQouaGVhZGVyIC5zZWFyY2h7ZmxleDoxO21pbi13aWR0aDoxNDBweH0KLmhlYWRlciBpbnB1dC5zZWFyY2h7aGVpZ2h0OjQycHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjpub25lO3BhZGRpbmc6MCAxNnB4O2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwwLjE1KTtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxNXB4O2JhY2tkcm9wLWZpbHRlcjpibHVyKDEwcHgpfQouaGVhZGVyIGlucHV0LnNlYXJjaDo6cGxhY2Vob2xkZXJ7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjcpfQouaGVhZGVyIGlucHV0LnNlYXJjaDpmb2N1c3tvdXRsaW5lOm5vbmU7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMjUpO2JveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoMjU1LDI1NSwyNTUsMC4yKX0KLmhlYWRlciAuYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweDthbGlnbi1pdGVtczpjZW50ZXJ9Ci5oZWFkZXIgYnV0dG9ue2hlaWdodDo0MnB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtib3JkZXI6bm9uZTtwYWRkaW5nOjAgMTRweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsMC4xNSk7Y29sb3I6I2ZmZjtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo1MDA7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjphbGwgMC4yc30KLmhlYWRlciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LDAuMjUpfQoKLyogRmlsdGVyIFRhYnMgKi8KLmZpbHRlci10YWJze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O3BhZGRpbmc6MTJweCAxNnB4O2JhY2tncm91bmQ6dmFyKC0tYmctc2Vjb25kYXJ5KTtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouZmlsdGVyLXRhYntwYWRkaW5nOjhweCAxNnB4O2JvcmRlci1yYWRpdXM6MjBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NTAwO2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuMnN9Ci5maWx0ZXItdGFiOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpfQouZmlsdGVyLXRhYi5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZn0KCi8qIENvbnRhaW5lciAqLwouY29udGFpbmVye2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MWZyIDQwMHB4O2dhcDoxNnB4O3BhZGRpbmc6Y2FsYyg3MHB4ICsgMTZweCkgMTZweCAxMDBweDttaW4taGVpZ2h0OjEwMHZofQoKLyogTGVmdCBQYW5lIC0gR2FtZSBMaXN0ICovCi5sZWZ0UGFuZXtiYWNrZ3JvdW5kOnZhcigtLWJnLXNlY29uZGFyeSk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtbGcpO3BhZGRpbmc6MDtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQoubGVmdFBhbmUtaW5uZXJ7cGFkZGluZzoxMnB4O292ZXJmbG93LXk6YXV0bzttYXgtaGVpZ2h0OmNhbGMoMTAwdmggLSAyMDBweCl9CgovKiBHYW1lIEl0ZW0gQ2FyZCAqLwouaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O3BhZGRpbmc6MTJweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWJvdHRvbToxMHB4O3RyYW5zaXRpb246YWxsIDAuMnN9Ci5pdGVtOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpO2JvcmRlci1jb2xvcjojNDc1NTY5O3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xcHgpfQouaXRlbS5zZWxlY3RlZHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQtc2VsZWN0ZWQpO2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KX0KLml0ZW0uc2VsZWN0ZWQgLml0ZW0tY2hlY2tib3h7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5pdGVtLnNlbGVjdGVkIC5pdGVtLWNoZWNrYm94OjphZnRlcntjb250ZW50OifinJMnO2NvbG9yOiNmZmY7Zm9udC1zaXplOjEycHg7Zm9udC13ZWlnaHQ6Ym9sZH0KCi8qIEdhbWUgVGh1bWJuYWlsICovCi5pdGVtLXRodW1ie3dpZHRoOjU2cHg7aGVpZ2h0OjU2cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCMzNzQxNTEgMCUsIzFmMjkzNyAxMDAlKTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7ZmxleC1zaHJpbms6MDtvdmVyZmxvdzpoaWRkZW47cG9zaXRpb246cmVsYXRpdmV9Ci5pdGVtLXRodW1iIGltZ3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXJ9Ci5pdGVtLXRodW1iLXBsYWNlaG9sZGVye2ZvbnQtc2l6ZToyMHB4O2NvbG9yOnZhcigtLW11dGVkKX0KCi8qIEZvcm1hdCBCYWRnZSAqLwouZm9ybWF0LWJhZGdle3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTo0cHg7bGVmdDo0cHg7cGFkZGluZzoycHggNnB4O2JvcmRlci1yYWRpdXM6NHB4O2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6NzAwO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzowLjVweH0KLmZvcm1hdC1iYWRnZS5uc3B7YmFja2dyb3VuZDojMjJjNTVlO2NvbG9yOiNmZmZ9Ci5mb3JtYXQtYmFkZ2UubnN6e2JhY2tncm91bmQ6IzNiODJmNjtjb2xvcjojZmZmfQouZm9ybWF0LWJhZGdlLnhjaXtiYWNrZ3JvdW5kOiNhODU1Zjc7Y29sb3I6I2ZmZn0KCi8qIEl0ZW0gQ29udGVudCAqLwouaXRlbS1jb250ZW50e2ZsZXg6MTttaW4td2lkdGg6MH0KLml0ZW0tdGl0bGV7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO21hcmdpbi1ib3R0b206NHB4O3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLml0ZW0tc2l6ZXtmb250LXNpemU6MTNweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9Ci5pdGVtLW1ldGF7Zm9udC1zaXplOjExcHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi10b3A6MnB4fQoKLyogQ2lyY3VsYXIgQ2hlY2tib3ggKi8KLml0ZW0tY2hlY2tib3h7d2lkdGg6MjZweDtoZWlnaHQ6MjZweDtib3JkZXItcmFkaXVzOjUwJTtib3JkZXI6MnB4IHNvbGlkIHZhcigtLWJvcmRlcik7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ZsZXgtc2hyaW5rOjA7dHJhbnNpdGlvbjphbGwgMC4yc30KCi8qIFJpZ2h0IFBhbmUgKi8KLnJpZ2h0UGFuZXtiYWNrZ3JvdW5kOnZhcigtLWJnLXNlY29uZGFyeSk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtbGcpO3BhZGRpbmc6MTZweDtvdmVyZmxvdy15OmF1dG87Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE2cHh9CgovKiBTdG9yYWdlIENhcmQgKi8KLnN0b3JhZ2UtY2FyZHtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtwYWRkaW5nOjE2cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouc3RvcmFnZS1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjEycHh9Ci5zdG9yYWdlLXRpdGxle2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y29sb3I6dmFyKC0tdGV4dCl9Ci5zdG9yYWdlLXRpdGxlIHN2Z3t3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2NvbG9yOnZhcigtLXByaW1hcnkpfQouc3RvcmFnZS1jYXBhY2l0eXtmb250LXNpemU6MTNweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9CgovKiBQcm9ncmVzcyBCYXIgKi8KLnN0b3JhZ2UtcHJvZ3Jlc3N7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Ym9yZGVyLXJhZGl1czo1cHg7b3ZlcmZsb3c6aGlkZGVuO2Rpc3BsYXk6ZmxleH0KLnByb2dyZXNzLXVzZWR7YmFja2dyb3VuZDojNDc1NTY5O3RyYW5zaXRpb246d2lkdGggMC4zc30KLnByb2dyZXNzLXNlbGVjdGVke2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7dHJhbnNpdGlvbjp3aWR0aCAwLjNzfQoucHJvZ3Jlc3MtZnJlZXtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50fQouc3RvcmFnZS1sZWdlbmR7ZGlzcGxheTpmbGV4O2dhcDoxNnB4O21hcmdpbi10b3A6MTBweDtmb250LXNpemU6MTJweH0KLmxlZ2VuZC1pdGVte2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9Ci5sZWdlbmQtZG90e3dpZHRoOjhweDtoZWlnaHQ6OHB4O2JvcmRlci1yYWRpdXM6NTAlfQoubGVnZW5kLWRvdC51c2Vke2JhY2tncm91bmQ6IzQ3NTU2OX0KLmxlZ2VuZC1kb3Quc2VsZWN0ZWR7YmFja2dyb3VuZDp2YXIoLS1wcmltYXJ5KX0KLmxlZ2VuZC1kb3QuZnJlZXtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9CgovKiBTdGF0cyBHcmlkICovCi5zdGF0cy1ncmlke2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDMsMWZyKTtnYXA6OHB4fQouc3RhdC1jYXJke2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO3BhZGRpbmc6MTRweDt0ZXh0LWFsaWduOmNlbnRlcjtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5zdGF0LWNhcmQuaGlnaGxpZ2h0e2JvcmRlci1jb2xvcjp2YXIoLS1wcmltYXJ5KTtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxODBkZWcscmdiYSg1OSwxMzAsMjQ2LDAuMSkgMCUsdmFyKC0tY2FyZCkgMTAwJSl9Ci5zdGF0LXZhbHVle2ZvbnQtc2l6ZToyMnB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KX0KLnN0YXQtY2FyZC5oaWdobGlnaHQgLnN0YXQtdmFsdWV7Y29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5zdGF0LWxhYmVse2ZvbnQtc2l6ZToxMHB4O2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7Y29sb3I6dmFyKC0tbXV0ZWQpO21hcmdpbi10b3A6NHB4fQouc3RhdC1ub3Rle2ZvbnQtc2l6ZToxMXB4O2NvbG9yOnZhcigtLW11dGVkKTt0ZXh0LWFsaWduOmNlbnRlcjtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Z2FwOjRweH0KCi8qIENvbnRyb2xzICovCi5jb250cm9sc3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjhweH0KLmNvbnRyb2xzIC5mdWxse2dyaWQtY29sdW1uOjEgLyAtMX0KLmNvbnRyb2xzIGlucHV0LC5jb250cm9scyBzZWxlY3R7aGVpZ2h0OjQ0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwYWRkaW5nOjAgMTJweDtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtc2l6ZToxNHB4O3dpZHRoOjEwMCV9Ci5jb250cm9scyBpbnB1dDpmb2N1cywuY29udHJvbHMgc2VsZWN0OmZvY3Vze291dGxpbmU6bm9uZTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSk7Ym94LXNoYWRvdzowIDAgMCAzcHggcmdiYSg1OSwxMzAsMjQ2LDAuMil9Ci5jb250cm9scyBzZWxlY3R7Y3Vyc29yOnBvaW50ZXI7YXBwZWFyYW5jZTpub25lO2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzEyJyBoZWlnaHQ9JzEyJyB2aWV3Qm94PScwIDAgMTIgMTInJTNFJTNDcGF0aCBmaWxsPSclMjM5NGEzYjgnIGQ9J002IDhMMSAzaDEweicvJTNFJTNDL3N2ZyUzRSIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOnJpZ2h0IDEycHggY2VudGVyO3BhZGRpbmctcmlnaHQ6MzZweH0KLmNvbnRyb2xzIGxhYmVse2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrfQoKLyogRHluYW1pYyBDb250cm9scyBHcmlkICovCiNkeW5hbWljQ29udHJvbHN7ZGlzcGxheTpjb250ZW50c30KI2R5bmFtaWNDb250cm9scyA+IGRpdntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufQoKLmZpbGVuYW1lLXByZXZpZXd7Z3JpZC1jb2x1bW46MSAvIC0xO3BhZGRpbmc6MTBweCAxMnB4O2JhY2tncm91bmQ6dmFyKC0tYmcpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7Zm9udC1mYW1pbHk6J1NGIE1vbm8nLE1vbmFjbyxtb25vc3BhY2U7Zm9udC1zaXplOjEycHg7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO292ZXJmbG93LXg6YXV0bzt3aGl0ZS1zcGFjZTpub3dyYXB9CgovKiBCdXR0b25zICovCi5idG57cGFkZGluZzoxMHB4IDE2cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7Z2FwOjZweH0KLmJ0bi1wcmltYXJ5e2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZn0KLmJ0bi1wcmltYXJ5OmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeS1ob3Zlcik7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCl9Ci5idG4uZ2hvc3R7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouYnRuLmdob3N0OmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpO2JvcmRlci1jb2xvcjojNDc1NTY5fQouYnRuLmRhbmdlcntiYWNrZ3JvdW5kOnZhcigtLWRhbmdlcik7Y29sb3I6I2ZmZn0KLmJ0bi5kYW5nZXI6aG92ZXJ7YmFja2dyb3VuZDojZGMyNjI2fQoKLyogQWN0aW9uIEJ1dHRvbnMgUm93ICovCi5hY3Rpb24tcm93e2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2ZsZXgtd3JhcDp3cmFwfQouYWN0aW9uLXJvdyAuYnRue2ZsZXg6MTttaW4td2lkdGg6Zml0LWNvbnRlbnR9CgovKiBTaGFyZSBJbnB1dCAqLwouc2hhcmUtcm93e2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlcn0KLnNoYXJlLXJvdyBpbnB1dHtmbGV4OjE7aGVpZ2h0OjQ0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtwYWRkaW5nOjAgMTJweDtiYWNrZ3JvdW5kOnZhcigtLWNhcmQpO2NvbG9yOnZhcigtLXRleHQpO2ZvbnQtc2l6ZToxM3B4fQoKLyogU2VsZWN0ZWQgUGFuZWwgKi8KLnNlbGVjdGVkLXBhbmVse2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtmbGV4OjE7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtvdmVyZmxvdzpoaWRkZW47bWluLWhlaWdodDoyMDBweH0KLnNlbGVjdGVkLXBhbmVsIC5oZWFke3BhZGRpbmc6MTJweCAxNnB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLXRleHQpO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXJ9Ci5zZWxlY3RlZC1wYW5lbCAuYm9keXtmbGV4OjE7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6OHB4fQoKLyogU2VsZWN0ZWQgSXRlbSAqLwouc2VsZWN0ZWQtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O3BhZGRpbmc6MTBweDtiYWNrZ3JvdW5kOnZhcigtLWJnKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7bWFyZ2luLWJvdHRvbTo4cHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQouc2VsZWN0ZWQtaXRlbS10aHVtYnt3aWR0aDo0NHB4O2hlaWdodDo0NHB4O2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmbGV4LXNocmluazowfQouc2VsZWN0ZWQtaXRlbS1jb250ZW50e2ZsZXg6MTttaW4td2lkdGg6MH0KLnNlbGVjdGVkLWl0ZW0tdGl0bGV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30KLnNlbGVjdGVkLWl0ZW0tbWV0YXtmb250LXNpemU6MTFweDtjb2xvcjp2YXIoLS1tdXRlZCk7ZGlzcGxheTpmbGV4O2dhcDo4cHg7YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbi10b3A6MnB4fQouc2VsZWN0ZWQtaXRlbS12ZXJzaW9ue3BhZGRpbmc6MnB4IDZweDtiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXItcmFkaXVzOjRweDtmb250LXNpemU6MTBweDtjb2xvcjp2YXIoLS10ZXh0LXNlY29uZGFyeSl9Ci5zZWxlY3RlZC1pdGVtLXNpemV7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXRleHQpO3doaXRlLXNwYWNlOm5vd3JhcH0KLnNlbGVjdGVkLWl0ZW0tY2hlY2t7Y29sb3I6dmFyKC0tc3VjY2Vzcyk7Zm9udC1zaXplOjE2cHh9Ci5zZWxlY3RlZC1pdGVtLWFjdGlvbnN7ZGlzcGxheTpmbGV4O2dhcDo0cHh9Ci5zZWxlY3RlZC1pdGVtLWFjdGlvbnMgYnV0dG9ue3dpZHRoOjI4cHg7aGVpZ2h0OjI4cHg7Ym9yZGVyLXJhZGl1czo2cHg7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEycHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIC51cCwuc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIC5kb3due2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpfQouc2VsZWN0ZWQtaXRlbS1hY3Rpb25zIC5yZW1vdmV7YmFja2dyb3VuZDpyZ2JhKDIzOSw2OCw2OCwwLjIpO2NvbG9yOnZhcigtLWRhbmdlcil9CgovKiBCb3R0b20gQ1RBICovCi5ib3R0b20tY3Rhe3Bvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO3BhZGRpbmc6MTJweCAxNnB4O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZyx0cmFuc3BhcmVudCAwJSx2YXIoLS1iZykgMzAlKTt6LWluZGV4OjUwO3BvaW50ZXItZXZlbnRzOm5vbmV9Ci5ib3R0b20tY3RhLWlubmVye2Rpc3BsYXk6ZmxleDtnYXA6MTBweDttYXgtd2lkdGg6NTAwcHg7bWFyZ2luOjAgYXV0bztwb2ludGVyLWV2ZW50czphdXRvfQouY3RhLWJ1dHRvbntmbGV4OjE7ZGlzcGxheTpmbGV4O2hlaWdodDo1MHB4O2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKTtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmY7Ym9yZGVyOm5vbmU7Zm9udC1zaXplOjE1cHg7Zm9udC13ZWlnaHQ6NjAwO2N1cnNvcjpwb2ludGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2dhcDo2cHg7dHJhbnNpdGlvbjphbGwgMC4ycztib3gtc2hhZG93OjAgNHB4IDIwcHggcmdiYSg1OSwxMzAsMjQ2LDAuNCl9Ci5jdGEtYnV0dG9uOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeS1ob3Zlcik7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTJweCk7Ym94LXNoYWRvdzowIDZweCAyNXB4IHJnYmEoNTksMTMwLDI0NiwwLjUpfQouY3RhLWJ1dHRvbjphY3RpdmV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCl9Ci5jdGEtYnV0dG9uIHN2Z3t3aWR0aDoxOHB4O2hlaWdodDoxOHB4fQouY3RhLWJ1dHRvbi5kaXNhYmxlZHtvcGFjaXR5OjAuNTtjdXJzb3I6bm90LWFsbG93ZWQ7cG9pbnRlci1ldmVudHM6bm9uZX0KLmN0YS1zaG93e3dpZHRoOjUwcHg7ZmxleC1zaHJpbms6MDtkaXNwbGF5OmZsZXg7aGVpZ2h0OjUwcHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2NvbG9yOnZhcigtLXRleHQpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtmb250LXNpemU6MTRweDtmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dHJhbnNpdGlvbjphbGwgMC4ycztwb3NpdGlvbjpyZWxhdGl2ZX0KLmN0YS1zaG93OmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpO2JvcmRlci1jb2xvcjojNDc1NTY5fQouY3RhLXNob3cgLmJhZGdle3Bvc2l0aW9uOmFic29sdXRlO3RvcDotNnB4O3JpZ2h0Oi02cHg7bWluLXdpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JhY2tncm91bmQ6dmFyKC0tYWNjZW50KTtjb2xvcjojMDAwO2ZvbnQtc2l6ZToxMXB4O2ZvbnQtd2VpZ2h0OjcwMDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzowIDVweH0KLmN0YS1idXR0b24ud2FybmluZ3tiYWNrZ3JvdW5kOnZhcigtLWRhbmdlcik7Ym94LXNoYWRvdzowIDRweCAyMHB4IHJnYmEoMjM5LDY4LDY4LDAuNCl9Ci5jdGEtYnV0dG9uLndhcm5pbmc6aG92ZXJ7YmFja2dyb3VuZDojZGMyNjI2O2JveC1zaGFkb3c6MCA2cHggMjVweCByZ2JhKDIzOSw2OCw2OCwwLjUpfQouY3RhLWJ1dHRvbiAud2FybmluZy1pY29ue2Rpc3BsYXk6bm9uZX0KLmN0YS1idXR0b24ud2FybmluZyAud2FybmluZy1pY29ue2Rpc3BsYXk6aW5saW5lfQouY3RhLWJ1dHRvbi53YXJuaW5nIC51cGxvYWQtaWNvbntkaXNwbGF5Om5vbmV9CgovKiBBbmltYXRpb25zICovCkBrZXlmcmFtZXMgZmFkZUlue2Zyb217b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwcHgpfXRve29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19Ci5pdGVte2FuaW1hdGlvbjpmYWRlSW4gMC4ycyBlYXNlLW91dH0KLnNlbGVjdGVkLWl0ZW17YW5pbWF0aW9uOmZhZGVJbiAwLjE1cyBlYXNlLW91dH0KCi8qIFN0YXR1cyAqLwouc3RhdHVze2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKTtwYWRkaW5nOjhweCAwfQoKLyogT3ZlcmxheSAqLwoub3ZlcmxheXtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgxMCwxNCwyNiwwLjk1KTtkaXNwbGF5Om5vbmU7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3otaW5kZXg6MTUwO2JhY2tkcm9wLWZpbHRlcjpibHVyKDEwcHgpfQoub3ZlcmxheSAuaGVhZHtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoxNnB4O2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2FsaWduLWl0ZW1zOmNlbnRlcjtib3JkZXItYm90dG9tOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpfQoub3ZlcmxheSAuaGVhZCBzdHJvbmd7Y29sb3I6dmFyKC0tdGV4dCl9Ci5vdmVybGF5IC5ib2R5e3BhZGRpbmc6MTZweDtvdmVyZmxvdzphdXRvO2ZsZXg6MTtwYWRkaW5nLWJvdHRvbTo4MHB4fQoub3ZlcmxheSAucm93e2Rpc3BsYXk6ZmxleDtnYXA6MTJweDthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzoxMnB4O2JhY2tncm91bmQ6dmFyKC0tY2FyZCk7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO21hcmdpbi1ib3R0b206OHB4O2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKX0KLm92ZXJsYXkgLnJvdy5oaWdobGlnaHR7YmFja2dyb3VuZDp2YXIoLS1jYXJkLXNlbGVjdGVkKTtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5vdmVybGF5IC5yb3ctaW5mb3tmbGV4OjE7bWluLXdpZHRoOjB9Ci5vdmVybGF5IC5yb3ctaW5mbyBzdHJvbmd7ZGlzcGxheTpibG9jazt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXN9Ci5vdmVybGF5IC5yb3ctYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweDtmbGV4LXNocmluazowfQoub3ZlcmxheSBidXR0b24uaWNvbnt3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlci1yYWRpdXM6OHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6MTRweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9Ci5vdmVybGF5IGJ1dHRvbi51cCwub3ZlcmxheSBidXR0b24uZG93bntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLm92ZXJsYXkgYnV0dG9uLnVwOmhvdmVyLC5vdmVybGF5IGJ1dHRvbi5kb3duOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpfQoub3ZlcmxheSBidXR0b24ucmVtb3Zle2JhY2tncm91bmQ6dmFyKC0tZGFuZ2VyKTtjb2xvcjojZmZmfQoub3ZlcmxheSBidXR0b24ucmVtb3ZlOmhvdmVye2JhY2tncm91bmQ6I2RjMjYyNn0KCi8qIE1vZGFsICovCiNmaWxlc01vZGFse2JhY2tncm91bmQ6dmFyKC0tcGFuZWwpO2JvcmRlcjoxcHggc29saWQgdmFyKC0tYm9yZGVyKTtjb2xvcjp2YXIoLS10ZXh0KX0KCi5tZXRhe2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLW11dGVkKX0KLnNtYWxse2ZvbnQtc2l6ZToxM3B4O2NvbG9yOnZhcigtLW11dGVkKX0KCiN0b3RhbHMuZXhjZWVkZWR7Y29sb3I6dmFyKC0tZGFuZ2VyKTtmb250LXdlaWdodDpib2xkfQoKLyogRmlsZSBMaXN0IENvbnRhaW5lciAqLwojZmlsZUxpc3RDb250YWluZXJ7YmFja2dyb3VuZDp2YXIoLS1jYXJkKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2NvbG9yOnZhcigtLXRleHQpfQojZmlsZUxpc3RDb250YWluZXIgYXtjb2xvcjp2YXIoLS1wcmltYXJ5KX0KCi8qIE1vYmlsZSBSZXNwb25zaXZlICovCkBtZWRpYSAobWF4LXdpZHRoOjkwMHB4KXsKICAuY29udGFpbmVye2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnI7cGFkZGluZy10b3A6Y2FsYyg3MHB4ICsgOHB4KTtwYWRkaW5nLWJvdHRvbToxMDBweDtnYXA6MTJweH0KICAucmlnaHRQYW5le29yZGVyOi0xO3BhZGRpbmc6MTJweDtnYXA6MTJweH0KICAuaGVhZGVye3BhZGRpbmc6MTBweCAxMnB4fQogIC5oZWFkZXIgYnV0dG9uIHNwYW57ZGlzcGxheTpub25lfQogIC5zdGF0cy1ncmlke2dyaWQtdGVtcGxhdGUtY29sdW1uczpyZXBlYXQoMywxZnIpfQogIC5zdGF0LWNhcmR7cGFkZGluZzoxMHB4fQogIC5zdGF0LXZhbHVle2ZvbnQtc2l6ZToxOHB4fQogIC5zZWxlY3RlZC1wYW5lbHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH0KICAuZmlsdGVyLXRhYnN7b3ZlcmZsb3cteDphdXRvO2ZsZXgtd3JhcDpub3dyYXA7cGFkZGluZzoxMHB4IDEycHg7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9CiAgLmZpbHRlci10YWJzOjotd2Via2l0LXNjcm9sbGJhcntkaXNwbGF5Om5vbmV9CiAgLmxlZnRQYW5le2JvcmRlci1yYWRpdXM6dmFyKC0tcmFkaXVzKX0KICAubGVmdFBhbmUtaW5uZXJ7bWF4LWhlaWdodDpub25lO3BhZGRpbmc6MTBweH0KICAuc3RvcmFnZS1jYXJke3BhZGRpbmc6MTJweH0KICAuc3RvcmFnZS1sZWdlbmR7ZmxleC13cmFwOndyYXA7Z2FwOjhweH0KICAuYWN0aW9uLXJvd3tmbGV4LXdyYXA6bm93cmFwfQogIC5hY3Rpb24tcm93IC5idG57Zm9udC1zaXplOjEycHg7cGFkZGluZzo4cHggMTBweH0KICAuc2hhcmUtcm93IGlucHV0e2ZvbnQtc2l6ZToxMnB4fQogIC5ib3R0b20tY3Rhe3BhZGRpbmc6MTJweH0KICAuY3RhLWJ1dHRvbntoZWlnaHQ6NTBweDtmb250LXNpemU6MTVweH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6NjAwcHgpewogIC5oZWFkZXJ7aGVpZ2h0OjYwcHg7Z2FwOjhweH0KICAuaGVhZGVyIC5zZWFyY2h7aGVpZ2h0OjM4cHg7Zm9udC1zaXplOjE0cHh9CiAgLmhlYWRlciAuYWN0aW9uc3tnYXA6NHB4fQogIC5oZWFkZXIgYnV0dG9ue2hlaWdodDozOHB4O3BhZGRpbmc6MCAxMHB4O2ZvbnQtc2l6ZToxMnB4fQogIC5pdGVte3BhZGRpbmc6MTBweDtnYXA6MTBweH0KICAuaXRlbS10aHVtYnt3aWR0aDo0OHB4O2hlaWdodDo0OHB4fQogIC5pdGVtLXRpdGxle2ZvbnQtc2l6ZToxM3B4fQogIC5pdGVtLXNpemV7Zm9udC1zaXplOjEycHh9CiAgLml0ZW0tY2hlY2tib3h7d2lkdGg6MjJweDtoZWlnaHQ6MjJweH0KICAuZm9ybWF0LWJhZGdle2ZvbnQtc2l6ZTo4cHg7cGFkZGluZzoxcHggNHB4fQogIC5maWx0ZXItdGFie3BhZGRpbmc6NnB4IDEycHg7Zm9udC1zaXplOjEycHh9CiAgLmNvbnRhaW5lcntwYWRkaW5nLXRvcDpjYWxjKDYwcHggKyA4cHgpfQogIC5jb250cm9sc3tnYXA6NnB4fQogIC5jb250cm9scyBpbnB1dCwuY29udHJvbHMgc2VsZWN0e2hlaWdodDo0MHB4O2ZvbnQtc2l6ZToxM3B4fQogIC5zdGF0LWNhcmR7cGFkZGluZzo4cHh9CiAgLnN0YXQtdmFsdWV7Zm9udC1zaXplOjE2cHh9CiAgLnN0YXQtbGFiZWx7Zm9udC1zaXplOjlweH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6NDAwcHgpewogIC5oZWFkZXJ7cGFkZGluZzo4cHh9CiAgLmhlYWRlciBidXR0b257cGFkZGluZzowIDhweH0KICAuaXRlbS10aHVtYnt3aWR0aDo0MnB4O2hlaWdodDo0MnB4fQogIC5zdGF0cy1ncmlke2dhcDo2cHh9Cn0KCi5jb25maWctc2VjdGlvbnt0cmFuc2l0aW9uOmFsbCAwLjI1cyBlYXNlfQoubW9iaWxlLW9ubHl7ZGlzcGxheTpub25lfQpAbWVkaWEgKG1heC13aWR0aDo5MDBweCl7CiAgLm1vYmlsZS1vbmx5e2Rpc3BsYXk6YmxvY2t9CiAgLmNvbmZpZy1zZWN0aW9ue2Rpc3BsYXk6bm9uZX0KICAuY29uZmlnLXNlY3Rpb24uYWN0aXZle2Rpc3BsYXk6YmxvY2t9Cn0KCi8qIEZpbGUgYnV0dG9uIGluIGl0ZW1zICovCi5maWxlLWJ0bntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKSAhaW1wb3J0YW50O2NvbG9yOnZhcigtLXRleHQpICFpbXBvcnRhbnQ7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpICFpbXBvcnRhbnR9CgovKiBMb25nIHByZXNzIHZpc3VhbCBmZWVkYmFjayAqLwouaXRlbS5sb25nLXByZXNzLWFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLXByaW1hcnkpICFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDAuOTgpfQouaXRlbXt1c2VyLXNlbGVjdDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZX0KCi8qIEljb24gaW1hZ2UgaW4gdGh1bWJuYWlsICovCi5pdGVtLXRodW1iIGltZ3t3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo2cHh9CgovKiBHYW1lIEluZm8gTW9kYWwgKi8KI2dhbWVJbmZvTW9kYWx7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDEwLDE0LDI2LDAuOTUpO3otaW5kZXg6MjAwO292ZXJmbG93LXk6YXV0bztiYWNrZHJvcC1maWx0ZXI6Ymx1cigxMHB4KX0KLmdhbWUtaW5mb3ttYXgtd2lkdGg6NjAwcHg7bWFyZ2luOjAgYXV0bztwYWRkaW5nOjE2cHg7cGFkZGluZy1ib3R0b206MTAwcHh9Ci5nYW1lLWluZm8taGVhZGVye3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbi1ib3R0b206MTZweH0KLmdhbWUtaW5mby1iYW5uZXJ7d2lkdGg6MTAwJTtoZWlnaHQ6MjAwcHg7b2JqZWN0LWZpdDpjb3Zlcjtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCl9Ci5nYW1lLWluZm8taWNvbntwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTMwcHg7bGVmdDoxNnB4O3dpZHRoOjgwcHg7aGVpZ2h0OjgwcHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMpO2JvcmRlcjozcHggc29saWQgdmFyKC0tYmcpO2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMyl9Ci5nYW1lLWluZm8tY2xvc2V7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEycHg7cmlnaHQ6MTJweDt3aWR0aDozNnB4O2hlaWdodDozNnB4O2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpO2JvcmRlcjpub25lO2NvbG9yOiNmZmY7Zm9udC1zaXplOjIwcHg7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfQouZ2FtZS1pbmZvLXRpdGxle2ZvbnQtc2l6ZToyMHB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tdG9wOjQwcHg7bWFyZ2luLWJvdHRvbTo0cHh9Ci5nYW1lLWluZm8tcHVibGlzaGVye2ZvbnQtc2l6ZToxNHB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjEycHh9Ci5nYW1lLWluZm8tbWV0YXtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7Z2FwOjhweDttYXJnaW4tYm90dG9tOjE2cHh9Ci5nYW1lLWluZm8tdGFne3BhZGRpbmc6NHB4IDEwcHg7YmFja2dyb3VuZDp2YXIoLS1wYW5lbCk7Ym9yZGVyLXJhZGl1czoyMHB4O2ZvbnQtc2l6ZToxMnB4O2NvbG9yOnZhcigtLXRleHQtc2Vjb25kYXJ5KTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5nYW1lLWluZm8tdGFnLmdlbnJle2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dmFyKC0tcHJpbWFyeSl9Ci5nYW1lLWluZm8tc2VjdGlvbntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cyk7cGFkZGluZzoxNnB4O21hcmdpbi1ib3R0b206MTJweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcil9Ci5nYW1lLWluZm8tc2VjdGlvbi10aXRsZXtmb250LXNpemU6MTJweDtmb250LXdlaWdodDo2MDA7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuNXB4O2NvbG9yOnZhcigtLW11dGVkKTttYXJnaW4tYm90dG9tOjhweH0KLmdhbWUtaW5mby1kZXNjcmlwdGlvbntmb250LXNpemU6MTRweDtsaW5lLWhlaWdodDoxLjY7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO3doaXRlLXNwYWNlOnByZS1saW5lfQouZ2FtZS1pbmZvLWludHJve2ZvbnQtc2l6ZToxNXB4O2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjp2YXIoLS10ZXh0KTttYXJnaW4tYm90dG9tOjhweDtmb250LXN0eWxlOml0YWxpY30KLmdhbWUtaW5mby1zY3JlZW5zaG90c3tkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgyLDFmcik7Z2FwOjhweH0KLmdhbWUtaW5mby1zY3JlZW5zaG90cyBpbWd7d2lkdGg6MTAwJTtib3JkZXItcmFkaXVzOjhweDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjJzfQouZ2FtZS1pbmZvLXNjcmVlbnNob3RzIGltZzpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4wMil9Ci5nYW1lLWluZm8tZmlsZXMtc2VjdGlvbntwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVufQouZ2FtZS1pbmZvLWZpbGVzLWJ0bnt3aWR0aDoxMDAlO3BhZGRpbmc6MTRweCAxNnB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyOm5vbmU7Y29sb3I6dmFyKC0tdGV4dCk7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NTAwO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59Ci5nYW1lLWluZm8tZmlsZXMtYnRuOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tcGFuZWwtaG92ZXIpfQouZ2FtZS1pbmZvLWZpbGVzLWJ0biAuY2hldnJvbnt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjJzfQouZ2FtZS1pbmZvLWZpbGVzLWJ0bi5vcGVuIC5jaGV2cm9ue3RyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKX0KLmdhbWUtaW5mby1maWxlc3tkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDo0cHg7bWF4LWhlaWdodDoyMDBweDtvdmVyZmxvdy15OmF1dG87cGFkZGluZzowIDE2cHggMTZweH0KLmdhbWUtaW5mby1maWxle3BhZGRpbmc6OHB4IDEycHg7YmFja2dyb3VuZDp2YXIoLS1iZyk7Ym9yZGVyLXJhZGl1czo2cHg7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6J1NGIE1vbm8nLE1vbmFjbyxDb25zb2xhcyxtb25vc3BhY2U7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO3dvcmQtYnJlYWs6YnJlYWstYWxsfQouZ2FtZS1pbmZvLWFjdGlvbnN7cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7cGFkZGluZzoxNnB4O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LHZhcigtLWJnKSk7ZGlzcGxheTpmbGV4O2dhcDo4cHg7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KLmdhbWUtaW5mby1hY3Rpb25zIC5idG57bWluLXdpZHRoOjE0MHB4fQoKLyogR2VucmUgRmlsdGVyICovCi5nZW5yZS1maWx0ZXJ7ZGlzcGxheTpmbGV4O2dhcDo4cHg7cGFkZGluZzoxMnB4O2JhY2tncm91bmQ6dmFyKC0tYmctc2Vjb25kYXJ5KTtvdmVyZmxvdy14OmF1dG87LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9Ci5nZW5yZS1maWx0ZXI6Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX0KLmdlbnJlLWNoaXB7cGFkZGluZzo2cHggMTRweDtib3JkZXItcmFkaXVzOjIwcHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6dmFyKC0tdGV4dC1zZWNvbmRhcnkpO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjUwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO3doaXRlLXNwYWNlOm5vd3JhcDtmbGV4LXNocmluazowfQouZ2VucmUtY2hpcDpob3ZlcntiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtjb2xvcjp2YXIoLS10ZXh0KX0KLmdlbnJlLWNoaXAuYWN0aXZle2JhY2tncm91bmQ6dmFyKC0tcHJpbWFyeSk7Ym9yZGVyLWNvbG9yOnZhcigtLXByaW1hcnkpO2NvbG9yOiNmZmZ9Ci5nZW5yZS1maWx0ZXIgLmRpdmlkZXJ7d2lkdGg6MXB4O2JhY2tncm91bmQ6dmFyKC0tYm9yZGVyKTttYXJnaW46MCA0cHg7ZmxleC1zaHJpbms6MH0KLnNvcnQtY2hpcHtwYWRkaW5nOjZweCAxNHB4O2JvcmRlci1yYWRpdXM6MjBweDtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWFjY2VudCk7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS1hY2NlbnQpO2ZvbnQtc2l6ZToxM3B4O2ZvbnQtd2VpZ2h0OjUwMDtjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmFsbCAwLjJzO3doaXRlLXNwYWNlOm5vd3JhcDtmbGV4LXNocmluazowfQouc29ydC1jaGlwOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tYWNjZW50KTtjb2xvcjojMDAwfQouc29ydC1jaGlwLmFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7Y29sb3I6IzAwMH0KCi8qIFNjcmVlbnNob3QgZnVsbHNjcmVlbiAqLwouc2NyZWVuc2hvdC1mdWxsc2NyZWVue2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjk1KTt6LWluZGV4OjI1MDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtjdXJzb3I6cG9pbnRlcjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE2cHh9Ci5zY3JlZW5zaG90LWZ1bGxzY3JlZW4uYWN0aXZle2Rpc3BsYXk6ZmxleH0KLnNjcmVlbnNob3QtZnVsbHNjcmVlbiBpbWd7bWF4LXdpZHRoOjk1JTttYXgtaGVpZ2h0Ojg1JTtvYmplY3QtZml0OmNvbnRhaW47Ym9yZGVyLXJhZGl1czo4cHh9Ci5zY3JlZW5zaG90LWZ1bGxzY3JlZW4gLmNsb3NlLWhpbnR7Y29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjYpO2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmc6OHB4IDE2cHg7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7Ym9yZGVyLXJhZGl1czoyMHB4fQoKLyogVG9hc3Qgbm90aWZpY2F0aW9uICovCi50b2FzdHtwb3NpdGlvbjpmaXhlZDt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKSBzY2FsZSgwLjgpO2JhY2tncm91bmQ6dmFyKC0tc3VjY2Vzcyk7Y29sb3I6I2ZmZjtwYWRkaW5nOjI0cHggNDhweDtib3JkZXItcmFkaXVzOnZhcigtLXJhZGl1cy1sZyk7Zm9udC1zaXplOjIwcHg7Zm9udC13ZWlnaHQ6NjAwO3otaW5kZXg6MzAwO29wYWNpdHk6MDt0cmFuc2l0aW9uOmFsbCAwLjNzO3BvaW50ZXItZXZlbnRzOm5vbmU7Ym94LXNoYWRvdzowIDEwcHggNDBweCByZ2JhKDAsMCwwLDAuNCl9Ci50b2FzdC5zaG93e29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSkgc2NhbGUoMSl9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgPGRpdiBjbGFzcz0iaGVhZGVyIj4KICAgIDxpbnB1dCBpZD0ic2VhcmNoIiBjbGFzcz0ic2VhcmNoIiB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iU2VhcmNoIGdhbWVzLi4uIj4KICAgIDxkaXYgY2xhc3M9ImFjdGlvbnMiPgogICAgICA8YnV0dG9uIGlkPSJjbGVhclNlYXJjaCI+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PGxpbmUgeDE9IjE4IiB5MT0iNiIgeDI9IjYiIHkyPSIxOCIvPjxsaW5lIHgxPSI2IiB5MT0iNiIgeDI9IjE4IiB5Mj0iMTgiLz48L3N2Zz48L2J1dHRvbj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgPHNlY3Rpb24gY2xhc3M9ImxlZnRQYW5lIiBpZD0ibGVmdFBhbmUiIGFyaWEtbGFiZWw9IkdhbWUgbGlzdCI+CiAgICAgIDxkaXYgY2xhc3M9ImdlbnJlLWZpbHRlciIgaWQ9ImdlbnJlRmlsdGVyIj48L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0ibGVmdFBhbmUtaW5uZXIiIGlkPSJsZWZ0UGFuZUlubmVyIj48L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8YXNpZGUgY2xhc3M9InJpZ2h0UGFuZSI+CiAgICAgIDxidXR0b24gaWQ9InRvZ2dsZUNvbmZpZyIgY2xhc3M9ImJ0biBnaG9zdCBtb2JpbGUtb25seSI+SGlkZSBDb25maWd1cmF0aW9uPC9idXR0b24+CgogICAgICA8ZGl2IGlkPSJjb25maWdTZWN0aW9uIiBjbGFzcz0iY29uZmlnLXNlY3Rpb24iPgogICAgICAgIDwhLS0gU3RvcmFnZSBDYXJkIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtY2FyZCI+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWhlYWRlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0b3JhZ2UtdGl0bGUiPgogICAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTE5IDExSDVtMTQgMGEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg1YTIgMiAwIDAxLTItMnYtNmEyIDIgMCAwMTItMm0xNCAwVjlhMiAyIDAgMDAtMi0yTTUgMTFWOWEyIDIgMCAwMTItMm0wIDBWNWEyIDIgMCAwMTItMmg2YTIgMiAwIDAxMiAydjJNNyA3aDEwIi8+PC9zdmc+CiAgICAgICAgICAgICAgU0QgQ2FyZCBTdG9yYWdlCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdG9yYWdlLWNhcGFjaXR5Ij48c3BhbiBpZD0ic3BhY2UiPjA8L3NwYW4+R0IgQ2FwYWNpdHk8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RvcmFnZS1wcm9ncmVzcyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByb2dyZXNzLXVzZWQiIGlkPSJwcm9ncmVzc1VzZWQiIHN0eWxlPSJ3aWR0aDowJSI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByb2dyZXNzLXNlbGVjdGVkIiBpZD0icHJvZ3Jlc3NTZWxlY3RlZCIgc3R5bGU9IndpZHRoOjAlIj48L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RvcmFnZS1sZWdlbmQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbSI+PGRpdiBjbGFzcz0ibGVnZW5kLWRvdCB1c2VkIj48L2Rpdj5Vc2VkOiA8c3BhbiBpZD0idXNlZFNwYWNlIj4wPC9zcGFuPiBHQjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsZWdlbmQtaXRlbSI+PGRpdiBjbGFzcz0ibGVnZW5kLWRvdCBzZWxlY3RlZCI+PC9kaXY+U2VsZWN0ZWQ6IDxzcGFuIGlkPSJzZWxlY3RlZFNpemUiPjAuMDA8L3NwYW4+IEdCPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxlZ2VuZC1pdGVtIj48ZGl2IGNsYXNzPSJsZWdlbmQtZG90IGZyZWUiPjwvZGl2PkZyZWU6IDxzcGFuIGlkPSJmcmVlU3BhY2UiPjA8L3NwYW4+IEdCPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBTdGF0cyBHcmlkIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InN0YXRzLWdyaWQiPgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1jYXJkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC12YWx1ZSIgaWQ9ImNvdW50Ij4wPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPlRpdGxlczwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LWNhcmQgaGlnaGxpZ2h0Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC12YWx1ZSI+PHNwYW4gaWQ9InNlbGVjdGVkU2l6ZURpc3BsYXkiPjAuMDwvc3Bhbj48c21hbGwgc3R5bGU9ImZvbnQtc2l6ZToxNHB4Ij5HQjwvc21hbGw+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPlRvdGFsIFNpemU8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1jYXJkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC12YWx1ZSIgaWQ9Imluc3RhbGxFc3RpbWF0ZSI+fjBtPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtbGFiZWwiPkVzdC4gVGltZTwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1ub3RlIj4KICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBzdHJva2Utd2lkdGg9IjIiIGQ9Ik0xMiAxNnYtNG0wLTRoLjAxIi8+PC9zdmc+CiAgICAgICAgICBFc3QuIGJhc2VkIG9uIDE0TUIvcyB0cmFuc2ZlciByYXRlCiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gQ29udHJvbHMgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMiPgogICAgICAgICAgPGRpdiBjbGFzcz0iZnVsbCI+CiAgICAgICAgICAgIDxsYWJlbD5DdXN0b21lciBOYW1lPC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IGlkPSJjdXN0b21lciIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkVudGVyIG5hbWUgKHVzZSB1bmRlcnNjb3JlcykiPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlbmFtZS1wcmV2aWV3IiBpZD0iZmlsZW5hbWVQcmV2aWV3Ij5GaWxlbmFtZSBwcmV2aWV3IHdpbGwgYXBwZWFyIGhlcmXigKY8L2Rpdj4KICAgICAgICAgIDxkaXYgaWQ9ImR5bmFtaWNDb250cm9scyI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgoKICAgICAgPCEtLSBTaGFyZSBSb3cgLS0+CiAgICAgIDxkaXYgY2xhc3M9InNoYXJlLXJvdyI+CiAgICAgICAgPGlucHV0IGlkPSJzaGFyZWFibGUiIHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJVcGxvYWQgbGluayB3aWxsIGFwcGVhciBoZXJlLi4uIiByZWFkb25seT4KICAgICAgICA8YnV0dG9uIGlkPSJjb3B5TGluayIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+Q29weTwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIDwhLS0gQWN0aW9uIEJ1dHRvbnMgLS0+CiAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgIDxidXR0b24gaWQ9InNhdmVCdG4iIGNsYXNzPSJidG4gZ2hvc3QiPlNhdmU8L2J1dHRvbj4KICAgICAgICA8bGFiZWwgZm9yPSJmaWxlSW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciI+T3BlbjwvbGFiZWw+CiAgICAgICAgPGlucHV0IGlkPSJmaWxlSW4iIHR5cGU9ImZpbGUiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgPC9kaXY+CgogICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICA8YnV0dG9uIGlkPSJhZG1pbkV4cG9ydCIgY2xhc3M9ImJ0biBnaG9zdCI+RXhwb3J0IEFkbWluPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBpZD0ibWF0Y2hMaXN0IiBjbGFzcz0iYnRuIGdob3N0Ij5NYXRjaCBMaXN0PC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBpZD0iYmluTGlzdCIgY2xhc3M9ImJ0biBnaG9zdCI+VXBsb2FkczwvYnV0dG9uPgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgaWQ9ImZpbGVMaXN0Q29udGFpbmVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+CiAgICAgICAgPGRpdiBpZD0iYmluRmlsZUxpc3QiPjwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIDxkaXYgY2xhc3M9InN0YXR1cyIgaWQ9InN0YXR1cyI+UmVhZHk8L2Rpdj4KCiAgICAgIDwhLS0gU2VsZWN0ZWQgUGFuZWwgLS0+CiAgICAgIDxkaXYgaWQ9InNlbGVjdGVkUGFuZWwiIGNsYXNzPSJzZWxlY3RlZC1wYW5lbCI+CiAgICAgICAgPGRpdiBjbGFzcz0iaGVhZCI+CiAgICAgICAgICA8c3Bhbj5TZWxlY3RlZCBTb2Z0d2FyZTwvc3Bhbj4KICAgICAgICAgIDxzcGFuIGlkPSJzZWxlY3RlZFBhbmVsQ291bnQiPjAgaXRlbXM8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYm9keSIgaWQ9InNlbGVjdGVkUGFuZWxCb2R5Ij48L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2FzaWRlPgogIDwvZGl2PgoKICA8IS0tIEJvdHRvbSBDVEEgQnV0dG9uIC0tPgogIDxkaXYgY2xhc3M9ImJvdHRvbS1jdGEiIGlkPSJib3R0b21DdGEiPgogICAgPGRpdiBjbGFzcz0iYm90dG9tLWN0YS1pbm5lciI+CiAgICAgIDxidXR0b24gY2xhc3M9ImN0YS1zaG93IiBpZD0iY3RhU2hvdyI+CiAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0IiBzdHJva2U9ImN1cnJlbnRDb2xvciI+PHBhdGggc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik00IDZoMTZNNCAxMGgxNk00IDE0aDE2TTQgMThoMTYiLz48L3N2Zz4KICAgICAgICA8c3BhbiBjbGFzcz0iYmFkZ2UiIGlkPSJjdGFCYWRnZSI+MDwvc3Bhbj4KICAgICAgPC9idXR0b24+CiAgICAgIDxidXR0b24gY2xhc3M9ImN0YS1idXR0b24iIGlkPSJjdGFVcGxvYWQiPgogICAgICAgIDxzcGFuIGNsYXNzPSJ3YXJuaW5nLWljb24iPuKaoO+4jzwvc3Bhbj4KICAgICAgICA8c3ZnIGNsYXNzPSJ1cGxvYWQtaWNvbiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0cm9rZT0iY3VycmVudENvbG9yIj48cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTcgMTZhNCA0IDAgMDEtLjg4LTcuOTAzQTUgNSAwIDExMTUuOSA2TDE2IDZhNSA1IDAgMDExIDkuOU0xNSAxM2wtMy0zbTAgMGwtMyAzbTMtM3YxMiIvPjwvc3ZnPgogICAgICAgIDxzcGFuIGlkPSJjdGFUZXh0Ij5VcGxvYWQ8L3NwYW4+CiAgICAgIDwvYnV0dG9uPgogICAgPC9kaXY+CiAgPC9kaXY+CgogIDxkaXYgY2xhc3M9Im92ZXJsYXkiIGlkPSJvdmVybGF5Ij4KICAgIDxkaXYgY2xhc3M9ImhlYWQiPjxkaXY+PHN0cm9uZz5TZWxlY3RlZCBUaXRsZXM8L3N0cm9uZz4gLSA8c3BhbiBpZD0ib3ZlcmxheUNvdW50Ij4wPC9zcGFuPjwvZGl2PjxkaXY+PGJ1dHRvbiBpZD0iY2xvc2VPdmVybGF5IiBjbGFzcz0iYnRuIGdob3N0Ij5DbG9zZTwvYnV0dG9uPjwvZGl2PjwvZGl2PgogICAgPGRpdiBjbGFzcz0iYm9keSIgaWQ9Im92ZXJsYXlCb2R5Ij48L2Rpdj4KICA8L2Rpdj4KPGRpdiBpZD0iZmlsZXNNb2RhbCIgc3R5bGU9ImRpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTsKICBiYWNrZ3JvdW5kOnZhcigtLXBhbmVsKTtwYWRkaW5nOjIwcHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1yYWRpdXMtbGcpO2JveC1zaGFkb3c6MCAyMHB4IDUwcHggcmdiYSgwLDAsMCwwLjUpO3otaW5kZXg6MjAwOwogIG1heC13aWR0aDo1MDBweDt3aWR0aDo5MCU7bWF4LWhlaWdodDo3MHZoO292ZXJmbG93OmF1dG87Zm9udC1zaXplOjEzcHg7Ym9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpO2NvbG9yOnZhcigtLXRleHQpIj4KPC9kaXY+Cgo8IS0tIEdhbWUgSW5mbyBNb2RhbCAtLT4KPGRpdiBpZD0iZ2FtZUluZm9Nb2RhbCI+CiAgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvIiBpZD0iZ2FtZUluZm9Db250ZW50Ij48L2Rpdj4KPC9kaXY+Cgo8IS0tIFNjcmVlbnNob3QgRnVsbHNjcmVlbiBWaWV3ZXIgLS0+CjxkaXYgY2xhc3M9InNjcmVlbnNob3QtZnVsbHNjcmVlbiIgaWQ9InNjcmVlbnNob3RWaWV3ZXIiPgogIDxpbWcgc3JjPSIiIGFsdD0iU2NyZWVuc2hvdCIgaWQ9InNjcmVlbnNob3RJbWFnZSI+CiAgPHNwYW4gY2xhc3M9ImNsb3NlLWhpbnQiPlRhcCBhbnl3aGVyZSB0byBjbG9zZTwvc3Bhbj4KPC9kaXY+Cgo8IS0tIFRvYXN0IG5vdGlmaWNhdGlvbiAtLT4KPGRpdiBjbGFzcz0idG9hc3QiIGlkPSJ0b2FzdCI+PC9kaXY+CjwhLS0gVGhlbWUgY291bnRkb3duIC0tPgo8ZGl2IGlkPSJ0aGVtZUNvdW50ZG93biIgY2xhc3M9InRoZW1lLWNvdW50ZG93biI+PHNwYW4gY2xhc3M9ImNvdW50ZG93bi1udW0iPjM8L3NwYW4+PHNwYW4gY2xhc3M9ImNvdW50ZG93bi1sYWJlbCI+SG9sZCB0byBjaGFuZ2UgdGhlbWU8L3NwYW4+PC9kaXY+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+Y29uc3QgQ09ORklHID0gew0KICB4bWxGaWxlOiAnc3dpdGNoZ2FtZXMueG1sJywgIC8vIENoYW5nZSB0aGlzIHRvIHlvdXIgcGxhdGZvcm0gWE1MDQogIGNsaWVudEZpbGVFeHQ6ICcuQ0xJX1BSTVonLA0KICBhZG1pbkZpbGVFeHQ6ICcuUFJNWicsDQogIGZpbGViaW5CdWNrZXQ6ICd4bGc0a2dnb3piZGdzbnc0JywNCiAgDQogIC8vIEF1dG8tZGV0ZWN0ZWQgZnJvbSBYTUwNCiAgcGxhdGZvcm06IG51bGwsDQogIHN0cnVjdHVyZVR5cGU6IG51bGwsICAvLyAnZm9sZGVycycgb3IgJ2ZpbGVzJw0KICBhZG1pbkJhc2VQYXRoOiAnSzpcXE5TUCAyMDIxXFwnLA0KICANCiAgc3RvcmFnZUNvbnRyb2xzOiBbDQogICAgew0KICAgICAgaWQ6ICdjb25zb2xlJywNCiAgICAgIGxhYmVsOiAnQ29uc29sZScsDQogICAgICB0eXBlOiAnc2VsZWN0JywNCiAgICAgIG9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJ3YxJywgbGFiZWw6ICd2MScgfSwNCiAgICAgICAgeyB2YWx1ZTogJ3YyJywgbGFiZWw6ICd2MicgfSwNCiAgICAgICAgeyB2YWx1ZTogJ2xpdGUnLCBsYWJlbDogJ2xpdGUnIH0sDQogICAgICAgIHsgdmFsdWU6ICdvbGVkJywgbGFiZWw6ICdvbGVkJyB9DQogICAgICBdLA0KICAgICAgZGVmYXVsdDogJ3YxJywNCiAgICAgIGZpbGVuYW1lVG9rZW46IHRydWUNCiAgICB9LA0KICAgIHsNCiAgICAgIGlkOiAnc2QnLA0KICAgICAgbGFiZWw6ICdTRCBDYXJkIChHQiknLA0KICAgICAgdHlwZTogJ3NlbGVjdCcsDQogICAgICBvcHRpb25zOiBbDQogICAgICAgIHsgdmFsdWU6ICcxMjgnLCBsYWJlbDogJzEyOCcgfSwNCiAgICAgICAgeyB2YWx1ZTogJzI1NicsIGxhYmVsOiAnMjU2JyB9LA0KICAgICAgICB7IHZhbHVlOiAnNTEyJywgbGFiZWw6ICc1MTInIH0sDQogICAgICAgIHsgdmFsdWU6ICcxMDI0JywgbGFiZWw6ICcxMDI0JyB9DQogICAgICBdLA0KICAgICAgZGVmYXVsdDogJzEyOCcsDQogICAgICBmaWxlbmFtZVRva2VuOiAnc2QnLA0KICAgICAgc3RvcmFnZUNhbGM6IHRydWUNCiAgICB9LA0KICAgIHsNCiAgICAgIGlkOiAnYW5kcm9pZCcsDQogICAgICBsYWJlbDogJ0FuZHJvaWQgKEdCKScsDQogICAgICB0eXBlOiAnc2VsZWN0JywNCiAgICAgIG9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzAnLCBsYWJlbDogJzAnIH0sDQogICAgICAgIHsgdmFsdWU6ICcxNicsIGxhYmVsOiAnMTYnIH0sDQogICAgICAgIHsgdmFsdWU6ICczMicsIGxhYmVsOiAnMzInIH0sDQogICAgICAgIHsgdmFsdWU6ICc2NCcsIGxhYmVsOiAnNjQnIH0NCiAgICAgIF0sDQogICAgICBkZWZhdWx0OiAnMCcsDQogICAgICBmaWxlbmFtZVRva2VuOiAnZHJvaWQnLA0KICAgICAgc3RvcmFnZUNhbGM6IHRydWUNCiAgICB9LA0KICAgIHsNCiAgICAgIGlkOiAnbGludXgnLA0KICAgICAgbGFiZWw6ICdMaW51eCAoR0IpJywNCiAgICAgIHR5cGU6ICdzZWxlY3QnLA0KICAgICAgb3B0aW9uczogWw0KICAgICAgICB7IHZhbHVlOiAnMCcsIGxhYmVsOiAnMCcgfSwNCiAgICAgICAgeyB2YWx1ZTogJzE2JywgbGFiZWw6ICcxNicgfSwNCiAgICAgICAgeyB2YWx1ZTogJzMyJywgbGFiZWw6ICczMicgfSwNCiAgICAgICAgeyB2YWx1ZTogJzY0JywgbGFiZWw6ICc2NCcgfQ0KICAgICAgXSwNCiAgICAgIGRlZmF1bHQ6ICcwJywNCiAgICAgIGZpbGVuYW1lVG9rZW46ICdsaW4nLA0KICAgICAgc3RvcmFnZUNhbGM6IHRydWUNCiAgICB9DQogIF0sDQogIA0KICBjYWxjdWxhdGVTdG9yYWdlOiBmdW5jdGlvbih2YWx1ZXMpIHsNCiAgICBjb25zdCBjb25zb2xlVmFsID0gdmFsdWVzLmNvbnNvbGUgfHwgJ3YxJzsNCiAgICBjb25zdCBzZFZhbCA9IE51bWJlcih2YWx1ZXMuc2QgfHwgMTI4KTsNCiAgICBjb25zdCBhbmRyb2lkID0gTnVtYmVyKHZhbHVlcy5hbmRyb2lkIHx8IDApOw0KICAgIGNvbnN0IGxpbnV4ID0gTnVtYmVyKHZhbHVlcy5saW51eCB8fCAwKTsNCiAgICBjb25zdCBqdmZpbGUgPSAxOw0KICAgIGNvbnN0IGVtdSA9IGNvbnNvbGVWYWwgPT09ICdvbGVkJyA/IDY0IDogMzI7DQogICAgY29uc3QgYnVmZmEgPSBNYXRoLmZsb29yKGVtdSAvIDMpOw0KICAgIGNvbnN0IHRvdGFsUmVzZXJ2ZWQgPSBlbXUgKyBhbmRyb2lkICsgbGludXggKyBqdmZpbGUgKyBidWZmYTsNCiAgICBjb25zdCBleHRyYSA9IE1hdGguZmxvb3IoZW11IC8gNik7DQogICAgcmV0dXJuIChzZFZhbCAtIHRvdGFsUmVzZXJ2ZWQpICsgZXh0cmE7DQogIH0NCn07PC9zY3JpcHQ+CjxzY3JpcHQ+Ci8vID09PT09PT09PT09PT09PT09PT09IENPTkZJR1VSQVRJT04gQkxPQ0sgPT09PT09PT09PT09PT09PT09PT0KCi8vID09PT09PT09PT09PT09PT09PT09IEVORCBDT05GSUdVUkFUSU9OID09PT09PT09PT09PT09PT09PT09Cgpjb25zdCBzdGF0ZSA9IHsgaXRlbXM6IFtdLCBzZWxlY3RlZDogW10sIHhtbDogbnVsbCwgbGFzdFVwbG9hZDowLCBpY29uQ2FjaGU6IHt9LCBjdXJyZW50R2VucmU6ICdhbGwnLCBjdXJyZW50U29ydDogJ25hbWUnLCBnZW5yZXM6IG5ldyBTZXQoKSB9Owpjb25zdCBsZWZ0UGFuZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0UGFuZUlubmVyJyk7CmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3ZlcmxheScpOwpjb25zdCBvdmVybGF5Qm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5Qm9keScpOwpjb25zdCBpc01vYmlsZSA9IC9Nb2JpfEFuZHJvaWR8aVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7CmNvbnN0IGlzTG9jYWwgPSBmYWxzZTsKCi8vIExvbmcgcHJlc3MgZGV0ZWN0aW9uCmNvbnN0IExPTkdfUFJFU1NfRFVSQVRJT04gPSA1MDA7IC8vIG1zCmxldCBsb25nUHJlc3NUaW1lciA9IG51bGw7CmxldCBsb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTsKCi8vIExvYWQgaWNvbiBjYWNoZQphc3luYyBmdW5jdGlvbiBsb2FkSWNvbkNhY2hlKCkgewogIHRyeSB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdpY29uX2NhY2hlLmpzb24nKTsKICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICBzdGF0ZS5pY29uQ2FjaGUgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICAgIGNvbnNvbGUubG9nKGBMb2FkZWQgJHtPYmplY3Qua2V5cyhzdGF0ZS5pY29uQ2FjaGUpLmxlbmd0aH0gaWNvbnMgZnJvbSBjYWNoZWApOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9IGNhdGNoIChlKSB7CiAgICBjb25zb2xlLmxvZygnTm8gaWNvbiBjYWNoZSBmb3VuZCAocnVuIGJ1aWxkX2ljb25fY2FjaGUucHkgdG8gZ2VuZXJhdGUpJyk7CiAgfQogIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gZ2V0SWNvblVybChnYW1lTmFtZSkgewogIGNvbnN0IGNhY2hlZCA9IHN0YXRlLmljb25DYWNoZVtnYW1lTmFtZV07CiAgcmV0dXJuIGNhY2hlZCA/IGNhY2hlZC5pY29uVXJsIDogbnVsbDsKfQoKZnVuY3Rpb24gZ2V0R2FtZUluZm8oZ2FtZU5hbWUpIHsKICByZXR1cm4gc3RhdGUuaWNvbkNhY2hlW2dhbWVOYW1lXSB8fCBudWxsOwp9CgpmdW5jdGlvbiBidWlsZEdlbnJlRmlsdGVyKCkgewogIHN0YXRlLmdlbnJlcy5jbGVhcigpOwogIHN0YXRlLmdlbnJlcy5hZGQoJ2FsbCcpOwoKICAvLyBDb2xsZWN0IGFsbCBnZW5yZXMgZnJvbSBjYWNoZQogIE9iamVjdC52YWx1ZXMoc3RhdGUuaWNvbkNhY2hlKS5mb3JFYWNoKGluZm8gPT4gewogICAgaWYgKGluZm8uY2F0ZWdvcnkgJiYgQXJyYXkuaXNBcnJheShpbmZvLmNhdGVnb3J5KSkgewogICAgICBpbmZvLmNhdGVnb3J5LmZvckVhY2goY2F0ID0+IHN0YXRlLmdlbnJlcy5hZGQoY2F0KSk7CiAgICB9CiAgfSk7CgogIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW5yZUZpbHRlcicpOwogIGlmICghY29udGFpbmVyKSByZXR1cm47CgogIC8vIFNvcnQgZ2VucmVzIGFscGhhYmV0aWNhbGx5LCBidXQga2VlcCAnYWxsJyBmaXJzdAogIGNvbnN0IHNvcnRlZEdlbnJlcyA9IFsnYWxsJywgLi4uQXJyYXkuZnJvbShzdGF0ZS5nZW5yZXMpLmZpbHRlcihnID0+IGcgIT09ICdhbGwnKS5zb3J0KCldOwoKICAvLyBCdWlsZCBzb3J0IGNoaXBzIChsZWZ0bW9zdCkgKyBnZW5yZSBjaGlwcwogIGNvbnN0IHNvcnRDaGlwcyA9IGAKICAgIDxidXR0b24gY2xhc3M9InNvcnQtY2hpcCAke3N0YXRlLmN1cnJlbnRTb3J0ID09PSAnbmFtZScgPyAnYWN0aXZlJyA6ICcnfSIgZGF0YS1zb3J0PSJuYW1lIj5BLVo8L2J1dHRvbj4KICAgIDxidXR0b24gY2xhc3M9InNvcnQtY2hpcCAke3N0YXRlLmN1cnJlbnRTb3J0ID09PSAnbGF0ZXN0JyA/ICdhY3RpdmUnIDogJyd9IiBkYXRhLXNvcnQ9ImxhdGVzdCI+TGF0ZXN0PC9idXR0b24+CiAgICA8YnV0dG9uIGNsYXNzPSJzb3J0LWNoaXAgJHtzdGF0ZS5jdXJyZW50U29ydCA9PT0gJ3RvcCcgPyAnYWN0aXZlJyA6ICcnfSIgZGF0YS1zb3J0PSJ0b3AiPlRvcDwvYnV0dG9uPgogICAgPGRpdiBjbGFzcz0iZGl2aWRlciI+PC9kaXY+CiAgYDsKCiAgY29uc3QgZ2VucmVDaGlwcyA9IHNvcnRlZEdlbnJlcy5tYXAoZ2VucmUgPT4gYAogICAgPGJ1dHRvbiBjbGFzcz0iZ2VucmUtY2hpcCAke2dlbnJlID09PSBzdGF0ZS5jdXJyZW50R2VucmUgPyAnYWN0aXZlJyA6ICcnfSIgZGF0YS1nZW5yZT0iJHtnZW5yZX0iPgogICAgICAke2dlbnJlID09PSAnYWxsJyA/ICdBbGwgR2FtZXMnIDogZ2VucmV9CiAgICA8L2J1dHRvbj4KICBgKS5qb2luKCcnKTsKCiAgY29udGFpbmVyLmlubmVySFRNTCA9IHNvcnRDaGlwcyArIGdlbnJlQ2hpcHM7CgogIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7CiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnZW5yZS1jaGlwJykpIHsKICAgICAgc3RhdGUuY3VycmVudEdlbnJlID0gZS50YXJnZXQuZGF0YXNldC5nZW5yZTsKICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5nZW5yZS1jaGlwJykuZm9yRWFjaChjID0+IGMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICB9CiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzb3J0LWNoaXAnKSkgewogICAgICBzdGF0ZS5jdXJyZW50U29ydCA9IGUudGFyZ2V0LmRhdGFzZXQuc29ydDsKICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zb3J0LWNoaXAnKS5mb3JFYWNoKGMgPT4gYy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICBhcHBseVNvcnRBbmRSZW5kZXIoKTsKICAgIH0KICB9KTsKfQoKZnVuY3Rpb24gYXBwbHlTb3J0QW5kUmVuZGVyKCkgewogIGlmICghc3RhdGUuaXRlbXMgfHwgc3RhdGUuaXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICB0b2FzdCgnTm8gbGlzdCBsb2FkZWQgeWV0Jyk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoc3RhdGUuY3VycmVudFNvcnQgPT09ICdsYXRlc3QnKSB7CiAgICBzdGF0ZS5pdGVtcy5mb3JFYWNoKGl0ID0+IHsKICAgICAgY29uc3QgcmF3ID0gaXQuZGF0ZSB8fCBpdC5kYXRlTW9kaWZpZWQgfHwgaXQubW9kaWZpZWQgfHwgJyc7CiAgICAgIGNvbnN0IGQgPSBwYXJzZURhdGVGbGV4aWJsZShyYXcpOwogICAgICBpdC5fcGFyc2VkRGF0ZSA9IGQgPyBkLmdldFRpbWUoKSA6IDA7CiAgICB9KTsKICAgIHN0YXRlLml0ZW1zLnNvcnQoKGEsIGIpID0+IGIuX3BhcnNlZERhdGUgLSBhLl9wYXJzZWREYXRlKTsKICB9IGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRTb3J0ID09PSAndG9wJykgewogICAgc3RhdGUuaXRlbXMuc29ydCgoYSwgYikgPT4gKHBhcnNlSW50KGIuc2NvcmUgfHwgMCkgLSBwYXJzZUludChhLnNjb3JlIHx8IDApKSk7CiAgfSBlbHNlIHsKICAgIC8vIEEtWiBzb3J0IGJ5IG5hbWUKICAgIHN0YXRlLml0ZW1zLnNvcnQoKGEsIGIpID0+IChhLm5hbWUgfHwgJycpLmxvY2FsZUNvbXBhcmUoYi5uYW1lIHx8ICcnKSk7CiAgfQoKICByZW5kZXJMaXN0KHN0YXRlLml0ZW1zKTsKfQoKZnVuY3Rpb24gZmlsdGVyQnlHZW5yZShsaXN0KSB7CiAgaWYgKHN0YXRlLmN1cnJlbnRHZW5yZSA9PT0gJ2FsbCcpIHJldHVybiBsaXN0OwoKICByZXR1cm4gbGlzdC5maWx0ZXIoaXRlbSA9PiB7CiAgICBjb25zdCBpbmZvID0gZ2V0R2FtZUluZm8oaXRlbS5uYW1lKTsKICAgIGlmICghaW5mbyB8fCAhaW5mby5jYXRlZ29yeSkgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIGluZm8uY2F0ZWdvcnkuaW5jbHVkZXMoc3RhdGUuY3VycmVudEdlbnJlKTsKICB9KTsKfQoKZnVuY3Rpb24gZm9ybWF0UmVsZWFzZURhdGUoZGF0ZU51bSkgewogIGlmICghZGF0ZU51bSkgcmV0dXJuIG51bGw7CiAgY29uc3Qgc3RyID0gU3RyaW5nKGRhdGVOdW0pOwogIGlmIChzdHIubGVuZ3RoICE9PSA4KSByZXR1cm4gbnVsbDsKICBjb25zdCB5ZWFyID0gc3RyLnNsaWNlKDAsIDQpOwogIGNvbnN0IG1vbnRoID0gc3RyLnNsaWNlKDQsIDYpOwogIGNvbnN0IGRheSA9IHN0ci5zbGljZSg2LCA4KTsKICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDsKfQoKZnVuY3Rpb24gc2hvd0dhbWVJbmZvKGl0ZW0pIHsKICBjb25zdCBpbmZvID0gZ2V0R2FtZUluZm8oaXRlbS5uYW1lKTsKICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lSW5mb01vZGFsJyk7CiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lSW5mb0NvbnRlbnQnKTsKCiAgY29uc3QgYmFubmVyVXJsID0gaW5mbz8uYmFubmVyVXJsIHx8IGluZm8/Lmljb25VcmwgfHwgJyc7CiAgY29uc3QgaWNvblVybCA9IGluZm8/Lmljb25VcmwgfHwgJyc7CiAgY29uc3QgdGl0bGUgPSBpbmZvPy5tYXRjaGVkTmFtZSB8fCBpdGVtLm5hbWU7CiAgY29uc3QgcHVibGlzaGVyID0gaW5mbz8ucHVibGlzaGVyIHx8ICdVbmtub3duIFB1Ymxpc2hlcic7CiAgY29uc3QgY2F0ZWdvcmllcyA9IGluZm8/LmNhdGVnb3J5IHx8IFtdOwogIGNvbnN0IGRlc2NyaXB0aW9uID0gaW5mbz8uZGVzY3JpcHRpb24gfHwgJyc7CiAgY29uc3QgaW50cm8gPSBpbmZvPy5pbnRybyB8fCAnJzsKICBjb25zdCBzY3JlZW5zaG90cyA9IGluZm8/LnNjcmVlbnNob3RzIHx8IFtdOwogIGNvbnN0IHJlbGVhc2VEYXRlID0gZm9ybWF0UmVsZWFzZURhdGUoaW5mbz8ucmVsZWFzZURhdGUpOwogIGNvbnN0IHBsYXllcnMgPSBpbmZvPy5udW1iZXJPZlBsYXllcnM7CiAgY29uc3QgaGFzRmlsZXMgPSBpdGVtLmZpbGVzICYmIGl0ZW0uZmlsZXMubGVuZ3RoID4gMDsKCiAgY29uc3QgaXNTZWxlY3RlZCA9IHN0YXRlLnNlbGVjdGVkLnNvbWUocyA9PiBzLm5hbWUgPT09IGl0ZW0ubmFtZSk7CgogIGNvbnRlbnQuaW5uZXJIVE1MID0gYAogICAgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWhlYWRlciI+CiAgICAgICR7YmFubmVyVXJsID8gYDxpbWcgY2xhc3M9ImdhbWUtaW5mby1iYW5uZXIiIHNyYz0iJHtiYW5uZXJVcmx9IiBhbHQ9IiIgb25lcnJvcj0idGhpcy5zdHlsZS5kaXNwbGF5PSdub25lJyI+YCA6ICc8ZGl2IGNsYXNzPSJnYW1lLWluZm8tYmFubmVyIj48L2Rpdj4nfQogICAgICAke2ljb25VcmwgPyBgPGltZyBjbGFzcz0iZ2FtZS1pbmZvLWljb24iIHNyYz0iJHtpY29uVXJsfSIgYWx0PSIiPmAgOiAnJ30KICAgICAgPGJ1dHRvbiBjbGFzcz0iZ2FtZS1pbmZvLWNsb3NlIiBvbmNsaWNrPSJjbG9zZUdhbWVJbmZvKCkiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+PC9idXR0b24+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tdGl0bGUiPiR7ZXNjKHRpdGxlKX08L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1wdWJsaXNoZXIiPiR7ZXNjKHB1Ymxpc2hlcil9PC9kaXY+CgogICAgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLW1ldGEiPgogICAgICAke2NhdGVnb3JpZXMubWFwKGMgPT4gYDxzcGFuIGNsYXNzPSJnYW1lLWluZm8tdGFnIGdlbnJlIj4ke2VzYyhjKX08L3NwYW4+YCkuam9pbignJyl9CiAgICAgICR7cmVsZWFzZURhdGUgPyBgPHNwYW4gY2xhc3M9ImdhbWUtaW5mby10YWciPiR7cmVsZWFzZURhdGV9PC9zcGFuPmAgOiAnJ30KICAgICAgJHtwbGF5ZXJzID8gYDxzcGFuIGNsYXNzPSJnYW1lLWluZm8tdGFnIj4ke3BsYXllcnN9IFBsYXllciR7cGxheWVycyA+IDEgPyAncycgOiAnJ308L3NwYW4+YCA6ICcnfQogICAgICA8c3BhbiBjbGFzcz0iZ2FtZS1pbmZvLXRhZyI+JHtmb3JtYXRTaXplVG9HQihpdGVtLnNpemUpfTwvc3Bhbj4KICAgICAgJHtoYXNGaWxlcyA/IGA8c3BhbiBjbGFzcz0iZ2FtZS1pbmZvLXRhZyI+JHtpdGVtLmZpbGVzLmxlbmd0aH0gZmlsZXM8L3NwYW4+YCA6ICcnfQogICAgPC9kaXY+CgogICAgJHtoYXNGaWxlcyA/IGAKICAgICAgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLXNlY3Rpb24gZ2FtZS1pbmZvLWZpbGVzLXNlY3Rpb24iPgogICAgICAgIDxidXR0b24gY2xhc3M9ImdhbWUtaW5mby1maWxlcy1idG4iIG9uY2xpY2s9InRvZ2dsZUZpbGVzU2VjdGlvbih0aGlzKSI+CiAgICAgICAgICA8c3Bhbj5TaG93ICR7aXRlbS5maWxlcy5sZW5ndGh9IEZpbGVzPC9zcGFuPgogICAgICAgICAgPHN2ZyBjbGFzcz0iY2hldnJvbiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNNiA5bDYgNiA2LTYiLz48L3N2Zz4KICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tZmlsZXMiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPgogICAgICAgICAgJHtpdGVtLmZpbGVzLm1hcChmID0+IGA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tZmlsZSI+JHtlc2MoZil9PC9kaXY+YCkuam9pbignJyl9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgYCA6ICcnfQoKICAgICR7aW50cm8gfHwgZGVzY3JpcHRpb24gPyBgCiAgICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tc2VjdGlvbi10aXRsZSI+QWJvdXQ8L2Rpdj4KICAgICAgICAke2ludHJvID8gYDxkaXYgY2xhc3M9ImdhbWUtaW5mby1pbnRybyI+IiR7ZXNjKGludHJvKX0iPC9kaXY+YCA6ICcnfQogICAgICAgICR7ZGVzY3JpcHRpb24gPyBgPGRpdiBjbGFzcz0iZ2FtZS1pbmZvLWRlc2NyaXB0aW9uIj4ke2VzYyhkZXNjcmlwdGlvbi5zbGljZSgwLCA1MDApKX0ke2Rlc2NyaXB0aW9uLmxlbmd0aCA+IDUwMCA/ICcuLi4nIDogJyd9PC9kaXY+YCA6ICcnfQogICAgICA8L2Rpdj4KICAgIGAgOiAnJ30KCiAgICAke3NjcmVlbnNob3RzLmxlbmd0aCA+IDAgPyBgCiAgICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tc2VjdGlvbi10aXRsZSI+U2NyZWVuc2hvdHM8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJnYW1lLWluZm8tc2NyZWVuc2hvdHMiPgogICAgICAgICAgJHtzY3JlZW5zaG90cy5tYXAodXJsID0+IGA8aW1nIHNyYz0iJHt1cmx9IiBhbHQ9IlNjcmVlbnNob3QiIG9uY2xpY2s9InNob3dTY3JlZW5zaG90KCcke3VybH0nKSIgbG9hZGluZz0ibGF6eSI+YCkuam9pbignJyl9CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgYCA6ICcnfQoKICAgIDxkaXYgY2xhc3M9ImdhbWUtaW5mby1hY3Rpb25zIj4KICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuICR7aXNTZWxlY3RlZCA/ICdkYW5nZXInIDogJ2J0bi1wcmltYXJ5J30iIG9uY2xpY2s9InRvZ2dsZUZyb21JbmZvKCcke2VzYyhpdGVtLm5hbWUpLnJlcGxhY2UoLycvZywgIlxcJyIpfScpIj4KICAgICAgICAke2lzU2VsZWN0ZWQgPyAnUmVtb3ZlIGZyb20gTGlzdCcgOiAnQWRkIHRvIExpc3QnfQogICAgICA8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGdob3N0IiBvbmNsaWNrPSJjbG9zZUdhbWVJbmZvKCkiPkNsb3NlPC9idXR0b24+CiAgICA8L2Rpdj4KICBgOwoKICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7Cn0KCmZ1bmN0aW9uIGNsb3NlR2FtZUluZm8oKSB7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVJbmZvTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJzsKfQoKZnVuY3Rpb24gdG9nZ2xlRmlsZXNTZWN0aW9uKGJ0bikgewogIGNvbnN0IGZpbGVzRGl2ID0gYnRuLm5leHRFbGVtZW50U2libGluZzsKICBjb25zdCBpc09wZW4gPSBmaWxlc0Rpdi5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7CgogIGlmIChpc09wZW4pIHsKICAgIGZpbGVzRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpOwogICAgYnRuLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS50ZXh0Q29udGVudCA9IGJ0bi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQucmVwbGFjZSgnSGlkZScsICdTaG93Jyk7CiAgfSBlbHNlIHsKICAgIGZpbGVzRGl2LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICBidG4uY2xhc3NMaXN0LmFkZCgnb3BlbicpOwogICAgYnRuLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS50ZXh0Q29udGVudCA9IGJ0bi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQucmVwbGFjZSgnU2hvdycsICdIaWRlJyk7CiAgfQp9CgpmdW5jdGlvbiBzaG93VG9hc3QobWVzc2FnZSkgewogIGNvbnN0IHRvYXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvYXN0Jyk7CiAgdG9hc3QudGV4dENvbnRlbnQgPSBtZXNzYWdlOwogIHRvYXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICBzZXRUaW1lb3V0KCgpID0+IHRvYXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKSwgMjAwMCk7Cn0KCmZ1bmN0aW9uIHRvZ2dsZUZyb21JbmZvKGdhbWVOYW1lKSB7CiAgY29uc3QgaXRlbSA9IHN0YXRlLml0ZW1zLmZpbmQoaSA9PiBpLm5hbWUgPT09IGdhbWVOYW1lKTsKICBpZiAoaXRlbSkgewogICAgY29uc3QgaWR4ID0gc3RhdGUuc2VsZWN0ZWQuZmluZEluZGV4KHMgPT4gcy5uYW1lID09PSBnYW1lTmFtZSk7CiAgICBpZiAoaWR4ID49IDApIHsKICAgICAgc3RhdGUuc2VsZWN0ZWQuc3BsaWNlKGlkeCwgMSk7CiAgICAgIHNob3dUb2FzdCgnUmVtb3ZlZCBmcm9tIGxpc3QnKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goaXRlbSk7CiAgICAgIHNob3dUb2FzdCgnQWRkZWQgdG8gbGlzdCcpOwogICAgfQogICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICByZW5kZXJPdmVybGF5KCk7CiAgICB1cGRhdGVUb3RhbHMoKTsKICAgIC8vIFNob3cgdG9hc3QgZmlyc3QsIHRoZW4gY2xvc2UgYWZ0ZXIgZGVsYXkKICAgIHNldFRpbWVvdXQoKCkgPT4gY2xvc2VHYW1lSW5mbygpLCA4MDApOwogIH0KfQoKZnVuY3Rpb24gc2hvd1NjcmVlbnNob3QodXJsKSB7CiAgY29uc3Qgdmlld2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjcmVlbnNob3RWaWV3ZXInKTsKICBjb25zdCBpbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuc2hvdEltYWdlJyk7CiAgaW1nLnNyYyA9IHVybDsKICB2aWV3ZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7Cn0KCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW5zaG90Vmlld2VyJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JlZW5zaG90Vmlld2VyJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7Cn0pOwoKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVJbmZvTW9kYWwnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gewogIGlmIChlLnRhcmdldC5pZCA9PT0gJ2dhbWVJbmZvTW9kYWwnKSBjbG9zZUdhbWVJbmZvKCk7Cn0pOwoKY29uc3QgTUlOX0RFTEFZID0gMTAwMDsKbGV0IG5vdyA9IERhdGUubm93KCk7CmxldCBsYXN0RXhwb3J0VGltZSA9IERhdGUubm93KCk7Cgpjb25zdCAkID0gaWQ9PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKZnVuY3Rpb24gZXNjKHMpeyByZXR1cm4gKHN8fCcnKS5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7JykucmVwbGFjZSgvJy9nLCcmIzM5OycpLnJlcGxhY2UoLyIvZywnJnF1b3Q7Jyk7IH0KZnVuY3Rpb24gdG9hc3QobXNnKXsgJCgnc3RhdHVzJykudGV4dENvbnRlbnQgPSBtc2c7IHNldFRpbWVvdXQoKCk9PnsgaWYoJCgnc3RhdHVzJykudGV4dENvbnRlbnQgPT09IG1zZykgJCgnc3RhdHVzJykudGV4dENvbnRlbnQgPSAnUmVhZHknOyB9LCAyNTAwKTsgfQoKZnVuY3Rpb24gcGFyc2VTaXplVGV4dChzKXsgaWYoIXMpIHJldHVybiAwOyBjb25zdCBtID0gKCcnK3MpLm1hdGNoKC8oW1xkXC5dKylccyooR2lCfE1pQnxLaUJ8R0J8TUJ8S0J8QikvaSk7IGlmKCFtKSByZXR1cm4gMDsgY29uc3Qgdj1wYXJzZUZsb2F0KG1bMV0pOyBjb25zdCB1PW1bMl0udG9VcHBlckNhc2UoKTsgaWYodT09PSdCJykgcmV0dXJuIHY7IGlmKHU9PT0nS0InfHx1PT09J0tJQicpIHJldHVybiB2KjEwMjQ7IGlmKHU9PT0nTUInfHx1PT09J01JQicpIHJldHVybiB2KjEwMjQqMTAyNDsgcmV0dXJuIHYqMTAyNCoxMDI0KjEwMjQ7IH0KZnVuY3Rpb24gYnl0ZXNUb0dCKGIpeyByZXR1cm4gYi8oMTAyNCoxMDI0KjEwMjQpOyB9CgovLyBGb3JtYXQgc2l6ZSBzdHJpbmcgdG8gR0IgZGlzcGxheSAoaGFuZGxlcyBNQiBwcm9wZXJseSkKZnVuY3Rpb24gZm9ybWF0U2l6ZVRvR0Ioc2l6ZVN0cikgewogIGNvbnN0IGJ5dGVzID0gcGFyc2VTaXplVGV4dChzaXplU3RyKTsKICBjb25zdCBnYiA9IGJ5dGVzVG9HQihieXRlcyk7CiAgaWYgKGdiIDwgMC4xKSByZXR1cm4gKGdiICogMTAyNCkudG9GaXhlZCgwKSArICcgTUInOwogIHJldHVybiBnYi50b0ZpeGVkKDEpICsgJyBHQic7Cn0KCmZ1bmN0aW9uIGJ1aWxkRHluYW1pY0NvbnRyb2xzKCkgewogIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkeW5hbWljQ29udHJvbHMnKTsKICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7CiAgY29udGFpbmVyLnN0eWxlLmdyaWRUZW1wbGF0ZUNvbHVtbnMgPSAnMWZyIDFmcic7CiAgY29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnOwogIAogIENPTkZJRy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChjdHJsID0+IHsKICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgbGFiZWwuY2xhc3NOYW1lID0gJ3NtYWxsJzsKICAgIGxhYmVsLnRleHRDb250ZW50ID0gY3RybC5sYWJlbDsKICAgIGRpdi5hcHBlbmRDaGlsZChsYWJlbCk7CiAgICBpZiAoY3RybC50eXBlID09PSAnc2VsZWN0JykgewogICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTsKICAgICAgc2VsZWN0LmlkID0gY3RybC5pZDsKICAgICAgc2VsZWN0LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGN0cmwubGFiZWwpOwogICAgICBjdHJsLm9wdGlvbnMuZm9yRWFjaChvcHQgPT4gewogICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgIG9wdGlvbi52YWx1ZSA9IG9wdC52YWx1ZTsKICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBvcHQubGFiZWw7CiAgICAgICAgaWYgKG9wdC52YWx1ZSA9PT0gY3RybC5kZWZhdWx0KSBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pOwogICAgICB9KTsKICAgICAgZGl2LmFwcGVuZENoaWxkKHNlbGVjdCk7CiAgICAgIHNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHVwZGF0ZUZpbGVuYW1lUHJldmlldygpKTsKICAgICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHVwZGF0ZVRvdGFscygpKTsKICAgIH0KICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpOwogIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBsb2FkWE1MKCl7CiAgdHJ5ewogICAgY29uc3QgdHh0ID0gYXdhaXQgZmV0Y2goQ09ORklHLnhtbEZpbGUpLnRoZW4ocj0+ci50ZXh0KCkpOwogICAgY29uc3QgeG1sID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh0eHQsJ2FwcGxpY2F0aW9uL3htbCcpOwogICAgc3RhdGUueG1sID0geG1sOwogICAgCiAgICBjb25zdCByb290ID0geG1sLmRvY3VtZW50RWxlbWVudDsKICAgIENPTkZJRy5wbGF0Zm9ybSA9IHJvb3QuZ2V0QXR0cmlidXRlKCdwbGF0Zm9ybScpIHx8ICdVbmtub3duJzsKICAgIENPTkZJRy5zdHJ1Y3R1cmVUeXBlID0gcm9vdC5nZXRBdHRyaWJ1dGUoJ3N0cnVjdHVyZVR5cGUnKSB8fCAnZm9sZGVycyc7CiAgICAKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlVGl0bGUnKS50ZXh0Q29udGVudCA9IGAke0NPTkZJRy5wbGF0Zm9ybX0gR2FtZXNgOwogICAgCiAgICBsZXQgaXRlbXMgPSBbXTsKICAgIAogICAgaWYgKENPTkZJRy5zdHJ1Y3R1cmVUeXBlID09PSAnZm9sZGVycycpIHsKICAgICAgaXRlbXMgPSBBcnJheS5mcm9tKHhtbC5xdWVyeVNlbGVjdG9yQWxsKCdmb2xkZXInKSkKICAgICAgICAubWFwKGYgPT4gKHsKICAgICAgICAgIG5hbWU6IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksCiAgICAgICAgICBzY29yZTogZi5nZXRBdHRyaWJ1dGUoJ3Njb3JlJykgfHwgJzAnLAogICAgICAgICAgc2l6ZTogZi5nZXRBdHRyaWJ1dGUoJ3NpemUnKSB8fCAnMCBHaUInLAogICAgICAgICAgZGF0ZTogZi5nZXRBdHRyaWJ1dGUoJ2RhdGVDcmVhdGVkJykgfHwgJycsCiAgICAgICAgICBmaWxlQ291bnQ6IGYuZ2V0QXR0cmlidXRlKCdmaWxlQ291bnQnKSB8fCAnMCcsCiAgICAgICAgICBmaWxlczogQXJyYXkuZnJvbShmLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKSkubWFwKHggPT4geC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSkKICAgICAgICB9KSk7CiAgICB9IGVsc2UgewogICAgICBpdGVtcyA9IEFycmF5LmZyb20oeG1sLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ZpbGUnKSkKICAgICAgICAubWFwKGYgPT4gKHsKICAgICAgICAgIG5hbWU6IGYuZ2V0QXR0cmlidXRlKCduYW1lJyksCiAgICAgICAgICBmaWxlbmFtZTogZi5nZXRBdHRyaWJ1dGUoJ2ZpbGVuYW1lJykgfHwgZi5nZXRBdHRyaWJ1dGUoJ25hbWUnKSwKICAgICAgICAgIHNpemU6IGYuZ2V0QXR0cmlidXRlKCdzaXplJykgfHwgJzAgR2lCJywKICAgICAgICAgIGRhdGU6IGYuZ2V0QXR0cmlidXRlKCdkYXRlQ3JlYXRlZCcpIHx8ICcnCiAgICAgICAgfSkpOwogICAgfQogICAgCiAgICBzdGF0ZS5pdGVtcyA9IGl0ZW1zOwogICAgcmVuZGVyTGlzdChpdGVtcyk7CiAgICB0b2FzdChgTG9hZGVkICR7aXRlbXMubGVuZ3RofSAke0NPTkZJRy5wbGF0Zm9ybX0gZ2FtZXNgKTsKICB9Y2F0Y2goZSl7IAogICAgY29uc29sZS5lcnJvcihlKTsgCiAgICBsZWZ0UGFuZS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iY29sb3I6I2I5MWMxYztwYWRkaW5nOjEycHgiPkZhaWxlZCB0byBsb2FkICR7Q09ORklHLnhtbEZpbGV9PC9kaXY+YDsgCiAgfQp9CgoKZnVuY3Rpb24gcmVuZGVyTGlzdChsaXN0KXsKICBsZWZ0UGFuZS5pbm5lckhUTUwgPSAnJzsKCiAgLy8gQXBwbHkgZ2VucmUgZmlsdGVyCiAgY29uc3QgZmlsdGVyZWRMaXN0ID0gZmlsdGVyQnlHZW5yZShsaXN0KTsKCiAgaWYoIWZpbHRlcmVkTGlzdHx8IWZpbHRlcmVkTGlzdC5sZW5ndGgpewogICAgbGVmdFBhbmUuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6NDBweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjp2YXIoLS1tdXRlZCkiPk5vIGdhbWVzIGZvdW5kPC9kaXY+JzsKICAgIHJldHVybjsKICB9CgogIGZpbHRlcmVkTGlzdC5mb3JFYWNoKGl0ZW09PnsKICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgcm93LmNsYXNzTmFtZT0naXRlbSc7CiAgICByb3cuZGF0YXNldC5uYW1lID0gaXRlbS5uYW1lOwogICAgcm93LmRhdGFzZXQuc2l6ZSA9IGl0ZW0uc2l6ZTsKICAgIGlmIChpdGVtLmZpbGVuYW1lKSByb3cuZGF0YXNldC5maWxlbmFtZSA9IGl0ZW0uZmlsZW5hbWU7CgogICAgY29uc3QgaGFzRmlsZXMgPSBDT05GSUcuc3RydWN0dXJlVHlwZSA9PT0gJ2ZvbGRlcnMnICYmIGl0ZW0uZmlsZXMgJiYgaXRlbS5maWxlcy5sZW5ndGggPiAwOwogICAgY29uc3QgaXNTZWxlY3RlZCA9IHN0YXRlLnNlbGVjdGVkLnNvbWUocz0+cy5uYW1lPT09aXRlbS5uYW1lKTsKCiAgICAvLyBQYXJzZSBzaXplIGZvciBkaXNwbGF5CiAgICBjb25zdCBzaXplRGlzcGxheSA9IGZvcm1hdFNpemVUb0dCKGl0ZW0uc2l6ZSk7CgogICAgLy8gU2NvcmUgaW5mbwogICAgY29uc3Qgc2NvcmVWYWwgPSBpdGVtLnNjb3JlID8gcGFyc2VJbnQoaXRlbS5zY29yZSkgOiAwOwoKICAgIC8vIEdldCBpY29uIGZyb20gY2FjaGUKICAgIGNvbnN0IGljb25VcmwgPSBnZXRJY29uVXJsKGl0ZW0ubmFtZSk7CiAgICBjb25zdCB0aHVtYkNvbnRlbnQgPSBpY29uVXJsCiAgICAgID8gYDxpbWcgc3JjPSIke2ljb25Vcmx9IiBhbHQ9IiIgbG9hZGluZz0ibGF6eSIgb25lcnJvcj0idGhpcy5zdHlsZS5kaXNwbGF5PSdub25lJzt0aGlzLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5PSdibG9jayciPmAKICAgICAgOiAnJzsKICAgIGNvbnN0IHBsYWNlaG9sZGVyU3R5bGUgPSBpY29uVXJsID8gJ2Rpc3BsYXk6bm9uZScgOiAnJzsKCiAgICByb3cuaW5uZXJIVE1MID0gYAogICAgICA8ZGl2IGNsYXNzPSJpdGVtLXRodW1iIj4KICAgICAgICAke3RodW1iQ29udGVudH0KICAgICAgICA8c3BhbiBjbGFzcz0iaXRlbS10aHVtYi1wbGFjZWhvbGRlciIgc3R5bGU9IiR7cGxhY2Vob2xkZXJTdHlsZX0iPvCfjq48L3NwYW4+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJpdGVtLWNvbnRlbnQiPgogICAgICAgIDxkaXYgY2xhc3M9Iml0ZW0tdGl0bGUiPiR7ZXNjKGl0ZW0ubmFtZSl9PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iaXRlbS1zaXplIj4ke3NpemVEaXNwbGF5fTwvZGl2PgogICAgICAgICR7c2NvcmVWYWwgPiAwID8gYDxkaXYgY2xhc3M9Iml0ZW0tbWV0YSI+U2NvcmU6ICR7c2NvcmVWYWx9PC9kaXY+YCA6ICcnfQogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iaXRlbS1jaGVja2JveCI+PC9kaXY+CiAgICBgOwoKICAgIGlmKGlzU2VsZWN0ZWQpIHJvdy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwoKICAgIC8vIExvbmcgcHJlc3MgdG8gc2hvdyBnYW1lIGluZm8KICAgIGxldCBwcmVzc1RpbWVyID0gbnVsbDsKICAgIGxldCBwcmVzc1RyaWdnZXJlZCA9IGZhbHNlOwoKICAgIGNvbnN0IHN0YXJ0UHJlc3MgPSAoZSkgPT4gewogICAgICBwcmVzc1RyaWdnZXJlZCA9IGZhbHNlOwogICAgICBwcmVzc1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgcHJlc3NUcmlnZ2VyZWQgPSB0cnVlOwogICAgICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdsb25nLXByZXNzLWFjdGl2ZScpOwogICAgICAgIHNob3dHYW1lSW5mbyhpdGVtKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdsb25nLXByZXNzLWFjdGl2ZScpLCAyMDApOwogICAgICB9LCBMT05HX1BSRVNTX0RVUkFUSU9OKTsKICAgIH07CgogICAgY29uc3QgZW5kUHJlc3MgPSAoZSkgPT4gewogICAgICBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7CiAgICAgIGlmIChwcmVzc1RyaWdnZXJlZCkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9CiAgICB9OwoKICAgIGNvbnN0IGNhbmNlbFByZXNzID0gKCkgPT4gewogICAgICBjbGVhclRpbWVvdXQocHJlc3NUaW1lcik7CiAgICB9OwoKICAgIC8vIFRvdWNoIGV2ZW50cwogICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydFByZXNzLCB7IHBhc3NpdmU6IHRydWUgfSk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlbmRQcmVzcyk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBjYW5jZWxQcmVzcyk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgY2FuY2VsUHJlc3MpOwoKICAgIC8vIE1vdXNlIGxvbmcgcHJlc3MgKGRlc2t0b3ApCiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHsKICAgICAgaWYgKGUuYnV0dG9uID09PSAwKSBzdGFydFByZXNzKGUpOwogICAgfSk7CiAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZFByZXNzKTsKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgY2FuY2VsUHJlc3MpOwoKICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldik9PnsKICAgICAgLy8gU2tpcCBpZiBsb25nIHByZXNzIHdhcyB0cmlnZ2VyZWQKICAgICAgaWYgKGV2LnRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5jbGFzc0xpc3QuY29udGFpbnMoJ2xvbmctcHJlc3MtYWN0aXZlJykpIHJldHVybjsKCiAgICAgIGlmKGV2LmFsdEtleSl7CiAgICAgICAgc2hvd0dhbWVJbmZvKGl0ZW0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0b2dnbGVTZWxlY3QoaXRlbSwgcm93KTsKICAgIH0pOwoKICAgIGxlZnRQYW5lLmFwcGVuZENoaWxkKHJvdyk7CiAgfSk7CgogIHVwZGF0ZUNUQUJ1dHRvbigpOwp9CgpmdW5jdGlvbiB1cGRhdGVDVEFCdXR0b24oKSB7CiAgY29uc3QgY3RhVGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdGFUZXh0Jyk7CiAgY29uc3QgY291bnQgPSBzdGF0ZS5zZWxlY3RlZC5sZW5ndGg7CiAgY29uc3QgdG90YWxCeXRlcyA9IHN0YXRlLnNlbGVjdGVkLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBwYXJzZVNpemVUZXh0KHMuc2l6ZSksIDApOwogIGNvbnN0IGdiID0gYnl0ZXNUb0dCKHRvdGFsQnl0ZXMpLnRvRml4ZWQoMSk7CgogIGlmIChjb3VudCA+IDApIHsKICAgIGN0YVRleHQudGV4dENvbnRlbnQgPSBgVXBsb2FkICR7Y291bnR9IEdhbWUke2NvdW50ICE9PSAxID8gJ3MnIDogJyd9ICgke2difSBHQilgOwogIH0gZWxzZSB7CiAgICBjdGFUZXh0LnRleHRDb250ZW50ID0gJ1VwbG9hZCBTZWxlY3Rpb24nOwogIH0KfQoKZnVuY3Rpb24gdG9nZ2xlU2VsZWN0KGl0ZW0sIHJvd0VsKXsgCiAgY29uc3QgaWR4ID0gc3RhdGUuc2VsZWN0ZWQuZmluZEluZGV4KHM9PnMubmFtZT09PWl0ZW0ubmFtZSk7IAogIGlmKGlkeD49MCl7IAogICAgc3RhdGUuc2VsZWN0ZWQuc3BsaWNlKGlkeCwxKTsgCiAgICBpZihyb3dFbCkgcm93RWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTsgCiAgfSBlbHNlIHsgCiAgICBzdGF0ZS5zZWxlY3RlZC5wdXNoKHsgCiAgICAgIG5hbWU6aXRlbS5uYW1lLCAKICAgICAgZmlsZW5hbWU6IGl0ZW0uZmlsZW5hbWUgfHwgaXRlbS5uYW1lLAogICAgICBzaXplOml0ZW0uc2l6ZSAKICAgIH0pOyAKICAgIGlmKHJvd0VsKSByb3dFbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyAKICB9CiAgdXBkYXRlVG90YWxzKCk7IAogIHJlbmRlck92ZXJsYXkoKTsgCn0KCmZ1bmN0aW9uIHJlbmRlck92ZXJsYXkoKSB7CiAgb3ZlcmxheUJvZHkuaW5uZXJIVE1MID0gJyc7CiAgc3RhdGUuc2VsZWN0ZWQuZm9yRWFjaCgocyxpKT0+ewogICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICByb3cuY2xhc3NOYW1lPSdyb3cnOwogICAgY29uc3QgaWNvblVybCA9IGdldEljb25Vcmwocy5uYW1lKTsKICAgIGNvbnN0IHNpemVEaXNwbGF5ID0gZm9ybWF0U2l6ZVRvR0Iocy5zaXplKTsKICAgIHJvdy5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgY2xhc3M9Iml0ZW0tdGh1bWIiIHN0eWxlPSJ3aWR0aDo0NHB4O2hlaWdodDo0NHB4O2ZsZXgtc2hyaW5rOjAiPgogICAgICAgICR7aWNvblVybCA/IGA8aW1nIHNyYz0iJHtpY29uVXJsfSIgYWx0PSIiIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo2cHgiPmAgOiAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxOHB4Ij7wn46uPC9zcGFuPid9CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJyb3ctaW5mbyI+CiAgICAgICAgPHN0cm9uZz4ke2krMX0uICR7ZXNjKHMubmFtZSl9PC9zdHJvbmc+CiAgICAgICAgPGRpdiBjbGFzcz0nbWV0YSc+JHtzaXplRGlzcGxheX08L2Rpdj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InJvdy1hY3Rpb25zIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSdpY29uIHVwJz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMTggMTVsLTYtNi02IDYiLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSdpY29uIGRvd24nPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik02IDlsNiA2IDYtNiIvPjwvc3ZnPjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9J2ljb24gcmVtb3ZlJz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj48bGluZSB4MT0iMTgiIHkxPSI2IiB4Mj0iNiIgeTI9IjE4Ii8+PGxpbmUgeDE9IjYiIHkxPSI2IiB4Mj0iMTgiIHkyPSIxOCIvPjwvc3ZnPjwvYnV0dG9uPgogICAgICA8L2Rpdj5gOwoKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcudXAnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57CiAgICAgIGlmKGk+MCl7CiAgICAgICAgW3N0YXRlLnNlbGVjdGVkW2ktMV0sIHN0YXRlLnNlbGVjdGVkW2ldXSA9IFtzdGF0ZS5zZWxlY3RlZFtpXSwgc3RhdGUuc2VsZWN0ZWRbaS0xXV07CiAgICAgICAgcmVuZGVyT3ZlcmxheSgpOwogICAgICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOwogICAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICAgIG92ZXJsYXlCb2R5LmNoaWxkcmVuW2ktMV0uY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcuZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsKICAgICAgaWYoaTxzdGF0ZS5zZWxlY3RlZC5sZW5ndGgtMSl7CiAgICAgICAgW3N0YXRlLnNlbGVjdGVkW2krMV0sIHN0YXRlLnNlbGVjdGVkW2ldXSA9IFtzdGF0ZS5zZWxlY3RlZFtpXSwgc3RhdGUuc2VsZWN0ZWRbaSsxXV07CiAgICAgICAgcmVuZGVyT3ZlcmxheSgpOwogICAgICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOwogICAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICAgIG92ZXJsYXlCb2R5LmNoaWxkcmVuW2krMV0uY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0Jyk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+ewogICAgICBjb25zdCByZW1vdmVkID0gc3RhdGUuc2VsZWN0ZWQuc3BsaWNlKGksMSlbMF07CiAgICAgIGNvbnN0IGxlZnRSb3cgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpCiAgICAgICAgLmZpbmQoeD0+eC5kYXRhc2V0Lm5hbWU9PT1yZW1vdmVkLm5hbWUpOwogICAgICBpZihsZWZ0Um93KSBsZWZ0Um93LmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7CiAgICAgIHJlbmRlck92ZXJsYXkoKTsKICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgfSk7CgogICAgb3ZlcmxheUJvZHkuYXBwZW5kQ2hpbGQocm93KTsKICB9KTsKICAkKCdvdmVybGF5Q291bnQnKS50ZXh0Q29udGVudCA9IHN0YXRlLnNlbGVjdGVkLmxlbmd0aDsKICByZW5kZXJTZWxlY3RlZFBhbmVsKCk7Cn0KCiQoJ3Nob3dTZWxlY3RlZCcpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57IG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgcmVuZGVyT3ZlcmxheSgpOyB9KTsKJCgnY2xvc2VPdmVybGF5JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+IG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7CgovLyBDVEEgU2hvdyBidXR0b24KJCgnY3RhU2hvdycpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgcmVuZGVyT3ZlcmxheSgpOwp9KTsKCi8vIENUQSBVcGxvYWQgYnV0dG9uCiQoJ2N0YVVwbG9hZCcpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBkb1VwbG9hZCgpOwp9KTsKCi8vIFByZXZlbnQgYWNjaWRlbnRhbCBwYWdlIHJlZnJlc2gvY2xvc2Ugd2hlbiB1c2VyIGhhcyBzZWxlY3Rpb25zCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCAoZSkgPT4gewogIGlmIChzdGF0ZS5zZWxlY3RlZC5sZW5ndGggPiAwKSB7CiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICBlLnJldHVyblZhbHVlID0gJyc7CiAgICByZXR1cm4gJyc7CiAgfQp9KTsKCmZ1bmN0aW9uIHNob3dGaWxlcyhuYW1lLCBmaWxlcywgc2l6ZSkgewogIGlmICghZmlsZXMgfHwgIWZpbGVzLmxlbmd0aCkgewogICAgYWxlcnQoYE5vIGZpbGVzIGZvciAke25hbWV9YCk7CiAgICByZXR1cm47CiAgfQoKICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlc01vZGFsJyk7CiAgbW9kYWwuaW5uZXJIVE1MID0gJyc7IAogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIAogIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGhlYWRlci5pbm5lckhUTUwgPSBgPHN0cm9uZz4ke2VzYyhuYW1lKX08L3N0cm9uZz48YnI+PHNwYW4gY2xhc3M9Im1ldGEiPlNpemU6ICR7ZXNjKHNpemUpfSAtICR7ZmlsZXMubGVuZ3RofSBmaWxlczwvc3Bhbj5gOwogIG1vZGFsLmFwcGVuZENoaWxkKGhlYWRlcik7CgogIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBsaXN0LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnOwogIG1vZGFsLmFwcGVuZENoaWxkKGxpc3QpOwoKICBsZXQgaW5kZXggPSAwOwogIGNvbnN0IGJhdGNoID0gMjA7CiAgZnVuY3Rpb24gbG9hZE1vcmUoKSB7CiAgICBjb25zdCBuZXh0ID0gZmlsZXMuc2xpY2UoaW5kZXgsIGluZGV4K2JhdGNoKTsKICAgIGxpc3QuaW5uZXJIVE1MICs9IG5leHQubWFwKGY9PmVzYyhmKSkuam9pbignPGJyPicpOwogICAgaW5kZXggKz0gYmF0Y2g7CiAgICBpZiAoaW5kZXggPj0gZmlsZXMubGVuZ3RoKSB7CiAgICAgIG1vcmVCdG4ucmVtb3ZlKCk7CiAgICB9CiAgfQoKICBjb25zdCBtb3JlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgbW9yZUJ0bi50ZXh0Q29udGVudCA9ICdNb3JlJzsKICBtb3JlQnRuLmNsYXNzTmFtZSA9ICdidG4gZ2hvc3QnOwogIG1vcmVCdG4uc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnOwogIG1vcmVCdG4ub25jbGljayA9IGxvYWRNb3JlOwogIG1vZGFsLmFwcGVuZENoaWxkKG1vcmVCdG4pOwoKICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGNsb3NlQnRuLnRleHRDb250ZW50ID0gJ0Nsb3NlJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuJzsKICBjbG9zZUJ0bi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7CiAgY2xvc2VCdG4ub25jbGljayA9ICgpPT57IG1vZGFsLnN0eWxlLmRpc3BsYXk9J25vbmUnOyBtb2RhbC5pbm5lckhUTUw9Jyc7IH07CiAgbW9kYWwuYXBwZW5kQ2hpbGQoY2xvc2VCdG4pOwogIGxvYWRNb3JlKCk7Cn0KCmZ1bmN0aW9uIGdldENvbnRyb2xWYWx1ZXMoKSB7CiAgY29uc3QgdmFsdWVzID0ge307CiAgQ09ORklHLnN0b3JhZ2VDb250cm9scy5mb3JFYWNoKGN0cmwgPT4gewogICAgY29uc3QgZWwgPSAkKGN0cmwuaWQpOwogICAgaWYgKGVsKSB2YWx1ZXNbY3RybC5pZF0gPSBlbC52YWx1ZTsKICB9KTsKICByZXR1cm4gdmFsdWVzOwp9CgpmdW5jdGlvbiB1cGRhdGVUb3RhbHMoKSB7CiAgY29uc3QgdG90YWxCeXRlcyA9IHN0YXRlLnNlbGVjdGVkLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBwYXJzZVNpemVUZXh0KHMuc2l6ZSksIDApOwogIGNvbnN0IGdiID0gYnl0ZXNUb0dCKHRvdGFsQnl0ZXMpOwoKICAvLyBVcGRhdGUgbWFpbiBzZWxlY3RlZCBzaXplIGRpc3BsYXkKICBjb25zdCBzZWxlY3RlZFNpemVFbCA9ICQoJ3NlbGVjdGVkU2l6ZScpOwogIGlmIChzZWxlY3RlZFNpemVFbCkgc2VsZWN0ZWRTaXplRWwudGV4dENvbnRlbnQgPSBnYi50b0ZpeGVkKDIpOwoKICAvLyBVcGRhdGUgdGhlIHN0YXQgY2FyZCBkaXNwbGF5CiAgY29uc3Qgc2VsZWN0ZWRTaXplRGlzcGxheSA9ICQoJ3NlbGVjdGVkU2l6ZURpc3BsYXknKTsKICBpZiAoc2VsZWN0ZWRTaXplRGlzcGxheSkgc2VsZWN0ZWRTaXplRGlzcGxheS50ZXh0Q29udGVudCA9IGdiLnRvRml4ZWQoMSk7CgogIC8vIENhbGN1bGF0ZSB0aW1lIGVzdGltYXRlCiAgY29uc3QgYmxvYXRlZCA9IHRvdGFsQnl0ZXMgKiAxLjI7CiAgY29uc3Qgc3BlZWQgPSAxNCAqIDEwMjQgKiAxMDI0OwogIGNvbnN0IHNlY3MgPSBNYXRoLmNlaWwoYmxvYXRlZCAvIHNwZWVkKTsKICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjcy8zNjAwKTsKICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcigoc2VjcyUzNjAwKS82MCk7CgogIGNvbnN0IGluc3RhbGxFbCA9ICQoJ2luc3RhbGxFc3RpbWF0ZScpOwogIGlmIChpbnN0YWxsRWwpIHsKICAgIGlmIChob3VycyA+IDApIHsKICAgICAgaW5zdGFsbEVsLnRleHRDb250ZW50ID0gYH4ke2hvdXJzfWggJHttaW5zfW1gOwogICAgfSBlbHNlIHsKICAgICAgaW5zdGFsbEVsLnRleHRDb250ZW50ID0gYH4ke21pbnN9bWA7CiAgICB9CiAgfQoKICAvLyBVcGRhdGUgY291bnQKICBjb25zdCBjb3VudEVsID0gJCgnY291bnQnKTsKICBpZiAoY291bnRFbCkgY291bnRFbC50ZXh0Q29udGVudCA9IHN0YXRlLnNlbGVjdGVkLmxlbmd0aDsKCiAgLy8gVXBkYXRlIHNlbGVjdGVkIHBhbmVsIGNvdW50CiAgY29uc3QgcGFuZWxDb3VudCA9ICQoJ3NlbGVjdGVkUGFuZWxDb3VudCcpOwogIGlmIChwYW5lbENvdW50KSBwYW5lbENvdW50LnRleHRDb250ZW50ID0gYCR7c3RhdGUuc2VsZWN0ZWQubGVuZ3RofSBpdGVtJHtzdGF0ZS5zZWxlY3RlZC5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gOwoKICAvLyBVcGRhdGUgQ1RBIGJhZGdlCiAgY29uc3QgY3RhQmFkZ2UgPSAkKCdjdGFCYWRnZScpOwogIGlmIChjdGFCYWRnZSkgY3RhQmFkZ2UudGV4dENvbnRlbnQgPSBzdGF0ZS5zZWxlY3RlZC5sZW5ndGg7CgogIC8vIEdldCBzdG9yYWdlIHZhbHVlcwogIGNvbnN0IHZhbHVlcyA9IGdldENvbnRyb2xWYWx1ZXMoKTsKICBjb25zdCBzcGFjZUZvckdhbWVzID0gQ09ORklHLmNhbGN1bGF0ZVN0b3JhZ2UodmFsdWVzKTsKICBjb25zdCB0b3RhbENhcGFjaXR5ID0gaXNGaW5pdGUoc3BhY2VGb3JHYW1lcykgPyBzcGFjZUZvckdhbWVzIDogMDsKCiAgLy8gVXBkYXRlIENUQSB3YXJuaW5nIGlmIGV4Y2VlZHMgY2FwYWNpdHkKICBjb25zdCBjdGFVcGxvYWQgPSAkKCdjdGFVcGxvYWQnKTsKICBpZiAoY3RhVXBsb2FkKSB7CiAgICBpZiAodG90YWxDYXBhY2l0eSA+IDAgJiYgZ2IgPiB0b3RhbENhcGFjaXR5KSB7CiAgICAgIGN0YVVwbG9hZC5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJyk7CiAgICAgICQoJ2N0YVRleHQnKS50ZXh0Q29udGVudCA9ICdFeGNlZWRzIExpbWl0ISc7CiAgICB9IGVsc2UgewogICAgICBjdGFVcGxvYWQuY2xhc3NMaXN0LnJlbW92ZSgnd2FybmluZycpOwogICAgICAkKCdjdGFUZXh0JykudGV4dENvbnRlbnQgPSAnVXBsb2FkJzsKICAgIH0KICB9CgogIC8vIFVwZGF0ZSBzcGFjZSBkaXNwbGF5CiAgY29uc3Qgc3BhY2VFbCA9ICQoJ3NwYWNlJyk7CiAgaWYgKHNwYWNlRWwpIHNwYWNlRWwudGV4dENvbnRlbnQgPSB0b3RhbENhcGFjaXR5OwoKICAvLyBDYWxjdWxhdGUgc3RvcmFnZSBicmVha2Rvd24KICBjb25zdCB1c2VkU3BhY2UgPSAwOyAvLyBDb3VsZCBiZSBjYWxjdWxhdGVkIGZyb20gZXhpc3Rpbmcgc2VsZWN0aW9ucyBvciBjb25maWcKICBjb25zdCBzZWxlY3RlZFNwYWNlID0gZ2I7CiAgY29uc3QgZnJlZVNwYWNlID0gTWF0aC5tYXgoMCwgdG90YWxDYXBhY2l0eSAtIHNlbGVjdGVkU3BhY2UgLSB1c2VkU3BhY2UpOwoKICAvLyBVcGRhdGUgbGVnZW5kIHZhbHVlcwogIGNvbnN0IHVzZWRTcGFjZUVsID0gJCgndXNlZFNwYWNlJyk7CiAgaWYgKHVzZWRTcGFjZUVsKSB1c2VkU3BhY2VFbC50ZXh0Q29udGVudCA9IHVzZWRTcGFjZS50b0ZpeGVkKDApOwoKICBjb25zdCBmcmVlU3BhY2VFbCA9ICQoJ2ZyZWVTcGFjZScpOwogIGlmIChmcmVlU3BhY2VFbCkgZnJlZVNwYWNlRWwudGV4dENvbnRlbnQgPSBmcmVlU3BhY2UudG9GaXhlZCgxKTsKCiAgLy8gVXBkYXRlIHByb2dyZXNzIGJhcgogIGNvbnN0IHByb2dyZXNzVXNlZCA9ICQoJ3Byb2dyZXNzVXNlZCcpOwogIGNvbnN0IHByb2dyZXNzU2VsZWN0ZWQgPSAkKCdwcm9ncmVzc1NlbGVjdGVkJyk7CgogIGlmICh0b3RhbENhcGFjaXR5ID4gMCkgewogICAgY29uc3QgdXNlZFBlcmNlbnQgPSAodXNlZFNwYWNlIC8gdG90YWxDYXBhY2l0eSkgKiAxMDA7CiAgICBjb25zdCBzZWxlY3RlZFBlcmNlbnQgPSBNYXRoLm1pbigoc2VsZWN0ZWRTcGFjZSAvIHRvdGFsQ2FwYWNpdHkpICogMTAwLCAxMDAgLSB1c2VkUGVyY2VudCk7CgogICAgaWYgKHByb2dyZXNzVXNlZCkgcHJvZ3Jlc3NVc2VkLnN0eWxlLndpZHRoID0gYCR7dXNlZFBlcmNlbnR9JWA7CiAgICBpZiAocHJvZ3Jlc3NTZWxlY3RlZCkgcHJvZ3Jlc3NTZWxlY3RlZC5zdHlsZS53aWR0aCA9IGAke3NlbGVjdGVkUGVyY2VudH0lYDsKICB9IGVsc2UgewogICAgaWYgKHByb2dyZXNzVXNlZCkgcHJvZ3Jlc3NVc2VkLnN0eWxlLndpZHRoID0gJzAlJzsKICAgIGlmIChwcm9ncmVzc1NlbGVjdGVkKSBwcm9ncmVzc1NlbGVjdGVkLnN0eWxlLndpZHRoID0gJzAlJzsKICB9CgogIC8vIEhpZ2hsaWdodCBpZiBvdmVyIGNhcGFjaXR5CiAgaWYgKGdiID4gdG90YWxDYXBhY2l0eSAmJiB0b3RhbENhcGFjaXR5ID4gMCkgewogICAgaWYgKHNlbGVjdGVkU2l6ZUVsKSB7CiAgICAgIHNlbGVjdGVkU2l6ZUVsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLWRhbmdlciknOwogICAgICBzZWxlY3RlZFNpemVFbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnOwogICAgfQogICAgaWYgKHNlbGVjdGVkU2l6ZURpc3BsYXkpIHsKICAgICAgc2VsZWN0ZWRTaXplRGlzcGxheS5zdHlsZS5jb2xvciA9ICd2YXIoLS1kYW5nZXIpJzsKICAgIH0KICB9IGVsc2UgewogICAgaWYgKHNlbGVjdGVkU2l6ZUVsKSB7CiAgICAgIHNlbGVjdGVkU2l6ZUVsLnN0eWxlLmNvbG9yID0gJyc7CiAgICAgIHNlbGVjdGVkU2l6ZUVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnJzsKICAgIH0KICAgIGlmIChzZWxlY3RlZFNpemVEaXNwbGF5KSB7CiAgICAgIHNlbGVjdGVkU2l6ZURpc3BsYXkuc3R5bGUuY29sb3IgPSAnJzsKICAgIH0KICB9CgogIHVwZGF0ZUZpbGVuYW1lUHJldmlldygpOwogIHVwZGF0ZUNUQUJ1dHRvbigpOwp9CgpmdW5jdGlvbiB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKSB7CiAgY29uc3QgY3VzdG9tZXIgPSAoJCgnY3VzdG9tZXInKS52YWx1ZSB8fCAnY3VzdG9tZXInKS50cmltKCkucmVwbGFjZSgvW15hLXpBLVowLTldL2csJ18nKS50b0xvd2VyQ2FzZSgpOwogIGNvbnN0IHZhbHVlcyA9IGdldENvbnRyb2xWYWx1ZXMoKTsKICBjb25zdCB0b2tlbnMgPSBbY3VzdG9tZXJdOwogIAogIENPTkZJRy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChjdHJsID0+IHsKICAgIGlmIChjdHJsLmZpbGVuYW1lVG9rZW4pIHsKICAgICAgY29uc3QgdmFsID0gdmFsdWVzW2N0cmwuaWRdIHx8IGN0cmwuZGVmYXVsdDsKICAgICAgY29uc3QgdG9rZW4gPSBjdHJsLmZpbGVuYW1lVG9rZW4gPT09IHRydWUgPyB2YWwgOiAoY3RybC5maWxlbmFtZVRva2VuICsgdmFsKTsKICAgICAgdG9rZW5zLnB1c2godG9rZW4pOwogICAgfQogIH0pOwogIAogIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7CiAgY29uc3Qgc3RhbXAgPSBub3cuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpICsKICAgIFN0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykgKwogICAgU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJykgKwogICAgU3RyaW5nKG5vdy5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpICsKICAgIFN0cmluZyhub3cuZ2V0U2Vjb25kcygpKS5wYWRTdGFydCgyLCAnMCcpOwogIHRva2Vucy5wdXNoKHN0YW1wKTsKICAKICAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCA9IHRva2Vucy5qb2luKCdfJykgKyBDT05GSUcuY2xpZW50RmlsZUV4dDsKfQoKZnVuY3Rpb24gZGVib3VuY2UoZm4sbXM9MjAwKXsgbGV0IGg7IHJldHVybiAoLi4uYSk9PnsgY2xlYXJUaW1lb3V0KGgpOyBoPXNldFRpbWVvdXQoKCk9PmZuKC4uLmEpLG1zKTsgfTsgfQoKZnVuY3Rpb24gc21hcnRTZWFyY2goaXRlbXMsIHF1ZXJ5KSB7CiAgaWYgKCFxdWVyeSB8fCAhcXVlcnkudHJpbSgpKSByZXR1cm4gaXRlbXM7CiAgCiAgY29uc3QgcSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkudHJpbSgpOwogIAogIC8vIFBhcnNlIHNlYXJjaCB0ZXJtczogc3VwcG9ydCBxdW90ZXMgZm9yIGV4YWN0IHBocmFzZXMKICBjb25zdCB0ZXJtcyA9IFtdOwogIGNvbnN0IHF1b3RlUmVnZXggPSAvIihbXiJdKykifCcoW14nXSspJ3woXFMrKS9nOwogIGxldCBtYXRjaDsKICAKICB3aGlsZSAoKG1hdGNoID0gcXVvdGVSZWdleC5leGVjKHEpKSAhPT0gbnVsbCkgewogICAgY29uc3QgdGVybSA9IChtYXRjaFsxXSB8fCBtYXRjaFsyXSB8fCBtYXRjaFszXSkudG9Mb3dlckNhc2UoKTsKICAgIHRlcm1zLnB1c2godGVybSk7CiAgfQogIAogIGlmICh0ZXJtcy5sZW5ndGggPT09IDApIHJldHVybiBpdGVtczsKICAKICAvLyBGaWx0ZXIgaXRlbXM6IEFMTCB0ZXJtcyBtdXN0IG1hdGNoIChBTkQgbG9naWMpCiAgcmV0dXJuIGl0ZW1zLmZpbHRlcihpdGVtID0+IHsKICAgIGNvbnN0IHNlYXJjaFRleHQgPSAoaXRlbS5uYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpCiAgICAgIC5yZXBsYWNlKC9bXlx3XHNdL2csICcgJyk7IC8vIFJlbW92ZSBwdW5jdHVhdGlvbiBmb3IgbWF0Y2hpbmcKICAgIAogICAgcmV0dXJuIHRlcm1zLmV2ZXJ5KHRlcm0gPT4gc2VhcmNoVGV4dC5pbmNsdWRlcyh0ZXJtKSk7CiAgfSk7Cn0KCi8vIEF1dG8tYmx1ciBzZWFyY2ggb24gbW9iaWxlIGFmdGVyIHR5cGluZyBzdG9wcwpsZXQgc2VhcmNoQmx1clRpbWVyID0gbnVsbDsKJCgnc2VhcmNoJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBkZWJvdW5jZSgoZSk9PnsKICBjb25zdCBxID0gZS50YXJnZXQudmFsdWUgfHwgJyc7CiAgY29uc3QgZmlsdGVyZWQgPSBzbWFydFNlYXJjaChzdGF0ZS5pdGVtcywgcSk7CiAgcmVuZGVyTGlzdChmaWx0ZXJlZCk7CgogIC8vIE9uIG1vYmlsZSwgYXV0by1oaWRlIGtleWJvYXJkIGFmdGVyIDIgc2Vjb25kcyBvZiBubyB0eXBpbmcKICBpZiAoaXNNb2JpbGUpIHsKICAgIGNsZWFyVGltZW91dChzZWFyY2hCbHVyVGltZXIpOwogICAgc2VhcmNoQmx1clRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSAkKCdzZWFyY2gnKSkgewogICAgICAgICQoJ3NlYXJjaCcpLmJsdXIoKTsKICAgICAgfQogICAgfSwgMjAwMCk7CiAgfQp9LCAxODApKTsKCi8vIFN0b3JlIHNlYXJjaCBxdWVyeSBmb3IgdXNlIGluIHJlbmRlcmluZwpsZXQgY3VycmVudFNlYXJjaFF1ZXJ5ID0gJyc7CgokKCdjbGVhclNlYXJjaCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PnsgJCgnc2VhcmNoJykudmFsdWU9Jyc7IHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOyB9KTsKCi8vIFNlY3JldCBOaW50ZW5kbyB0aGVtZSB0b2dnbGUgLSBob2xkIFggYnV0dG9uIGZvciAyLjUgc2Vjb25kcwpsZXQgbmludGVuZG9UaW1lciA9IG51bGw7CmxldCBuaW50ZW5kb0NvdW50ZG93biA9IG51bGw7CmNvbnN0IE5JTlRFTkRPX0hPTERfVElNRSA9IDI1MDA7CmNvbnN0IGNvdW50ZG93bkVsID0gJCgndGhlbWVDb3VudGRvd24nKTsKY29uc3QgY291bnRkb3duTnVtID0gY291bnRkb3duRWwucXVlcnlTZWxlY3RvcignLmNvdW50ZG93bi1udW0nKTsKY29uc3QgY2xlYXJCdG4gPSAkKCdjbGVhclNlYXJjaCcpOwoKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc3RhcnROaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHN0YXJ0TmludGVuZG9UaW1lciwgeyBwYXNzaXZlOiB0cnVlIH0pOwpjbGVhckJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2FuY2VsTmludGVuZG9UaW1lcik7CmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBjYW5jZWxOaW50ZW5kb1RpbWVyKTsKCmZ1bmN0aW9uIHN0YXJ0TmludGVuZG9UaW1lcihlKSB7CiAgZS5wcmV2ZW50RGVmYXVsdCgpOwogIGNsZWFyQnRuLmNsYXNzTGlzdC5hZGQoJ2hvbGRpbmcnKTsKICBsZXQgcmVtYWluaW5nID0gMzsKICBjb3VudGRvd25OdW0udGV4dENvbnRlbnQgPSByZW1haW5pbmc7CiAgY291bnRkb3duRWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpOwoKICBuaW50ZW5kb0NvdW50ZG93biA9IHNldEludGVydmFsKCgpID0+IHsKICAgIHJlbWFpbmluZy0tOwogICAgaWYgKHJlbWFpbmluZyA+IDApIHsKICAgICAgY291bnRkb3duTnVtLnRleHRDb250ZW50ID0gcmVtYWluaW5nOwogICAgfQogIH0sIDgwMCk7CgogIG5pbnRlbmRvVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgIGNsZWFySW50ZXJ2YWwobmludGVuZG9Db3VudGRvd24pOwogICAgY291bnRkb3duRWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgY2xlYXJCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaG9sZGluZycpOwoKICAgIGNvbnN0IGlzTmludGVuZG8gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJykgPT09ICduaW50ZW5kbyc7CiAgICBpZiAoaXNOaW50ZW5kbykgewogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXRoZW1lJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0aGVtZScpOwogICAgICBzaG93VG9hc3QoJ0RlZmF1bHQgVGhlbWUgUmVzdG9yZWQnKTsKICAgIH0gZWxzZSB7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCAnbmludGVuZG8nKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgJ25pbnRlbmRvJyk7CiAgICAgIHNob3dUb2FzdCgnTmludGVuZG8gVGhlbWUgQWN0aXZhdGVkIScpOwogICAgfQogIH0sIE5JTlRFTkRPX0hPTERfVElNRSk7Cn0KCmZ1bmN0aW9uIGNhbmNlbE5pbnRlbmRvVGltZXIoKSB7CiAgY2xlYXJUaW1lb3V0KG5pbnRlbmRvVGltZXIpOwogIGNsZWFySW50ZXJ2YWwobmludGVuZG9Db3VudGRvd24pOwogIGNvdW50ZG93bkVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICBjbGVhckJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdob2xkaW5nJyk7Cn0KCi8vIExvYWQgc2F2ZWQgdGhlbWUgb24gc3RhcnR1cAppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RoZW1lJykgPT09ICduaW50ZW5kbycpIHsKICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgJ25pbnRlbmRvJyk7Cn0KCkNPTkZJRy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChjdHJsID0+IHsKICBjb25zdCBpZCA9IGN0cmwuaWQ7CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7CiAgICBjb25zdCBlbCA9ICQoaWQpOwogICAgaWYoZWwpewogICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHVwZGF0ZUZpbGVuYW1lUHJldmlldygpKTsKICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4gdXBkYXRlVG90YWxzKCkpOwogICAgfQogIH0pOwp9KTsKCiQoJ2N1c3RvbWVyJykuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB1cGRhdGVGaWxlbmFtZVByZXZpZXcoKSk7CgpmdW5jdGlvbiBwYXJzZUZpbGVuYW1lVG9Db25maWcoZm4pIHsKICBjb25zdCBiYXNlID0gZm4ucmVwbGFjZShuZXcgUmVnRXhwKGBcXCR7Q09ORklHLmNsaWVudEZpbGVFeHR9fFxcJHtDT05GSUcuYWRtaW5GaWxlRXh0fXxcXC4odHh0KSRgLCAnaScpLCAnJyk7CiAgY29uc3QgcGFydHMgPSBiYXNlLnNwbGl0KCdfJyk7CiAgaWYgKHBhcnRzLmxlbmd0aCA8IDIpIHJldHVybiBudWxsOwogIAogIGNvbnN0IGNvbmZpZyA9IHsgY3VzdG9tZXI6IHBhcnRzWzBdIH07CiAgCiAgQ09ORklHLnN0b3JhZ2VDb250cm9scy5mb3JFYWNoKGN0cmwgPT4gewogICAgaWYgKGN0cmwuZmlsZW5hbWVUb2tlbikgewogICAgICBjb25zdCBwYXR0ZXJuID0gY3RybC5maWxlbmFtZVRva2VuID09PSB0cnVlIAogICAgICAgID8gYF4oJHtjdHJsLm9wdGlvbnMubWFwKG8gPT4gby52YWx1ZSkuam9pbignfCcpfSkkYAogICAgICAgIDogYF4ke2N0cmwuZmlsZW5hbWVUb2tlbn1cXGQrJGA7CiAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTsKICAgICAgCiAgICAgIHBhcnRzLmZvckVhY2gocCA9PiB7CiAgICAgICAgaWYgKHJlZ2V4LnRlc3QocCkpIHsKICAgICAgICAgIGNvbmZpZ1tjdHJsLmlkXSA9IGN0cmwuZmlsZW5hbWVUb2tlbiA9PT0gdHJ1ZSA/IHAgOiBwLnJlcGxhY2UoY3RybC5maWxlbmFtZVRva2VuLCAnJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9KTsKICAKICByZXR1cm4gY29uZmlnOwp9CgokKCdmaWxlSW4nKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZXYpPT57CiAgY29uc3QgZiA9IGV2LnRhcmdldC5maWxlc1swXTsgCiAgaWYoIWYpIHJldHVybjsgCiAgCiAgY29uc3QgY2ZnID0gcGFyc2VGaWxlbmFtZVRvQ29uZmlnKGYubmFtZSk7IAogIGlmKGNmZyl7IAogICAgJCgnY3VzdG9tZXInKS52YWx1ZSA9IGNmZy5jdXN0b21lciB8fCAnJzsKICAgIENPTkZJRy5zdG9yYWdlQ29udHJvbHMuZm9yRWFjaChjdHJsID0+IHsKICAgICAgY29uc3QgZWwgPSAkKGN0cmwuaWQpOwogICAgICBpZiAoZWwgJiYgY2ZnW2N0cmwuaWRdKSB7CiAgICAgICAgaWYgKGN0cmwudHlwZSA9PT0gJ3NlbGVjdCcpIHsKICAgICAgICAgIEFycmF5LmZyb20oZWwub3B0aW9ucykuZm9yRWFjaChvID0+IHsKICAgICAgICAgICAgaWYgKG8udmFsdWUgPT09IGNmZ1tjdHJsLmlkXSkgby5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgdXBkYXRlRmlsZW5hbWVQcmV2aWV3KCk7IAogICAgdXBkYXRlVG90YWxzKCk7CiAgfQogIAogIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7IAogIHJlYWRlci5vbmxvYWQgPSAoZSk9PnsgCiAgICBjb25zdCBsaW5lcyA9IGUudGFyZ2V0LnJlc3VsdC5zcGxpdCgnXG4nKS5tYXAocz0+cy50cmltKCkpLmZpbHRlcihCb29sZWFuKTsgCiAgICBzdGF0ZS5zZWxlY3RlZD1bXTsgCiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpLmZvckVhY2goaT0+aS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsKICAgIAogICAgbGluZXMuZm9yRWFjaCh0aXRsZT0+eyAKICAgICAgY29uc3QgbGVmdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkuZmluZChpPT5pLmRhdGFzZXQubmFtZT09PXRpdGxlKTsgCiAgICAgIGlmKGxlZnQpeyAKICAgICAgICBsZWZ0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7IAogICAgICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goeyBuYW1lOmxlZnQuZGF0YXNldC5uYW1lLCBmaWxlbmFtZTogbGVmdC5kYXRhc2V0LmZpbGVuYW1lIHx8IGxlZnQuZGF0YXNldC5uYW1lLCBzaXplOmxlZnQuZGF0YXNldC5zaXplIH0pOyAKICAgICAgfSBlbHNlIHsgCiAgICAgICAgY29uc3QgbWF5YmUgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pdGVtJykpLmZpbmQoaT0+aS5kYXRhc2V0Lm5hbWUgJiYgaS5kYXRhc2V0Lm5hbWUudG9Mb3dlckNhc2UoKT09PXRpdGxlLnRvTG93ZXJDYXNlKCkpOyAKICAgICAgICBpZihtYXliZSl7IAogICAgICAgICAgbWF5YmUuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsgCiAgICAgICAgICBzdGF0ZS5zZWxlY3RlZC5wdXNoKHsgbmFtZTptYXliZS5kYXRhc2V0Lm5hbWUsIGZpbGVuYW1lOiBtYXliZS5kYXRhc2V0LmZpbGVuYW1lIHx8IG1heWJlLmRhdGFzZXQubmFtZSwgc2l6ZTptYXliZS5kYXRhc2V0LnNpemUgfSk7IAogICAgICAgIH0gCiAgICAgIH0gCiAgICB9KTsgCiAgICB1cGRhdGVUb3RhbHMoKTsgCiAgICByZW5kZXJPdmVybGF5KCk7IAogIH07CiAgcmVhZGVyLnJlYWRBc1RleHQoZik7Cn0pOwoKJCgnc2F2ZUJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57CiAgbm93ID0gRGF0ZS5ub3coKTsKICBpZiAobm93IC0gbGFzdEV4cG9ydFRpbWUgPCBNSU5fREVMQVkpIHsKICAgIHRvYXN0KCdQbGVhc2Ugd2FpdCBiZWZvcmUgZXhwb3J0aW5nIGFnYWluJyk7CiAgICBhbGVydCgnUGxlYXNlIHdhaXQgYmVmb3JlIGV4cG9ydGluZyBhZ2FpbicpOwogICAgcmV0dXJuOwogIH0KICBsYXN0RXhwb3J0VGltZSA9IG5vdzsKCiAgaWYoc3RhdGUuc2VsZWN0ZWQubGVuZ3RoPT09MCl7IGFsZXJ0KCdObyBpdGVtcyBzZWxlY3RlZCcpOyByZXR1cm47IH0KICBjb25zdCBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWV8fCcnKS50cmltKCk7IAogIGlmKCFjdXN0KXsgYWxlcnQoJ0N1c3RvbWVyIG5hbWUgcmVxdWlyZWQnKTsgcmV0dXJuOyB9CiAgY29uc3QgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCBgbGlzdCR7Q09ORklHLmNsaWVudEZpbGVFeHR9YDsKICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3N0YXRlLnNlbGVjdGVkLm1hcChzPT5zLm5hbWUpLmpvaW4oJ1xuJyldLCB7IHR5cGU6J3RleHQvcGxhaW4nIH0pOyAKICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyAKICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyAKICBhLmRvd25sb2FkID0gZmlsZW5hbWU7IAogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7IAogIGEuY2xpY2soKTsgCiAgYS5yZW1vdmUoKTsgCiAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpOyAKICB0b2FzdCgnU2F2ZWQgY2xpZW50IGZpbGUnKTsKfSk7CgokKCdhZG1pbkV4cG9ydCcpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpPT57CiAgbm93ID0gRGF0ZS5ub3coKTsKICBpZiAobm93IC0gbGFzdEV4cG9ydFRpbWUgPCBNSU5fREVMQVkpIHsKICAgIHRvYXN0KCdQbGVhc2Ugd2FpdCBiZWZvcmUgZXhwb3J0aW5nIGFnYWluJyk7CiAgICBhbGVydCgnUGxlYXNlIHdhaXQgYmVmb3JlIGV4cG9ydGluZyBhZ2FpbicpOwogICAgcmV0dXJuOwogIH0KICBsYXN0RXhwb3J0VGltZSA9IG5vdzsKCiAgaWYoc3RhdGUuc2VsZWN0ZWQubGVuZ3RoPT09MCl7IGFsZXJ0KCdObyBpdGVtcyBzZWxlY3RlZCcpOyByZXR1cm47IH0KICBjb25zdCBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWV8fCcnKS50cmltKCk7IAogIGlmKCFjdXN0KXsgYWxlcnQoJ0N1c3RvbWVyIG5hbWUgcmVxdWlyZWQnKTsgcmV0dXJuOyB9CiAgCiAgdHJ5eyAKICAgIGNvbnN0IHhtbHR4dCA9IGF3YWl0IGZldGNoKENPTkZJRy54bWxGaWxlKS50aGVuKHI9PnIudGV4dCgpKTsgCiAgICBjb25zdCB4bWwgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHhtbHR4dCwnYXBwbGljYXRpb24veG1sJyk7IAogICAgbGV0IGNvbnRlbnQ9Jyc7IAogICAgCiAgICBpZiAoQ09ORklHLnN0cnVjdHVyZVR5cGUgPT09ICdmb2xkZXJzJykgewogICAgICBzdGF0ZS5zZWxlY3RlZC5mb3JFYWNoKHNlbD0+eyAKICAgICAgICBjb25zdCBmb2xkZXIgPSBBcnJheS5mcm9tKHhtbC5xdWVyeVNlbGVjdG9yQWxsKCdmb2xkZXInKSkuZmluZChmPT5mLmdldEF0dHJpYnV0ZSgnbmFtZScpPT09c2VsLm5hbWUpOyAKICAgICAgICBpZihmb2xkZXIpeyAKICAgICAgICAgIGZvbGRlci5xdWVyeVNlbGVjdG9yQWxsKCdmaWxlJykuZm9yRWFjaChmaWxlPT4gCiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCR7Q09ORklHLmFkbWluQmFzZVBhdGh9JHtmb2xkZXIuZ2V0QXR0cmlidXRlKCduYW1lJyl9XFwke2ZpbGUuZ2V0QXR0cmlidXRlKCduYW1lJyl9XG5gCiAgICAgICAgICApOyAKICAgICAgICB9IAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLnNlbGVjdGVkLmZvckVhY2goc2VsPT57IAogICAgICAgIGNvbnN0IGZpbGVuYW1lID0gc2VsLmZpbGVuYW1lIHx8IHNlbC5uYW1lOwogICAgICAgIGNvbnRlbnQgKz0gYCR7Q09ORklHLmFkbWluQmFzZVBhdGh9JHtmaWxlbmFtZX1cbmA7CiAgICAgIH0pOwogICAgfQogICAgCiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOyAKICAgIGNvbnN0IHN0YW1wID0gYCR7bm93LmdldEZ1bGxZZWFyKCl9JHtTdHJpbmcobm93LmdldE1vbnRoKCkrMSkucGFkU3RhcnQoMiwnMCcpfSR7U3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsJzAnKX1fJHtTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsJzAnKX0ke1N0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCcwJyl9YDsgCiAgICBjb25zdCBmbmFtZSA9IGAkeyhjdXN0fHwnY3VzdG9tZXInKS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpfV8ke3N0YW1wfSR7Q09ORklHLmFkbWluRmlsZUV4dH1gOyAKICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTondGV4dC9wbGFpbicgfSk7IAogICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgCiAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyAKICAgIGEuZG93bmxvYWQgPSBmbmFtZTsgCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOyAKICAgIGEuY2xpY2soKTsgCiAgICBhLnJlbW92ZSgpOyAKICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTsgCiAgICB0b2FzdCgnQWRtaW4gZXhwb3J0IHJlYWR5Jyk7IAogIH1jYXRjaChlKXsgCiAgICBjb25zb2xlLmVycm9yKGUpOyAKICAgIHRvYXN0KCdBZG1pbiBleHBvcnQgZmFpbGVkJyk7IAogIH0KfSk7Cgphc3luYyBmdW5jdGlvbiBkb1VwbG9hZCgpIHsKICBpZihzdGF0ZS5zZWxlY3RlZC5sZW5ndGg9PT0wKXsgYWxlcnQoJ05vIGl0ZW1zIHNlbGVjdGVkJyk7IHJldHVybjsgfQogIGNvbnN0IGN1c3QgPSAoJCgnY3VzdG9tZXInKS52YWx1ZXx8JycpLnRyaW0oKTsKICBpZighY3VzdCl7IGFsZXJ0KCdDdXN0b21lciByZXF1aXJlZCcpOyByZXR1cm47IH0KICBpZighY29uZmlybShgVXBsb2FkIGxpc3QgZm9yICR7Y3VzdH0/YCkpIHJldHVybjsKCiAgY29uc3QgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCBgbGlzdCR7Q09ORklHLmNsaWVudEZpbGVFeHR9YDsKICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3N0YXRlLnNlbGVjdGVkLm1hcChzPT5zLm5hbWUpLmpvaW4oJ1xuJyldLCB7IHR5cGU6J3RleHQvcGxhaW4nIH0pOwogIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CiAgaWYobm93IC0gc3RhdGUubGFzdFVwbG9hZCA8IDE1MDAwKXsgYWxlcnQoJ1BsZWFzZSB3YWl0IDE1IHNlY29uZHMgYmV0d2VlbiB1cGxvYWRzJyk7IHJldHVybjsgfQoKICB0cnl7CiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9maWxlYmluLm5ldC8ke0NPTkZJRy5maWxlYmluQnVja2V0fS8ke2ZpbGVuYW1lfWA7CiAgICBjb25zdCByID0gYXdhaXQgZmV0Y2godXJsLHsgbWV0aG9kOidQT1NUJywgaGVhZGVyczp7ICdDb250ZW50LVR5cGUnOid0ZXh0L3BsYWluJyB9LCBib2R5OiBibG9iIH0pOwoKICAgIGlmKHIub2sgfHwgci5zdGF0dXM9PT0yMDEpewogICAgICBzdGF0ZS5sYXN0VXBsb2FkID0gbm93OwogICAgICAkKCdzaGFyZWFibGUnKS52YWx1ZSA9IGBodHRwczovL2ZpbGViaW4ubmV0LyR7Q09ORklHLmZpbGViaW5CdWNrZXR9LyR7ZmlsZW5hbWV9YDsKICAgICAgdG9hc3QoJ1VwbG9hZGVkIHRvIGZpbGViaW4nKTsKICAgICAgc2hvd0Jhbm5lcigiVXBsb2FkIENvbXBsZXRlIC0gUHJlc3MgQ29weSBMaW5rIGFuZCBzZW5kIGl0IHRvIG91ciBjaGF0Iik7CgogICAgICBjb25zdCBjb25maWdTZWN0aW9uID0gJCgnY29uZmlnU2VjdGlvbicpOwogICAgICBjb25zdCB0b2dnbGVCdG4gPSAkKCd0b2dnbGVDb25maWcnKTsKICAgICAgaWYgKGNvbmZpZ1NlY3Rpb24gJiYgdG9nZ2xlQnRuICYmIGNvbmZpZ1NlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgewogICAgICAgIGNvbmZpZ1NlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICAgICAgdG9nZ2xlQnRuLnRleHRDb250ZW50ID0gJ1Nob3cgQ29uZmlndXJhdGlvbic7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQogIH1jYXRjaChlKXsKICAgIGNvbnNvbGUud2FybignZmlsZWJpbiBlcnJvcicsIGUpOwogIH0KCiAgdHJ5ewogICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBibG9iLCBmaWxlbmFtZSk7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly91cGxvYWQuZ29maWxlLmlvL3VwbG9hZEZpbGUnLCB7IG1ldGhvZDonUE9TVCcsIGJvZHk6IGZvcm0gfSk7CiAgICBjb25zdCBqID0gYXdhaXQgcmVzLmpzb24oKTsKICAgIGlmKGouc3RhdHVzID09PSAnb2snKXsKICAgICAgc3RhdGUubGFzdFVwbG9hZCA9IG5vdzsKICAgICAgJCgnc2hhcmVhYmxlJykudmFsdWUgPSBqLmRhdGEuZG93bmxvYWRQYWdlOwogICAgICB0b2FzdCgnVXBsb2FkZWQgdG8gR29GaWxlJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRvYXN0KCdVcGxvYWQgZmFpbGVkJyk7CiAgfWNhdGNoKGUpewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIHRvYXN0KCdVcGxvYWQgZXJyb3InKTsKICB9Cn0KCiQoJ3VwbG9hZEJ0bicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRvVXBsb2FkKTsKCmxldCBiaW5MaXN0UGFnZSA9IDA7CmNvbnN0IGJpbkxpc3RQYWdlU2l6ZSA9IDEwOwpsZXQgY2FjaGVkQmluRmlsZXMgPSBudWxsOwoKJCgnYmluTGlzdCcpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsKICB0cnkgewogICAgY29uc3QgciA9IGF3YWl0IGZldGNoKGBodHRwczovL2ZpbGViaW4ubmV0LyR7Q09ORklHLmZpbGViaW5CdWNrZXR9P2pzb25gLCB7CiAgICAgIGhlYWRlcnM6IHsgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uIiB9CiAgICB9KTsKICAgIGlmICghci5vaykgeyB0b2FzdChgRmFpbGVkIHRvIGZldGNoIHVwbG9hZHM6ICR7ci5zdGF0dXNUZXh0fWApOyByZXR1cm47IH0KCiAgICBsZXQgajsKICAgIHRyeSB7CiAgICAgIGogPSBhd2FpdCByLmpzb24oKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICB0b2FzdCgiRmFpbGVkIHRvIHBhcnNlIHNlcnZlciByZXNwb25zZSIpOwogICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIWouZmlsZXMgfHwgIWouZmlsZXMubGVuZ3RoKSB7IHRvYXN0KCdObyBmaWxlcyBmb3VuZCcpOyByZXR1cm47IH0KCiAgICAvLyA9PT09PT09PT09IEFERCBUSEVTRSAzIExJTkVTID09PT09PT09PT0KICAgIGNvbnN0IHBsYXRmb3JtRmlsZXMgPSBqLmZpbGVzLmZpbHRlcihmaWxlID0+IAogICAgICBmaWxlLmZpbGVuYW1lLmVuZHNXaXRoKENPTkZJRy5jbGllbnRGaWxlRXh0KQogICAgKTsKICAgIAogICAgaWYgKHBsYXRmb3JtRmlsZXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHRvYXN0KGBObyAke0NPTkZJRy5wbGF0Zm9ybSB8fCAncGxhdGZvcm0nfSBmaWxlcyBmb3VuZGApOwogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3Qgc29ydGVkID0gcGxhdGZvcm1GaWxlcy5zb3J0KChhLGIpPT4gbmV3IERhdGUoYi51cGRhdGVkX2F0KSAtIG5ldyBEYXRlKGEudXBkYXRlZF9hdCkpOwogICAgLy8gPT09PT09PT09PSBDSEFOR0UgVEhJUyBMSU5FID09PT09PT09PT0KICAgIC8vIE9MRDogY29uc3Qgc29ydGVkID0gai5maWxlcy5zb3J0KC4uLikKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIAogICAgY2FjaGVkQmluRmlsZXMgPSBzb3J0ZWQ7CiAgICBiaW5MaXN0UGFnZSA9IDA7CiAgICByZW5kZXJCaW5MaXN0KCk7CiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcihlKTsKICAgIHRvYXN0KCdFcnJvciBmZXRjaGluZyB1cGxvYWRzJyk7CiAgfQp9KTsKCmZ1bmN0aW9uIHJlbmRlckJpbkxpc3QoKSB7CiAgaWYgKCFjYWNoZWRCaW5GaWxlcykgcmV0dXJuOwogIAogIGNvbnN0IHN0YXJ0ID0gYmluTGlzdFBhZ2UgKiBiaW5MaXN0UGFnZVNpemU7CiAgY29uc3QgZW5kID0gc3RhcnQgKyBiaW5MaXN0UGFnZVNpemU7CiAgY29uc3QgcGFnZUZpbGVzID0gY2FjaGVkQmluRmlsZXMuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgY29uc3QgaGFzTW9yZSA9IGVuZCA8IGNhY2hlZEJpbkZpbGVzLmxlbmd0aDsKICAKICBsZXQgaHRtbCA9ICc8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6bGVmdDttYXJnaW4tYm90dG9tOjhweDsiPic7CiAgaHRtbCArPSAnPGJ1dHRvbiBpZD0iY2xvc2VCaW4iIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7Ij5DbG9zZTwvYnV0dG9uPic7CiAgaHRtbCArPSBgPHN0cm9uZz5SZWNlbnQgVXBsb2Fkczwvc3Ryb25nPmA7CiAgaHRtbCArPSAnPC9kaXY+JzsKICAKICBodG1sICs9ICc8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjhweDttYXJnaW4tYm90dG9tOjhweDsiPic7CiAgaHRtbCArPSBgPGJ1dHRvbiBpZD0icHJldlBhZ2UiIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7ZmxleDoxOyIgJHtiaW5MaXN0UGFnZSA9PT0gMCA/ICdkaXNhYmxlZCcgOiAnJ30+UHJldjwvYnV0dG9uPmA7CiAgaHRtbCArPSBgPHNwYW4gc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1zaXplOjEycHg7Y29sb3I6IzZiNzI4MDsiPlBhZ2UgJHtiaW5MaXN0UGFnZSArIDF9PC9zcGFuPmA7CiAgaHRtbCArPSBgPGJ1dHRvbiBpZD0ibmV4dFBhZ2UiIGNsYXNzPSJidG4gZ2hvc3QiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7ZmxleDoxOyIgJHshaGFzTW9yZSA/ICdkaXNhYmxlZCcgOiAnJ30+TmV4dDwvYnV0dG9uPmA7CiAgaHRtbCArPSAnPC9kaXY+JzsKICAKICBodG1sICs9ICc8dWwgc3R5bGU9Im1hcmdpbjowO3BhZGRpbmctbGVmdDoyMHB4OyI+JzsKICBwYWdlRmlsZXMuZm9yRWFjaChmaWxlID0+IHsKICAgIGNvbnN0IGZpbGVVcmwgPSBgaHR0cHM6Ly9maWxlYmluLm5ldC8ke0NPTkZJRy5maWxlYmluQnVja2V0fS8ke2VuY29kZVVSSUNvbXBvbmVudChmaWxlLmZpbGVuYW1lKX1gOwogICAgY29uc3QgYWRkZWREYXRlID0gbmV3IERhdGUoZmlsZS51cGRhdGVkX2F0KTsKICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBhZGRlZERhdGUudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKS5yZXBsYWNlKC8tL2csJycpOwogICAgY29uc3QgaG91cnMgPSBhZGRlZERhdGUuZ2V0SG91cnMoKTsKICAgIGNvbnN0IG1pbnV0ZXMgPSBhZGRlZERhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwnMCcpOwogICAgY29uc3QgYW1wbSA9IGhvdXJzID49IDEyID8gJ1BNJzonQU0nOwogICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IGAke2hvdXJzICUgMTIgfHwgMTJ9OiR7bWludXRlc30gJHthbXBtfWA7CiAgICBjb25zdCBzdHJpcHBlZE5hbWUgPSBmaWxlLmZpbGVuYW1lLnNwbGl0KCcuJykuc2xpY2UoMCwtMSkuam9pbignLicpOwogICAgY29uc3QgZmlsZVNpemUgPSBmaWxlLmJ5dGVzX3JlYWRhYmxlIHx8ICcnOwogICAgaHRtbCArPSBgPGxpIHN0eWxlPSJtYXJnaW4tYm90dG9tOjRweDsgZm9udC1zaXplOiAxMnB4OyI+PGEgaHJlZj0iJHtmaWxlVXJsfSIgdGFyZ2V0PSJfYmxhbmsiIHN0eWxlPSJ0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjojMDM2NmQ2OyI+JHtmb3JtYXR0ZWREYXRlfSAke2Zvcm1hdHRlZFRpbWV9IHwgJHtzdHJpcHBlZE5hbWV9IHwgJHtmaWxlU2l6ZX08L2E+PC9saT5gOwogIH0pOwogIGh0bWwgKz0gJzwvdWw+JzsKCiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVMaXN0Q29udGFpbmVyJyk7CiAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7CiAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIGNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gJyNmOWZhZmInOwogIGNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzEycHgnOwogIGNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JzsKICBjb250YWluZXIuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjZTVlN2ViJzsKICBjb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7CiAgICBjb250YWluZXIuc3R5bGUub3ZlcmZsb3dZID0gJ2F1dG8nOwpjb250YWluZXIuc3R5bGUub3ZlcmZsb3dYID0gJ2hpZGRlbic7ICAgLy8gb3IgJ2F1dG8nIGlmIHlvdSBwcmVmZXIgaG9yaXpvbnRhbCBzY3JvbGwKY29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICczMDBweCc7ICAgIC8vIHNldCB3aGF0ZXZlciBmaXhlZCBoZWlnaHQgeW91IHdhbnQKCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlQmluJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIGJpbkxpc3RQYWdlID0gMDsKICAgIGNhY2hlZEJpbkZpbGVzID0gbnVsbDsKICB9KTsKICAKICBjb25zdCBwcmV2QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZQYWdlJyk7CiAgaWYgKHByZXZCdG4gJiYgYmluTGlzdFBhZ2UgPiAwKSB7CiAgICBwcmV2QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICBiaW5MaXN0UGFnZS0tOwogICAgICByZW5kZXJCaW5MaXN0KCk7CiAgICB9KTsKICB9CiAgCiAgY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0UGFnZScpOwogIGlmIChuZXh0QnRuICYmIGhhc01vcmUpIHsKICAgIG5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGJpbkxpc3RQYWdlKys7CiAgICAgIHJlbmRlckJpbkxpc3QoKTsKICAgIH0pOwogIH0KfQoKJCgnc2VhcmNoJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldikgPT4gewogIGlmIChldi5rZXkgPT09ICdFbnRlcicpIHsKICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAKICAgIGNvbnN0IHZpc2libGVJdGVtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKSkKICAgICAgLmZpbHRlcihlbCA9PiBlbC5vZmZzZXRQYXJlbnQgIT09IG51bGwpOyAvLyBPbmx5IHZpc2libGUgaXRlbXMKICAgIAogICAgLy8gQ2FsY3VsYXRlIHdoYXQgd291bGQgYmUgYWRkZWQKICAgIGNvbnN0IHRvQWRkID0gdmlzaWJsZUl0ZW1zLmZpbHRlcihlbCA9PiB7CiAgICAgIGNvbnN0IG5hbWUgPSBlbC5kYXRhc2V0Lm5hbWU7CiAgICAgIHJldHVybiAhc3RhdGUuc2VsZWN0ZWQuc29tZShzID0+IHMubmFtZSA9PT0gbmFtZSk7CiAgICB9KTsKICAgIAogICAgaWYgKHRvQWRkLmxlbmd0aCA9PT0gMCkgewogICAgICB0b2FzdCgnQWxsIHZpc2libGUgaXRlbXMgYWxyZWFkeSBzZWxlY3RlZCcpOwogICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBzaXplIG9mIGl0ZW1zIHRvIGJlIGFkZGVkCiAgICBsZXQgdG90YWxCeXRlcyA9IDA7CiAgICB0b0FkZC5mb3JFYWNoKGVsID0+IHsKICAgICAgdG90YWxCeXRlcyArPSBwYXJzZVNpemVUZXh0KGVsLmRhdGFzZXQuc2l6ZSk7CiAgICB9KTsKICAgIGNvbnN0IHRvdGFsR0IgPSBieXRlc1RvR0IodG90YWxCeXRlcykudG9GaXhlZCgyKTsKICAgIAogICAgLy8gQ29uZmlybWF0aW9uIGRpYWxvZwogICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybSgKICAgICAgYEFkZCAke3RvQWRkLmxlbmd0aH0gZ2FtZSR7dG9BZGQubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9IGZyb20gc2VhcmNoIHJlc3VsdHM/XG5cbmAgKwogICAgICBgVG90YWwgc2l6ZTogJHt0b3RhbEdCfSBHQlxuXG5gICsKICAgICAgYFByZXNzIE9LIHRvIGFkZCB0aGVzZSBpdGVtcy5gCiAgICApOwogICAgCiAgICBpZiAoIWNvbmZpcm1lZCkgewogICAgICB0b2FzdCgnQWRkIGNhbmNlbGxlZCcpOwogICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIEFkZCB0aGUgaXRlbXMKICAgIGxldCBhZGRlZCA9IDA7CiAgICB0b0FkZC5mb3JFYWNoKGVsID0+IHsKICAgICAgY29uc3QgbmFtZSA9IGVsLmRhdGFzZXQubmFtZTsKICAgICAgY29uc3Qgc2l6ZSA9IGVsLmRhdGFzZXQuc2l6ZTsKICAgICAgY29uc3QgZmlsZW5hbWUgPSBlbC5kYXRhc2V0LmZpbGVuYW1lIHx8IG5hbWU7CiAgICAgIHN0YXRlLnNlbGVjdGVkLnB1c2goeyBuYW1lLCBmaWxlbmFtZSwgc2l6ZSB9KTsKICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgYWRkZWQrKzsKICAgIH0pOwogICAgCiAgICBpZiAoYWRkZWQgPiAwKSB7CiAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICByZW5kZXJPdmVybGF5KCk7CiAgICAgIHRvYXN0KGBBZGRlZCAke2FkZGVkfSBpdGVtJHthZGRlZCAhPT0gMSA/ICdzJyA6ICcnfSAoJHt0b3RhbEdCfSBHQilgKTsKICAgIH0KICB9Cn0pOwoKJCgnY29weUxpbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBjb25zdCBjdXN0ID0gKCQoJ2N1c3RvbWVyJykudmFsdWV8fCcnKS50cmltKCk7IAogIGlmKCFjdXN0KXsgYWxlcnQoJ0N1c3RvbWVyIG5hbWUgcmVxdWlyZWQnKTsgcmV0dXJuOyB9CiAgCiAgY29uc3QgcmF3TGluayA9ICQoJ3NoYXJlYWJsZScpLnZhbHVlLnRyaW0oKTsKICBjb25zdCBsaW5rID0gcmF3TGluawogICAgLnJlcGxhY2UoL15odHRwcz86XC9cLy8sICdoeHhwY2ZmJykKICAgIC5yZXBsYWNlKC9cLi9nLCAnX2RvdF8nKTsKCiAgY29uc3QgdGl0bGVzQXJyID0gc3RhdGUuc2VsZWN0ZWQubWFwKHMgPT4gcy5uYW1lKTsKCiAgaWYgKHRpdGxlc0Fyci5sZW5ndGggPT09IDApIHsKICAgIHRvYXN0KCdObyBzZWxlY3RlZCBsaXN0IHRvIGNvcHknKTsKICAgIGFsZXJ0KCdObyBzZWxlY3RlZCBsaXN0IHRvIGNvcHknKTsKICAgIHJldHVybjsKICB9CgogIGNvbnN0IHRvdGFsQnl0ZXMgPSBzdGF0ZS5zZWxlY3RlZC5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcGFyc2VTaXplVGV4dChzLnNpemUpLCAwKTsKICBjb25zdCB0b3RhbEdCID0gKHRvdGFsQnl0ZXMgLyAoMTAyNCAqKiAzKSkudG9GaXhlZCgyKTsKICBjb25zdCBjb3VudCA9IHRpdGxlc0Fyci5sZW5ndGg7CgogIGNvbnN0IGN1c3RvbWVyID0gKCQoJ2N1c3RvbWVyJykudmFsdWUgfHwgJycpLnRyaW0oKSB8fCAnVW5rbm93biBjdXN0b21lcic7CiAgY29uc3QgZmlsZW5hbWUgPSAkKCdmaWxlbmFtZVByZXZpZXcnKS50ZXh0Q29udGVudCB8fCBgbGlzdCR7Q09ORklHLmNsaWVudEZpbGVFeHR9YDsKCiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICBjb25zdCBzdGFtcCA9IG5vdy50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7CiAgICB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnMi1kaWdpdCcsIGRheTogJzItZGlnaXQnLAogICAgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0Jywgc2Vjb25kOiAnMi1kaWdpdCcKICB9KTsKCiAgbGV0IGxpbmtUb1VzZSA9IGxpbms7CgogIGlmICghbGluaykgewogICAgY29uc3QgYXNrID0gY29uZmlybSgKICAgICAgYE5vIGxpbmsgZm91bmQuXG5cbmAgKwogICAgICBgTGlzdCBjb250YWlucyAke2NvdW50fSBpdGVtcyB0b3RhbGluZyAke3RvdGFsR0J9IEdCLlxuXG5gICsKICAgICAgYFdvdWxkIHlvdSBsaWtlIHRvIHVwbG9hZCBub3c/YAogICAgKTsKCiAgICBpZiAoYXNrKSB7CiAgICAgICQoJ3VwbG9hZEJ0bicpLmNsaWNrKCk7CiAgICAgIHNob3dCYW5uZXIoIlVwbG9hZGluZ+KAplxuXG5QbGVhc2Ugd2FpdCBmb3IgdGhlIGxpbmsgdG8gYXBwZWFyLCB0aGVuIHByZXNzIENvcHkgYWdhaW4uIik7CiAgICAgIHRvYXN0KCJVcGxvYWRpbmfigKYgd2FpdCBmb3IgbGluaywgdGhlbiBwcmVzcyBDb3B5IGFnYWluIik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBsaW5rVG9Vc2UgPSAnKE5vIGxpbmsgdXBsb2FkZWQpJzsKICB9CgogIGNvbnN0IHN1bW1hcnkgPQogICAgYEN1c3RvbWVyOiAke2N1c3RvbWVyfVxuYCArCiAgICBgRmlsZW5hbWU6ICR7ZmlsZW5hbWV9XG5gICsKICAgIGBRdWFudGl0eTogJHtjb3VudH0gaXRlbXNcbmAgKwogICAgYFRvdGFsIFNpemU6ICR7dG90YWxHQn0gR0JcbmAgKwogICAgYEdlbmVyYXRlZDogJHtzdGFtcH1cblxuYCArCiAgICBgJHtsaW5rVG9Vc2V9XG5cbmA7CgogIGNvbnN0IGZpbmFsVGV4dCA9IHN1bW1hcnkgKyB0aXRsZXNBcnIuam9pbignXG4nKTsKCiAgbGV0IG1lc3NhZ2UgPSBsaW5rCiAgICA/IGBMaXN0ICYgbGluayBjb3BpZWQuICgke2NvdW50fSBpdGVtcywgJHt0b3RhbEdCfSBHQilgCiAgICA6IGBMaXN0IGNvcGllZCAobm8gbGluaykuICgke2NvdW50fSBpdGVtcywgJHt0b3RhbEdCfSBHQilgOwoKICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChmaW5hbFRleHQpLnRoZW4oKCkgPT4gewogICAgdG9hc3QobWVzc2FnZS5yZXBsYWNlKC9cbi9nLCAnICcpKTsKICAgIGFsZXJ0KG1lc3NhZ2UpOwogIH0pLmNhdGNoKCgpID0+IHsKICAgIGFsZXJ0KCdDb3B5IGZhaWxlZCwgcGxlYXNlIGNvcHkgbWFudWFsbHknKTsKICB9KTsKfSk7CgpmdW5jdGlvbiByZW5kZXJTZWxlY3RlZFBhbmVsKCkgewogIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0ZWRQYW5lbEJvZHknKTsKICBpZiAoIWJvZHkpIHJldHVybjsKCiAgYm9keS5pbm5lckhUTUwgPSAnJzsKCiAgaWYgKHN0YXRlLnNlbGVjdGVkLmxlbmd0aCA9PT0gMCkgewogICAgYm9keS5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOnZhcigtLW11dGVkKTtmb250LXNpemU6MTNweCI+Tm8gZ2FtZXMgc2VsZWN0ZWQgeWV0PC9kaXY+JzsKICAgIHJldHVybjsKICB9CgogIHN0YXRlLnNlbGVjdGVkLmZvckVhY2goKHMsIGkpID0+IHsKICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgcm93LmNsYXNzTmFtZSA9ICdzZWxlY3RlZC1pdGVtJzsKCiAgICBjb25zdCBzaXplRGlzcGxheSA9IGZvcm1hdFNpemVUb0dCKHMuc2l6ZSk7CiAgICBjb25zdCBpY29uVXJsID0gZ2V0SWNvblVybChzLm5hbWUpOwoKICAgIHJvdy5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tdGh1bWIiPgogICAgICAgICR7aWNvblVybCA/IGA8aW1nIHNyYz0iJHtpY29uVXJsfSIgYWx0PSIiIHN0eWxlPSJ3aWR0aDoxMDAlO2hlaWdodDoxMDAlO29iamVjdC1maXQ6Y292ZXI7Ym9yZGVyLXJhZGl1czo2cHgiPmAgOiAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxOHB4Ij7wn46uPC9zcGFuPid9CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLWNvbnRlbnQiPgogICAgICAgIDxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tdGl0bGUiPiR7ZXNjKHMubmFtZSl9PC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLXNpemUiPiR7c2l6ZURpc3BsYXl9PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9InNlbGVjdGVkLWl0ZW0tY2hlY2siPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiIvPjwvc3ZnPjwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJzZWxlY3RlZC1pdGVtLWFjdGlvbnMiPgogICAgICAgIDxidXR0b24gY2xhc3M9InVwIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMTggMTVsLTYtNi02IDYiLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJkb3duIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNNiA5bDYgNiA2LTYiLz48L3N2Zz48L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJyZW1vdmUiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiLz48bGluZSB4MT0iNiIgeTE9IjYiIHgyPSIxOCIgeTI9IjE4Ii8+PC9zdmc+PC9idXR0b24+CiAgICAgIDwvZGl2PgogICAgYDsKCiAgICByb3cucXVlcnlTZWxlY3RvcignLnVwJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGlmIChpID4gMCkgewogICAgICAgIFtzdGF0ZS5zZWxlY3RlZFtpIC0gMV0sIHN0YXRlLnNlbGVjdGVkW2ldXSA9IFtzdGF0ZS5zZWxlY3RlZFtpXSwgc3RhdGUuc2VsZWN0ZWRbaSAtIDFdXTsKICAgICAgICByZW5kZXJPdmVybGF5KCk7CiAgICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgICAgdXBkYXRlVG90YWxzKCk7CiAgICAgIH0KICAgIH0pOwoKICAgIHJvdy5xdWVyeVNlbGVjdG9yKCcuZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICBpZiAoaSA8IHN0YXRlLnNlbGVjdGVkLmxlbmd0aCAtIDEpIHsKICAgICAgICBbc3RhdGUuc2VsZWN0ZWRbaSArIDFdLCBzdGF0ZS5zZWxlY3RlZFtpXV0gPSBbc3RhdGUuc2VsZWN0ZWRbaV0sIHN0YXRlLnNlbGVjdGVkW2kgKyAxXV07CiAgICAgICAgcmVuZGVyT3ZlcmxheSgpOwogICAgICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOwogICAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICB9CiAgICB9KTsKCiAgICByb3cucXVlcnlTZWxlY3RvcignLnJlbW92ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICBzdGF0ZS5zZWxlY3RlZC5zcGxpY2UoaSwgMSk7CiAgICAgIHJlbmRlck92ZXJsYXkoKTsKICAgICAgcmVuZGVyTGlzdChzdGF0ZS5pdGVtcyk7CiAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgfSk7CgogICAgYm9keS5hcHBlbmRDaGlsZChyb3cpOwogIH0pOwp9Cgpjb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9nZ2xlQ29uZmlnJyk7CmNvbnN0IGNvbmZpZ1NlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnU2VjdGlvbicpOwoKaWYgKGlzTW9iaWxlICYmIHRvZ2dsZUJ0biAmJiBjb25maWdTZWN0aW9uKSB7CiAgY29uZmlnU2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICB0b2dnbGVCdG4udGV4dENvbnRlbnQgPSAnSGlkZSBDb25maWd1cmF0aW9uJzsKCiAgdG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgY29uc3QgaXNWaXNpYmxlID0gY29uZmlnU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTsKICAgIHRvZ2dsZUJ0bi50ZXh0Q29udGVudCA9IGlzVmlzaWJsZSA/ICdIaWRlIENvbmZpZ3VyYXRpb24nIDogJ1Nob3cgQ29uZmlndXJhdGlvbic7CiAgfSk7Cn0KCmZ1bmN0aW9uIHBhcnNlRGF0ZUZsZXhpYmxlKHMpIHsKICBpZiAoIXMpIHJldHVybiBudWxsOwogIGxldCBkID0gbmV3IERhdGUocyk7CiAgaWYgKCFpc05hTihkLmdldFRpbWUoKSkpIHJldHVybiBkOwoKICBjb25zdCB5bWQgPSAoJycrcykubWF0Y2goLyhcZHs0fSlcRD8oXGR7MSwyfSlcRD8oXGR7MSwyfSkvKTsKICBpZiAoeW1kKSB7CiAgICBkID0gbmV3IERhdGUoTnVtYmVyKHltZFsxXSksIE51bWJlcih5bWRbMl0pIC0gMSwgTnVtYmVyKHltZFszXSkpOwogICAgaWYgKCFpc05hTihkLmdldFRpbWUoKSkpIHJldHVybiBkOwogIH0KCiAgY29uc3QgZG15ID0gKCcnK3MpLm1hdGNoKC8oXGR7MSwyfSlcRChcZHsxLDJ9KVxEKFxkezR9KS8pOwogIGlmIChkbXkpIHsKICAgIGQgPSBuZXcgRGF0ZShOdW1iZXIoZG15WzNdKSwgTnVtYmVyKGRteVsyXSkgLSAxLCBOdW1iZXIoZG15WzFdKSk7CiAgICBpZiAoIWlzTmFOKGQuZ2V0VGltZSgpKSkgcmV0dXJuIGQ7CiAgfQoKICByZXR1cm4gbnVsbDsKfQoKLy8gU29ydCBmdW5jdGlvbmFsaXR5IG1vdmVkIHRvIGdlbnJlIGZpbHRlciBiYXIKCmZ1bmN0aW9uIGRldGVjdEVudmlyb25tZW50KCkgewogIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTsKICBjb25zdCBpc01lc3NlbmdlciA9IC9GQkFOfEZCQVZ8RkJfSUFCfE1lc3Nlbmdlci9pLnRlc3QodWEpOwogIGNvbnN0IGlzSW5zdGFncmFtID0gL0luc3RhZ3JhbS9pLnRlc3QodWEpOwogIGNvbnN0IGlzV2ViVmlldyA9IC9cYnd2XGIvLnRlc3QodWEpIHx8ICh3aW5kb3cubmF2aWdhdG9yLnN0YW5kYWxvbmUgPT09IGZhbHNlKTsKCiAgaWYgKGlzTWVzc2VuZ2VyIHx8IGlzSW5zdGFncmFtIHx8IGlzV2ViVmlldykgewogICAgc2hvd0Jhbm5lcigiTWVzc2VuZ2VyIG9yIGluLWFwcCB3ZWJ2aWV3IGRldGVjdGVkLlxuVGhpcyBwYWdlIGlzIGJlc3QgdXNlZCBvbiBhIGZ1bGwgbW9iaWxlIGJyb3dzZXIgb3IgZGVza3RvcCBicm93c2VyLCBidXQgaXQgd2lsbCBwcm9iYWJseSB3b3JrIGFueXdheSIsIDQwMDApOwogIH0KICBzaG93QmFubmVyKCJIb3cgdG8gdXNlOlxuXG4xLiBFbnRlciB5b3VyIG5hbWVcbjIuIFNlbGVjdCB5b3VyIGRldmljZSBtb2RlbCAoT0xFRC9MaXRlL1YxL1YyKVxuMy4gU2VsZWN0IHlvdXIgU0QgQ2FyZCBTaXplXG40LiBDaG9vc2UgeW91ciBnYW1lc1xuNS4gUHJlc3MgVXBsb2FkXG42LiBTZW5kIHRoZSBnZW5lcmF0ZWQgbGluayB0byBvdXIgY2hhdCBjb252ZXJzYXRpb24iLCA4MDAwKTsKfQoKZnVuY3Rpb24gc2hvd0Jhbm5lcihtZXNzYWdlLCBkdXJhdGlvbiA9IDQwMDApIHsKICBjb25zdCBiYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICBiYW5uZXIuaW5uZXJUZXh0ID0gbWVzc2FnZTsKICBiYW5uZXIuc3R5bGUuY3NzVGV4dCA9ICJwb3NpdGlvbjpmaXhlZDt0b3A6MzAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjgpO2NvbG9yOiNmZmY7cGFkZGluZzoxOHB4O2JvcmRlci1yYWRpdXM6MTZweDtmb250LXNpemU6MjJweDt6LWluZGV4Ojk5OTk7Ym94LXNoYWRvdzowIDJweCA2cHggcmdiYSgwLDAsMCwwLjMpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzIGVhc2U7d2hpdGUtc3BhY2U6cHJlLWxpbmU7bWF4LXdpZHRoOjgwJSI7CiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChiYW5uZXIpOwoKICBzZXRUaW1lb3V0KCgpID0+IGJhbm5lci5zdHlsZS5vcGFjaXR5ID0gIjAiLCBkdXJhdGlvbik7CiAgc2V0VGltZW91dCgoKSA9PiBiYW5uZXIucmVtb3ZlKCksIGR1cmF0aW9uICsgNTAwKTsKfQoKZnVuY3Rpb24gbGV2ZW5zaHRlaW5EaXN0YW5jZShzdHIxLCBzdHIyKSB7CiAgY29uc3QgbGVuMSA9IHN0cjEubGVuZ3RoOwogIGNvbnN0IGxlbjIgPSBzdHIyLmxlbmd0aDsKICBjb25zdCBtYXRyaXggPSBBcnJheShsZW4yICsgMSkuZmlsbChudWxsKS5tYXAoKCkgPT4gQXJyYXkobGVuMSArIDEpLmZpbGwoMCkpOwogIAogIGZvciAobGV0IGkgPSAwOyBpIDw9IGxlbjE7IGkrKykgbWF0cml4WzBdW2ldID0gaTsKICBmb3IgKGxldCBqID0gMDsgaiA8PSBsZW4yOyBqKyspIG1hdHJpeFtqXVswXSA9IGo7CiAgCiAgZm9yIChsZXQgaiA9IDE7IGogPD0gbGVuMjsgaisrKSB7CiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBsZW4xOyBpKyspIHsKICAgICAgY29uc3QgY29zdCA9IHN0cjFbaSAtIDFdID09PSBzdHIyW2ogLSAxXSA/IDAgOiAxOwogICAgICBtYXRyaXhbal1baV0gPSBNYXRoLm1pbigKICAgICAgICBtYXRyaXhbal1baSAtIDFdICsgMSwKICAgICAgICBtYXRyaXhbaiAtIDFdW2ldICsgMSwKICAgICAgICBtYXRyaXhbaiAtIDFdW2kgLSAxXSArIGNvc3QKICAgICAgKTsKICAgIH0KICB9CiAgCiAgcmV0dXJuIG1hdHJpeFtsZW4yXVtsZW4xXTsKfQoKZnVuY3Rpb24gbm9ybWFsaXplVGl0bGUodGl0bGUpIHsKICByZXR1cm4gdGl0bGUudG9Mb3dlckNhc2UoKQogICAgLnJlcGxhY2UoL1teXHdcc10vZywgJyAnKSAgLy8gUmVtb3ZlIHB1bmN0dWF0aW9uCiAgICAucmVwbGFjZSgvXHMrL2csICcgJykgICAgICAvLyBDb2xsYXBzZSBzcGFjZXMKICAgIC50cmltKCk7Cn0KCmZ1bmN0aW9uIGdldEtleXdvcmRzKHRpdGxlKSB7CiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVRpdGxlKHRpdGxlKTsKICAvLyBGaWx0ZXIgb3V0IGNvbW1vbiB3b3JkcwogIGNvbnN0IHN0b3BXb3JkcyA9IFsndGhlJywgJ29mJywgJ2FuZCcsICdhJywgJ2FuJywgJ2luJywgJ29uJywgJ2ZvcicsICd0bycsICd3aXRoJ107CiAgcmV0dXJuIG5vcm1hbGl6ZWQuc3BsaXQoJyAnKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDAgJiYgIXN0b3BXb3Jkcy5pbmNsdWRlcyh3b3JkKSk7Cn0KCmZ1bmN0aW9uIGV4dHJhY3ROdW1iZXJzKHRpdGxlKSB7CiAgY29uc3QgbWF0Y2hlcyA9IHRpdGxlLm1hdGNoKC9cZCsvZyk7CiAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzLm1hcChuID0+IG4pIDogW107Cn0KCmZ1bmN0aW9uIGNhbGN1bGF0ZU1hdGNoU2NvcmUodXNlclRpdGxlLCBkYlRpdGxlKSB7CiAgY29uc3QgdXNlcktleXdvcmRzID0gZ2V0S2V5d29yZHModXNlclRpdGxlKTsKICBjb25zdCBkYktleXdvcmRzID0gZ2V0S2V5d29yZHMoZGJUaXRsZSk7CiAgCiAgaWYgKHVzZXJLZXl3b3Jkcy5sZW5ndGggPT09IDApIHJldHVybiB7IHNjb3JlOiAwLCBudW1iZXJNYXRjaDogZmFsc2UsIGNvbnNlY3V0aXZlTWF0Y2hlczogMCB9OwogIAogIGxldCBtYXRjaGVkV29yZHMgPSAwOwogIGxldCBwYXJ0aWFsTWF0Y2hlcyA9IDA7CiAgbGV0IGNvbnNlY3V0aXZlTWF0Y2hlcyA9IDA7CiAgbGV0IGxhc3RNYXRjaEluZGV4ID0gLTI7CiAgCiAgLy8gQ2hlY2sgZm9yIG51bWJlciBtYXRjaGluZwogIGNvbnN0IHVzZXJOdW1iZXJzID0gZXh0cmFjdE51bWJlcnModXNlclRpdGxlKTsKICBjb25zdCBkYk51bWJlcnMgPSBleHRyYWN0TnVtYmVycyhkYlRpdGxlKTsKICBjb25zdCBoYXNFeGFjdE51bWJlck1hdGNoID0gdXNlck51bWJlcnMubGVuZ3RoID4gMCAmJiAKICAgIHVzZXJOdW1iZXJzLmV2ZXJ5KG51bSA9PiBkYk51bWJlcnMuaW5jbHVkZXMobnVtKSk7CiAgCiAgdXNlcktleXdvcmRzLmZvckVhY2goKHVzZXJXb3JkLCBpZHgpID0+IHsKICAgIGxldCBtYXRjaGVkID0gZmFsc2U7CiAgICAKICAgIC8vIENoZWNrIGZvciBleGFjdCB3b3JkIG1hdGNoCiAgICBjb25zdCBleGFjdElkeCA9IGRiS2V5d29yZHMuZmluZEluZGV4KGRiV29yZCA9PiBkYldvcmQgPT09IHVzZXJXb3JkKTsKICAgIGlmIChleGFjdElkeCAhPT0gLTEpIHsKICAgICAgbWF0Y2hlZFdvcmRzICs9IDE7CiAgICAgIG1hdGNoZWQgPSB0cnVlOwogICAgICAKICAgICAgLy8gVHJhY2sgY29uc2VjdXRpdmUgbWF0Y2hlcwogICAgICBpZiAoZXhhY3RJZHggPT09IGxhc3RNYXRjaEluZGV4ICsgMSkgewogICAgICAgIGNvbnNlY3V0aXZlTWF0Y2hlcysrOwogICAgICB9CiAgICAgIGxhc3RNYXRjaEluZGV4ID0gZXhhY3RJZHg7CiAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgLy8gQ2hlY2sgZm9yIHN1YnN0cmluZyBtYXRjaCAtIGJ1dCByZXF1aXJlIG1pbmltdW0gbGVuZ3RoCiAgICAvLyBBTkQgdGhlIHVzZXIgd29yZCBtdXN0IGJlIHN1YnN0YW50aWFsICgzKyBjaGFycyBmb3IgbW9zdCwgNCsgZm9yIHZlcnkgY29tbW9uIHdvcmRzKQogICAgaWYgKHVzZXJXb3JkLmxlbmd0aCA+PSAzKSB7CiAgICAgIGNvbnN0IHN1YnN0cmluZ0lkeCA9IGRiS2V5d29yZHMuZmluZEluZGV4KGRiV29yZCA9PiB7CiAgICAgICAgLy8gREIgd29yZCBtdXN0IGJlIGxvbmcgZW5vdWdoIHRvIGNvbnRhaW4gdGhlIHVzZXIgd29yZCBtZWFuaW5nZnVsbHkKICAgICAgICBpZiAoZGJXb3JkLmxlbmd0aCA+PSB1c2VyV29yZC5sZW5ndGggKyAxICYmIGRiV29yZC5pbmNsdWRlcyh1c2VyV29yZCkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICAvLyBPciBpZiB1c2VyIHdvcmQgaXMgbG9uZ2VyLCBjaGVjayBpZiBpdCBjb250YWlucyBEQiB3b3JkIChmb3IgY29tcG91bmQgd29yZHMpCiAgICAgICAgaWYgKHVzZXJXb3JkLmxlbmd0aCA+PSA0ICYmIHVzZXJXb3JkLmluY2x1ZGVzKGRiV29yZCkgJiYgZGJXb3JkLmxlbmd0aCA+PSAzKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9KTsKICAgICAgCiAgICAgIGlmIChzdWJzdHJpbmdJZHggIT09IC0xKSB7CiAgICAgICAgLy8gR2l2ZSBoaWdoZXIgc2NvcmUgZm9yIGxvbmdlciBtYXRjaGVzCiAgICAgICAgY29uc3QgbWF0Y2hTdHJlbmd0aCA9IHVzZXJXb3JkLmxlbmd0aCA+PSA0ID8gMC44IDogMC42OwogICAgICAgIHBhcnRpYWxNYXRjaGVzICs9IG1hdGNoU3RyZW5ndGg7CiAgICAgICAgbWF0Y2hlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CiAgICAKICAgIC8vIENoZWNrIGZvciB2ZXJ5IGNsb3NlIHR5cG8gKHNpbmdsZSBjaGFyIGRpZmZlcmVuY2UpCiAgICAvLyBPbmx5IGZvciB3b3JkcyAzKyBjaGFyYWN0ZXJzCiAgICBpZiAodXNlcldvcmQubGVuZ3RoID49IDMpIHsKICAgICAgZGJLZXl3b3Jkcy5mb3JFYWNoKGRiV29yZCA9PiB7CiAgICAgICAgaWYgKGRiV29yZC5sZW5ndGggPCAzKSByZXR1cm47IC8vIFNraXAgc2hvcnQgd29yZHMKICAgICAgICAKICAgICAgICBjb25zdCBtYXhMZW4gPSBNYXRoLm1heCh1c2VyV29yZC5sZW5ndGgsIGRiV29yZC5sZW5ndGgpOwogICAgICAgIGNvbnN0IG1pbkxlbiA9IE1hdGgubWluKHVzZXJXb3JkLmxlbmd0aCwgZGJXb3JkLmxlbmd0aCk7CiAgICAgICAgCiAgICAgICAgLy8gT25seSBjb25zaWRlciBpZiBsZW5ndGhzIGFyZSBzaW1pbGFyCiAgICAgICAgaWYgKG1heExlbiAtIG1pbkxlbiA8PSAyICYmIG1pbkxlbiA+PSAzKSB7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGxldmVuc2h0ZWluRGlzdGFuY2UodXNlcldvcmQsIGRiV29yZCk7CiAgICAgICAgICBpZiAoZGlzdGFuY2UgPD0gMikgewogICAgICAgICAgICBwYXJ0aWFsTWF0Y2hlcyArPSAwLjU7CiAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSk7CiAgCiAgY29uc3QgdG90YWxNYXRjaGVkID0gbWF0Y2hlZFdvcmRzICsgcGFydGlhbE1hdGNoZXM7CiAgY29uc3Qgc2NvcmUgPSB0b3RhbE1hdGNoZWQgLyB1c2VyS2V5d29yZHMubGVuZ3RoOwogIAogIHJldHVybiB7IAogICAgc2NvcmUsIAogICAgbnVtYmVyTWF0Y2g6IGhhc0V4YWN0TnVtYmVyTWF0Y2gsCiAgICBjb25zZWN1dGl2ZU1hdGNoZXMsCiAgICB0aXRsZUxlbmd0aDogZGJLZXl3b3Jkcy5sZW5ndGgsCiAgICBleGFjdFdvcmRDb3VudDogbWF0Y2hlZFdvcmRzICAvLyBUcmFjayBleGFjdCBtYXRjaGVzIHNlcGFyYXRlbHkKICB9Owp9CgpmdW5jdGlvbiBmaW5kQmVzdE1hdGNoKHVzZXJUaXRsZSwgZGJJdGVtcykgewogIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVUaXRsZSh1c2VyVGl0bGUpOwogIAogIC8vIFRyeSBleGFjdCBtYXRjaCBmaXJzdAogIGNvbnN0IGV4YWN0TWF0Y2ggPSBkYkl0ZW1zLmZpbmQoaXRlbSA9PiBub3JtYWxpemVUaXRsZShpdGVtLm5hbWUpID09PSBub3JtYWxpemVkKTsKICBpZiAoZXhhY3RNYXRjaCkgewogICAgcmV0dXJuIHsgbWF0Y2g6IGV4YWN0TWF0Y2gsIGNvbmZpZGVuY2U6ICdleGFjdCcsIHNjb3JlOiAxLjAgfTsKICB9CiAgCiAgLy8gU2NvcmUgYWxsIGl0ZW1zCiAgY29uc3Qgc2NvcmVkID0gZGJJdGVtcy5tYXAoaXRlbSA9PiB7CiAgICBjb25zdCBtYXRjaERhdGEgPSBjYWxjdWxhdGVNYXRjaFNjb3JlKHVzZXJUaXRsZSwgaXRlbS5uYW1lKTsKICAgIHJldHVybiB7CiAgICAgIGl0ZW0sCiAgICAgIC4uLm1hdGNoRGF0YQogICAgfTsKICB9KS5maWx0ZXIocyA9PiBzLnNjb3JlID4gMCk7CiAgCiAgaWYgKHNjb3JlZC5sZW5ndGggPT09IDApIHJldHVybiBudWxsOwogIAogIC8vIFNvcnQgYnkgcHJpb3JpdHk6CiAgLy8gMS4gTnVtYmVyIG1hdGNoIChjcml0aWNhbCBmb3Igc2VxdWVscy92ZXJzaW9ucykKICAvLyAyLiBFeGFjdCB3b3JkIGNvdW50IChwcmVmZXIgbW9yZSBleGFjdCBtYXRjaGVzKQogIC8vIDMuIFNjb3JlCiAgLy8gNC4gQ29uc2VjdXRpdmUgbWF0Y2hlcyAod29yZCBvcmRlciBtYXR0ZXJzKQogIC8vIDUuIFNob3J0ZXIgdGl0bGUgKG1vcmUgcHJlY2lzZSkKICBzY29yZWQuc29ydCgoYSwgYikgPT4gewogICAgLy8gUHJpb3JpdHkgMTogRXhhY3QgbnVtYmVyIG1hdGNoCiAgICBpZiAoYS5udW1iZXJNYXRjaCAmJiAhYi5udW1iZXJNYXRjaCkgcmV0dXJuIC0xOwogICAgaWYgKCFhLm51bWJlck1hdGNoICYmIGIubnVtYmVyTWF0Y2gpIHJldHVybiAxOwogICAgCiAgICAvLyBQcmlvcml0eSAyOiBNb3JlIGV4YWN0IHdvcmQgbWF0Y2hlcyB3aW5zCiAgICBpZiAoYS5leGFjdFdvcmRDb3VudCAhPT0gYi5leGFjdFdvcmRDb3VudCkgewogICAgICByZXR1cm4gYi5leGFjdFdvcmRDb3VudCAtIGEuZXhhY3RXb3JkQ291bnQ7CiAgICB9CiAgICAKICAgIC8vIFByaW9yaXR5IDM6IFNjb3JlIGRpZmZlcmVuY2UKICAgIGNvbnN0IHNjb3JlRGlmZiA9IGIuc2NvcmUgLSBhLnNjb3JlOwogICAgaWYgKE1hdGguYWJzKHNjb3JlRGlmZikgPiAwLjE1KSByZXR1cm4gc2NvcmVEaWZmOwogICAgCiAgICAvLyBQcmlvcml0eSA0OiBDb25zZWN1dGl2ZSBtYXRjaGVzIChwaHJhc2UgbWF0Y2hpbmcpCiAgICBpZiAoYS5jb25zZWN1dGl2ZU1hdGNoZXMgIT09IGIuY29uc2VjdXRpdmVNYXRjaGVzKSB7CiAgICAgIHJldHVybiBiLmNvbnNlY3V0aXZlTWF0Y2hlcyAtIGEuY29uc2VjdXRpdmVNYXRjaGVzOwogICAgfQogICAgCiAgICAvLyBQcmlvcml0eSA1OiBQcmVmZXIgc2hvcnRlciB0aXRsZXMKICAgIHJldHVybiBhLnRpdGxlTGVuZ3RoIC0gYi50aXRsZUxlbmd0aDsKICB9KTsKICAKICBjb25zdCBiZXN0ID0gc2NvcmVkWzBdOwogIAogIC8vIERldGVybWluZSBjb25maWRlbmNlIGJhc2VkIG9uIHNjb3JlCiAgbGV0IGNvbmZpZGVuY2U7CiAgaWYgKGJlc3Quc2NvcmUgPj0gMC45NSkgewogICAgY29uZmlkZW5jZSA9ICdoaWdoJzsKICB9IGVsc2UgaWYgKGJlc3Quc2NvcmUgPj0gMC43KSB7CiAgICBjb25maWRlbmNlID0gJ21lZGl1bSc7CiAgfSBlbHNlIGlmIChiZXN0LnNjb3JlID49IDAuNSkgewogICAgY29uZmlkZW5jZSA9ICdsb3cnOwogIH0gZWxzZSB7CiAgICByZXR1cm4gbnVsbDsgLy8gVG9vIGxvdyBjb25maWRlbmNlCiAgfQogIAogIHJldHVybiB7IG1hdGNoOiBiZXN0Lml0ZW0sIGNvbmZpZGVuY2UsIHNjb3JlOiBiZXN0LnNjb3JlIH07Cn0KCmZ1bmN0aW9uIG1hdGNoVXNlckxpc3QodXNlckxpc3QpIHsKICBjb25zdCBsaW5lcyA9IHVzZXJMaXN0LnNwbGl0KCdcbicpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIoQm9vbGVhbik7CiAgY29uc3QgcmVzdWx0cyA9IHsKICAgIGV4YWN0OiBbXSwKICAgIGhpZ2g6IFtdLAogICAgbWVkaXVtOiBbXSwKICAgIGxvdzogW10sCiAgICBub3RGb3VuZDogW10KICB9OwogIAogIGxpbmVzLmZvckVhY2godXNlclRpdGxlID0+IHsKICAgIGNvbnN0IHJlc3VsdCA9IGZpbmRCZXN0TWF0Y2godXNlclRpdGxlLCBzdGF0ZS5pdGVtcyk7CiAgICAKICAgIGlmICghcmVzdWx0KSB7CiAgICAgIHJlc3VsdHMubm90Rm91bmQucHVzaCh1c2VyVGl0bGUpOwogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0c1tyZXN1bHQuY29uZmlkZW5jZV0ucHVzaCh7CiAgICAgICAgb3JpZ2luYWw6IHVzZXJUaXRsZSwKICAgICAgICBtYXRjaGVkOiByZXN1bHQubWF0Y2gubmFtZSwKICAgICAgICBzaXplOiByZXN1bHQubWF0Y2guc2l6ZSwKICAgICAgICBzY29yZTogcmVzdWx0LnNjb3JlCiAgICAgIH0pOwogICAgfQogIH0pOwogIAogIHJldHVybiByZXN1bHRzOwp9CgokKCdtYXRjaExpc3QnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZXNNb2RhbCcpOwogIG1vZGFsLmlubmVySFRNTCA9ICcnOwogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIG1vZGFsLnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JzsKICAKICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBoZWFkZXIuaW5uZXJIVE1MID0gJzxzdHJvbmc+TWF0Y2ggVXNlciBMaXN0PC9zdHJvbmc+PGJyPjxzcGFuIGNsYXNzPSJtZXRhIj5QYXN0ZSB1c2VyXCdzIGdhbWUgbGlzdCBiZWxvdyAob25lIHBlciBsaW5lKTwvc3Bhbj4nOwogIG1vZGFsLmFwcGVuZENoaWxkKGhlYWRlcik7CiAgCiAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpOwogIHRleHRhcmVhLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6MTAwJTttaW4taGVpZ2h0OjIwMHB4O21hcmdpbi10b3A6MTJweDtwYWRkaW5nOjhweDtib3JkZXI6MXB4IHNvbGlkICNlNWU3ZWI7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1mYW1pbHk6bW9ub3NwYWNlO2ZvbnQtc2l6ZToxM3B4Oyc7CiAgdGV4dGFyZWEucGxhY2Vob2xkZXIgPSAnU3VwZXIgTWFyaW8gT2R5c3NleVxuVGhlIExlZ2VuZCBvZiBaZWxkYVxuTWFyaW8gS2FydCA4XG4uLi4nOwogIG1vZGFsLmFwcGVuZENoaWxkKHRleHRhcmVhKTsKICAKICBjb25zdCBidG5Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBidG5Db250YWluZXIuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OmZsZXg7Z2FwOjhweDttYXJnaW4tdG9wOjEycHg7JzsKICAKICBjb25zdCBtYXRjaEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIG1hdGNoQnRuLnRleHRDb250ZW50ID0gJ0FuYWx5emUgJiBNYXRjaCc7CiAgbWF0Y2hCdG4uY2xhc3NOYW1lID0gJ2J0bic7CiAgbWF0Y2hCdG4ub25jbGljayA9ICgpID0+IHsKICAgIGNvbnN0IHVzZXJMaXN0ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpOwogICAgaWYgKCF1c2VyTGlzdCkgewogICAgICBhbGVydCgnUGxlYXNlIHBhc3RlIGEgZ2FtZSBsaXN0Jyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgc2hvd01hdGNoUmVzdWx0cyh1c2VyTGlzdCk7CiAgfTsKICBidG5Db250YWluZXIuYXBwZW5kQ2hpbGQobWF0Y2hCdG4pOwogIAogIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgY2xvc2VCdG4udGV4dENvbnRlbnQgPSAnQ2FuY2VsJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIG1vZGFsLmlubmVySFRNTCA9ICcnOwogIH07CiAgYnRuQ29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnRuKTsKICAKICBtb2RhbC5hcHBlbmRDaGlsZChidG5Db250YWluZXIpOwp9KTsKCmZ1bmN0aW9uIHNob3dNYXRjaFJlc3VsdHModXNlckxpc3QpIHsKICBjb25zdCByZXN1bHRzID0gbWF0Y2hVc2VyTGlzdCh1c2VyTGlzdCk7CiAgY29uc3QgdG90YWxNYXRjaGVkID0gcmVzdWx0cy5leGFjdC5sZW5ndGggKyByZXN1bHRzLmhpZ2gubGVuZ3RoICsgcmVzdWx0cy5tZWRpdW0ubGVuZ3RoICsgcmVzdWx0cy5sb3cubGVuZ3RoOwogIGNvbnN0IHRvdGFsSXRlbXMgPSB0b3RhbE1hdGNoZWQgKyByZXN1bHRzLm5vdEZvdW5kLmxlbmd0aDsKICAKICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlc01vZGFsJyk7CiAgbW9kYWwuaW5uZXJIVE1MID0gJyc7CiAgbW9kYWwuc3R5bGUubWF4V2lkdGggPSAnNzAwcHgnOwogIG1vZGFsLnN0eWxlLm1heEhlaWdodCA9ICc4MHZoJzsKICAKICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBoZWFkZXIuaW5uZXJIVE1MID0gYDxzdHJvbmc+TWF0Y2ggUmVzdWx0czwvc3Ryb25nPjxicj48c3BhbiBjbGFzcz0ibWV0YSI+TWF0Y2hlZDogJHt0b3RhbE1hdGNoZWR9IC8gJHt0b3RhbEl0ZW1zfTwvc3Bhbj5gOwogIG1vZGFsLmFwcGVuZENoaWxkKGhlYWRlcik7CiAgCiAgY29uc3QgcmVzdWx0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgcmVzdWx0Q29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSAnbWFyZ2luLXRvcDoxMnB4O21heC1oZWlnaHQ6NDAwcHg7b3ZlcmZsb3cteTphdXRvOyc7CiAgCiAgLy8gRXhhY3QgbWF0Y2hlcwogIGlmIChyZXN1bHRzLmV4YWN0Lmxlbmd0aCA+IDApIHsKICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206OHB4OyI+PHN0cm9uZyBzdHlsZT0iY29sb3I6IzEwYjk4MTsiPuKckyBFeGFjdCBNYXRjaGVzICgke3Jlc3VsdHMuZXhhY3QubGVuZ3RofSk8L3N0cm9uZz48L2Rpdj5gOwogICAgcmVzdWx0cy5leGFjdC5mb3JFYWNoKHIgPT4gewogICAgICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MICs9IGA8ZGl2IHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7YmFja2dyb3VuZDojZjBmZGY0O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMTBiOTgxO21hcmdpbi1ib3R0b206NHB4O2ZvbnQtc2l6ZToxMnB4OyI+JHtlc2Moci5tYXRjaGVkKX0gPHNwYW4gc3R5bGU9ImNvbG9yOiM2YjcyODA7Ij4ke2VzYyhyLnNpemUpfTwvc3Bhbj48L2Rpdj5gOwogICAgfSk7CiAgfQogIAogIC8vIEhpZ2ggY29uZmlkZW5jZQogIGlmIChyZXN1bHRzLmhpZ2gubGVuZ3RoID4gMCkgewogICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0ibWFyZ2luOjEycHggMCA4cHg7Ij48c3Ryb25nIHN0eWxlPSJjb2xvcjojM2I4MmY2OyI+4omIIEhpZ2ggQ29uZmlkZW5jZSAoJHtyZXN1bHRzLmhpZ2gubGVuZ3RofSk8L3N0cm9uZz48L2Rpdj5gOwogICAgcmVzdWx0cy5oaWdoLmZvckVhY2gociA9PiB7CiAgICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtiYWNrZ3JvdW5kOiNlZmY2ZmY7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICMzYjgyZjY7bWFyZ2luLWJvdHRvbTo0cHg7Zm9udC1zaXplOjEycHg7Ij48ZGl2PiR7ZXNjKHIub3JpZ2luYWwpfSDihpIgPHN0cm9uZz4ke2VzYyhyLm1hdGNoZWQpfTwvc3Ryb25nPjwvZGl2PjxkaXYgc3R5bGU9ImNvbG9yOiM2YjcyODA7Ij4ke2VzYyhyLnNpemUpfTwvZGl2PjwvZGl2PmA7CiAgICB9KTsKICB9CiAgCiAgLy8gTWVkaXVtIGNvbmZpZGVuY2UKICBpZiAocmVzdWx0cy5tZWRpdW0ubGVuZ3RoID4gMCkgewogICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0ibWFyZ2luOjEycHggMCA4cHg7Ij48c3Ryb25nIHN0eWxlPSJjb2xvcjojZjU5ZTBiOyI+PyBNZWRpdW0gQ29uZmlkZW5jZSAoJHtyZXN1bHRzLm1lZGl1bS5sZW5ndGh9KTwvc3Ryb25nPiA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjEycHg7Y29sb3I6IzZiNzI4MDsiPlJldmlldyB0aGVzZTwvc3Bhbj48L2Rpdj5gOwogICAgcmVzdWx0cy5tZWRpdW0uZm9yRWFjaChyID0+IHsKICAgICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0icGFkZGluZzo0cHggOHB4O2JhY2tncm91bmQ6I2ZmZmJlYjtib3JkZXItbGVmdDozcHggc29saWQgI2Y1OWUwYjttYXJnaW4tYm90dG9tOjRweDtmb250LXNpemU6MTJweDsiPjxkaXY+JHtlc2Moci5vcmlnaW5hbCl9IOKGkiA8c3Ryb25nPiR7ZXNjKHIubWF0Y2hlZCl9PC9zdHJvbmc+PC9kaXY+PGRpdiBzdHlsZT0iY29sb3I6IzZiNzI4MDsiPiR7ZXNjKHIuc2l6ZSl9PC9kaXY+PC9kaXY+YDsKICAgIH0pOwogIH0KICAKICAvLyBMb3cgY29uZmlkZW5jZQogIGlmIChyZXN1bHRzLmxvdy5sZW5ndGggPiAwKSB7CiAgICByZXN1bHRDb250YWluZXIuaW5uZXJIVE1MICs9IGA8ZGl2IHN0eWxlPSJtYXJnaW46MTJweCAwIDhweDsiPjxzdHJvbmcgc3R5bGU9ImNvbG9yOiNmOTczMTY7Ij7imqAgTG93IENvbmZpZGVuY2UgKCR7cmVzdWx0cy5sb3cubGVuZ3RofSk8L3N0cm9uZz4gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxMnB4O2NvbG9yOiM2YjcyODA7Ij5WZXJpZnkgbWFudWFsbHk8L3NwYW4+PC9kaXY+YDsKICAgIHJlc3VsdHMubG93LmZvckVhY2gociA9PiB7CiAgICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtiYWNrZ3JvdW5kOiNmZmY3ZWQ7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNmOTczMTY7bWFyZ2luLWJvdHRvbTo0cHg7Zm9udC1zaXplOjEycHg7Ij48ZGl2PiR7ZXNjKHIub3JpZ2luYWwpfSDihpIgPHN0cm9uZz4ke2VzYyhyLm1hdGNoZWQpfTwvc3Ryb25nPjwvZGl2PjxkaXYgc3R5bGU9ImNvbG9yOiM2YjcyODA7Ij4ke2VzYyhyLnNpemUpfTwvZGl2PjwvZGl2PmA7CiAgICB9KTsKICB9CiAgCiAgLy8gTm90IGZvdW5kCiAgaWYgKHJlc3VsdHMubm90Rm91bmQubGVuZ3RoID4gMCkgewogICAgcmVzdWx0Q29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBzdHlsZT0ibWFyZ2luOjEycHggMCA4cHg7Ij48c3Ryb25nIHN0eWxlPSJjb2xvcjojZWY0NDQ0OyI+4pyXIE5vdCBGb3VuZCAoJHtyZXN1bHRzLm5vdEZvdW5kLmxlbmd0aH0pPC9zdHJvbmc+PC9kaXY+YDsKICAgIHJlc3VsdHMubm90Rm91bmQuZm9yRWFjaCh0aXRsZSA9PiB7CiAgICAgIHJlc3VsdENvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgc3R5bGU9InBhZGRpbmc6NHB4IDhweDtiYWNrZ3JvdW5kOiNmZWYyZjI7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNlZjQ0NDQ7bWFyZ2luLWJvdHRvbTo0cHg7Zm9udC1zaXplOjEycHg7Ij4ke2VzYyh0aXRsZSl9PC9kaXY+YDsKICAgIH0pOwogIH0KICAKICBtb2RhbC5hcHBlbmRDaGlsZChyZXN1bHRDb250YWluZXIpOwogIAogIGNvbnN0IGJ0bkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGJ0bkNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6ZmxleDtnYXA6OHB4O21hcmdpbi10b3A6MTJweDtmbGV4LXdyYXA6d3JhcDsnOwogIAogIGlmICh0b3RhbE1hdGNoZWQgPiAwKSB7CiAgICBjb25zdCBhZGRBbGxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgIGFkZEFsbEJ0bi50ZXh0Q29udGVudCA9IGBBZGQgJHt0b3RhbE1hdGNoZWR9IE1hdGNoZXMgdG8gU2VsZWN0aW9uYDsKICAgIGFkZEFsbEJ0bi5jbGFzc05hbWUgPSAnYnRuJzsKICAgIGFkZEFsbEJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgICBsZXQgYWRkZWQgPSAwOwogICAgICBbLi4ucmVzdWx0cy5leGFjdCwgLi4ucmVzdWx0cy5oaWdoLCAuLi5yZXN1bHRzLm1lZGl1bSwgLi4ucmVzdWx0cy5sb3ddLmZvckVhY2gociA9PiB7CiAgICAgICAgaWYgKCFzdGF0ZS5zZWxlY3RlZC5zb21lKHMgPT4gcy5uYW1lID09PSByLm1hdGNoZWQpKSB7CiAgICAgICAgICBjb25zdCBpdGVtID0gc3RhdGUuaXRlbXMuZmluZChpdCA9PiBpdC5uYW1lID09PSByLm1hdGNoZWQpOwogICAgICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICAgICAgc3RhdGUuc2VsZWN0ZWQucHVzaCh7CiAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgICAgIGZpbGVuYW1lOiBpdGVtLmZpbGVuYW1lIHx8IGl0ZW0ubmFtZSwKICAgICAgICAgICAgICBzaXplOiBpdGVtLnNpemUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGFkZGVkKys7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgCiAgICAgIHVwZGF0ZVRvdGFscygpOwogICAgICByZW5kZXJPdmVybGF5KCk7CiAgICAgIHJlbmRlckxpc3Qoc3RhdGUuaXRlbXMpOwogICAgICB0b2FzdChgQWRkZWQgJHthZGRlZH0gbWF0Y2hlZCBnYW1lc2ApOwogICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICBtb2RhbC5pbm5lckhUTUwgPSAnJzsKICAgIH07CiAgICBidG5Db250YWluZXIuYXBwZW5kQ2hpbGQoYWRkQWxsQnRuKTsKICB9CiAgCiAgY29uc3QgZXhwb3J0TWF0Y2hlZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGV4cG9ydE1hdGNoZWRCdG4udGV4dENvbnRlbnQgPSAnRXhwb3J0IE1hdGNoZWQnOwogIGV4cG9ydE1hdGNoZWRCdG4uY2xhc3NOYW1lID0gJ2J0biBnaG9zdCc7CiAgZXhwb3J0TWF0Y2hlZEJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgY29uc3QgY29udGVudCA9IFsuLi5yZXN1bHRzLmV4YWN0LCAuLi5yZXN1bHRzLmhpZ2gsIC4uLnJlc3VsdHMubWVkaXVtLCAuLi5yZXN1bHRzLmxvd10KICAgICAgLm1hcChyID0+IHIubWF0Y2hlZCkKICAgICAgLmpvaW4oJ1xuJyk7CiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTsKICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgYS5kb3dubG9hZCA9IGBtYXRjaGVkXyR7RGF0ZS5ub3coKX0udHh0YDsKICAgIGEuY2xpY2soKTsKICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTsKICAgIHRvYXN0KCdFeHBvcnRlZCBtYXRjaGVkIGxpc3QnKTsKICB9OwogIGJ0bkNvbnRhaW5lci5hcHBlbmRDaGlsZChleHBvcnRNYXRjaGVkQnRuKTsKICAKICBpZiAocmVzdWx0cy5ub3RGb3VuZC5sZW5ndGggPiAwKSB7CiAgICBjb25zdCBleHBvcnROb3RGb3VuZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgZXhwb3J0Tm90Rm91bmRCdG4udGV4dENvbnRlbnQgPSAnRXhwb3J0IE5vdCBGb3VuZCc7CiAgICBleHBvcnROb3RGb3VuZEJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICAgIGV4cG9ydE5vdEZvdW5kQnRuLnN0eWxlLmJhY2tncm91bmQgPSAnI2ZlZjJmMic7CiAgICBleHBvcnROb3RGb3VuZEJ0bi5zdHlsZS5jb2xvciA9ICcjZWY0NDQ0JzsKICAgIGV4cG9ydE5vdEZvdW5kQnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgIGNvbnN0IGNvbnRlbnQgPSByZXN1bHRzLm5vdEZvdW5kLmpvaW4oJ1xuJyk7CiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pOwogICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICBhLmRvd25sb2FkID0gYG5vdF9mb3VuZF8ke0RhdGUubm93KCl9LnR4dGA7CiAgICAgIGEuY2xpY2soKTsKICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhLmhyZWYpOwogICAgICB0b2FzdCgnRXhwb3J0ZWQgbm90IGZvdW5kIGxpc3QnKTsKICAgIH07CiAgICBidG5Db250YWluZXIuYXBwZW5kQ2hpbGQoZXhwb3J0Tm90Rm91bmRCdG4pOwogIH0KICAKICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogIGNsb3NlQnRuLnRleHRDb250ZW50ID0gJ0Nsb3NlJzsKICBjbG9zZUJ0bi5jbGFzc05hbWUgPSAnYnRuIGdob3N0JzsKICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIG1vZGFsLmlubmVySFRNTCA9ICcnOwogIH07CiAgYnRuQ29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlQnRuKTsKICAKICBtb2RhbC5hcHBlbmRDaGlsZChidG5Db250YWluZXIpOwp9CgppZiAoIWlzTG9jYWwpIHsKICBjb25zdCBhZG1pbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZG1pbkV4cG9ydCcpOwogIGlmIChhZG1pbikgYWRtaW4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCiAgY29uc3QgYmluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jpbkxpc3QnKTsKICBpZiAoYmluKSBiaW4uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAKICBjb25zdCBtYXRjaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXRjaExpc3QnKTsKICBpZiAobWF0Y2gpIG1hdGNoLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7ICAKCn0KCmNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaCcpOwoKaWYgKCFpc01vYmlsZSkgewogIGZ1bmN0aW9uIHJlZm9jdXNTZWFyY2goKSB7CiAgICBjb25zdCBhY3RpdmUgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwogICAgaWYgKAogICAgICBhY3RpdmUgJiYKICAgICAgKGFjdGl2ZS5pZCA9PT0gJ2N1c3RvbWVyJyB8fAogICAgICAgYWN0aXZlLnRhZ05hbWUgPT09ICdTRUxFQ1QnIHx8CiAgICAgICBhY3RpdmUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykKICAgICkgcmV0dXJuOwogICAgc2VhcmNoSW5wdXQuZm9jdXMoKTsKICAgIHNlYXJjaElucHV0LnNlbGVjdCgpOwogIH0KCiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZWZvY3VzU2VhcmNoKTsKCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gewogICAgY29uc3QgbW9kYWxPcGVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVzTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snOwogICAgY29uc3Qgb3ZlcmxheU9wZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPT09ICdmbGV4JzsKICAgIGlmICgKICAgICAgIW1vZGFsT3BlbiAmJgogICAgICAhb3ZlcmxheU9wZW4gJiYKICAgICAgZS50YXJnZXQuaWQgIT09ICdzZWFyY2gnICYmCiAgICAgIGUudGFyZ2V0LmlkICE9PSAnY3VzdG9tZXInICYmCiAgICAgICFlLnRhcmdldC5jbG9zZXN0KCdzZWxlY3QnKQogICAgKSB7CiAgICAgIHJlZm9jdXNTZWFyY2goKTsKICAgIH0KICB9KTsKCiAgWydjbGVhclNlYXJjaCcsICdzaG93U2VsZWN0ZWQnLCAnc2F2ZUJ0bicsICd1cGxvYWRCdG4nXS5mb3JFYWNoKGlkID0+IHsKICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgIGlmIChidG4pIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlZm9jdXNTZWFyY2gpOwogIH0pOwoKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7CiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtJykpIHsKICAgICAgc2V0VGltZW91dChyZWZvY3VzU2VhcmNoLCAxMjApOwogICAgfQogIH0pOwoKICBbJ2Nsb3NlT3ZlcmxheSddLmZvckVhY2goaWQgPT4gewogICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwogICAgaWYgKGJ0bikgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0VGltZW91dChyZWZvY3VzU2VhcmNoLCAyMDApKTsKICB9KTsKCiAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldikgPT4gewogICAgaWYgKGV2LmtleSA9PT0gJ0VudGVyJykgewogICAgICBzZXRUaW1lb3V0KHJlZm9jdXNTZWFyY2gsIDE1MCk7CiAgICB9CiAgfSk7Cn0KCihhc3luYyBmdW5jdGlvbiBpbml0KCkgewogIGJ1aWxkRHluYW1pY0NvbnRyb2xzKCk7CgogIC8vIExvYWQgaWNvbiBjYWNoZSBmaXJzdCAobm9uLWJsb2NraW5nKQogIGF3YWl0IGxvYWRJY29uQ2FjaGUoKTsKCiAgLy8gQnVpbGQgZ2VucmUgZmlsdGVyIGZyb20gY2FjaGUgZGF0YQogIGJ1aWxkR2VucmVGaWx0ZXIoKTsKCiAgYXdhaXQgbG9hZFhNTCgpOwogIHVwZGF0ZVRvdGFscygpOwogIHVwZGF0ZUZpbGVuYW1lUHJldmlldygpOwoKICAvLyBTZXQgZmlsZSBpbnB1dCBhY2NlcHQgYXR0cmlidXRlIGZyb20gY29uZmlnCiAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVJbicpOwogIGlmIChmaWxlSW5wdXQgJiYgQ09ORklHLmNsaWVudEZpbGVFeHQpIHsKICAgIGZpbGVJbnB1dC5hY2NlcHQgPSBDT05GSUcuY2xpZW50RmlsZUV4dDsKICB9Cn0pKCk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=`;
    // Properly decode UTF-8 from base64
    const decoded = decodeURIComponent(escape(atob(base64html)));
    const iframe = document.getElementById('viewer');
    const doc = iframe.contentWindow.document;
    doc.open();
    doc.write(decoded);
    doc.close();
  </script>
</body>
</html>